const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D-gTgfij.js","./VegaLite-D-9iTyfr.js","./index-Dk73fcOf.js","./index-BU04Mefg.css","./time-C4qtfk-4.js","./timer-CK-RIWfW.js","./linear-i-GkZpeI.js","./init-DLRA0X12.js","./range-CtcPcB_L.js","./zoom-COrs4lFh.js","./ordinal-DDUp3AbE.js","./colors-bszWmPJw.js","./arc-lt4NHaVr.js","./step-CNn2V7Th.js","./index-VVlC3uJc.js","./terminal-DOjhmz_5.js","./terminal-DMtZkNnb.css"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,n=(e,n,o)=>((e,n,o)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o)(e,"symbol"!=typeof n?n+"":n,o);import{b1 as o,G as r,fn as a,fo as s,fp as i,fq as l,fr as c,fs as d,R as u,ft as h,D as m,bz as f,K as p,at as g,W as v,a2 as x,Z as y,_ as b,fu as w,X as k,e6 as N,fv as E,cV as C,dm as S,eh as j,ei as _,ej as I,el as A,ef as M,eg as O,ek as T,fw as D,dq as P,du as R,al as F,F as L,fx as z,eC as B,fy as U,ar as V,dW as $,ce as G,ds as H,fz as W,fA as q,a0 as Y,fB as K,dw as J,fC as X,H as Z,ba as Q,fD as ee,fE as te,fF as ne,dj as oe,fG as re,Y as ae,br as se,dn as ie,fH as le,fI as ce,fJ as de,bB as ue,fK as he,fL as me,fM as fe,cU as pe,fN as ge,bc as ve,fO as xe,fP as ye,fQ as be,fR as we,a6 as ke,dk as Ne,fd as Ee,eP as Ce,fg as Se,b7 as je,eQ as _e,as as Ie,fS as Ae,fT as Me,fU as Oe,eR as Te,fV as De,fW as Pe,fX as Re,fY as Fe,fZ as Le,f_ as ze,d9 as Be,f$ as Ue,bp as Ve,$ as $e,ap as Ge,a1 as He,bF as We,g0 as qe,g1 as Ye,c$ as Ke,dr as Je,en as Xe,bA as Ze,g2 as Qe,g3 as et,df as tt,g4 as nt,g5 as ot,bv as rt,g6 as at,g7 as st,g8 as it,g9 as lt,ga as ct,gb as dt,T as ut,a3 as ht,gc as mt,da as ft,bC as pt,eV as gt,cW as vt,gd as xt,fh as yt,ge as bt,bk as wt,bD as kt,gf as Nt,gg as Et,gh as Ct,gi as St,dp as jt,bf as _t,bg as It,dM as At,d7 as Mt,gj as Ot,eB as Tt,k as Dt,j as Pt,gk as Rt,gl as Ft,gm as Lt,ex as zt,gn as Bt,go as Ut,c_ as Vt,gp as $t,gq as Gt,a7 as Ht,b2 as Wt,aj as qt,bb as Yt,gr as Kt,bu as Jt,gs as Xt,fk as Zt,fj as Qt,gt as en,eF as tn,gu as nn,gv as on,eM as rn,gw as an,ew as sn,gx as ln,gy as cn,gz as dn,gA as un,gB as hn,gC as mn,m as fn,gD as pn,gE as gn,gF as vn,t as xn,gG as yn,gH as bn,gI as wn,gJ as kn,gK as Nn,gL as En,gM as Cn,gN as Sn,gO as jn,gP as _n,gQ as In,gR as An,gS as Mn,gT as On,gU as Tn,gV as Dn,gW as Pn,gX as Rn,gY as Fn,gZ as Ln,g_ as zn,g$ as Bn,h0 as Un,h1 as Vn,h2 as $n,h3 as Gn,h4 as Hn,h5 as Wn,h6 as qn,h7 as Yn,h8 as Kn,h9 as Jn,ha as Xn,fl as Zn,hb as Qn,hc as eo,hd as to,he as no,hf as oo,hg as ro,hh as ao,hi as so,hj as io,hk as lo,hl as co,hm as uo,hn as ho,ho as mo,dy as fo,hp as po,hq as go,dB as vo,hr as xo,hs as yo,ht as bo,hu as wo,hv as ko,hw as No,hx as Eo,a8 as Co,dg as So,hy as jo,dF as _o,hz as Io,hA as Ao,hB as Mo,hC as Oo,hD as To,hE as Do,hF as Po,hG as Ro,hH as Fo,hI as Lo,a4 as zo,hJ as Bo,hK as Uo,dV as Vo,hL as $o,hM as Go,hN as Ho,hO as Wo,hP as qo,hQ as Yo,hR as Ko,hS as Jo,hT as Xo,hU as Zo,hV as Qo,hW as er,hX as tr,hY as nr,hZ as or,fi as rr,h_ as ar,h$ as sr,bo as ir,eK as lr,i0 as cr,i1 as dr,i2 as ur,i3 as hr,i4 as mr,i5 as fr,i6 as pr,i7 as gr,ez as vr,i8 as xr,bj as yr,i9 as br,bU as wr,b3 as kr,ah as Nr,ia as Er,ib as Cr,cS as Sr,b8 as jr,ic as _r,dP as Ir,bZ as Ar,id as Mr,bq as Or,ie as Tr,ig as Dr,ih as Pr,ii as Rr,ij as Fr,ik as Lr,il as zr,im as Br,io as Ur,bs as Vr,bd as $r,ip as Gr,iq as Hr,de as Wr,ir as qr,is as Yr,it as Kr,iu as Jr,cX as Xr,er as Zr,di as Qr,iv as ea,bn as ta,iw as na,e8 as oa,eY as ra,eZ as aa,e_ as sa,f2 as ia,f0 as la,f3 as ca,f5 as da,f7 as ua,fa as ha,f6 as ma,ix as fa,iy as pa,dN as ga,iz as va,e4 as xa,iA as ya,iB as ba,iC as wa,iD as ka,iE as Na,J as Ea,dt as Ca,iF as Sa,iG as ja,iH as _a,M as Ia,iI as Aa,iJ as Ma,O as Oa,iK as Ta,dl as Da,iL as Pa,iM as Ra,P as Fa,iN as La,ev as za,b9 as Ba,iO as Ua,iP as Va,iQ as $a,f9 as Ga,iR as Ha,dU as Wa,iS as qa,iT as Ya,dd as Ka,iU as Ja,iV as Xa,iW as Za,iX as Qa,eq as es,iY as ts,iZ as ns,dx as os,i_ as rs,i$ as as,j0 as ss,j1 as is,j2 as ls,j3 as cs,j4 as ds,j5 as us,j6 as hs,j7 as ms,j8 as fs,j9 as ps,ja as gs,jb as vs,jc as xs,d2 as ys,jd as bs,je as ws,jf as ks,jg as Ns,jh as Es,aq as Cs,bw as Ss,ji as js,jj as _s,jk as Is,jl as As,jm as Ms,jn as Os,jo as Ts,jp as Ds,jq as Ps,jr as Rs,js as Fs,jt as Ls,ju as zs,eE as Bs,jv as Us,jw as Vs,jx as $s,jy as Gs,jz as Hs,e3 as Ws,cN as qs,jA as Ys,b6 as Ks,jB as Js,jC as Xs,jD as Zs,au as Qs,jE as ei,jF as ti,jG as ni}from"./index-Dk73fcOf.js";import{a as oi,r as ri,B as ai,G as si,g as ii,b as li,M as ci,c as di,d as ui,e as hi,K as mi,s as fi,k as pi,f as gi,C as vi,S as xi,h as yi,i as bi,j as wi,l as ki,m as Ni,n as Ei,L as Ci,o as Si,p as ji,q as _i,t as Ii,v as Ai,u as Mi,w as Oi,x as Ti,y as Di,P as Pi,z as Ri,A as Fi,T as Li}from"./tree-DTAcPDec.js";import{b as zi,c as Bi,L as Ui,N as Vi,I as $i,V as Gi,d as Hi,W as Wi,F as qi,e as Yi,M as Ki,E as Ji,f as Xi,g as Zi,h as Qi,i as el,j as tl,k as nl,l as ol,m as rl,n as al,o as sl,u as il,C as ll,R as cl,p as dl,a as ul,A as hl,q as ml,r as fl,O as pl,T as gl}from"./useMarimoWebSocket-B1w7f0kK.js";import{s as vl,i as xl,T as yl,c as bl}from"./transform-CcPYm5Q8.js";import{g as wl}from"./timer-CK-RIWfW.js";import{i as kl}from"./zoom-COrs4lFh.js";import{s as Nl}from"./sortBy-DF9OxP-H.js";import El from"./any-language-editor-6K2U_5yG.js";import"./main-cdvIQCIX.js";import"./index-VVlC3uJc.js";import"./_baseEach-HGPDcdTU.js";import"./_baseMap-D7tZ_O0T.js";import"./index-BXNVvWjJ.js";import"./index-BTvvcfMm.js";import"./index-DWnSY9it.js";import"./index-BsSmAHut.js";import"./index-O1o_oTW7.js";import"./index-DFkjRzJQ.js";import"./index-B8yf7rxI.js";import"./index-ChMwBE-F.js";import"./index-DyVzaLSE.js";import"./index-DBCQVM7N.js";import"./index-DJQlw49h.js";import"./index-CJSu8mqy.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asterisk-B46aRdXb.js";import"./brainfuck-CtZaYBKt.js";import"./clike-BPCXT8V3.js";import"./cmake-DXn5xaP-.js";import"./cobol-DJhTY0fG.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./crystal-CRzZ78HM.js";import"./cypher-gJDei3ni.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dockerfile-DbSFhNEh.js";import"./simple-mode-VRHOsiuL.js";import"./dtd-DI9Herc-.js";import"./dylan-CHJ5qNM_.js";import"./ebnf-B-Df8AvO.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-D7xaZ7Da.js";import"./erlang-BuqgqA5h.js";import"./factor-D9hSz2Dc.js";import"./fcl-CVaBTCzQ.js";import"./forth-Dri_5nFc.js";import"./fortran-DL7KluxX.js";import"./gas-5kEe4nk0.js";import"./gherkin-B6X1vGSW.js";import"./groovy-BfRUB6GO.js";import"./haskell-CmdsSjFB.js";import"./haxe-75PMBtaN.js";import"./http-BKJkqRj4.js";import"./idl-pcmmZuaN.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-B19OIWEP.js";import"./lua-8DXOpKDz.js";import"./mathematica-IIbmv7SK.js";import"./mbox-DoeuZPxA.js";import"./mirc-DkvFAiy5.js";import"./modelica-DSrSSXCg.js";import"./mscgen-B2igx18G.js";import"./mumps-zvxmGV4l.js";import"./nginx-B4hAVlXN.js";import"./nsis-CKXvuz-E.js";import"./ntriples-FFvkTduk.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CZ0JYm71.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./solr-78MBEUkU.js";import"./sparql-BRLJFz69.js";import"./spreadsheet-CGlWr0eM.js";import"./stex-Ba7Sj9VR.js";import"./stylus-3mOX9C7I.js";import"./swift-B_XXVlXX.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./tiddlywiki-BgR6AEZu.js";import"./tiki-CI-ztowC.js";import"./toml-BQXy8elZ.js";import"./troff-Ce85hlLp.js";import"./ttcn-C4reStyN.js";import"./turtle-BkSuIpt-.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./verilog-B4LBqg_1.js";import"./vhdl-CWWH2SUo.js";import"./webidl-CGwyPRYs.js";import"./xquery-BZBLoTvf.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cl=o("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Sl=o("ArrowRightFromLine",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),jl=o("ArrowRightToLine",[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]]),_l=o("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Il=o("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Al=o("BetweenHorizontalStart",[["rect",{width:"13",height:"7",x:"8",y:"3",rx:"1",key:"pkso9a"}],["path",{d:"m2 9 3 3-3 3",key:"1agib5"}],["rect",{width:"13",height:"7",x:"8",y:"14",rx:"1",key:"1q5fc1"}]]),Ml=o("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),Ol=o("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Tl=o("ChevronsDown",[["path",{d:"m7 6 5 5 5-5",key:"1lc07p"}],["path",{d:"m7 13 5 5 5-5",key:"1d48rs"}]]),Dl=o("ChevronsUp",[["path",{d:"m17 11-5-5-5 5",key:"e8nh98"}],["path",{d:"m17 18-5-5-5 5",key:"2avn1x"}]]),Pl=o("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Rl=o("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Fl=o("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]),Ll=o("ClipboardPaste",[["path",{d:"M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z",key:"1pp7kr"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10",key:"2ik1ml"}],["path",{d:"m17 10 4 4-4 4",key:"vp2hj1"}]]),zl=o("CloudDownload",[["path",{d:"M12 13v8l-4-4",key:"1f5nwf"}],["path",{d:"m12 21 4-4",key:"1lfcce"}],["path",{d:"M4.393 15.269A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.436 8.284",key:"ui1hmy"}]]),Bl=o("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ul=o("Command",[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]]),Vl=o("CopyMinus",[["line",{x1:"12",x2:"18",y1:"15",y2:"15",key:"1nscbv"}],["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),$l=o("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),Gl=o("Eraser",[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]]),Hl=o("FilePen",[["path",{d:"M12.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v9.5",key:"1couwa"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M13.378 15.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1y4qbx"}]]),Wl=o("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),ql=o("Files",[["path",{d:"M20 7h-3a2 2 0 0 1-2-2V2",key:"x099mo"}],["path",{d:"M9 18a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h7l4 4v10a2 2 0 0 1-2 2Z",key:"18t6ie"}],["path",{d:"M3 7.6v12.8A1.6 1.6 0 0 0 4.6 22h9.8",key:"1nja0z"}]]),Yl=o("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Kl=o("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]),Jl=o("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Xl=o("HardDriveDownload",[["path",{d:"M12 2v8",key:"1q4o3n"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",key:"w68u3i"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 18h.01",key:"h775k"}]]),Zl=o("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),Ql=o("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),ec=o("Keyboard",[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]]),tc=o("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),nc=o("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),oc=o("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),rc=o("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),ac=o("MemoryStick",[["path",{d:"M6 19v-3",key:"1nvgqn"}],["path",{d:"M10 19v-3",key:"iu8nkm"}],["path",{d:"M14 19v-3",key:"kcehxu"}],["path",{d:"M18 19v-3",key:"1vh91z"}],["path",{d:"M8 11V9",key:"63erz4"}],["path",{d:"M16 11V9",key:"fru6f3"}],["path",{d:"M12 11V9",key:"ha00sb"}],["path",{d:"M2 15h20",key:"16ne18"}],["path",{d:"M2 7a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v1.1a2 2 0 0 0 0 3.837V17a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-5.1a2 2 0 0 0 0-3.837Z",key:"lhddv3"}]]),sc=o("MessageCircleQuestion",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ic=o("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),lc=o("NotebookPen",[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]]),cc=o("OctagonAlert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),dc=o("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),uc=o("PackageX",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["path",{d:"m17 13 5 5m-5 0 5-5",key:"im3w4b"}]]),hc=o("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]),mc=o("PartyPopper",[["path",{d:"M5.8 11.3 2 22l10.7-3.79",key:"gwxi1d"}],["path",{d:"M4 3h.01",key:"1vcuye"}],["path",{d:"M22 8h.01",key:"1mrtc2"}],["path",{d:"M15 2h.01",key:"1cjtqr"}],["path",{d:"M22 20h.01",key:"1mrys2"}],["path",{d:"m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10",key:"hbicv8"}],["path",{d:"m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17",key:"1i94pl"}],["path",{d:"m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7",key:"1cofks"}],["path",{d:"M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z",key:"4kbmks"}]]),fc=o("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),pc=o("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),gc=o("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]),vc=o("Regex",[["path",{d:"M17 3v10",key:"15fgeh"}],["path",{d:"m12.67 5.5 8.66 5",key:"1gpheq"}],["path",{d:"m12.67 10.5 8.66-5",key:"1dkfa6"}],["path",{d:"M9 17a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2v-2z",key:"swwfx4"}]]),xc=o("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),yc=o("Rows3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M21 9H3",key:"1338ky"}],["path",{d:"M21 15H3",key:"9uk58r"}]]),bc=o("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),wc=o("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]),kc=o("ScrollText",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),Nc=o("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Ec=o("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Cc=o("SquareCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Sc=o("SquareDashedBottomCode",[["path",{d:"M10 9.5 8 12l2 2.5",key:"3mjy60"}],["path",{d:"M14 21h1",key:"v9vybs"}],["path",{d:"m14 9.5 2 2.5-2 2.5",key:"1bir2l"}],["path",{d:"M5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2",key:"as5y1o"}],["path",{d:"M9 21h1",key:"15o7lz"}]]),jc=o("SquareEqual",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 10h10",key:"1101jm"}],["path",{d:"M7 14h10",key:"1mhdw3"}]]),_c=o("SquareM",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 16V8l4 4 4-4v8",key:"141u4e"}]]),Ic=o("SquarePlay",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"m9 8 6 4-6 4Z",key:"f1r3lt"}]]),Ac=o("SquarePlus",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),Mc=o("SquarePower",[["path",{d:"M12 7v4",key:"xawao1"}],["path",{d:"M7.998 9.003a5 5 0 1 0 8-.005",key:"1pek45"}],["rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",key:"h1oib"}]]),Oc=o("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),Tc=o("TextCursorInput",[["path",{d:"M5 4h1a3 3 0 0 1 3 3 3 3 0 0 1 3-3h1",key:"18xjzo"}],["path",{d:"M13 20h-1a3 3 0 0 1-3-3 3 3 0 0 1-3 3H5",key:"fj48gi"}],["path",{d:"M5 16H4a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h1",key:"1n9rhb"}],["path",{d:"M13 8h7a2 2 0 0 1 2 2v4a2 2 0 0 1-2 2h-7",key:"13ksps"}],["path",{d:"M9 7v10",key:"1vc8ob"}]]),Dc=o("TextSearch",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M10 12H3",key:"1ulcyk"}],["path",{d:"M10 18H3",key:"13769t"}],["circle",{cx:"17",cy:"15",r:"3",key:"1upz2a"}],["path",{d:"m21 19-1.9-1.9",key:"dwi7p8"}]]),Pc=o("Undo2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]),Rc=o("View",[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]),Fc=o("WholeWord",[["circle",{cx:"7",cy:"12",r:"3",key:"12clwm"}],["path",{d:"M10 9v6",key:"17i7lo"}],["circle",{cx:"17",cy:"12",r:"3",key:"gl7c2s"}],["path",{d:"M14 7v8",key:"dl84cr"}],["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]),Lc=o("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),zc=o("ZapOff",[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Bc=o("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uc=r.createContext({});function Vc(e,t){[e,t]=l(e,t,Uc);let{toolbarProps:n}=function(e,t){const{"aria-label":n,"aria-labelledby":o,orientation:l="horizontal"}=e;let[c,d]=r.useState(!1);a((()=>{var e;d(!(!t.current||!(null===(e=t.current.parentElement)||void 0===e?void 0:e.closest('[role="toolbar"]'))))}));const{direction:u}=s(),h="rtl"===u&&"horizontal"===l;let m=i(t);const f=r.useRef(null);return{toolbarProps:{role:c?"group":"toolbar","aria-orientation":l,"aria-label":n,"aria-labelledby":null==n?o:void 0,onKeyDownCapture:c?void 0:e=>{if(e.currentTarget.contains(e.target)){if("horizontal"===l&&"ArrowRight"===e.key||"vertical"===l&&"ArrowDown"===e.key)h?m.focusPrevious():m.focusNext();else{if(!("horizontal"===l&&"ArrowLeft"===e.key||"vertical"===l&&"ArrowUp"===e.key))return"Tab"===e.key?(e.stopPropagation(),f.current=document.activeElement,void(e.shiftKey?m.focusFirst():m.focusLast())):void 0;h?m.focusNext():m.focusPrevious()}e.stopPropagation(),e.preventDefault()}},onFocusCapture:c?void 0:e=>{var n,o;f.current&&!e.currentTarget.contains(e.relatedTarget)&&(null===(n=t.current)||void 0===n?void 0:n.contains(e.target))&&(null===(o=f.current)||void 0===o||o.focus(),f.current=null)},onBlurCapture:c?void 0:e=>{e.currentTarget.contains(e.relatedTarget)||f.current||(f.current=e.target)}}}}(e,t),o=c({...e,values:{orientation:e.orientation||"horizontal"},defaultClassName:"react-aria-Toolbar"}),m=d(e);return delete m.id,u.createElement("div",{...h(n,m),...o,ref:t,slot:e.slot||void 0,"data-orientation":e.orientation||"horizontal"},o.children)}const $c=r.forwardRef(Vc),Gc=e=>{const t=m(35);let n;t[0]!==e?(n=()=>{x(new Blob([e.getCellsAsJSON()],{type:"text/plain"}),`${e.proposedName}.json`)},t[0]=e,t[1]=n):n=t[1];const o=n;let r,a,s,i,l,c,d,u,h,f,g,N,E,C,S,j,_;return t[2]!==o||t[3]!==e?(r=t=>{t.preventDefault(),o(),e.closeModal()},t[2]=o,t[3]=e,t[4]=r):r=t[4],t[5]!==e?(a=t=>{"Escape"===t.key&&e.closeModal()},t[5]=e,t[6]=a):a=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx(y,{className:"text-accent mb-6",children:"Download unsaved changes?"}),t[7]=s):s=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(i={wordBreak:"break-word"},l=p.jsx("p",{children:"This app has unsaved changes. To recover:"}),c={paddingBottom:"10px"},t[8]=i,t[9]=l,t[10]=c):(i=t[8],l=t[9],c=t[10]),t[11]!==e.proposedName?(d=p.jsxs("li",{style:c,children:['Click the "Download" button. This will download a file called ',p.jsxs("code",{children:[e.proposedName,".json"]}),". This file contains your code."]}),t[11]=e.proposedName,t[12]=d):d=t[12],t[13]===Symbol.for("react.memo_cache_sentinel")?(u={paddingBottom:"10px"},t[13]=u):u=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(h={display:"block",padding:"10px"},t[14]=h):h=t[14],t[15]!==e.proposedName?(f=p.jsxs("code",{style:h,children:["marimo recover ",e.proposedName,".json ",">"," ",e.proposedName,".py"]}),t[15]=e.proposedName,t[16]=f):f=t[16],t[17]!==e.proposedName?(g=p.jsxs("code",{children:[e.proposedName,".py"]}),t[17]=e.proposedName,t[18]=g):g=t[18],t[19]!==f||t[20]!==g?(N=p.jsxs("li",{style:u,children:["In your terminal, type",f,"to overwrite ",g," with the recovered changes."]}),t[19]=f,t[20]=g,t[21]=N):N=t[21],t[22]!==d||t[23]!==N?(E=p.jsxs(b,{className:"markdown break-words",style:i,children:[l,p.jsxs("ol",{children:[d,N]})]}),t[22]=d,t[23]=N,t[24]=E):E=t[24],t[25]!==e.closeModal?(C=p.jsx(v,{"aria-label":"Cancel",variant:"secondary","data-testid":"cancel-recovery-button",onClick:e.closeModal,children:"Cancel"}),t[25]=e.closeModal,t[26]=C):C=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(S=p.jsx(v,{"data-testid":"download-recovery-button","aria-label":"Download",variant:"default",type:"submit",children:"Download"}),t[27]=S):S=t[27],t[28]!==C?(j=p.jsxs(w,{children:[C,S]}),t[28]=C,t[29]=j):j=t[29],t[30]!==r||t[31]!==a||t[32]!==E||t[33]!==j?(_=p.jsx(k,{className:"w-fit",children:p.jsxs("form",{onSubmit:r,onKeyDown:a,children:[s,E,j]})}),t[30]=r,t[31]=a,t[32]=E,t[33]=j,t[34]=_):_=t[34],_},Hc=e=>{const t=m(13),{filename:n,needsSave:o,getCellsAsJSON:r}=e,{openModal:a,closeModal:s}=f();let i;t[0]!==n?(i=null===n?"app":n.slice(0,-3),t[0]=n,t[1]=i):i=t[1];const l=i;let c;t[2]!==o||t[3]!==a||t[4]!==r||t[5]!==l||t[6]!==s?(c=()=>{o&&a(p.jsx(Gc,{getCellsAsJSON:r,proposedName:l,closeModal:s}))},t[2]=o,t[3]=a,t[4]=r,t[5]=l,t[6]=s,t[7]=c):c=t[7];const d=c;let u;oi("global.save",d),t[8]===Symbol.for("react.memo_cache_sentinel")?(u=ri("global.save"),t[8]=u):u=t[8];const h=o?"yellow":"gray";let v,x;return t[9]===Symbol.for("react.memo_cache_sentinel")?(v=p.jsx(bc,{strokeWidth:1.5,size:18}),t[9]=v):v=t[9],t[10]!==d||t[11]!==h?(x=p.jsx(g,{content:u,children:p.jsx(ai,{onClick:d,id:"save-button","aria-label":"Save",className:"rectangle",color:h,children:v})}),t[10]=d,t[11]=h,t[12]=x):x=t[12],x},Wc=()=>{const e=m(7),{selectedLayout:t}=zi(),{setLayoutView:n}=Bi();if(S()&&!ii("wasm_layouts"))return null;let o,r,a,s;return e[0]!==n?(o=e=>n(e),e[0]=n,e[1]=o):o=e[1],e[2]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx(M,{className:"min-w-[110px] border-border bg-background","data-testid":"layout-select",children:p.jsx(O,{placeholder:"Select a view"})}),e[2]=r):r=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(a=p.jsx(j,{children:p.jsxs(_,{children:[p.jsx(I,{children:"View as"}),Ui.map(Jc)]})}),e[3]=a):a=e[3],e[4]!==t||e[5]!==o?(s=p.jsxs(T,{"data-testid":"layout-select",value:t,onValueChange:o,children:[r,a]}),e[4]=t,e[5]=o,e[6]=s):s=e[6],s};function qc(e){const t=Yc(e);return p.jsx(t,{className:"h-4 w-4"})}function Yc(e){switch(e){case"vertical":return oc;case"grid":return si;case"slides":return gc;default:return N(e),E}}function Kc(e){return C(e)}function Jc(e){return p.jsx(A,{value:e,children:p.jsxs("div",{className:"flex items-center gap-1.5 leading-5",children:[qc(e),p.jsx("span",{children:Kc(e)})]})},e)}function Xc(){const e=m(7);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0];const[n,o]=function(e,t){const n=m(10);let o;n[0]!==e||n[1]!==t?(o=new D(e,t),n[0]=e,n[1]=t,n[2]=o):o=n[2];const a=o;let s;n[3]!==a?(s=()=>a.get(),n[3]=a,n[4]=s):s=n[4];const[i,l]=r.useState(s);let c;n[5]!==a?(c=e=>{l(e),a.set(e)},n[5]=a,n[6]=c):c=n[6];const d=c;let u;return n[7]!==i||n[8]!==d?(u=[i,d],n[7]=i,n[8]=d,n[9]=u):u=n[9],u}("marimo:commands",t);let a,s;return e[1]!==n||e[2]!==o?(a=e=>{const t=(r=[e,...n],[...new Set(r)]);var r;o(t.slice(0,3))},e[1]=n,e[2]=o,e[3]=a):a=e[3],e[4]!==n||e[5]!==a?(s={recentCommands:n,addRecentCommand:a},e[4]=n,e[5]=a,e[6]=s):s=e[6],s}function Zc(e){return void 0!==e.dropdown}function Qc(e,t=""){return e.flatMap((e=>e.label?Zc(e)?Qc(e.dropdown,`${t+e.label} > `):{...e,label:t+e.label}:[]))}const ed=e=>{const t=m(8),{children:n,layerTop:o}=e,r=void 0!==o&&o;let a;t[0]!==n?(a=u.Children.toArray(n),t[0]=n,t[1]=a):a=t[1];const[s,i]=a,l=`second-icon absolute ${r?"top-[-1px] left-[-1px]":"bottom-[-1px] right-[-1px]"} rounded-full`;let c,d;return t[2]!==l||t[3]!==i?(c=p.jsx("div",{className:l,children:i}),t[2]=l,t[3]=i,t[4]=c):c=t[4],t[5]!==s||t[6]!==c?(d=p.jsxs("div",{className:"multi-icon relative w-fit",children:[s,c]}),t[5]=s,t[6]=c,t[7]=d):d=t[7],d};function td(){const e=m(3),t=R(),{prepareForRun:n}=L();let o;e[0]!==t||e[1]!==n?(o=async e=>{if(0===e.length)return;const{cellHandles:o,cellData:r}=t,a=[];for(const t of e){const e=o[t];e.current?(a.push(B(e.current.editorView)),e.current.registerRun()):(n({cellId:t}),a.push(r[t].code))}await U({cellIds:e,codes:a}).catch((e=>{V.error(e)}))},e[0]=t,e[1]=n,e[2]=o):o=e[2];return F(o)}const nd=$(null),od=$(!1),rd=e=>{const t=m(7);let n,o;t[0]!==e.onClick?(n=t=>{var n;(t.ctrlKey||t.metaKey)&&"z"===t.key&&(t.preventDefault(),t.stopPropagation(),null==(n=e.onClick)||n.call(e,t))},t[0]=e.onClick,t[1]=n):n=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(o={capture:!0},t[2]=o):o=t[2],G(window,"keydown",n,o);const r=e.children??"Undo";let a,s;return t[3]===Symbol.for("react.memo_cache_sentinel")?(a=p.jsx(li,{className:"ml-2",shortcut:"cmd-z"}),t[3]=a):a=t[3],t[4]!==e||t[5]!==r?(s=p.jsxs(v,{"data-testid":"undo-button",size:"sm",variant:"outline",...e,children:[r," ",a]}),t[4]=e,t[5]=r,t[6]=s):s=t[6],s};function ad(){const e=m(3),{deleteCell:t,undoDeleteCell:n}=L();let o;return e[0]!==t||e[1]!==n?(o=e=>{if(H.get(W))return;const{cellId:o}=e;t({cellId:o}),q({cellId:o}).catch((()=>{n()}));const{dismiss:r}=Y({title:"Cell deleted",description:"You can bring it back by clicking undo or through the command palette.",action:p.jsx(rd,{"data-testid":"undo-delete-button",onClick:()=>{n(),a()}})}),a=r},e[0]=t,e[1]=n,e[2]=o):o=e[2],F(o)}function sd(e,t,n,o=H){if(t in o.get(K))return!1;const{cellData:r,cellIds:a}=o.get(J),s=new RegExp(`import[ \t]+${e}[ \t]+as[ \t]+${t}`,"g");for(const i of a.inOrderIds)if(s.test(r[i].code))return!1;return n(`import ${e} as ${t}`),!0}function id(e,t,n){return sd("marimo","mo",(o=>{const r=X.create();t({cellId:n??"__end__",before:!1,code:o,lastCodeRun:e?o:void 0,newCellId:r,autoFocus:!1}),e&&U({cellIds:[r],codes:[o]})}))}function ld(e){const t=m(29),{cell:n}=e,{createNewCell:o,updateCellConfig:r,updateCellCode:a,updateCellName:s,moveCell:i,sendToTop:l,sendToBottom:c,addColumnBreakpoint:d}=L(),u=function(e){const t=m(3),n=td();let o;return t[0]!==e||t[1]!==n?(o=()=>{void 0!==e&&n([e])},t[0]=e,t[1]=n,t[2]=o):o=t[2],F(o)}(null==n?void 0:n.cellId),h=!Z(W),g=ad(),{openModal:v}=f(),x=Q(nd),b=Z(ee),w=Z(te),N=ne(),E=Z(oe),C=Z(re);if(!n||E){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[],t[0]=e):e=t[0],e}const{cellId:S,config:j,getEditorView:_,name:I,hasOutput:A,status:M}=n;let O;t[1]!==N.inOrderIds||t[2]!==S?(O=N.inOrderIds.indexOf(S),t[1]=N.inOrderIds,t[2]=S,t[3]=O):O=t[3];const T=O;let D;if(t[4]!==_||t[5]!==j.disabled||t[6]!==j.hide_code||t[7]!==S||t[8]!==r||t[9]!==v||t[10]!==T||t[11]!==I||t[12]!==s||t[13]!==M||t[14]!==u||t[15]!==b||t[16]!==x||t[17]!==A||t[18]!==a||t[19]!==w||t[20]!==o||t[21]!==i||t[22]!==l||t[23]!==c||t[24]!==C||t[25]!==d||t[26]!==h||t[27]!==g){const e=_(),n=async()=>{const e={disabled:!j.disabled};await be({configs:{[S]:e}}),r({cellId:S,config:e})},m=async()=>{const t={hide_code:!j.hide_code};await be({configs:{[S]:t}}),r({cellId:S,config:t}),e&&(t.hide_code?e.contentDOM.blur():e.focus())};D=[[{icon:p.jsx(Tc,{size:13,strokeWidth:1.5}),label:"Name",disableClick:!0,handle:hd,handleHeadless:()=>{v(p.jsxs(k,{children:[p.jsx(ae,{children:p.jsx(y,{children:"Rename cell"})}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx(se,{htmlFor:"cell-name",children:"Cell name"}),p.jsx(Vi,{placeholder:`cell_${T}`,value:I,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),v(null))},onChange:e=>s({cellId:S,name:e})})]})]}))},rightElement:p.jsx(Vi,{placeholder:`cell_${T}`,value:I,onChange:e=>s({cellId:S,name:e})})},{icon:p.jsx(pc,{size:13,strokeWidth:1.5}),label:"Run cell",hotkey:"cell.run",hidden:"running"===M||"queued"===M||"disabled-transitively"===M||j.disabled,handle:()=>u()},{icon:p.jsx(Ec,{size:13,strokeWidth:1.5}),label:"AI completion",hidden:!b,handle:()=>{x((e=>(null==e?void 0:e.cellId)===S?null:{cellId:S}))},hotkey:"cell.aiCompletion"},{icon:p.jsx($i,{size:13,strokeWidth:1.5}),label:"Export output as PNG",hidden:!A,handle:()=>function(e){const t=document.getElementById(`output-${e}`);t&&(t.classList.add("printing-output"),P(t,"result.png").finally((()=>{t.classList.remove("printing-output")})))}(S)},{icon:p.jsx(ie,{size:13,strokeWidth:1.5}),label:"Format cell",hotkey:"cell.format",handle:()=>{e&&le({[S]:e},a)}},{icon:p.jsx(ci,{}),label:"View as Markdown",hotkey:"cell.viewAsMarkdown",hidden:"python"!==ce(e),handle:()=>{e&&(id(w,o),de(e,"markdown",{force:!0}))}},{icon:p.jsx(ue,{size:13,strokeWidth:1.5}),label:"View as SQL",hidden:!he(e,"sql"),handle:()=>{e&&de(e,"sql")}},{icon:p.jsx(di,{}),label:"View as Python",hotkey:"markdown"===ce(e)?"cell.viewAsMarkdown":void 0,hidden:!he(e,"python"),handle:()=>{e&&(id(w,o),de(e,"python"))}},{icon:j.hide_code?p.jsx(me,{size:13,strokeWidth:1.5}):p.jsx(fe,{size:13,strokeWidth:1.5}),label:j.hide_code?"Show code":"Hide code",handle:m,hotkey:"cell.hideCode"},{icon:j.disabled?p.jsx(zc,{size:13,strokeWidth:1.5}):p.jsx(Bc,{size:13,strokeWidth:1.5}),label:"Reactive execution",rightElement:p.jsx(pe,{"data-testid":"cell-disable-switch",checked:!j.disabled,size:"sm",onCheckedChange:n}),handle:n}],[{icon:p.jsxs(ed,{children:[p.jsx(Rl,{size:13,strokeWidth:1.5}),p.jsx(ge,{size:8,strokeWidth:2})]}),label:"Create cell above",hotkey:"cell.createAbove",handle:()=>o({cellId:S,before:!0})},{icon:p.jsxs(ed,{children:[p.jsx(Rl,{size:13,strokeWidth:1.5}),p.jsx(ve,{size:8,strokeWidth:2})]}),label:"Create cell below",hotkey:"cell.createBelow",handle:()=>o({cellId:S,before:!1})},{icon:p.jsx(ge,{size:13,strokeWidth:1.5}),label:"Move cell up",hotkey:"cell.moveUp",handle:()=>i({cellId:S,before:!0})},{icon:p.jsx(ve,{size:13,strokeWidth:1.5}),label:"Move cell down",hotkey:"cell.moveDown",handle:()=>i({cellId:S,before:!1})},{icon:p.jsx(Dl,{size:13,strokeWidth:1.5}),label:"Send to top",hotkey:"cell.sendToTop",handle:()=>l({cellId:S})},{icon:p.jsx(Tl,{size:13,strokeWidth:1.5}),label:"Send to bottom",hotkey:"cell.sendToBottom",handle:()=>c({cellId:S})},{icon:p.jsx(xe,{size:13,strokeWidth:1.5}),label:"Break into new column",hotkey:"cell.addColumnBreakpoint",hidden:"columns"!==C,handle:()=>d({cellId:S})}],[{label:"Delete",hidden:!h,variant:"danger",icon:p.jsx(ye,{size:13,strokeWidth:1.5}),handle:()=>{g({cellId:S})}}]].map(dd).filter(cd),t[4]=_,t[5]=j.disabled,t[6]=j.hide_code,t[7]=S,t[8]=r,t[9]=v,t[10]=T,t[11]=I,t[12]=s,t[13]=M,t[14]=u,t[15]=b,t[16]=x,t[17]=A,t[18]=a,t[19]=w,t[20]=o,t[21]=i,t[22]=l,t[23]=c,t[24]=C,t[25]=d,t[26]=h,t[27]=g,t[28]=D}else D=t[28];return D}function cd(e){return e.length>0}function dd(e){return e.filter(ud)}function ud(e){return!e.hidden}function hd(e){null==e||e.stopPropagation(),null==e||e.preventDefault()}const md=$(null);function fd(){return Z(md)}const pd=$((e=>{const t=e(md);return t?t===we?null:gd(t,e(J)):null}));function gd(e,t){var n;const{cellData:o,cellHandles:r,cellRuntime:a}=t,s=o[e],i=a[e],l=null==(n=r[e])?void 0:n.current;if(!s||!l)return null;return{cellId:e,name:s.name,config:s.config,status:i?i.status:"idle",getEditorView:()=>l.editorView,hasOutput:null!=(null==i?void 0:i.output)}}function vd(e){return!e.hidden}const xd=$(!1),yd=()=>{const e=m(32),[t,n]=je(xd),o=hi(),r=Z(pd),a=Z(_e);let s;e[0]!==r?(s={cell:r},e[0]=r,e[1]=s):s=e[1];let i=ld(s).flat();i=Qc(i);const l=function(){const e=m(46),{theme:t}=ke(),[n,o]=Ne(),[r,a]=Ee();let s;e[0]!==o?(s=async e=>{await Ce({config:e}).then((()=>{o(e)}))},e[0]=o,e[1]=s):s=e[1];const i=s;let l;e[2]!==a?(l=async e=>{await Se({config:e}).then((()=>{a(e)}))},e[2]=a,e[3]=l):l=e[3];const c=l;let d,u;if(e[4]!==r||e[5]!==c){let t;e[7]!==r.width?(t=e=>e!==r.width,e[7]=r.width,e[8]=t):t=e[8],d=ui().filter(t).map((e=>({label:`App config > Set width=${e}`,handle:()=>{c({...r,width:e})}}))),e[4]=r,e[5]=c,e[6]=d}else d=e[6];e[9]!==i||e[10]!==n||e[11]!==t?(u={label:"Config > Toggle dark mode",handle:()=>{i({...n,display:{...n.display,theme:"dark"===t?"light":"dark"}})}},e[9]=i,e[10]=n,e[11]=t,e[12]=u):u=e[12];const h="vim"===n.keymap.preset;let f,p;e[13]!==i||e[14]!==n?(f=()=>{i({...n,keymap:{...n.keymap,preset:"vim"}})},e[13]=i,e[14]=n,e[15]=f):f=e[15],e[16]!==h||e[17]!==f?(p={label:"Config > Switch keymap to  VIM",hidden:h,handle:f},e[16]=h,e[17]=f,e[18]=p):p=e[18];const g="default"===n.keymap.preset;let v,x,y;e[19]!==i||e[20]!==n?(v=()=>{i({...n,keymap:{...n.keymap,preset:"default"}})},e[19]=i,e[20]=n,e[21]=v):v=e[21],e[22]!==g||e[23]!==v?(x={label:"Config > Switch keymap to default (current: VIM)",hidden:g,handle:v},e[22]=g,e[23]=v,e[24]=x):x=e[24],e[25]!==i||e[26]!==n?(y=()=>{i({...n,completion:{...n.completion,copilot:!1}})},e[25]=i,e[26]=n,e[27]=y):y=e[27];const b="github"!==n.completion.copilot;let w,k;e[28]!==y||e[29]!==b?(w={label:"Config > Disable GitHub Copilot",handle:y,hidden:b},e[28]=y,e[29]=b,e[30]=w):w=e[30],e[31]!==i||e[32]!==n?(k=()=>{i({...n,completion:{...n.completion,copilot:"github"}})},e[31]=i,e[32]=n,e[33]=k):k=e[33];const N="github"===n.completion.copilot;let E,C;e[34]!==k||e[35]!==N?(E={label:"Config > Enable GitHub Copilot",handle:k,hidden:N},e[34]=k,e[35]=N,e[36]=E):E=e[36],e[37]!==d||e[38]!==u||e[39]!==p||e[40]!==x||e[41]!==w||e[42]!==E?(C=[...d,u,p,x,w,E],e[37]=d,e[38]=u,e[39]=p,e[40]=x,e[41]=w,e[42]=E,e[43]=C):C=e[43];const S=C;let j;return e[44]!==S?(j=S.filter(vd),e[44]=S,e[45]=j):j=e[45],j}();let c=Rd();c=[...Qc(c),...Qc(l)];const d=c.filter(bd),u=Ie.keyBy(d,wd),{recentCommands:h,addRecentCommand:f}=Xc(),g=new Set(h);let v,x;e[2]!==a||e[3]!==n?(v=e=>{Te(a.getHotkey("global.commandPalette").key)(e)&&(e.preventDefault(),n((e=>!e)))},e[2]=a,e[3]=n,e[4]=v):v=e[4],G(document,"keydown",v),e[5]!==o||e[6]!==a||e[7]!==f||e[8]!==n?(x=(e,t)=>{const r=o[e];if(!r)return null;const s=a.getHotkey(e);return p.jsxs(De,{disabled:t.disabled,onSelect:()=>{f(e),n(!1),requestAnimationFrame((()=>{r()}))},value:s.name,children:[p.jsxs("span",{children:[s.name,t.tooltip&&p.jsx("span",{className:"ml-2",children:t.tooltip})]}),p.jsx(Pe,{children:p.jsx(mi,{shortcut:s.key})})]},e)},e[5]=o,e[6]=a,e[7]=f,e[8]=n,e[9]=x):x=e[9];const y=x;let b;e[10]!==f||e[11]!==n||e[12]!==a?(b=(e,t,o,r)=>{const s=void 0===o?{}:o;return p.jsxs(De,{disabled:s.disabled,onSelect:()=>{f(e),n(!1),requestAnimationFrame((()=>{t()}))},value:e,children:[p.jsxs("span",{children:[e,s.tooltip&&p.jsxs("span",{className:"ml-2",children:["(",s.tooltip,")"]})]}),r&&p.jsx(Pe,{children:p.jsx(mi,{shortcut:a.getHotkey(r).key})})]},e)},e[10]=f,e[11]=n,e[12]=a,e[13]=b):b=e[13];const w=b,k=Re;let N;e[14]===Symbol.for("react.memo_cache_sentinel")?(N=p.jsx(Fe,{placeholder:"Type to search..."}),e[14]=N):N=e[14];const E=Le;let C;e[15]===Symbol.for("react.memo_cache_sentinel")?(C=p.jsx(ze,{children:"No results found."}),e[15]=C):C=e[15];const S=h.length>0&&p.jsxs(p.Fragment,{children:[p.jsx(Ae,{heading:"Recently Used",children:h.map((e=>{const t=u[e];return Me(e)?y(e,{disabled:null==t?void 0:t.disabled,tooltip:null==t?void 0:t.tooltip}):t&&!Zc(t)?w(t.label,t.handleHeadless||t.handle,{disabled:t.disabled,tooltip:t.tooltip}):null}))}),p.jsx(Oe,{})]}),j=Ae,_=a.iterate().map((e=>{if(g.has(e))return null;const t=u[e];return y(e,{disabled:null==t?void 0:t.disabled,tooltip:null==t?void 0:t.tooltip})})),I=d.map((e=>g.has(e.label)?null:w(e.label,e.handleHeadless||e.handle,{disabled:e.disabled,tooltip:e.tooltip}))),A=i.map((e=>g.has(e.label)?null:w(`Cell > ${e.label}`,e.handleHeadless||e.handle,{disabled:e.disabled,tooltip:e.tooltip})));let M,O,T;return e[16]!==j||e[17]!==_||e[18]!==I||e[19]!==A?(M=p.jsxs(j,{heading:"Commands",children:[_,I,A]}),e[16]=j,e[17]=_,e[18]=I,e[19]=A,e[20]=M):M=e[20],e[21]!==E||e[22]!==C||e[23]!==S||e[24]!==M?(O=p.jsxs(E,{children:[C,S,M]}),e[21]=E,e[22]=C,e[23]=S,e[24]=M,e[25]=O):O=e[25],e[26]!==k||e[27]!==t||e[28]!==n||e[29]!==N||e[30]!==O?(T=p.jsxs(k,{open:t,onOpenChange:n,children:[N,O]}),e[26]=k,e[27]=t,e[28]=n,e[29]=N,e[30]=O,e[31]=T):T=e[31],T};function bd(e){return!e.hotkey}function wd(e){return e.label}const kd="https://static.marimo.app",Nd=({onClose:e})=>{const[t,n]=r.useState(""),o=`${t}-${r.useRef(Math.random().toString(36).slice(2,6)).current}`,a=`${kd}/static/${o}`;return p.jsx(k,{className:"w-fit",children:p.jsxs("form",{onSubmit:async t=>{t.preventDefault(),e();const n=await Be({download:!1,includeCode:!0,files:Gi.INSTANCE.filenames()}),r=Y({title:"Uploading static notebook...",description:"Please wait."});await fetch(`${kd}/api/static`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({html:n,path:o})}).catch((()=>{r.dismiss(),Y({title:"Error uploading static page",description:p.jsxs("div",{children:["Please try again later. If the problem persists, please file a bug report on"," ",p.jsx("a",{href:Ue.issuesPage,target:"_blank",rel:"noreferrer",className:"underline",children:"GitHub"}),"."]})})})),r.dismiss(),Y({title:"Static page uploaded!",description:p.jsxs("div",{children:["The URL has been copied to your clipboard.",p.jsx("br",{}),"You can share it with anyone."]})})},children:[p.jsxs(ae,{children:[p.jsx(y,{children:"Share static notebook"}),p.jsxs(b,{children:["You can publish a static, non-interactive version of this notebook to the public web. We will create a link for you that lives on"," ",p.jsx("a",{href:kd,target:"_blank",rel:"noreferrer",children:kd}),"."]})]}),p.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[p.jsx(Ve,{"data-testid":"slug-input",id:"slug",autoFocus:!0,value:t,placeholder:"Notebook slug",onChange:e=>{const t=e.target.value.toLowerCase().replaceAll(/\s/g,"-").replaceAll(/[^\da-z-]/g,"");n(t)},required:!0,autoComplete:"off"}),p.jsxs("div",{className:"font-semibold text-sm text-muted-foreground gap-2 flex flex-col",children:["Anyone will be able to access your notebook at this URL:",p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Ed,{text:a}),p.jsx("span",{className:"text-primary",children:a})]})]})]}),p.jsxs(w,{children:[p.jsx(v,{"data-testid":"cancel-share-static-notebook-button",variant:"secondary",onClick:e,children:"Cancel"}),p.jsx(v,{"data-testid":"share-static-notebook-button","aria-label":"Save",variant:"default",type:"submit",onClick:async()=>{await $e(a)},children:"Create"})]})]})})},Ed=e=>{const t=m(8),[n,o]=u.useState(!1);let r;t[0]!==e.text?(r=Ge.stopPropagation((async t=>{t.preventDefault(),await $e(e.text),o(!0),setTimeout((()=>o(!1)),2e3)})),t[0]=e.text,t[1]=r):r=t[1];const a=r;let s,i,l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx(He,{size:14,strokeWidth:1.5}),t[2]=s):s=t[2],t[3]!==a?(i=p.jsx(v,{"data-testid":"copy-static-notebook-url-button",onClick:a,size:"xs",variant:"secondary",children:s}),t[3]=a,t[4]=i):i=t[4],t[5]!==n||t[6]!==i?(l=p.jsx(g,{content:"Copied!",open:n,children:i}),t[5]=n,t[6]=i,t[7]=l):l=t[7],l};function Cd(){const e=m(3),{openConfirm:t}=f(),n=Q(Hi);let o;return e[0]!==t||e[1]!==n?(o=()=>{t({title:"Restart Kernel",description:"This will restart the Python kernel. You'll lose all data that's in memory. You will also lose any unsaved changes, so make sure to save your work before restarting.",variant:"destructive",confirmAction:p.jsx(We,{onClick:async()=>{n({state:Wi.CLOSING}),await qe(),window.location.reload()},"aria-label":"Confirm Restart",children:"Restart"})})},e[0]=t,e[1]=n,e[2]=o):o=e[2],o}const Sd=new Ye("marimo:sidebar",Ke.object({selectedPanel:Ke.string().optional().transform((e=>e)),isSidebarOpen:Ke.boolean(),isTerminalOpen:Ke.boolean()}),(function(){return{selectedPanel:"variables",isSidebarOpen:!1,isTerminalOpen:!1}}));const{reducer:jd,createActions:_d,valueAtom:Id,useActions:Ad}=Je((()=>Sd.get()),{openApplication:(e,t)=>({...e,selectedPanel:t,isSidebarOpen:!e.isSidebarOpen||e.selectedPanel!==t}),toggleSidebarPanel:e=>({...e,isSidebarOpen:!e.isSidebarOpen}),setIsSidebarOpen:(e,t)=>({...e,isSidebarOpen:t}),toggleTerminal:e=>({...e,isTerminalOpen:!e.isTerminalOpen}),setIsTerminalOpen:(e,t)=>({...e,isTerminalOpen:t})},[(e,t)=>Sd.set(t)]),Md=()=>{const e=m(2),t=Z(Id);if(t.isSidebarOpen)return t;let n;return e[0]!==t?(n={...t,selectedPanel:void 0},e[0]=t,e[1]=n):n=e[1],n};function Od(){return Ad()}const Td=[{type:"files",Icon:Kl,tooltip:"View files",position:"sidebar"},{type:"variables",Icon:Xe,tooltip:"Explore variables",position:"sidebar"},{type:"datasources",Icon:ue,tooltip:"Explore data sources",position:"sidebar"},{type:"dependencies",Icon:ic,tooltip:"Explore dependencies",position:"sidebar"},{type:"packages",Icon:Ol,tooltip:"Manage packages",position:"sidebar"},{type:"outline",Icon:kc,tooltip:"View outline",position:"sidebar"},{type:"documentation",Icon:Dc,tooltip:"View live docs",position:"sidebar"},{type:"logs",Icon:Ze,tooltip:"Notebook logs",position:"sidebar"},{type:"snippets",Icon:Sc,tooltip:"Snippets",position:"sidebar"},{type:"scratchpad",Icon:lc,hidden:!ii("scratchpad"),tooltip:"Scratchpad",position:"sidebar"},{type:"errors",Icon:Qe,tooltip:"View errors",position:"footer"}];function Dd(){const e=m(2),t=Q(et);let n;e[0]!==t?(n=()=>{const e=document.getElementsByClassName("output-area"),n=window.innerHeight||document.documentElement.clientHeight;let o;o=null;for(const t of Array.from(e)){const e=t.getBoundingClientRect();if(e.top>=0&&e.top<=n||e.bottom>=0&&e.bottom<=n){o=tt.parse(t.parentNode.id);break}}t((e=>({mode:nt(e.mode),cellAnchor:o}))),requestAnimationFrame((()=>{var e;null!==o&&(null==(e=document.getElementById(tt.create(o)))||e.scrollIntoView())}))},e[0]=t,e[1]=n):n=e[1];return n}const Pd=e=>{null==e||e.preventDefault(),null==e||e.stopPropagation()};function Rd(){const[e]=st(),{openModal:t,closeModal:n}=f(),{openApplication:o}=Od(),{selectedPanel:r}=Md(),[a]=je(et),s=Z(oe),i=R(),{updateCellConfig:l,undoDeleteCell:c}=L(),d=Cd(),u=function(e){const t=m(4),{openPrompt:n,closeModal:o}=f();let r;return t[0]!==e||t[1]!==n||t[2]!==o?(r=()=>{if(!e)return null;const t=ot.guessDeliminator(e),r=rt.basename(e);n({title:"Copy notebook",description:"Enter a new filename for the notebook copy.",defaultValue:`_${r}`,confirmText:"Copy notebook",spellCheck:!1,onConfirm:n=>{const r=t.join(rt.dirname(e),n);at({source:e,destination:r}).then((()=>{o(),Y({title:"Notebook copied",description:"A copy of the notebook has been created."}),window.open(`/?file=${r}`,"_blank")}))}})},t[0]=e,t[1]=n,t[2]=o,t[3]=r):r=t[3],r}(e),h=Q(xd),g=Q(fi),v=Q(pi),y=it(i),b=lt(i),{selectedLayout:w}=zi(),{setLayoutView:k}=Bi(),N=Dd();return[{icon:p.jsx(Nc,{size:14,strokeWidth:1.5}),label:"Share",handle:Pd,dropdown:[{icon:p.jsx(ct,{size:14,strokeWidth:1.5}),label:"Publish HTML to web",handle:async()=>{t(p.jsx(Nd,{onClose:n}))}},{icon:p.jsx(nc,{size:14,strokeWidth:1.5}),label:"Create WebAssembly link",handle:async()=>{const e=await dt(),t=ut({code:e.contents});await $e(t),Y({title:"Copied",description:"Link copied to clipboard."})}}]},{icon:p.jsx(ht,{size:14,strokeWidth:1.5}),label:"Download",handle:Pd,dropdown:[{icon:p.jsx(qi,{size:14,strokeWidth:1.5}),label:"Download as HTML",handle:async()=>{e?await Yi({filename:e,includeCode:!0}):Y({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},{icon:p.jsx(qi,{size:14,strokeWidth:1.5}),label:"Download as HTML (exclude code)",handle:async()=>{e?await Yi({filename:e,includeCode:!1}):Y({variant:"danger",title:"Error",description:"Notebooks must be named to be exported."})}},{icon:p.jsx(ci,{strokeWidth:1.5,style:{width:14,height:14}}),label:"Download as Markdown",handle:async()=>{const e=await mt({download:!1});x(new Blob([e],{type:"text/plain"}),ft.toMarkdown(document.title))}},{icon:p.jsx(Bl,{size:14,strokeWidth:1.5}),label:"Download Python code",handle:async()=>{const e=await dt();x(new Blob([e.contents],{type:"text/plain"}),ft.toPY(document.title))}},{divider:!0,icon:p.jsx($i,{size:14,strokeWidth:1.5}),label:"Download as PNG",disabled:"present"!==a.mode,tooltip:"present"===a.mode?void 0:p.jsxs("span",{children:["Only available in app view. ",p.jsx("br",{}),"Toggle with: ",ri("global.hideCode",!1)]}),handle:async()=>{const e=document.getElementById("App");e&&await P(e,document.title)}},{icon:p.jsx(pt,{size:14,strokeWidth:1.5}),label:"Download as PDF",disabled:"present"!==a.mode,tooltip:"present"===a.mode?void 0:p.jsxs("span",{children:["Only available in app view. ",p.jsx("br",{}),"Toggle with: ",ri("global.hideCode",!1)]}),handle:async()=>{const e=new Event("export-beforeprint"),t=new Event("export-afterprint");window.dispatchEvent(e),setTimeout((()=>window.print()),0),setTimeout((()=>window.dispatchEvent(t)),0)}}]},{divider:!0,icon:p.jsx(hc,{size:14,strokeWidth:1.5}),label:"Helper panel",handle:Pd,dropdown:Td.flatMap((({type:e,Icon:t,hidden:n})=>{return n?[]:{label:C(e),rightElement:(a=r===e,p.jsx("div",{className:"w-8 flex justify-end",children:a&&p.jsx(vt,{size:14})})),icon:p.jsx(t,{size:14,strokeWidth:1.5}),handle:()=>o(e)};var a}))},{icon:p.jsx(gc,{size:14,strokeWidth:1.5}),label:"Present as",handle:Pd,dropdown:[{icon:"present"===a.mode?p.jsx(gt,{size:14,strokeWidth:1.5}):p.jsx(tc,{size:14,strokeWidth:1.5}),label:"Toggle app view",hotkey:"global.hideCode",handle:()=>{N()}},...Ui.map(((e,t)=>{const n=Yc(e);return{divider:0===t,label:Kc(e),icon:p.jsx(n,{size:14,strokeWidth:1.5}),rightElement:p.jsx("div",{className:"w-8 flex justify-end",children:w===e&&p.jsx(vt,{size:14})}),handle:()=>{k(e),"edit"===a.mode&&N()}}}))]},{icon:p.jsx(ql,{size:14,strokeWidth:1.5}),label:"Create notebook copy",hidden:!e||S(),handle:u},{icon:p.jsx(Fl,{size:14,strokeWidth:1.5}),label:"Copy code to clipboard",hidden:!e,handle:async()=>{const e=await dt();await $e(e.contents),Y({title:"Copied",description:"Code copied to clipboard."})}},{icon:p.jsx(Bc,{size:14,strokeWidth:1.5}),label:"Enable all cells",hidden:0===y.length||s,handle:async()=>{const e=y.map((e=>e.id)),t=Ie.fromEntries(e.map((e=>[e,{disabled:!1}])));await be({configs:t});for(const n of e)l({cellId:n,config:{disabled:!1}})}},{icon:p.jsx(zc,{size:14,strokeWidth:1.5}),label:"Disable all cells",hidden:0===b.length||s,handle:async()=>{const e=b.map((e=>e.id)),t=Ie.fromEntries(e.map((e=>[e,{disabled:!0}])));await be({configs:t});for(const n of e)l({cellId:n,config:{disabled:!0}})}},{icon:p.jsx(Pc,{size:14,strokeWidth:1.5}),label:"Undo cell deletion",hidden:!xt(i)||s,handle:()=>{c()}},{divider:!0,icon:p.jsx(Ul,{size:14,strokeWidth:1.5}),label:"Command palette",hotkey:"global.commandPalette",handle:()=>h((e=>!e))},{icon:p.jsx(yt,{size:14,strokeWidth:1.5}),label:"User settings",handle:()=>g((e=>!e))},{icon:p.jsx(ec,{size:14,strokeWidth:1.5}),label:"Keyboard shortcuts",hotkey:"global.showHelp",handle:()=>v((e=>!e))},{icon:p.jsx(Ml,{size:14,strokeWidth:1.5}),label:"Open documentation",handle:()=>{window.open("https://docs.marimo.io","_blank")}},{divider:!0,icon:p.jsx(Ql,{size:14,strokeWidth:1.5}),label:"Return home",hidden:!location.search.includes("file"),handle:()=>{window.location.href=document.baseURI}},{icon:p.jsx(Mc,{size:14,strokeWidth:1.5}),label:"Restart kernel",variant:"danger",handle:d}].filter((e=>!e.hidden))}const Fd=()=>{const e=m(10),t=Rd();let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx(ai,{"aria-label":"Config",shape:"circle",size:"small",className:"h-[27px] w-[27px]","data-testid":"notebook-menu-dropdown",color:"hint-green",children:p.jsx(Ki,{strokeWidth:1.8})}),e[0]=n):n=e[0];const o=n,r=Ld;let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a=e=>{const t=p.jsx(wt,{variant:e.variant,disabled:e.disabled,onSelect:t=>e.handle(t),"data-testid":`notebook-menu-dropdown-${e.label}`,children:r(e)},e.label);return e.tooltip?p.jsx(g,{content:e.tooltip,side:"left",delayDuration:100,children:p.jsx("span",{children:t})},e.label):t},e[1]=a):a=e[1];const s=a;let i,l,c,d,h;if(e[2]===Symbol.for("react.memo_cache_sentinel")?(i=p.jsx(kt,{asChild:!0,children:o}),e[2]=i):i=e[2],e[3]!==t){let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.hidden?null:e.dropdown?p.jsxs(Nt,{children:[p.jsx(Et,{"data-testid":`notebook-menu-dropdown-${e.label}`,children:r(e)}),p.jsx(Ct,{children:p.jsx(St,{children:e.dropdown.map((e=>p.jsxs(u.Fragment,{children:[e.divider&&p.jsx(jt,{}),s(e)]},e.label)))})})]},e.label):p.jsxs(u.Fragment,{children:[e.divider&&p.jsx(jt,{}),s(e)]},e.label),e[5]=n):n=e[5],l=t.map(n),e[3]=t,e[4]=l}else l=e[4];return e[6]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(jt,{}),e[6]=c):c=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx("div",{className:"flex-1 px-2 text-xs text-muted-foreground",children:p.jsxs("span",{children:["Version: ",bt()]})}),e[7]=d):d=e[7],e[8]!==l?(h=p.jsxs(_t,{modal:!1,children:[i,p.jsxs(It,{align:"end",className:"no-print w-[240px]",children:[l,c,d]})]}),e[8]=l,e[9]=h):h=e[9],h};function Ld(e){return p.jsxs(p.Fragment,{children:[e.icon&&p.jsx("span",{className:"flex-0 mr-2",children:e.icon}),p.jsx("span",{className:"flex-1",children:e.labelElement||e.label}),e.hotkey&&p.jsx(gi,{shortcut:e.hotkey,className:"ml-4"}),e.rightElement]})}const zd=At({findText:"",replaceText:"",caseSensitive:!1,wholeWord:!1,regexp:!1,isOpen:!1,currentView:void 0},((e,t)=>{if(void 0===t)return e;switch(t.type){case"setFind":return{...e,findText:t.find};case"setReplace":return{...e,replaceText:t.replace};case"setCaseSensitive":return{...e,caseSensitive:t.caseSensitive};case"setWholeWord":return{...e,wholeWord:t.wholeWord};case"setRegex":return{...e,regexp:t.regexp};case"setIsOpen":return{...e,isOpen:t.isOpen};case"setCurrentView":return{...e,currentView:{view:t.view,range:t.range}};case"clearCurrentView":return{...e,currentView:void 0}}}));function Bd(e){if([...document.querySelectorAll('[role="dialog"][data-state="open"]')].some((e=>e instanceof HTMLElement&&e.childNodes.length>0)))return!1;if(e){const t=e.state.selection.main,n=e.state.sliceDoc(t.from,t.to);n?(H.set(zd,{type:"setFind",find:n}),H.set(zd,{type:"setCurrentView",view:e,range:{from:t.from,to:t.to}})):H.set(zd,{type:"setCurrentView",view:e,range:{from:0,to:0}})}return H.get(zd).isOpen?(H.set(zd,{type:"setIsOpen",isOpen:!1}),requestAnimationFrame((()=>{H.set(zd,{type:"setIsOpen",isOpen:!0})})),!0):(H.set(zd,{type:"setIsOpen",isOpen:!0}),!0)}function Ud(){return!!H.get(zd).isOpen&&(H.set(zd,{type:"setIsOpen",isOpen:!1}),!0)}function Vd(e){return Mt("create"in e,'Expected query to have a "create" method'),e}function $d(e){return()=>{const t=H.get(zd),n=new Ot({search:t.findText,caseSensitive:t.caseSensitive,regexp:t.regexp,replace:t.replaceText,wholeWord:t.wholeWord});return!!n.valid&&e({query:Vd(n).create(),search:n})}}const Gd=e=>$d((({query:t})=>{const n=Tt(),o=H.get(zd).currentView||{view:n[0],range:{from:0,to:0}};let r=o.range.to;"prev"===e&&(n.reverse(),r=o.range.from);let a=n.indexOf(o.view);a<0&&(a=0);const s=[...n,...n].slice(a);for(const i of s){const n="next"===e?t.nextMatch(i.state,0,r??0):t.prevMatch(i.state,r??i.state.doc.length,i.state.doc.length);if(!n){r=null,i.dispatch({selection:Dt.single(0)});continue}const o=Dt.single(n.from,n.to);return i.dispatch({selection:o,effects:[Pt.scrollIntoView(o.main,{y:"center"})],userEvent:"select.search"}),H.set(zd,{type:"setCurrentView",view:i,range:{from:n.from,to:n.to}}),n}return!1})),Hd=Gd("next"),Wd=Gd("prev"),qd=$d((({query:e})=>{var t;const n=Tt(),o=[];for(const r of n){if(r.state.readOnly)continue;const n=null==(t=e.matchAll(r.state,1e9))?void 0:t.map((t=>{const{from:n,to:o}=t;return{from:n,to:o,insert:e.getReplacement(t)}}));if(!n||0===n.length)continue;const a=r.state.doc.toString();o.push((()=>{r.dispatch({changes:[{from:0,to:r.state.doc.length,insert:a}],userEvent:"input.replace.all"})})),r.dispatch({changes:n,userEvent:"input.replace.all"})}return()=>{for(const e of o)e()}})),Yd=$d((({query:e})=>{const t=Tt(),n=H.get(zd).currentView||{view:t[0],range:{from:0,to:0}};let o=n.range.from,r=t.indexOf(n.view);r<0&&(r=0);const a=[...t,...t].slice(r);for(const s of a){const t=e.nextMatch(s.state,0,o??0);if(!t){o=null,s.dispatch({selection:Dt.single(0)});continue}const n=s.state.toText(e.getReplacement(t));return s.dispatch({changes:[{from:t.from,to:t.to,insert:n}],userEvent:"input.replace"}),Hd()}return!1})),Kd=$d((({query:e})=>{const t=Tt();let n=0;const o=new Map;for(const r of t){const t=e.matchAll(r.state,1e9)||[];for(const e of t){const{from:t,to:a}=e,s=o.get(r)||new Map;s.set(`${t}:${a}`,n++),o.set(r,s)}}return{count:n,position:o}})),Jd=Rt.define();function Xd(){const e=Tt();for(const t of e)t.state.readOnly||t.dispatch({effects:Jd.of(new Ot({search:""}))})}const Zd=Ft.define({create(){const e=H.get(zd);return Vd(new Ot({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord})).create()},update(e,t){for(const n of t.effects)n.is(Jd)&&(e=Vd(n.value).create());return e}}),Qd=Lt.mark({class:"cm-searchMatch"}),eu=Lt.mark({class:"cm-searchMatch cm-searchMatch-selected"}),tu=zt.fromClass(class{constructor(e){this.view=e,this.decorations=void 0,this.decorations=this.highlight(e.state.field(Zd))}update(e){const t=e.state.field(Zd);(t!==e.startState.field(Zd)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){if(!e.spec.valid)return Lt.none;const{view:t}=this,n=new Bt,o=t.visibleRanges,r=o.length;for(let a=0;a<r;a++){let{to:s}=o[a];const{from:i}=o[a];for(;a<r-1&&s>o[a+1].from-500;)s=o[++a].to;e.highlight(t.state,i,s,((e,o)=>{const r=t.state.selection.ranges.some((t=>t.from===e&&t.to===o));n.add(e,o,r?eu:Qd)}))}return n.finish()}},{decorations:e=>e.decorations}),nu=Pt.baseTheme({"&light .cm-searchMatch":{backgroundColor:"#99ff7780"},"&dark .cm-searchMatch":{backgroundColor:"#22bb0070"},"&light .cm-searchMatch-selected":{backgroundColor:"transparent"},"&dark .cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff88 !important"}}),ou=()=>{var e;const t=m(99),[n,o]=r.useState(!1),[a,s]=je(zd),[i,l]=r.useState(),c=r.useRef(null),d=Z(_e);let u,h,f,x,y;if(t[0]!==n||t[1]!==a.isOpen?(u=()=>(!n||!a.isOpen)&&Bd(),t[0]=n,t[1]=a.isOpen,t[2]=u):u=t[2],oi("cell.findAndReplace",u),t[3]!==a.isOpen?(h=()=>{a.isOpen&&c.current&&(c.current.focus(),c.current.select())},f=[a.isOpen],t[3]=a.isOpen,t[4]=h,t[5]=f):(h=t[4],f=t[5]),r.useEffect(h,f),t[6]!==a.isOpen||t[7]!==a.findText?(x=()=>{if(!a.isOpen)return void Xd();if(""===a.findText)return l(void 0),void Xd();const e=Kd();l(!1===e?void 0:e),function(){const e=H.get(zd),t=Tt();for(const n of t)n.state.readOnly||n.dispatch({effects:Jd.of(new Ot({search:e.findText,caseSensitive:e.caseSensitive,regexp:e.regexp,replace:e.replaceText,wholeWord:e.wholeWord}))})}()},t[6]=a.isOpen,t[7]=a.findText,t[8]=x):x=t[8],t[9]!==a.findText||t[10]!==a.isOpen||t[11]!==a.caseSensitive||t[12]!==a.regexp||t[13]!==a.wholeWord?(y=[a.findText,a.isOpen,a.caseSensitive,a.regexp,a.wholeWord],t[9]=a.findText,t[10]=a.isOpen,t[11]=a.caseSensitive,t[12]=a.regexp,t[13]=a.wholeWord,t[14]=y):y=t[14],r.useEffect(x,y),!a.isOpen)return null;const b=a.currentView;let w;t[15]!==b||t[16]!==i?(w=b&&i?null==(e=i.position.get(b.view))?void 0:e.get(`${b.range.from}:${b.range.to}`):void 0,t[15]=b,t[16]=i,t[17]=w):w=t[17];const k=w;let N,E,C,S,j,_,I,A,M,O,T;t[18]===Symbol.for("react.memo_cache_sentinel")?(N=()=>o(!0),t[18]=N):N=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(E=()=>o(!1),t[19]=E):E=t[19],t[20]!==s?(C=e=>{"Escape"===e.key&&s({type:"setIsOpen",isOpen:!1})},t[20]=s,t[21]=C):C=t[21],t[22]!==s?(S=()=>s({type:"setIsOpen",isOpen:!1}),t[22]=s,t[23]=S):S=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(j=p.jsx(Vt,{className:"w-4 h-4"}),t[24]=j):j=t[24],t[25]!==S?(_=p.jsx("div",{className:"absolute top-0 right-0",children:p.jsx(v,{"data-testid":"close-find-replace-button",onClick:S,size:"xs",variant:"text",children:j})}),t[25]=S,t[26]=_):_=t[26],t[27]!==s?(I=e=>{s({type:"setFind",find:e.target.value})},t[27]=s,t[28]=I):I=t[28],t[29]!==a.findText||t[30]!==I?(A=p.jsx(Ve,{ref:c,"data-testid":"find-input",value:a.findText,autoFocus:!0,className:"mr-2 mb-0",placeholder:"Find",onKeyDown:au,onChange:I}),t[29]=a.findText,t[30]=I,t[31]=A):A=t[31],t[32]!==s?(M=e=>{s({type:"setReplace",replace:e.target.value})},t[32]=s,t[33]=M):M=t[33],t[34]!==a.replaceText||t[35]!==M?(O=p.jsx(Ve,{"data-testid":"replace-input",value:a.replaceText,placeholder:"Replace",onChange:M}),t[34]=a.replaceText,t[35]=M,t[36]=O):O=t[36],t[37]!==A||t[38]!==O?(T=p.jsxs("div",{className:"flex flex-col flex-2 gap-2 w-[55%]",children:[A,O]}),t[37]=A,t[38]=O,t[39]=T):T=t[39];const D=a.caseSensitive?"on":"off";let P,R,F;t[40]!==s?(P=e=>s({type:"setCaseSensitive",caseSensitive:e}),t[40]=s,t[41]=P):P=t[41],t[42]===Symbol.for("react.memo_cache_sentinel")?(R=p.jsx($t,{className:"w-4 h-4"}),t[42]=R):R=t[42],t[43]!==a.caseSensitive||t[44]!==D||t[45]!==P?(F=p.jsx(g,{content:"Case Sensitive",children:p.jsx(Ut,{size:"sm",pressed:a.caseSensitive,"data-state":D,onPressedChange:P,children:R})}),t[43]=a.caseSensitive,t[44]=D,t[45]=P,t[46]=F):F=t[46];const L=a.wholeWord?"on":"off";let z,B,U;t[47]!==s?(z=e=>s({type:"setWholeWord",wholeWord:e}),t[47]=s,t[48]=z):z=t[48],t[49]===Symbol.for("react.memo_cache_sentinel")?(B=p.jsx(Fc,{className:"w-4 h-4"}),t[49]=B):B=t[49],t[50]!==a.wholeWord||t[51]!==L||t[52]!==z?(U=p.jsx(g,{content:"Match Whole Word",children:p.jsx(Ut,{size:"sm",pressed:a.wholeWord,"data-state":L,onPressedChange:z,children:B})}),t[50]=a.wholeWord,t[51]=L,t[52]=z,t[53]=U):U=t[53];const V=a.regexp?"on":"off";let $,G,W,q;t[54]!==s?($=e=>s({type:"setRegex",regexp:e}),t[54]=s,t[55]=$):$=t[55],t[56]===Symbol.for("react.memo_cache_sentinel")?(G=p.jsx(vc,{className:"w-4 h-4"}),t[56]=G):G=t[56],t[57]!==a.regexp||t[58]!==V||t[59]!==$?(W=p.jsx(g,{content:"Use Regular Expression",children:p.jsx(Ut,{size:"sm",pressed:a.regexp,"data-state":V,onPressedChange:$,children:G})}),t[57]=a.regexp,t[58]=V,t[59]=$,t[60]=W):W=t[60],t[61]!==F||t[62]!==U||t[63]!==W?(q=p.jsxs("div",{className:"flex items-center gap-[2px]",children:[F,U,W]}),t[61]=F,t[62]=U,t[63]=W,t[64]=q):q=t[64];const Y=""===a.findText||""===a.replaceText;let K;t[65]!==Y?(K=p.jsx(v,{"data-testid":"replace-next-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:su,disabled:Y,children:"Replace Next"}),t[65]=Y,t[66]=K):K=t[66];const J=""===a.findText||""===a.replaceText;let X,Q,ee,te,ne,oe,re,ae,se,ie,le,ce;return t[67]!==J?(X=p.jsx(v,{"data-testid":"replace-all-button",size:"xs",variant:"outline",className:"h-6 text-xs",onClick:iu,disabled:J,children:"Replace All"}),t[67]=J,t[68]=X):X=t[68],t[69]!==K||t[70]!==X?(Q=p.jsxs("div",{className:"flex items-center gap-[2px]",children:[K,X]}),t[69]=K,t[70]=X,t[71]=Q):Q=t[71],t[72]!==q||t[73]!==Q?(ee=p.jsxs("div",{className:"flex flex-col gap-2",children:[q,Q]}),t[72]=q,t[73]=Q,t[74]=ee):ee=t[74],t[75]!==T||t[76]!==ee?(te=p.jsxs("div",{className:"flex items-center gap-3",children:[T,ee]}),t[75]=T,t[76]=ee,t[77]=te):te=t[77],t[78]===Symbol.for("react.memo_cache_sentinel")?(ne=p.jsx(g,{content:"Find Previous",children:p.jsx(v,{"data-testid":"find-prev-button",size:"xs",variant:"secondary",onClick:lu,children:p.jsx(Cl,{className:"w-4 h-4"})})}),t[78]=ne):ne=t[78],t[79]===Symbol.for("react.memo_cache_sentinel")?(oe=p.jsx(g,{content:"Find Next",children:p.jsx(v,{"data-testid":"find-next-button",size:"xs",variant:"secondary",onClick:cu,children:p.jsx(_l,{className:"w-4 h-4"})})}),t[79]=oe):oe=t[79],t[80]!==i||t[81]!==k?(re=null!=i&&null==k&&p.jsxs("span",{className:"text-sm",children:[i.count," matches"]}),t[80]=i,t[81]=k,t[82]=re):re=t[82],t[83]!==i||t[84]!==k?(ae=null!=i&&null!=k&&p.jsxs("span",{className:"text-sm",children:[k+1," of ",i.count]}),t[83]=i,t[84]=k,t[85]=ae):ae=t[85],t[86]!==re||t[87]!==ae?(se=p.jsxs("div",{className:"flex items-center gap-2",children:[ne,oe,re,ae]}),t[86]=re,t[87]=ae,t[88]=se):se=t[88],t[89]!==d?(ie=d.getHotkey("cell.findAndReplace"),t[89]=d,t[90]=ie):ie=t[90],t[91]!==ie.key?(le=p.jsxs("div",{className:"text-xs text-muted-foreground flex gap-1 mt-2",children:["Press"," ",p.jsx(mi,{shortcut:ie.key})," ","again to open the native browser search."]}),t[91]=ie.key,t[92]=le):le=t[92],t[93]!==C||t[94]!==_||t[95]!==te||t[96]!==se||t[97]!==le?(ce=p.jsx(Gt,{restoreFocus:!0,autoFocus:!0,children:p.jsxs("div",{onFocus:N,onClick:ru,onBlur:E,className:"fixed top-0 right-0 w-[500px] flex flex-col bg-[var(--sage-1)] p-4 z-50 mt-2 mr-3 rounded-md shadow-lg border gap-2 print:hidden",onKeyDown:C,children:[_,te,se,le]})}),t[93]=C,t[94]=_,t[95]=te,t[96]=se,t[97]=le,t[98]=ce):ce=t[98],ce};function ru(e){e.stopPropagation(),e.preventDefault()}function au(e){"Enter"===e.key&&(e.shiftKey?Wd():Hd())}function su(){return Yd()}function iu(){const e=qd();if(!e)return;const{dismiss:t}=Y({title:"Replaced all occurrences",action:p.jsx(rd,{"data-testid":"undo-replace-all-button",onClick:()=>{e(),n()}})}),n=t}function lu(){return Wd()}function cu(){return Hd()}function du(e){const t=m(3),[n,o]=r.useState(!1);let a,s;return t[0]!==e?(a=()=>{if(!e)return;o(!1);const t=setTimeout((()=>{o(!0)}),200);return()=>clearTimeout(t)},s=[e],t[0]=e,t[1]=a,t[2]=s):(a=t[1],s=t[2]),r.useEffect(a,s),e&&n}const uu=()=>{const e=m(6),t=Q(xd);let n;e[0]!==t?(n=()=>t((e=>!e)),e[0]=t,e[1]=n):n=e[1];const o=n;let r,a,s;return e[2]===Symbol.for("react.memo_cache_sentinel")?(r=ri("global.commandPalette"),e[2]=r):r=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(a=p.jsx(Ul,{strokeWidth:1.5,size:18}),e[3]=a):a=e[3],e[4]!==o?(s=p.jsx(g,{content:r,children:p.jsx(ai,{"data-testid":"command-palette-button",onClick:o,shape:"rectangle",color:"hint-green",children:a})}),e[4]=o,e[5]=s):s=e[5],s},hu=e=>{const{children:t}=e;return Z(oe)?null:t},mu=e=>{const{children:t}=e;return Z(oe)?t:null},fu=e=>{const t=m(48),{filename:n,needsSave:o,onSaveNotebook:r,getCellsAsJSON:a,presenting:s,onTogglePresenting:i,onInterrupt:l,onRun:c,closed:d,running:u,needsRun:h,undoAvailable:f,appWidth:v}=e,{undoDeleteCell:x}=L();let y;t[0]!==r?(y=e=>{e.preventDefault(),e.stopPropagation(),r()},t[0]=r,t[1]=y):y=t[1];const b=y;let w,k,N=null;if(!d&&f){let e,n;t[2]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Pc,{size:16,strokeWidth:1.5}),t[2]=e):e=t[2],t[3]!==x?(n=p.jsx(g,{content:"Undo cell deletion",children:p.jsx(ai,{"data-testid":"undo-delete-cell",size:"medium",color:"hint-green",shape:"circle",onClick:x,children:e})}),t[3]=x,t[4]=n):n=t[4],N=n}t[5]!==s?(w=!s&&p.jsx(ou,{}),t[5]=s,t[6]=w):w=t[6],t[7]!==d||t[8]!==s?(k=!d&&p.jsxs("div",{className:vu,children:[s&&p.jsx(Wc,{}),p.jsx(Fd,{}),p.jsx(vi,{}),p.jsx(xi,{description:"This will terminate the Python kernel. You'll lose all data that's in memory."})]}),t[7]=d,t[8]=s,t[9]=k):k=t[9];const E="compact"===v&&"xl:flex-row items-end";let C,S,j,_,I,A,M,O,T,D,P,R,F;return t[10]!==E?(C=Ht(xu,E),t[10]=E,t[11]=C):C=t[11],t[12]!==d||t[13]!==n||t[14]!==a||t[15]!==o||t[16]!==b?(S=p.jsx(hu,{children:d?p.jsx(Hc,{filename:n,getCellsAsJSON:a,needsSave:o}):p.jsx(g,{content:ri("global.save"),children:p.jsx(ai,{"data-testid":"save-button",id:"save-button",shape:"rectangle",color:o?"yellow":"hint-green",onClick:b,children:p.jsx(bc,{strokeWidth:1.5,size:18})})})}),t[12]=d,t[13]=n,t[14]=a,t[15]=o,t[16]=b,t[17]=S):S=t[17],t[18]===Symbol.for("react.memo_cache_sentinel")?(j=ri("global.hideCode"),t[18]=j):j=t[18],t[19]!==s?(_=s?p.jsx(gt,{strokeWidth:1.5,size:18}):p.jsx(tc,{strokeWidth:1.5,size:18}),t[19]=s,t[20]=_):_=t[20],t[21]!==i||t[22]!==_?(I=p.jsx(g,{content:j,children:p.jsx(ai,{"data-testid":"hide-code-button",id:"preview-button",shape:"rectangle",color:"hint-green",onClick:i,children:_})}),t[21]=i,t[22]=_,t[23]=I):I=t[23],t[24]===Symbol.for("react.memo_cache_sentinel")?(A=p.jsx(uu,{}),M=p.jsx(yi,{}),O=p.jsx("div",{}),t[24]=A,t[25]=M,t[26]=O):(A=t[24],M=t[25],O=t[26]),t[27]!==d||t[28]!==u||t[29]!==l?(T=!d&&p.jsx(gu,{running:u,onInterrupt:l}),t[27]=d,t[28]=u,t[29]=l,t[30]=T):T=t[30],t[31]!==d||t[32]!==h||t[33]!==c?(D=!d&&p.jsx(pu,{needsRun:h,onRun:c}),t[31]=d,t[32]=h,t[33]=c,t[34]=D):D=t[34],t[35]!==N||t[36]!==T||t[37]!==D?(P=p.jsx(hu,{children:p.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[N,T,D]})}),t[35]=N,t[36]=T,t[37]=D,t[38]=P):P=t[38],t[39]!==C||t[40]!==S||t[41]!==I||t[42]!==P?(R=p.jsxs("div",{className:C,children:[S,I,A,M,O,P]}),t[39]=C,t[40]=S,t[41]=I,t[42]=P,t[43]=R):R=t[43],t[44]!==w||t[45]!==k||t[46]!==R?(F=p.jsxs(p.Fragment,{children:[w,k,R]}),t[44]=w,t[45]=k,t[46]=R,t[47]=F):F=t[47],F},pu=e=>{const t=m(5),{needsRun:n,onRun:o}=e;if(n){let e,n,r;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=ri("global.runStale"),t[0]=e):e=t[0],t[1]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx(pc,{strokeWidth:1.5,size:16}),t[1]=n):n=t[1],t[2]!==o?(r=p.jsx(g,{content:e,children:p.jsx(ai,{"data-testid":"run-button",size:"medium",color:"yellow",shape:"circle",onClick:o,children:n})}),t[2]=o,t[3]=r):r=t[3],r}let r;return t[4]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx(g,{content:"Nothing to run",children:p.jsx(ai,{"data-testid":"run-button",className:"inactive-button",color:"disabled",size:"medium",shape:"circle",children:p.jsx(pc,{strokeWidth:1.5,size:16})})}),t[4]=r):r=t[4],r},gu=e=>{const t=m(8),{running:n,onInterrupt:o}=e,r=du(n);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=ri("global.interrupt"),t[0]=a):a=t[0];const s=!r&&"inactive-button active:shadow-xsSolid";let i;t[1]!==s?(i=Ht(s),t[1]=s,t[2]=i):i=t[2];const l=r?"yellow":"disabled",c=r?o:Wt.NOOP;let d,u;return t[3]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx(E,{strokeWidth:1.5,size:16}),t[3]=d):d=t[3],t[4]!==i||t[5]!==l||t[6]!==c?(u=p.jsx(g,{content:a,children:p.jsx(ai,{className:i,"data-testid":"interrupt-button",size:"medium",color:l,shape:"circle",onClick:c,children:d})}),t[4]=i,t[5]=l,t[6]=c,t[7]=u):u=t[7],u},vu="absolute top-3 right-5 m-0 flex items-center space-x-3 min-h-[28px] no-print pointer-events-auto z-30 print:hidden",xu="absolute bottom-5 right-5 flex flex-col gap-2 items-center no-print pointer-events-auto z-30 print:hidden",yu=e=>{const t=m(35),{resetOnBlur:n,placeholderText:o,initialValue:a,flexibleWidth:s,onNameChange:i,className:l}=e,c=void 0!==n&&n,d=void 0===a?null:a,u=void 0!==s&&s,[h,f]=r.useState(d);let g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=[],t[0]=g):g=t[0];const[v,x]=r.useState(g),[y,b]=r.useState(!1),w=r.useRef(null),k=r.useRef(!1);let N,E,C;t[1]!==d?(N=()=>{f(d)},E=[d],t[1]=d,t[2]=N,t[3]=E):(N=t[2],E=t[3]),r.useEffect(N,E),t[4]===Symbol.for("react.memo_cache_sentinel")?(C=()=>{b(!0)},t[4]=C):C=t[4];const S=C;let j;t[5]!==c||t[6]!==d?(j=e=>{var t;(null==(t=e.relatedTarget)?void 0:t.closest(".filename-input"))||(b(!1),c&&f(d))},t[5]=c,t[6]=d,t[7]=j):j=t[7];const _=j;let I;t[8]!==h?(I=rt.dirname(h||""),t[8]=h,t[9]=I):I=t[9];const A=I,M=rt.basename(h||""),O=v.filter((e=>rt.basename(e.path).startsWith(M)));let T,D;t[10]!==y||t[11]!==A?(T=async()=>{if(!y)return void x([]);const e=await Kt({path:A});x(e.files)},D=[A,y],t[10]=y,t[11]=A,t[12]=T,t[13]=D):(T=t[12],D=t[13]);const{loading:P}=qt(T,D),R=function(e,t,n){if(!e)return;if(e.endsWith("/"))return;(ii("markdown")?new Set(["py","md","markdown","qmd"]):new Set(["py"])).has(rt.extension(e))||(e=e.endsWith(".")?`${e}py`:e.endsWith(".p")?`${e}y`:`${e}.py`);if(t.some((t=>t.path===e||rt.basename(t.path)===e)))return;if(n&&(n===e||rt.basename(n)===e))return;return e}(h,v,d),F=(R||O.length>0)&&p.jsxs(Le,{className:"font-mono",children:[!P&&p.jsx(ze,{children:"No files"}),R&&p.jsxs(De,{variant:"success",className:"py-2 px-3",onSelect:()=>{var e;R&&(k.current=!0,i(R),null==(e=w.current)||e.blur())},children:[p.jsx(Hl,{className:"w-4 h-4 mr-2"})," ",p.jsxs("span",{className:"text-sm",children:[d?"Rename to: ":"Save as: ",p.jsx("span",{className:"font-medium text-sm",children:rt.basename(R)})]})]},"_rename_"),O.map((e=>{const t=e.isDirectory?"directory":Yt(e.path),n=Jt[t];return p.jsxs(De,{variant:e.isDirectory?"default":"muted",className:"py-2 px-3",onSelect:()=>{e.isDirectory?f(`${e.path}/`):f(e.path)},children:[p.jsx(n,{className:"w-4 h-4 mr-2"})," ",rt.basename(e.path)]},e.path)}))]}),L=10*Math.max(20,(null==h?void 0:h.length)||(null==o?void 0:o.length)||0),z=y?h||"":d||"";let B,U,V;t[14]!==u||t[15]!==L?(B=u?{maxWidth:L}:void 0,t[14]=u,t[15]=L,t[16]=B):B=t[16],t[17]!==l?(U=Ht(l,"w-full px-4 py-1 my-1 h-9 font-mono text-foreground/60"),t[17]=l,t[18]=U):U=t[18],t[19]!==z||t[20]!==o||t[21]!==B||t[22]!==U?(V=p.jsx(Xt,{children:p.jsx(Fe,{"data-testid":"dir-completion-input",tabIndex:-1,rootClassName:"border-none justify-center px-1",spellCheck:"false",value:z,onKeyDown:bu,icon:null,ref:w,onValueChange:f,placeholder:o,autoComplete:"off",style:B,className:U})}),t[19]=z,t[20]=o,t[21]=B,t[22]=U,t[23]=V):V=t[23];const $=F&&"group-focus-within:block";let G,H,W,q;return t[24]!==$?(G=Ht("p-0 w-full min-w-80 max-w-80vw hidden",$),t[24]=$,t[25]=G):G=t[25],t[26]!==G||t[27]!==F?(H=p.jsx(Zt,{side:"bottom",className:G,portal:!1,children:F}),t[26]=G,t[27]=F,t[28]=H):H=t[28],t[29]!==V||t[30]!==H?(W=p.jsxs(Le,{children:[V,H]}),t[29]=V,t[30]=H,t[31]=W):W=t[31],t[32]!==_||t[33]!==W?(q=p.jsx(Qt,{open:!0,modal:!1,children:p.jsx(en,{onFocus:S,onBlur:_,shouldFilter:!1,className:"bg-transparent group filename-input",children:W})}),t[32]=_,t[33]=W,t[34]=q):q=t[34],q};function bu(e){"Escape"===e.key&&e.currentTarget.blur()}const wu=e=>{const t=m(7),{filename:n,setFilename:o}=e;let r;t[0]!==n?(r=n?rt.basename(n):"untitled marimo app",t[0]=n,t[1]=r):r=t[1];const a=null===n?"missing-filename":"filename";let s;return t[2]!==r||t[3]!==n||t[4]!==o||t[5]!==a?(s=p.jsx(yu,{placeholderText:r,initialValue:n,onNameChange:o,flexibleWidth:!0,resetOnBlur:!0,"data-testid":"filename-input",className:a}),t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=s):s=t[6],s};function ku(e){return[tn.of([{key:"Escape",preventDefault:!1,run:Ud},{key:e.getHotkey("cell.selectNextOccurrence").key,preventDefault:!0,run:nn},{key:e.getHotkey("cell.findAndReplace").key,preventDefault:!0,run:Bd}]),on(),tu,Zd,nu]}var Nu=Object.defineProperty,Eu=(e,t,n)=>(((e,t,n)=>{t in e?Nu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);const Cu=Ft.define({create:()=>({suggestion:null}),update(e,t){const n=t.effects.find((e=>e.is(Su)));return t.state.doc&&n&&t.state.doc==n.value.doc?{suggestion:n.value.text}:{suggestion:null}}}),Su=Rt.define();class ju extends an{constructor(e){super(),Eu(this,"suggestion"),this.suggestion=e}toDOM(){const e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}get lineBreaks(){return this.suggestion.split("\n").length-1}}const _u=e=>zt.fromClass(class{async update(t){const n=t.state.doc;if(!t.docChanged)return;const o=await e(t.state);t.view.dispatch({effects:Su.of({text:o,doc:n})})}}),Iu=zt.fromClass(class{constructor(){Eu(this,"decorations"),this.decorations=Lt.none}update(e){var t;const n=null==(t=e.state.field(Cu))?void 0:t.suggestion;this.decorations=n?function(e,t){const n=e.state.selection.main.head,o=[],r=Lt.widget({widget:new ju(t),side:1});return o.push(r.range(n)),Lt.set(o)}(e.view,n):Lt.none}},{decorations:e=>e.decorations}),Au=rn.highest(tn.of([{key:"Tab",run:e=>{var t;const n=null==(t=e.state.field(Cu))?void 0:t.suggestion;return!!n&&(e.dispatch({...Mu(e.state,n,e.state.selection.main.head,e.state.selection.main.head)}),!0)}}]));function Mu(e,t,n,o){return{...e.changeByRange((r=>{if(r==e.selection.main)return{changes:{from:n,to:o,insert:t},range:Dt.cursor(n+t.length)};const a=o-n;return!r.empty||a&&e.sliceDoc(r.from-a,r.from)!=e.sliceDoc(n,o)?{range:r}:{changes:{from:r.from-a,to:r.from,insert:t},range:Dt.cursor(r.from-a+t.length)}})),userEvent:"input.complete"}}function Ou(e){const{delay:t=500}=e,n=function(e,t,n){let o=()=>{};return(...r)=>(o(),new Promise(((a,s)=>{const i=setTimeout((()=>a(e(...r))),t);o=()=>{clearTimeout(i),void 0!==n&&s(n)}})))}(e.fetchFn,t);return[Cu,_u(n),Iu,Au]}const Tu=Rt.define(),Du=Rt.define(),Pu=Rt.define();function Ru(e,t){if(!e)throw new Error(t)}function Fu(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function Lu(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function zu(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}const Bu=Symbol("@bufbuild/protobuf/enum-type");function Uu(e){const t=e[Bu];return Ru(t,"missing enum type on enum object"),t}function Vu(e,t,n,o){e[Bu]=$u(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function $u(e,t,n){const o=Object.create(null),r=Object.create(null),a=[];for(const s of t){const e=Hu(s);a.push(e),o[s.name]=e,r[s.no]=e}return{typeName:e,values:a,findName:e=>o[e],findNumber:e=>r[e]}}function Gu(e,t,n){const o={};for(const r of t){const e=Hu(r);o[e.localName]=e.no,o[e.no]=e.localName}return Vu(o,e,t),o}function Hu(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class Wu{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,o=n.makeReadOptions(t);return n.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,t){const n=this.getType(),o=n.runtime.json,r=o.makeReadOptions(t);return o.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(o){throw new Error(`cannot decode ${this.getType().typeName} from JSON: ${o instanceof Error?o.message:String(o)}`)}return this.fromJson(n,t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),o=n.writerFactory();return t.writeMessage(this,o,n),o.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null==e?void 0:e.prettySpaces)&&void 0!==t?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function qu(){let e=0,t=0;for(let o=0;o<28;o+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<o,!(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,!(128&n))return this.assertBounds(),[e,t];for(let o=3;o<=31;o+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<o,!(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function Yu(e,t,n){for(let a=0;a<28;a+=7){const o=e>>>a,r=!(o>>>7==0&&0==t),s=255&(r?128|o:o);if(n.push(s),!r)return}const o=e>>>28&15|(7&t)<<4,r=!!(t>>3);if(n.push(255&(r?128|o:o)),r){for(let e=3;e<31;e+=7){const o=t>>>e,r=!(o>>>7==0),a=255&(r?128|o:o);if(n.push(a),!r)return}n.push(t>>>31&1)}}const Ku=4294967296;function Ju(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let o=0,r=0;function a(t,a){const s=Number(e.slice(t,a));r*=n,o=o*n+s,o>=Ku&&(r+=o/Ku|0,o%=Ku)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),t?Qu(o,r):Zu(o,r)}function Xu(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(Ku*t+e);const n=16777215&(e>>>24|t<<8),o=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*o,a=n+8147497*o,s=2*o;const i=1e7;return r>=i&&(a+=Math.floor(r/i),r%=i),a>=i&&(s+=Math.floor(a/i),a%=i),s.toString()+eh(a)+eh(r)}function Zu(e,t){return{lo:0|e,hi:0|t}}function Qu(e,t){return t=~t,e?e=1+~e:t+=1,Zu(e,t)}const eh=e=>{const t=String(e);return"0000000".slice(t.length)+t};function th(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function nh(){let e=this.buf[this.pos++],t=127&e;if(!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,!(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,!(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;128&e&&n<10;n++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var oh={};const rh=function(){const e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=typeof process||"1"!==oh.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),o=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const o="bigint"==typeof e?e:BigInt(e);if(o>n||o<t)throw new Error(`int64 invalid: ${e}`);return o},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>r||t<o)throw new Error(`uint64 invalid: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>Ru(/^-?[0-9]+$/.test(e),`int64 invalid: ${e}`),n=e=>Ru(/^[0-9]+$/.test(e),`uint64 invalid: ${e}`);return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),Ju(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),Ju(e)),dec:(e,t)=>function(e,t){let n=Zu(e,t);const o=2147483648&n.hi;o&&(n=Qu(n.lo,n.hi));const r=Xu(n.lo,n.hi);return o?"-"+r:r}(e,t),uDec:(e,t)=>Xu(e,t)}}();var ah,sh,ih,lh,ch,dh;function uh(e,t,n){if(t===n)return!0;if(e==ah.BYTES){if(!(t instanceof Uint8Array&&n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case ah.UINT64:case ah.FIXED64:case ah.INT64:case ah.SFIXED64:case ah.SINT64:return t==n}return!1}function hh(e,t){switch(e){case ah.BOOL:return!1;case ah.UINT64:case ah.FIXED64:case ah.INT64:case ah.SFIXED64:case ah.SINT64:return 0==t?rh.zero:"0";case ah.DOUBLE:case ah.FLOAT:return 0;case ah.BYTES:return new Uint8Array(0);case ah.STRING:return"";default:return 0}}function mh(e,t){switch(e){case ah.BOOL:return!1===t;case ah.STRING:return""===t;case ah.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}(sh=ah||(ah={}))[sh.DOUBLE=1]="DOUBLE",sh[sh.FLOAT=2]="FLOAT",sh[sh.INT64=3]="INT64",sh[sh.UINT64=4]="UINT64",sh[sh.INT32=5]="INT32",sh[sh.FIXED64=6]="FIXED64",sh[sh.FIXED32=7]="FIXED32",sh[sh.BOOL=8]="BOOL",sh[sh.STRING=9]="STRING",sh[sh.BYTES=12]="BYTES",sh[sh.UINT32=13]="UINT32",sh[sh.SFIXED32=15]="SFIXED32",sh[sh.SFIXED64=16]="SFIXED64",sh[sh.SINT32=17]="SINT32",sh[sh.SINT64=18]="SINT64",(lh=ih||(ih={}))[lh.BIGINT=0]="BIGINT",lh[lh.STRING=1]="STRING",(dh=ch||(ch={}))[dh.Varint=0]="Varint",dh[dh.Bit64=1]="Bit64",dh[dh.LengthDelimited=2]="LengthDelimited",dh[dh.StartGroup=3]="StartGroup",dh[dh.EndGroup=4]="EndGroup",dh[dh.Bit32=5]="Bit32";class fh{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let o=0;o<this.chunks.length;o++)e+=this.chunks[o].length;let t=new Uint8Array(e),n=0;for(let o=0;o<this.chunks.length;o++)t.set(this.chunks[o],n),n+=this.chunks[o].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Lu(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return Fu(e),th(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){zu(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){Lu(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){Fu(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return Fu(e),th(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),o=rh.enc(e);return n.setInt32(0,o.lo,!0),n.setInt32(4,o.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),o=rh.uEnc(e);return n.setInt32(0,o.lo,!0),n.setInt32(4,o.hi,!0),this.raw(t)}int64(e){let t=rh.enc(e);return Yu(t.lo,t.hi,this.buf),this}sint64(e){let t=rh.enc(e),n=t.hi>>31;return Yu(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=rh.uEnc(e);return Yu(t.lo,t.hi,this.buf),this}}class ph{constructor(e,t){this.varint64=qu,this.uint32=nh,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case ch.Varint:for(;128&this.buf[this.pos++];);break;case ch.Bit64:this.pos+=4;case ch.Bit32:this.pos+=4;break;case ch.LengthDelimited:let n=this.uint32();this.pos+=n;break;case ch.StartGroup:for(;;){const[e,n]=this.tag();if(n===ch.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return rh.dec(...this.varint64())}uint64(){return rh.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,rh.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return rh.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return rh.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function gh(e){const t=e.field.localName,n=Object.create(null);return n[t]=function(e){const t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return hh(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}let vh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),xh=[];for(let eT=0;eT<vh.length;eT++)xh[vh[eT].charCodeAt(0)]=eT;xh["-".charCodeAt(0)]=vh.indexOf("+"),xh["_".charCodeAt(0)]=vh.indexOf("/");const yh={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,o=new Uint8Array(t),r=0,a=0,s=0;for(let i=0;i<e.length;i++){if(n=xh[e.charCodeAt(i)],void 0===n)switch(e[i]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:s=n,a=1;break;case 1:o[r++]=s<<2|(48&n)>>4,s=n,a=2;break;case 2:o[r++]=(15&s)<<4|(60&n)>>2,s=n,a=3;break;case 3:o[r++]=(3&s)<<6|n,a=0}}if(1==a)throw Error("invalid base64 string.");return o.subarray(0,r)},enc(e){let t,n="",o=0,r=0;for(let a=0;a<e.length;a++)switch(t=e[a],o){case 0:n+=vh[t>>2],r=(3&t)<<4,o=1;break;case 1:n+=vh[r|t>>4],r=(15&t)<<2,o=2;break;case 2:n+=vh[r|t>>6],n+=vh[63&t],o=0}return o&&(n+=vh[r],n+="=",1==o&&(n+="=")),n}};function bh(e,t,n){Nh(t,e);const o=t.runtime.bin.makeReadOptions(n),r=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter((e=>e.no===t.no))}(e.getType().runtime.bin.listUnknownFields(e),t.field),[a,s]=gh(t);for(const i of r)t.runtime.bin.readField(a,o.readerFactory(i.data),t.field,i.wireType,o);return s()}function wh(e,t,n,o){Nh(t,e);const r=t.runtime.bin.makeReadOptions(o),a=t.runtime.bin.makeWriteOptions(o);if(kh(e,t)){const n=e.getType().runtime.bin.listUnknownFields(e).filter((e=>e.no!=t.field.no));e.getType().runtime.bin.discardUnknownFields(e);for(const t of n)e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}const s=a.writerFactory();let i=t.field;i.opt||i.repeated||"enum"!=i.kind&&"scalar"!=i.kind||(i=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(i,n,s,a);const l=r.readerFactory(s.finish());for(;l.pos<l.len;){const[t,n]=l.tag(),o=l.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,o)}}function kh(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find((e=>e.no==t.field.no))}function Nh(e,t){Ru(e.extendee.typeName==t.getType().typeName,`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}function Eh(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==t[n]:"enum"==e.kind?t[n]!==e.T.values[0].no:!mh(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function Ch(e,t){const n=e.localName,o=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=o?e.T.values[0].no:void 0;break;case"scalar":t[n]=o?hh(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function Sh(e,t){if(null===e||"object"!=typeof e)return!1;if(!Object.getOwnPropertyNames(Wu.prototype).every((t=>t in e&&"function"==typeof e[t])))return!1;const n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function jh(e,t){return Sh(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}ah.DOUBLE,ah.FLOAT,ah.INT64,ah.UINT64,ah.INT32,ah.UINT32,ah.BOOL,ah.STRING,ah.BYTES;const _h={ignoreUnknownFields:!1},Ih={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Ah(e){return e?Object.assign(Object.assign({},_h),e):_h}function Mh(e){return e?Object.assign(Object.assign({},Ih),e):Ih}const Oh=Symbol(),Th=Symbol();function Dh(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":`"${e.split('"').join('\\"')}"`;default:return String(e)}}function Ph(e,t,n,o,r){let a=n.localName;if(n.repeated){if(Ru("map"!=n.kind),null===t)return;if(!Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${Dh(t)}`);const i=e[a];for(const e of t){if(null===e)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${Dh(e)}`);switch(n.kind){case"message":i.push(n.T.fromJson(e,o));break;case"enum":const t=Lh(n.T,e,o.ignoreUnknownFields,!0);t!==Th&&i.push(t);break;case"scalar":try{i.push(Fh(n.T,e,n.L,!0))}catch(s){let t=`cannot decode field ${r.typeName}.${n.name} from JSON: ${Dh(e)}`;throw s instanceof Error&&s.message.length>0&&(t+=`: ${s.message}`),new Error(t)}}}}else if("map"==n.kind){if(null===t)return;if("object"!=typeof t||Array.isArray(t))throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: ${Dh(t)}`);const i=e[a];for(const[e,a]of Object.entries(t)){if(null===a)throw new Error(`cannot decode field ${r.typeName}.${n.name} from JSON: map value null`);let l;try{l=Rh(n.K,e)}catch(s){let e=`cannot decode map key for field ${r.typeName}.${n.name} from JSON: ${Dh(t)}`;throw s instanceof Error&&s.message.length>0&&(e+=`: ${s.message}`),new Error(e)}switch(n.V.kind){case"message":i[l]=n.V.T.fromJson(a,o);break;case"enum":const e=Lh(n.V.T,a,o.ignoreUnknownFields,!0);e!==Th&&(i[l]=e);break;case"scalar":try{i[l]=Fh(n.V.T,a,ih.BIGINT,!0)}catch(s){let e=`cannot decode map value for field ${r.typeName}.${n.name} from JSON: ${Dh(t)}`;throw s instanceof Error&&s.message.length>0&&(e+=`: ${s.message}`),new Error(e)}}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:a},a="value"),n.kind){case"message":const i=n.T;if(null===t&&"google.protobuf.Value"!=i.typeName)return;let l=e[a];Sh(l)?l.fromJson(t,o):(e[a]=l=i.fromJson(t,o),i.fieldWrapper&&!n.oneof&&(e[a]=i.fieldWrapper.unwrapField(l)));break;case"enum":const c=Lh(n.T,t,o.ignoreUnknownFields,!1);switch(c){case Oh:Ch(n,e);break;case Th:break;default:e[a]=c}break;case"scalar":try{const o=Fh(n.T,t,n.L,!1);if(o===Oh)Ch(n,e);else e[a]=o}catch(s){let e=`cannot decode field ${r.typeName}.${n.name} from JSON: ${Dh(t)}`;throw s instanceof Error&&s.message.length>0&&(e+=`: ${s.message}`),new Error(e)}}}function Rh(e,t){if(e===ah.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return Fh(e,t,ih.BIGINT,!0).toString()}function Fh(e,t,n,o){if(null===t)return o?hh(e,n):Oh;switch(e){case ah.DOUBLE:case ah.FLOAT:if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const o=Number(t);if(Number.isNaN(o))break;if(!Number.isFinite(o))break;return e==ah.FLOAT&&zu(o),o;case ah.INT32:case ah.FIXED32:case ah.SFIXED32:case ah.SINT32:case ah.UINT32:let a;if("number"==typeof t?a=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(a=Number(t)),void 0===a)break;return e==ah.UINT32||e==ah.FIXED32?Lu(a):Fu(a),a;case ah.INT64:case ah.SFIXED64:case ah.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;const s=rh.parse(t);return n?s.toString():s;case ah.FIXED64:case ah.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;const i=rh.uParse(t);return n?i.toString():i;case ah.BOOL:if("boolean"!=typeof t)break;return t;case ah.STRING:if("string"!=typeof t)break;try{encodeURIComponent(t)}catch(r){throw new Error("invalid UTF8")}return t;case ah.BYTES:if(""===t)return new Uint8Array(0);if("string"!=typeof t)break;return yh.dec(t)}throw new Error}function Lh(e,t,n,o){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:o?e.values[0].no:Oh;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const o=e.findName(t);if(void 0!==o)return o.no;if(n)return Th}throw new Error(`cannot decode enum ${e.typeName} from JSON: ${Dh(t)}`)}function zh(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function Bh(e,t,n){if("map"==e.kind){Ru("object"==typeof t&&null!=t);const o={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[n,a]of r)o[n.toString()]=Vh(e.V.T,a);break;case"message":for(const[e,a]of r)o[e.toString()]=a.toJson(n);break;case"enum":const t=e.V.T;for(const[e,a]of r)o[e.toString()]=Uh(t,a,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?o:void 0}if(e.repeated){Ru(Array.isArray(t));const o=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++)o.push(Vh(e.T,t[n]));break;case"enum":for(let r=0;r<t.length;r++)o.push(Uh(e.T,t[r],n.enumAsInteger));break;case"message":for(let e=0;e<t.length;e++)o.push(t[e].toJson(n))}return n.emitDefaultValues||o.length>0?o:void 0}switch(e.kind){case"scalar":return Vh(e.T,t);case"enum":return Uh(e.T,t,n.enumAsInteger);case"message":return jh(e.T,t).toJson(n)}}function Uh(e,t,n){var o;if(Ru("number"==typeof t),"google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const r=e.findNumber(t);return null!==(o=null==r?void 0:r.name)&&void 0!==o?o:t}function Vh(e,t){switch(e){case ah.INT32:case ah.SFIXED32:case ah.SINT32:case ah.FIXED32:case ah.UINT32:return Ru("number"==typeof t),t;case ah.FLOAT:case ah.DOUBLE:return Ru("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case ah.STRING:return Ru("string"==typeof t),t;case ah.BOOL:return Ru("boolean"==typeof t),t;case ah.UINT64:case ah.FIXED64:case ah.INT64:case ah.SFIXED64:case ah.SINT64:return Ru("bigint"==typeof t||"string"==typeof t||"number"==typeof t),t.toString();case ah.BYTES:return Ru(t instanceof Uint8Array),yh.enc(t)}}const $h=Symbol("@bufbuild/protobuf/unknown-fields"),Gh={readUnknownFields:!0,readerFactory:e=>new ph(e)},Hh={writeUnknownFields:!0,writerFactory:()=>new fh};function Wh(e){return e?Object.assign(Object.assign({},Gh),e):Gh}function qh(e){return e?Object.assign(Object.assign({},Hh),e):Hh}function Yh(e,t,n,o,r){let{repeated:a,localName:s}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const i="enum"==n.kind?ah.INT32:n.T;let l=Xh;if("scalar"==n.kind&&n.L>0&&(l=Jh),a){let n=e[s];if(o==ch.LengthDelimited&&i!=ah.STRING&&i!=ah.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(l(t,i))}else n.push(l(t,i))}else e[s]=l(t,i);break;case"message":const c=n.T;a?e[s].push(Kh(t,new c,r,n)):Sh(e[s])?Kh(t,e[s],r,n):(e[s]=Kh(t,new c,r,n),!c.fieldWrapper||n.oneof||n.repeated||(e[s]=c.fieldWrapper.unwrapField(e[s])));break;case"map":let[d,u]=function(e,t,n){const o=t.uint32(),r=t.pos+o;let a,s;for(;t.pos<r;){const[o]=t.tag();switch(o){case 1:a=Xh(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=Xh(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=Kh(t,new e.V.T,n,void 0)}}}void 0===a&&(a=hh(e.K,ih.BIGINT));"string"!=typeof a&&"number"!=typeof a&&(a=a.toString());if(void 0===s)switch(e.V.kind){case"scalar":s=hh(e.V.T,ih.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T}return[a,s]}(n,t,r);e[s][d]=u}}function Kh(e,t,n,o){const r=t.getType().runtime.bin,a=null==o?void 0:o.delimited;return r.readMessage(t,e,a?o.no:e.uint32(),n,a),t}function Jh(e,t){const n=Xh(e,t);return"bigint"==typeof n?n.toString():n}function Xh(e,t){switch(t){case ah.STRING:return e.string();case ah.BOOL:return e.bool();case ah.DOUBLE:return e.double();case ah.FLOAT:return e.float();case ah.INT32:return e.int32();case ah.INT64:return e.int64();case ah.UINT64:return e.uint64();case ah.FIXED64:return e.fixed64();case ah.BYTES:return e.bytes();case ah.FIXED32:return e.fixed32();case ah.SFIXED32:return e.sfixed32();case ah.SFIXED64:return e.sfixed64();case ah.SINT64:return e.sint64();case ah.UINT32:return e.uint32();case ah.SINT32:return e.sint32()}}function Zh(e,t,n,o){Ru(void 0!==t);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let a="enum"==e.kind?ah.INT32:e.T;if(r)if(Ru(Array.isArray(t)),e.packed)!function(e,t,n,o){if(!o.length)return;e.tag(n,ch.LengthDelimited).fork();let[,r]=nm(t);for(let a=0;a<o.length;a++)e[r](o[a]);e.join()}(n,a,e.no,t);else for(const o of t)tm(n,a,e.no,o);else tm(n,a,e.no,t);break;case"message":if(r){Ru(Array.isArray(t));for(const r of t)em(n,o,e,r)}else em(n,o,e,t);break;case"map":Ru("object"==typeof t&&null!=t);for(const[r,s]of Object.entries(t))Qh(n,o,e,r,s)}}function Qh(e,t,n,o,r){e.tag(n.no,ch.LengthDelimited),e.fork();let a=o;switch(n.K){case ah.INT32:case ah.FIXED32:case ah.UINT32:case ah.SFIXED32:case ah.SINT32:a=Number.parseInt(o);break;case ah.BOOL:Ru("true"==o||"false"==o),a="true"==o}switch(tm(e,n.K,1,a),n.V.kind){case"scalar":tm(e,n.V.T,2,r);break;case"enum":tm(e,ah.INT32,2,r);break;case"message":Ru(void 0!==r),e.tag(2,ch.LengthDelimited).bytes(r.toBinary(t))}e.join()}function em(e,t,n,o){const r=jh(n.T,o);n.delimited?e.tag(n.no,ch.StartGroup).raw(r.toBinary(t)).tag(n.no,ch.EndGroup):e.tag(n.no,ch.LengthDelimited).bytes(r.toBinary(t))}function tm(e,t,n,o){Ru(void 0!==o);let[r,a]=nm(t);e.tag(n,r)[a](o)}function nm(e){let t=ch.Varint;switch(e){case ah.BYTES:case ah.STRING:t=ch.LengthDelimited;break;case ah.DOUBLE:case ah.FIXED64:case ah.SFIXED64:t=ch.Bit64;break;case ah.FIXED32:case ah.SFIXED32:case ah.FLOAT:t=ch.Bit32}return[t,ah[e].toLowerCase()]}function om(e){if(void 0===e)return e;if(Sh(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function rm(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class am{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function sm(e,t){const n=lm(e);return t?n:mm(hm(n))}const im=lm;function lm(e){let t=!1;const n=[];for(let o=0;o<e.length;o++){let r=e.charAt(o);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const cm=new Set(["constructor","toString","toJSON","valueOf"]),dm=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),um=e=>`${e}$`,hm=e=>dm.has(e)?um(e):e,mm=e=>cm.has(e)?um(e):e;class fm{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=sm(e,!1)}addField(e){Ru(e.oneof===this,`field ${e.name} not one of ${this.name}`),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const pm=(gm=e=>new am(e,(e=>function(e){var t,n,o,r,a,s;const i=[];let l;for(const c of"function"==typeof e?e():e){const e=c;if(e.localName=sm(c.name,void 0!==c.oneof),e.jsonName=null!==(t=c.jsonName)&&void 0!==t?t:im(c.name),e.repeated=null!==(n=c.repeated)&&void 0!==n&&n,"scalar"==c.kind&&(e.L=null!==(o=c.L)&&void 0!==o?o:ih.BIGINT),e.delimited=null!==(r=c.delimited)&&void 0!==r&&r,e.req=null!==(a=c.req)&&void 0!==a&&a,e.opt=null!==(s=c.opt)&&void 0!==s&&s,void 0===c.packed&&(e.packed="enum"==c.kind||"scalar"==c.kind&&c.T!=ah.BYTES&&c.T!=ah.STRING),void 0!==c.oneof){const t="string"==typeof c.oneof?c.oneof:c.oneof.name;l&&l.name==t||(l=new fm(t)),e.oneof=l,l.addField(e)}i.push(e)}return i}(e))),vm=e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,o=e;if(t.repeated)o[n]=[];else switch(t.kind){case"oneof":o[n]={case:void 0};break;case"enum":o[n]=0;break;case"map":o[n]={};break;case"scalar":o[n]=hh(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:Ah,makeWriteOptions:Mh,readMessage(e,t,n,o){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error(`cannot decode message ${e.typeName} from JSON: ${Dh(t)}`);o=null!=o?o:new e;const r=new Map,a=n.typeRegistry;for(const[s,i]of Object.entries(t)){const t=e.fields.findJsonName(s);if(t){if(t.oneof){if(null===i&&"scalar"==t.kind)continue;const n=r.get(t.oneof);if(void 0!==n)throw new Error(`cannot decode message ${e.typeName} from JSON: multiple keys for oneof "${t.oneof.name}" present: "${n}", "${s}"`);r.set(t.oneof,s)}Ph(o,i,t,n,e)}else{let t=!1;if((null==a?void 0:a.findExtension)&&s.startsWith("[")&&s.endsWith("]")){const r=a.findExtension(s.substring(1,s.length-1));if(r&&r.extendee.typeName==e.typeName){t=!0;const[e,a]=gh(r);Ph(e,i,r.field,n,r),wh(o,r,a(),n)}}if(!t&&!n.ignoreUnknownFields)throw new Error(`cannot decode message ${e.typeName} from JSON: key "${s}" is unknown`)}}return o},writeMessage(e,t){const n=e.getType(),o={};let r;try{for(r of n.fields.byNumber()){if(!Eh(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues)continue;if(!zh(r))continue}const n=Bh(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t);void 0!==n&&(o[t.useProtoFieldName?r.name:r.jsonName]=n)}const a=t.typeRegistry;if(null==a?void 0:a.findExtensionFor)for(const r of n.runtime.bin.listUnknownFields(e)){const s=a.findExtensionFor(n.typeName,r.no);if(s&&kh(e,s)){const n=bh(e,s,t),r=Bh(s.field,n,t);void 0!==r&&(o[s.field.jsonName]=r)}}}catch(a){const e=r?`cannot encode field ${n.typeName}.${r.name} to JSON`:`cannot encode message ${n.typeName} to JSON`,t=a instanceof Error?a.message:String(a);throw new Error(e+(t.length>0?`: ${t}`:""))}return o},readScalar:(e,t,n)=>Fh(e,t,null!=n?n:ih.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t)return n||mh(e,t)?Vh(e,t):void 0},debug:Dh},bin:{makeReadOptions:Wh,makeWriteOptions:qh,listUnknownFields(e){var t;return null!==(t=e[$h])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[$h]},writeUnknownFields(e,t){const n=e[$h];if(n)for(const o of n)t.tag(o.no,o.wireType).raw(o.data)},onUnknownField(e,t,n,o){const r=e;Array.isArray(r[$h])||(r[$h]=[]),r[$h].push({no:t,wireType:n,data:o})},readMessage(e,t,n,o,r){const a=e.getType(),s=r?t.len:t.pos+n;let i,l;for(;t.pos<s&&([i,l]=t.tag(),!0!==r||l!=ch.EndGroup);){const n=a.fields.find(i);if(n)Yh(e,t,n,l,o);else{const n=t.skip(l,i);o.readUnknownFields&&this.onUnknownField(e,i,l,n)}}if(r&&(l!=ch.EndGroup||i!==n))throw new Error("invalid end group tag")},readField:Yh,writeMessage(e,t,n){const o=e.getType();for(const r of o.fields.byNumber())if(Eh(r,e))Zh(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t,n);else if(r.req)throw new Error(`cannot encode field ${o.typeName}.${r.name} to binary: required field not set`);return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,o){void 0!==t&&Zh(e,t,n,o)}},util:Object.assign(Object.assign({},{setEnumType:Vu,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const o of n.fields.byMember()){const n=o.localName,r=t,a=e;if(null!=a[n])switch(o.kind){case"oneof":const e=a[n].case;if(void 0===e)continue;const t=o.findField(e);let s=a[n].value;t&&"message"==t.kind&&!Sh(s,t.T)?s=new t.T(s):t&&"scalar"===t.kind&&t.T===ah.BYTES&&(s=rm(s)),r[n]={case:e,value:s};break;case"scalar":case"enum":let i=a[n];o.T===ah.BYTES&&(i=o.repeated?i.map(rm):rm(i)),r[n]=i;break;case"map":switch(o.V.kind){case"scalar":case"enum":if(o.V.T===ah.BYTES)for(const[t,o]of Object.entries(a[n]))r[n][t]=rm(o);else Object.assign(r[n],a[n]);break;case"message":const e=o.V.T;for(const t of Object.keys(a[n])){let o=a[n][t];e.fieldWrapper||(o=new e(o)),r[n][t]=o}}break;case"message":const l=o.T;if(o.repeated)r[n]=a[n].map((e=>Sh(e,l)?e:new l(e)));else{const e=a[n];l.fieldWrapper?"google.protobuf.BytesValue"===l.typeName?r[n]=rm(e):r[n]=e:r[n]=Sh(e,l)?e:new l(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const o=t[e.localName],r=n[e.localName];if(e.repeated){if(o.length!==r.length)return!1;switch(e.kind){case"message":return o.every(((t,n)=>e.T.equals(t,r[n])));case"scalar":return o.every(((t,n)=>uh(e.T,t,r[n])));case"enum":return o.every(((e,t)=>uh(ah.INT32,e,r[t])))}throw new Error(`repeated cannot contain ${e.kind}`)}switch(e.kind){case"message":return e.T.equals(o,r);case"enum":return uh(ah.INT32,o,r);case"scalar":return uh(e.T,o,r);case"oneof":if(o.case!==r.case)return!1;const t=e.findField(o.case);if(void 0===t)return!0;switch(t.kind){case"message":return t.T.equals(o.value,r.value);case"enum":return uh(ah.INT32,o.value,r.value);case"scalar":return uh(t.T,o.value,r.value)}throw new Error(`oneof cannot contain ${t.kind}`);case"map":const n=Object.keys(o).concat(Object.keys(r));switch(e.V.kind){case"message":const t=e.V.T;return n.every((e=>t.equals(o[e],r[e])));case"enum":return n.every((e=>uh(ah.INT32,o[e],r[e])));case"scalar":const a=e.V.T;return n.every((e=>uh(a,o[e],r[e])))}}})),clone(e){const t=e.getType(),n=new t,o=n;for(const r of t.fields.byMember()){const t=e[r.localName];let n;if(r.repeated)n=t.map(om);else if("map"==r.kind){n=o[r.localName];for(const[e,o]of Object.entries(t))n[e]=om(o)}else n="oneof"==r.kind?r.findField(t.case)?{case:t.case,value:om(t.value)}:{case:void 0}:om(t);o[r.localName]=n}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(o,r.no,r.wireType,r.data);return n}}),{newFieldList:gm,initFields:vm}),makeMessageType(e,t,n){return function(e,t,n,o){var r;const a=null!==(r=null==o?void 0:o.localName)&&void 0!==r?r:t.substring(t.lastIndexOf(".")+1),s={[a]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[a];return Object.setPrototypeOf(s.prototype,new Wu),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new s).fromBinary(e,t),fromJson:(e,t)=>(new s).fromJson(e,t),fromJsonString:(e,t)=>(new s).fromJsonString(e,t),equals:(t,n)=>e.util.equals(s,t,n)}),s}(this,e,t,n)},makeEnum:Gu,makeEnumType:$u,getEnumType:Uu,makeExtension(e,t,n){return function(e,t,n,o){let r;return{typeName:t,extendee:n,get field(){if(!r){const n="function"==typeof o?o():o;n.name=t.split(".").pop(),n.jsonName=`[${t}]`,r=e.util.newFieldList([n]).list()[0]}return r},runtime:e}}(this,e,t,n)}});var gm,vm,xm,ym,bm,wm,km,Nm,Em,Cm,Sm,jm,_m,Im,Am,Mm;(ym=xm||(xm={}))[ym.Unary=0]="Unary",ym[ym.ServerStreaming=1]="ServerStreaming",ym[ym.ClientStreaming=2]="ClientStreaming",ym[ym.BiDiStreaming=3]="BiDiStreaming",(wm=bm||(bm={}))[wm.NoSideEffects=1]="NoSideEffects",wm[wm.Idempotent=2]="Idempotent",(Nm=km||(km={}))[Nm.UNSPECIFIED=0]="UNSPECIFIED",Nm[Nm.JUPYTER_FORMAT=77]="JUPYTER_FORMAT",pm.util.setEnumType(km,"exa.codeium_common_pb.ExperimentKey",[{no:0,name:"UNSPECIFIED"},{no:77,name:"JUPYTER_FORMAT"}]),(Cm=Em||(Em={}))[Cm.CODEIUM=0]="CODEIUM",pm.util.setEnumType(Em,"exa.codeium_common_pb.AuthSource",[{no:0,name:"AUTH_SOURCE_CODEIUM"}]),(jm=Sm||(Sm={}))[jm.UNSPECIFIED=0]="UNSPECIFIED",jm[jm.ENABLE_CODEIUM=1]="ENABLE_CODEIUM",jm[jm.DISABLE_CODEIUM=2]="DISABLE_CODEIUM",jm[jm.SHOW_PREVIOUS_COMPLETION=3]="SHOW_PREVIOUS_COMPLETION",jm[jm.SHOW_NEXT_COMPLETION=4]="SHOW_NEXT_COMPLETION",pm.util.setEnumType(Sm,"exa.codeium_common_pb.EventType",[{no:0,name:"EVENT_TYPE_UNSPECIFIED"},{no:1,name:"EVENT_TYPE_ENABLE_CODEIUM"},{no:2,name:"EVENT_TYPE_DISABLE_CODEIUM"},{no:3,name:"EVENT_TYPE_SHOW_PREVIOUS_COMPLETION"},{no:4,name:"EVENT_TYPE_SHOW_NEXT_COMPLETION"}]),(Im=_m||(_m={}))[Im.UNSPECIFIED=0]="UNSPECIFIED",Im[Im.TYPING_AS_SUGGESTED=1]="TYPING_AS_SUGGESTED",Im[Im.CACHE=2]="CACHE",Im[Im.NETWORK=3]="NETWORK",pm.util.setEnumType(_m,"exa.codeium_common_pb.CompletionSource",[{no:0,name:"COMPLETION_SOURCE_UNSPECIFIED"},{no:1,name:"COMPLETION_SOURCE_TYPING_AS_SUGGESTED"},{no:2,name:"COMPLETION_SOURCE_CACHE"},{no:3,name:"COMPLETION_SOURCE_NETWORK"}]),(Mm=Am||(Am={}))[Mm.UNSPECIFIED=0]="UNSPECIFIED",Mm[Mm.C=1]="C",Mm[Mm.CLOJURE=2]="CLOJURE",Mm[Mm.COFFEESCRIPT=3]="COFFEESCRIPT",Mm[Mm.CPP=4]="CPP",Mm[Mm.CSHARP=5]="CSHARP",Mm[Mm.CSS=6]="CSS",Mm[Mm.CUDACPP=7]="CUDACPP",Mm[Mm.DOCKERFILE=8]="DOCKERFILE",Mm[Mm.GO=9]="GO",Mm[Mm.GROOVY=10]="GROOVY",Mm[Mm.HANDLEBARS=11]="HANDLEBARS",Mm[Mm.HASKELL=12]="HASKELL",Mm[Mm.HCL=13]="HCL",Mm[Mm.HTML=14]="HTML",Mm[Mm.INI=15]="INI",Mm[Mm.JAVA=16]="JAVA",Mm[Mm.JAVASCRIPT=17]="JAVASCRIPT",Mm[Mm.JSON=18]="JSON",Mm[Mm.JULIA=19]="JULIA",Mm[Mm.KOTLIN=20]="KOTLIN",Mm[Mm.LATEX=21]="LATEX",Mm[Mm.LESS=22]="LESS",Mm[Mm.LUA=23]="LUA",Mm[Mm.MAKEFILE=24]="MAKEFILE",Mm[Mm.MARKDOWN=25]="MARKDOWN",Mm[Mm.OBJECTIVEC=26]="OBJECTIVEC",Mm[Mm.OBJECTIVECPP=27]="OBJECTIVECPP",Mm[Mm.PERL=28]="PERL",Mm[Mm.PHP=29]="PHP",Mm[Mm.PLAINTEXT=30]="PLAINTEXT",Mm[Mm.PROTOBUF=31]="PROTOBUF",Mm[Mm.PBTXT=32]="PBTXT",Mm[Mm.PYTHON=33]="PYTHON",Mm[Mm.R=34]="R",Mm[Mm.RUBY=35]="RUBY",Mm[Mm.RUST=36]="RUST",Mm[Mm.SASS=37]="SASS",Mm[Mm.SCALA=38]="SCALA",Mm[Mm.SCSS=39]="SCSS",Mm[Mm.SHELL=40]="SHELL",Mm[Mm.SQL=41]="SQL",Mm[Mm.STARLARK=42]="STARLARK",Mm[Mm.SWIFT=43]="SWIFT",Mm[Mm.TSX=44]="TSX",Mm[Mm.TYPESCRIPT=45]="TYPESCRIPT",Mm[Mm.VISUALBASIC=46]="VISUALBASIC",Mm[Mm.VUE=47]="VUE",Mm[Mm.XML=48]="XML",Mm[Mm.XSL=49]="XSL",Mm[Mm.YAML=50]="YAML",Mm[Mm.SVELTE=51]="SVELTE",Mm[Mm.TOML=52]="TOML",Mm[Mm.DART=53]="DART",Mm[Mm.RST=54]="RST",Mm[Mm.OCAML=55]="OCAML",Mm[Mm.CMAKE=56]="CMAKE",Mm[Mm.PASCAL=57]="PASCAL",Mm[Mm.ELIXIR=58]="ELIXIR",Mm[Mm.FSHARP=59]="FSHARP",Mm[Mm.LISP=60]="LISP",Mm[Mm.MATLAB=61]="MATLAB",Mm[Mm.POWERSHELL=62]="POWERSHELL",Mm[Mm.SOLIDITY=63]="SOLIDITY",Mm[Mm.ADA=64]="ADA",Mm[Mm.OCAML_INTERFACE=65]="OCAML_INTERFACE",pm.util.setEnumType(Am,"exa.codeium_common_pb.Language",[{no:0,name:"LANGUAGE_UNSPECIFIED"},{no:1,name:"LANGUAGE_C"},{no:2,name:"LANGUAGE_CLOJURE"},{no:3,name:"LANGUAGE_COFFEESCRIPT"},{no:4,name:"LANGUAGE_CPP"},{no:5,name:"LANGUAGE_CSHARP"},{no:6,name:"LANGUAGE_CSS"},{no:7,name:"LANGUAGE_CUDACPP"},{no:8,name:"LANGUAGE_DOCKERFILE"},{no:9,name:"LANGUAGE_GO"},{no:10,name:"LANGUAGE_GROOVY"},{no:11,name:"LANGUAGE_HANDLEBARS"},{no:12,name:"LANGUAGE_HASKELL"},{no:13,name:"LANGUAGE_HCL"},{no:14,name:"LANGUAGE_HTML"},{no:15,name:"LANGUAGE_INI"},{no:16,name:"LANGUAGE_JAVA"},{no:17,name:"LANGUAGE_JAVASCRIPT"},{no:18,name:"LANGUAGE_JSON"},{no:19,name:"LANGUAGE_JULIA"},{no:20,name:"LANGUAGE_KOTLIN"},{no:21,name:"LANGUAGE_LATEX"},{no:22,name:"LANGUAGE_LESS"},{no:23,name:"LANGUAGE_LUA"},{no:24,name:"LANGUAGE_MAKEFILE"},{no:25,name:"LANGUAGE_MARKDOWN"},{no:26,name:"LANGUAGE_OBJECTIVEC"},{no:27,name:"LANGUAGE_OBJECTIVECPP"},{no:28,name:"LANGUAGE_PERL"},{no:29,name:"LANGUAGE_PHP"},{no:30,name:"LANGUAGE_PLAINTEXT"},{no:31,name:"LANGUAGE_PROTOBUF"},{no:32,name:"LANGUAGE_PBTXT"},{no:33,name:"LANGUAGE_PYTHON"},{no:34,name:"LANGUAGE_R"},{no:35,name:"LANGUAGE_RUBY"},{no:36,name:"LANGUAGE_RUST"},{no:37,name:"LANGUAGE_SASS"},{no:38,name:"LANGUAGE_SCALA"},{no:39,name:"LANGUAGE_SCSS"},{no:40,name:"LANGUAGE_SHELL"},{no:41,name:"LANGUAGE_SQL"},{no:42,name:"LANGUAGE_STARLARK"},{no:43,name:"LANGUAGE_SWIFT"},{no:44,name:"LANGUAGE_TSX"},{no:45,name:"LANGUAGE_TYPESCRIPT"},{no:46,name:"LANGUAGE_VISUALBASIC"},{no:47,name:"LANGUAGE_VUE"},{no:48,name:"LANGUAGE_XML"},{no:49,name:"LANGUAGE_XSL"},{no:50,name:"LANGUAGE_YAML"},{no:51,name:"LANGUAGE_SVELTE"},{no:52,name:"LANGUAGE_TOML"},{no:53,name:"LANGUAGE_DART"},{no:54,name:"LANGUAGE_RST"},{no:55,name:"LANGUAGE_OCAML"},{no:56,name:"LANGUAGE_CMAKE"},{no:57,name:"LANGUAGE_PASCAL"},{no:58,name:"LANGUAGE_ELIXIR"},{no:59,name:"LANGUAGE_FSHARP"},{no:60,name:"LANGUAGE_LISP"},{no:61,name:"LANGUAGE_MATLAB"},{no:62,name:"LANGUAGE_POWERSHELL"},{no:63,name:"LANGUAGE_SOLIDITY"},{no:64,name:"LANGUAGE_ADA"},{no:65,name:"LANGUAGE_OCAML_INTERFACE"}]);const Om=class e extends Wu{constructor(e){super(),n(this,"completionId",""),n(this,"text",""),n(this,"prefix",""),n(this,"stop",""),n(this,"score",0),n(this,"tokens",[]),n(this,"decodedTokens",[]),n(this,"probabilities",[]),n(this,"adjustedProbabilities",[]),n(this,"generatedLength",rh.zero),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Om,"runtime",pm),n(Om,"typeName","exa.codeium_common_pb.Completion"),n(Om,"fields",pm.util.newFieldList((()=>[{no:1,name:"completion_id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"prefix",kind:"scalar",T:9},{no:4,name:"stop",kind:"scalar",T:9},{no:5,name:"score",kind:"scalar",T:1},{no:6,name:"tokens",kind:"scalar",T:4,repeated:!0},{no:7,name:"decoded_tokens",kind:"scalar",T:9,repeated:!0},{no:8,name:"probabilities",kind:"scalar",T:1,repeated:!0},{no:9,name:"adjusted_probabilities",kind:"scalar",T:1,repeated:!0},{no:10,name:"generated_length",kind:"scalar",T:4}])));let Tm=Om;const Dm=class e extends Wu{constructor(e){super(),n(this,"ideName",""),n(this,"ideVersion",""),n(this,"extensionName",""),n(this,"extensionVersion",""),n(this,"apiKey",""),n(this,"locale",""),n(this,"sessionId",""),n(this,"requestId",rh.zero),n(this,"userAgent",""),n(this,"url",""),n(this,"authSource",Em.CODEIUM),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Dm,"runtime",pm),n(Dm,"typeName","exa.codeium_common_pb.Metadata"),n(Dm,"fields",pm.util.newFieldList((()=>[{no:1,name:"ide_name",kind:"scalar",T:9},{no:7,name:"ide_version",kind:"scalar",T:9},{no:12,name:"extension_name",kind:"scalar",T:9},{no:2,name:"extension_version",kind:"scalar",T:9},{no:3,name:"api_key",kind:"scalar",T:9},{no:4,name:"locale",kind:"scalar",T:9},{no:10,name:"session_id",kind:"scalar",T:9},{no:9,name:"request_id",kind:"scalar",T:4},{no:13,name:"user_agent",kind:"scalar",T:9},{no:14,name:"url",kind:"scalar",T:9},{no:15,name:"auth_source",kind:"enum",T:pm.getEnumType(Em)}])));let Pm=Dm;const Rm=class e extends Wu{constructor(e){super(),n(this,"tabSize",rh.zero),n(this,"insertSpaces",!1),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Rm,"runtime",pm),n(Rm,"typeName","exa.codeium_common_pb.EditorOptions"),n(Rm,"fields",pm.util.newFieldList((()=>[{no:1,name:"tab_size",kind:"scalar",T:4},{no:2,name:"insert_spaces",kind:"scalar",T:8}])));let Fm=Rm;e=class extends Wu{constructor(e){super(),n(this,"eventType",Sm.UNSPECIFIED),n(this,"eventJson",""),n(this,"timestampUnixMs",rh.zero),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}},n(e,"runtime",pm),n(e,"typeName","exa.codeium_common_pb.Event"),n(e,"fields",pm.util.newFieldList((()=>[{no:1,name:"event_type",kind:"enum",T:pm.getEnumType(Sm)},{no:2,name:"event_json",kind:"scalar",T:9},{no:3,name:"timestamp_unix_ms",kind:"scalar",T:3}])));class Lm extends an{constructor(e,t){super(),n(this,"index"),n(this,"total"),this.index=e,this.total=t}toDOM(){const e=document.createElement("span");e.setAttribute("aria-hidden","true"),e.className="cm-codeium-cycle";const t=e.appendChild(document.createElement("span"));t.className="cm-codeium-cycle-explanation",t.innerText=`${this.index+1}/${this.total}`;const n=e.appendChild(document.createElement("button"));return n.className="cm-codeium-cycle-key",n.innerText="→ (Ctrl ])",n.dataset.action="codeium-cycle",e}ignoreEvent(){return!1}}const zm=sn.define({combine:e=>ln(e,{language:Am.TYPESCRIPT,timeout:150,widgetClass:Lm,alwaysOn:!0},{})}),Bm=sn.define({combine:e=>ln(e,{override:()=>[]},{})}),Um=Lt.mark({class:"cm-ghostText"}),Vm=Ft.define({create:e=>null,update(e,t){var n;const o=t.state.facet(zm);for(const r of t.effects){if(r.is(Tu)){const{changeSpecs:e,index:t}=r.value,a=e[t].map((e=>Um.range(e.absoluteStartPos,e.absoluteEndPos))),s=null==(n=a.at(-1))?void 0:n.to;return{index:t,decorations:Lt.set([...a,...void 0!==s&&e.length>1&&o.widgetClass?[Lt.widget({widget:new o.widgetClass(t,e.length),side:1}).range(s)]:[]]),changeSpecs:e,reverseChangeSet:r.value.reverseChangeSet}}if(r.is(Du))return null;if(r.is(Pu))return null}return e?{...e,decorations:e.decorations.map(t.changes),reverseChangeSet:e.reverseChangeSet.map(t.changes)}:e},provide:e=>Pt.decorations.from(e,(e=>(null==e?void 0:e.decorations)||Lt.none))}),$m=cn.define(),Gm=cn.define();var Hm,Wm;function qm(e){const t=Hm[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,(e=>"_"+e.toLowerCase()))}let Ym;(Wm=Hm||(Hm={}))[Wm.Canceled=1]="Canceled",Wm[Wm.Unknown=2]="Unknown",Wm[Wm.InvalidArgument=3]="InvalidArgument",Wm[Wm.DeadlineExceeded=4]="DeadlineExceeded",Wm[Wm.NotFound=5]="NotFound",Wm[Wm.AlreadyExists=6]="AlreadyExists",Wm[Wm.PermissionDenied=7]="PermissionDenied",Wm[Wm.ResourceExhausted=8]="ResourceExhausted",Wm[Wm.FailedPrecondition=9]="FailedPrecondition",Wm[Wm.Aborted=10]="Aborted",Wm[Wm.OutOfRange=11]="OutOfRange",Wm[Wm.Unimplemented=12]="Unimplemented",Wm[Wm.Internal=13]="Internal",Wm[Wm.Unavailable=14]="Unavailable",Wm[Wm.DataLoss=15]="DataLoss",Wm[Wm.Unauthenticated=16]="Unauthenticated";class Km extends Error{constructor(e,t=Hm.Unknown,n,o,r){super(function(e,t){return e.length?`[${qm(t)}] ${e}`:`[${qm(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=n?n:{}),this.details=null!=o?o:[],this.cause=r}static from(e,t=Hm.Unknown){return e instanceof Km?e:e instanceof Error?"AbortError"==e.name?new Km(e.message,Hm.Canceled):new Km(e.message,t,void 0,void 0,e):new Km(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===Km.prototype||"ConnectError"===e.name&&"code"in e&&"number"==typeof e.code&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&"string"==typeof e.rawMessage&&"cause"in e)}findDetails(e){const t="typeName"in e?{findMessage:t=>t===e.typeName?e:void 0}:e,n=[];for(const r of this.details){if("getType"in r){t.findMessage(r.getType().typeName)&&n.push(r);continue}const e=t.findMessage(r.type);if(e)try{n.push(e.fromBinary(r.value))}catch(o){}}return n}}var Jm=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,r){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,r,(t=e[n](t)).done,t.value)}))}}},Xm=function(e){return this instanceof Xm?(this.v=e,this):new Xm(e)},Zm=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),a=[];return o={},s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),o[Symbol.asyncIterator]=function(){return this},o;function s(e,t){r[e]&&(o[e]=function(t){return new Promise((function(n,o){a.push([e,t,n,o])>1||i(e,t)}))},t&&(o[e]=t(o[e])))}function i(e,t){try{(n=r[e](t)).value instanceof Xm?Promise.resolve(n.value.v).then(l,c):d(a[0][2],n)}catch(o){d(a[0][3],o)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}};function Qm(e){return Zm(this,arguments,(function*(){yield Xm(yield*function(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){t[o]=e[o]?function(t){return(n=!n)?{value:Xm(e[o](t)),done:!1}:r?r(t):t}:r}}(Jm(e)))}))}var ef=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(n){t[n]=e[n]&&function(t){return new Promise((function(o,r){(function(e,t,n,o){Promise.resolve(o).then((function(t){e({value:t,done:n})}),t)})(o,r,(t=e[n](t)).done,t.value)}))}}},tf=function(e){return this instanceof tf?(this.v=e,this):new tf(e)},nf=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),a=[];return o={},s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),o[Symbol.asyncIterator]=function(){return this},o;function s(e,t){r[e]&&(o[e]=function(t){return new Promise((function(n,o){a.push([e,t,n,o])>1||i(e,t)}))},t&&(o[e]=t(o[e])))}function i(e,t){try{(n=r[e](t)).value instanceof tf?Promise.resolve(n.value.v).then(l,c):d(a[0][2],n)}catch(o){d(a[0][3],o)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}};function of(e,t){const n=function(){var n,o;return nf(this,arguments,(function*(){const r=yield tf(e);null===(n=null==t?void 0:t.onHeader)||void 0===n||n.call(t,r.header),yield tf(yield*function(e){var t,n;return t={},o("next"),o("throw",(function(e){throw e})),o("return"),t[Symbol.iterator]=function(){return this},t;function o(o,r){t[o]=e[o]?function(t){return(n=!n)?{value:tf(e[o](t)),done:!1}:r?r(t):t}:r}}(ef(r.message))),null===(o=null==t?void 0:t.onTrailer)||void 0===o||o.call(t,r.trailer)}))}()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function rf(e){if(!e.aborted)return;if(void 0!==e.reason)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function af(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}function sf(e,t,n){const o="string"==typeof t?t:t.typeName,r="string"==typeof n?n:n.name;return e.toString().replace(/\/?$/,`/${o}/${r}`)}function lf(e,t){return t instanceof e?t:new e(t)}function cf(e,t){function n(t){return!0===t.done?t:{done:t.done,value:lf(e,t.value)}}return{[Symbol.asyncIterator](){const e=t[Symbol.asyncIterator](),o={next:()=>e.next().then(n)};return void 0!==e.throw&&(o.throw=t=>e.throw(t).then(n)),void 0!==e.return&&(o.return=t=>e.return(t).then(n)),o}}}function df(e,t){var n;return null!==(n=null==t?void 0:t.concat().reverse().reduce(((e,t)=>t(e)),e))&&void 0!==n?n:e}function uf(e){var t;const n=Object.assign({},e);return null!==(t=n.ignoreUnknownFields)&&void 0!==t||(n.ignoreUnknownFields=!0),n}function hf(e,t,n,o){const r=t?mf(e.I,o):ff(e.I,n);return{parse:(t?mf(e.O,o):ff(e.O,n)).parse,serialize:r.serialize}}function mf(e,t){return{parse(n){try{return e.fromBinary(n,t)}catch(o){const e=o instanceof Error?o.message:String(o);throw new Km(`parse binary: ${e}`,Hm.InvalidArgument)}},serialize(e){try{return e.toBinary(t)}catch(n){const e=n instanceof Error?n.message:String(n);throw new Km(`serialize binary: ${e}`,Hm.Internal)}}}}function ff(e,t){var n,o;const r=null!==(n=null==t?void 0:t.textEncoder)&&void 0!==n?n:new TextEncoder,a=null!==(o=null==t?void 0:t.textDecoder)&&void 0!==o?o:new TextDecoder,s=uf(t);return{parse(t){try{const n=a.decode(t);return e.fromJsonString(n,s)}catch(n){throw Km.from(n,Hm.InvalidArgument)}},serialize(e){try{const t=e.toJsonString(s);return r.encode(t)}catch(t){throw Km.from(t,Hm.Internal)}}}}const pf=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function gf(e,t,n){if(t&&new Headers(t).forEach(((e,t)=>n.metadata.append(t,e))),"object"!=typeof e||null==e||Array.isArray(e)||!("code"in e)||"string"!=typeof e.code)throw n;const o=function(e){if(!Ym){Ym={};for(const e of Object.values(Hm))"string"!=typeof e&&(Ym[qm(e)]=e)}return Ym[e]}(e.code);if(void 0===o)throw n;const r=e.message;if(null!=r&&"string"!=typeof r)throw n;const a=new Km(null!=r?r:"",o,t);if("details"in e&&Array.isArray(e.details))for(const i of e.details){if(null===i||"object"!=typeof i||Array.isArray(i)||"string"!=typeof i.type||"string"!=typeof i.value||"debug"in i&&"object"!=typeof i.debug)throw n;try{a.details.push({type:i.type,value:yh.dec(i.value),debug:i.debug})}catch(s){throw n}}return a}function vf(e){const t=new Km("invalid end stream",Hm.InvalidArgument);let n;try{n=JSON.parse("string"==typeof e?e:(new TextDecoder).decode(e))}catch(r){throw t}if("object"!=typeof n||null==n||Array.isArray(n))throw t;const o=new Headers;if("metadata"in n){if("object"!=typeof n.metadata||null==n.metadata||Array.isArray(n.metadata))throw t;for(const[e,r]of Object.entries(n.metadata)){if(!Array.isArray(r)||r.some((e=>"string"!=typeof e)))throw t;for(const t of r)o.append(e,t)}}return{metadata:o,error:"error"in n?gf(n.error,o,t):void 0}}const xf="Content-Type",yf="Content-Length",bf="Content-Encoding",wf="Accept-Encoding",kf="Connect-Protocol-Version";function Nf(e){const t=new Headers,n=new Headers;return e.forEach(((e,o)=>{o.toLowerCase().startsWith("trailer-")?n.set(o.substring(8),e):t.set(o,e)})),[t,n]}function Ef(e,t,n,o,r){const a=new Headers(null!=o?o:{});return void 0!==n&&a.set("Connect-Timeout-Ms",`${n}`),a.set(xf,e==xm.Unary?t?"application/proto":"application/json":t?"application/connect+proto":"application/connect+json"),a.set(kf,"1"),a}function Cf(e,t,n){const o=function(e){const t=null==e?void 0:e.match(pf);if(!t)return;return{stream:!!t[1],binary:!!t[3]}}(n.get("Content-Type"));if(200!==t){const r=new Km(`HTTP ${t}`,function(e){switch(e){case 400:return Hm.InvalidArgument;case 401:return Hm.Unauthenticated;case 403:return Hm.PermissionDenied;case 404:return Hm.Unimplemented;case 408:return Hm.DeadlineExceeded;case 409:return Hm.Aborted;case 412:return Hm.FailedPrecondition;case 413:case 431:return Hm.ResourceExhausted;case 415:return Hm.Internal;case 429:case 502:case 503:case 504:return Hm.Unavailable;default:return Hm.Unknown}}(t),n);if(e==xm.Unary&&o&&!o.binary)return{isUnaryError:!0,unaryError:r};throw r}return{isUnaryError:!1}}const Sf="application/";function jf(e,t,n){let o="?connect=v1";const r=e.header.get(xf);0===(null==r?void 0:r.indexOf(Sf))&&(o+="&encoding="+encodeURIComponent(r.slice(12)));const a=e.header.get(bf);null!==a&&"identity"!==a&&(o+="&compression="+encodeURIComponent(a),n=!0),n&&(o+="&base64=1"),o+="&message="+function(e,t){return t?yh.enc(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):encodeURIComponent((new TextDecoder).decode(e))}(t,n);const s=e.url+o,i=new Headers(e.header);return[kf,xf,yf,bf,wf].forEach((e=>i.delete(e))),Object.assign(Object.assign({},e),{init:Object.assign(Object.assign({},e.init),{method:"GET"}),url:s,header:i})}function _f(e){const{signal:t,cleanup:n}=function(e){const t=new AbortController,n=()=>{t.abort(new Km("the operation timed out",Hm.DeadlineExceeded))};let o;return void 0!==e&&(e<=0?n():o=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(o)}}(e.timeoutMs),o=function(...e){const t=new AbortController,n=e.filter((e=>void 0!==e)).concat(t.signal);for(const r of n){if(r.aborted){o.apply(r);break}r.addEventListener("abort",o)}function o(){t.signal.aborted||t.abort(rf(this));for(const e of n)e.removeEventListener("abort",o)}return t}(e.signal,t);return[o.signal,function(e){const r=Km.from(t.aborted?rf(t):e);return o.abort(r),n(),Promise.reject(r)},function(){n(),o.abort()}]}var If,Af,Mf,Of,Tf,Df;(Af=If||(If={}))[Af.UNSPECIFIED=0]="UNSPECIFIED",Af[Af.INACTIVE=1]="INACTIVE",Af[Af.PROCESSING=2]="PROCESSING",Af[Af.SUCCESS=3]="SUCCESS",Af[Af.WARNING=4]="WARNING",Af[Af.ERROR=5]="ERROR",pm.util.setEnumType(If,"exa.language_server_pb.CodeiumState",[{no:0,name:"CODEIUM_STATE_UNSPECIFIED"},{no:1,name:"CODEIUM_STATE_INACTIVE"},{no:2,name:"CODEIUM_STATE_PROCESSING"},{no:3,name:"CODEIUM_STATE_SUCCESS"},{no:4,name:"CODEIUM_STATE_WARNING"},{no:5,name:"CODEIUM_STATE_ERROR"}]),(Of=Mf||(Mf={}))[Of.UNSPECIFIED=0]="UNSPECIFIED",Of[Of.SINGLE=1]="SINGLE",Of[Of.MULTI=2]="MULTI",pm.util.setEnumType(Mf,"exa.language_server_pb.LineType",[{no:0,name:"LINE_TYPE_UNSPECIFIED"},{no:1,name:"LINE_TYPE_SINGLE"},{no:2,name:"LINE_TYPE_MULTI"}]),(Df=Tf||(Tf={}))[Df.UNSPECIFIED=0]="UNSPECIFIED",Df[Df.INLINE=1]="INLINE",Df[Df.BLOCK=2]="BLOCK",Df[Df.INLINE_MASK=3]="INLINE_MASK",pm.util.setEnumType(Tf,"exa.language_server_pb.CompletionPartType",[{no:0,name:"COMPLETION_PART_TYPE_UNSPECIFIED"},{no:1,name:"COMPLETION_PART_TYPE_INLINE"},{no:2,name:"COMPLETION_PART_TYPE_BLOCK"},{no:3,name:"COMPLETION_PART_TYPE_INLINE_MASK"}]);const Pf=class e extends Wu{constructor(e){super(),n(this,"threshold",0),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Pf,"runtime",pm),n(Pf,"typeName","exa.language_server_pb.MultilineConfig"),n(Pf,"fields",pm.util.newFieldList((()=>[{no:1,name:"threshold",kind:"scalar",T:2}])));let Rf=Pf;const Ff=class e extends Wu{constructor(e){super(),n(this,"metadata"),n(this,"document"),n(this,"editorOptions"),n(this,"otherDocuments",[]),n(this,"experimentConfig"),n(this,"modelName",""),n(this,"multilineConfig"),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Ff,"runtime",pm),n(Ff,"typeName","exa.language_server_pb.GetCompletionsRequest"),n(Ff,"fields",pm.util.newFieldList((()=>[{no:1,name:"metadata",kind:"message",T:Pm},{no:2,name:"document",kind:"message",T:Zf},{no:3,name:"editor_options",kind:"message",T:Fm},{no:5,name:"other_documents",kind:"message",T:Zf,repeated:!0},{no:7,name:"experiment_config",kind:"message",T:ep},{no:10,name:"model_name",kind:"scalar",T:9},{no:13,name:"multiline_config",kind:"message",T:Rf}])));let Lf=Ff;const zf=class e extends Wu{constructor(e){super(),n(this,"state"),n(this,"completionItems",[]),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(zf,"runtime",pm),n(zf,"typeName","exa.language_server_pb.GetCompletionsResponse"),n(zf,"fields",pm.util.newFieldList((()=>[{no:1,name:"state",kind:"message",T:np},{no:2,name:"completion_items",kind:"message",T:dp,repeated:!0}])));let Bf=zf;const Uf=class e extends Wu{constructor(e){super(),n(this,"metadata"),n(this,"completionId",""),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Uf,"runtime",pm),n(Uf,"typeName","exa.language_server_pb.AcceptCompletionRequest"),n(Uf,"fields",pm.util.newFieldList((()=>[{no:1,name:"metadata",kind:"message",T:Pm},{no:2,name:"completion_id",kind:"scalar",T:9}])));let Vf=Uf;const $f=class e extends Wu{constructor(e){super(),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n($f,"runtime",pm),n($f,"typeName","exa.language_server_pb.AcceptCompletionResponse"),n($f,"fields",pm.util.newFieldList((()=>[])));let Gf=$f;const Hf=class e extends Wu{constructor(e){super(),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Hf,"runtime",pm),n(Hf,"typeName","exa.language_server_pb.GetAuthTokenRequest"),n(Hf,"fields",pm.util.newFieldList((()=>[])));let Wf=Hf;const qf=class e extends Wu{constructor(e){super(),n(this,"authToken",""),n(this,"uuid",""),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(qf,"runtime",pm),n(qf,"typeName","exa.language_server_pb.GetAuthTokenResponse"),n(qf,"fields",pm.util.newFieldList((()=>[{no:1,name:"auth_token",kind:"scalar",T:9},{no:2,name:"uuid",kind:"scalar",T:9}])));let Yf=qf;const Kf=class e extends Wu{constructor(e){super(),n(this,"row",rh.zero),n(this,"col",rh.zero),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Kf,"runtime",pm),n(Kf,"typeName","exa.language_server_pb.DocumentPosition"),n(Kf,"fields",pm.util.newFieldList((()=>[{no:1,name:"row",kind:"scalar",T:4},{no:2,name:"col",kind:"scalar",T:4}])));let Jf=Kf;const Xf=class e extends Wu{constructor(e){super(),n(this,"absolutePath",""),n(this,"relativePath",""),n(this,"text",""),n(this,"editorLanguage",""),n(this,"language",Am.UNSPECIFIED),n(this,"cursorOffset",rh.zero),n(this,"cursorPosition"),n(this,"lineEnding",""),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Xf,"runtime",pm),n(Xf,"typeName","exa.language_server_pb.Document"),n(Xf,"fields",pm.util.newFieldList((()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"relative_path",kind:"scalar",T:9},{no:3,name:"text",kind:"scalar",T:9},{no:4,name:"editor_language",kind:"scalar",T:9},{no:5,name:"language",kind:"enum",T:pm.getEnumType(Am)},{no:6,name:"cursor_offset",kind:"scalar",T:4},{no:8,name:"cursor_position",kind:"message",T:Jf},{no:7,name:"line_ending",kind:"scalar",T:9}])));let Zf=Xf;const Qf=class e extends Wu{constructor(e){super(),n(this,"forceEnableExperiments",[]),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(Qf,"runtime",pm),n(Qf,"typeName","exa.language_server_pb.ExperimentConfig"),n(Qf,"fields",pm.util.newFieldList((()=>[{no:1,name:"force_enable_experiments",kind:"enum",T:pm.getEnumType(km),repeated:!0}])));let ep=Qf;const tp=class e extends Wu{constructor(e){super(),n(this,"state",If.UNSPECIFIED),n(this,"message",""),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(tp,"runtime",pm),n(tp,"typeName","exa.language_server_pb.State"),n(tp,"fields",pm.util.newFieldList((()=>[{no:1,name:"state",kind:"enum",T:pm.getEnumType(If)},{no:2,name:"message",kind:"scalar",T:9}])));let np=tp;const op=class e extends Wu{constructor(e){super(),n(this,"startOffset",rh.zero),n(this,"endOffset",rh.zero),n(this,"startPosition"),n(this,"endPosition"),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(op,"runtime",pm),n(op,"typeName","exa.language_server_pb.Range"),n(op,"fields",pm.util.newFieldList((()=>[{no:1,name:"start_offset",kind:"scalar",T:4},{no:2,name:"end_offset",kind:"scalar",T:4},{no:3,name:"start_position",kind:"message",T:Jf},{no:4,name:"end_position",kind:"message",T:Jf}])));let rp=op;const ap=class e extends Wu{constructor(e){super(),n(this,"text",""),n(this,"deltaCursorOffset",rh.zero),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(ap,"runtime",pm),n(ap,"typeName","exa.language_server_pb.Suffix"),n(ap,"fields",pm.util.newFieldList((()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"delta_cursor_offset",kind:"scalar",T:3}])));let sp=ap;const ip=class e extends Wu{constructor(e){super(),n(this,"text",""),n(this,"offset",rh.zero),n(this,"type",Tf.UNSPECIFIED),n(this,"prefix",""),n(this,"line",rh.zero),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(ip,"runtime",pm),n(ip,"typeName","exa.language_server_pb.CompletionPart"),n(ip,"fields",pm.util.newFieldList((()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"offset",kind:"scalar",T:4},{no:3,name:"type",kind:"enum",T:pm.getEnumType(Tf)},{no:4,name:"prefix",kind:"scalar",T:9},{no:5,name:"line",kind:"scalar",T:4}])));let lp=ip;const cp=class e extends Wu{constructor(e){super(),n(this,"completion"),n(this,"suffix"),n(this,"range"),n(this,"source",_m.UNSPECIFIED),n(this,"completionParts",[]),pm.util.initPartial(e,this)}static fromBinary(t,n){return(new e).fromBinary(t,n)}static fromJson(t,n){return(new e).fromJson(t,n)}static fromJsonString(t,n){return(new e).fromJsonString(t,n)}static equals(t,n){return pm.util.equals(e,t,n)}};n(cp,"runtime",pm),n(cp,"typeName","exa.language_server_pb.CompletionItem"),n(cp,"fields",pm.util.newFieldList((()=>[{no:1,name:"completion",kind:"message",T:Tm},{no:5,name:"suffix",kind:"message",T:sp},{no:2,name:"range",kind:"message",T:rp},{no:3,name:"source",kind:"enum",T:pm.getEnumType(_m)},{no:8,name:"completion_parts",kind:"message",T:lp,repeated:!0}])));let dp=cp;const up={typeName:"exa.language_server_pb.LanguageServerService",methods:{getCompletions:{name:"GetCompletions",I:Lf,O:Bf,kind:xm.Unary},acceptCompletion:{name:"AcceptCompletion",I:Vf,O:Gf,kind:xm.Unary},getAuthToken:{name:"GetAuthToken",I:Wf,O:Yf,kind:xm.Unary}}};var hp=function(e){return this instanceof hp?(this.v=e,this):new hp(e)},mp=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(e,t||[]),a=[];return o={},s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),o[Symbol.asyncIterator]=function(){return this},o;function s(e,t){r[e]&&(o[e]=function(t){return new Promise((function(n,o){a.push([e,t,n,o])>1||i(e,t)}))},t&&(o[e]=t(o[e])))}function i(e,t){try{(n=r[e](t)).value instanceof hp?Promise.resolve(n.value.v).then(l,c):d(a[0][2],n)}catch(o){d(a[0][3],o)}var n}function l(e){i("next",e)}function c(e){i("throw",e)}function d(e,t){e(t),a.shift(),a.length&&i(a[0][0],a[0][1])}};const fp=function(e){var t;!function(){try{new Headers}catch(e){throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}();const n=null!==(t=e.useBinaryFormat)&&void 0!==t&&t;return{async unary(t,o,r,a,s,i,l){var c;const{serialize:d,parse:u}=hf(o,n,e.jsonOptions,e.binaryOptions);return a=void 0===a?e.defaultTimeoutMs:a<=0?void 0:a,await function(e){const t=df(e.next,e.interceptors),[n,o,r]=_f(e);return t(Object.assign(Object.assign({},e.req),{message:lf(e.req.method.I,e.req.message),signal:n})).then((e=>(r(),e)),o)}({interceptors:e.interceptors,signal:r,timeoutMs:a,req:{stream:!1,service:t,method:o,url:sf(e.baseUrl,t,o),init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:Ef(o.kind,n,a,s),contextValues:null!=l?l:af(),message:i},next:async r=>{var a;let s=null;!0===e.useHttpGet&&o.idempotency===bm.NoSideEffects?r=jf(r,d(r.message),n):s=d(r.message);const i=null!==(a=e.fetch)&&void 0!==a?a:globalThis.fetch,l=await i(r.url,Object.assign(Object.assign({},r.init),{headers:r.header,signal:r.signal,body:s})),{isUnaryError:c,unaryError:h}=Cf(o.kind,l.status,l.headers);if(c)throw gf(await l.json(),function(...e){const t=new Headers;for(const n of e)n.forEach(((e,n)=>{t.append(n,e)}));return t}(...Nf(l.headers)),h);const[m,f]=Nf(l.headers);return{stream:!1,service:t,method:o,header:m,message:n?u(new Uint8Array(await l.arrayBuffer())):o.O.fromJson(await l.json(),uf(e.jsonOptions)),trailer:f}}})},async stream(t,o,r,a,s,i,l){var c;const{serialize:d,parse:u}=hf(o,n,e.jsonOptions,e.binaryOptions);function h(e,t,n){return mp(this,arguments,(function*(){const o=function(e){let t,n=new Uint8Array(0);function o(e){const t=new Uint8Array(n.length+e.length);t.set(n),t.set(e,n.length),n=t}return new ReadableStream({start(){t=e.getReader()},async pull(e){let r;for(;;){if(void 0===r&&n.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+n[t];r={flags:n[0],length:e}}if(void 0!==r&&n.byteLength>=r.length+5)break;const e=await t.read();if(e.done)break;o(e.value)}if(void 0===r)return 0==n.byteLength?void e.close():void e.error(new Km("premature end of stream",Hm.DataLoss));const a=n.subarray(5,5+r.length);n=n.subarray(5+r.length),e.enqueue({flags:r.flags,data:a})}})}(e).getReader();let r=!1;for(;;){const e=yield hp(o.read());if(e.done)break;const{flags:a,data:s}=e.value;if(2&~a)yield yield hp(u(s));else{r=!0;const e=vf(s);if(e.error){const t=e.error;throw n.forEach(((e,n)=>{t.metadata.append(n,e)})),t}e.metadata.forEach(((e,n)=>t.set(n,e)))}}if(!r)throw"missing EndStreamResponse"}))}async function m(e){if(o.kind!=xm.ServerStreaming)throw"The fetch API does not support streaming request bodies";const t=await e[Symbol.asyncIterator]().next();if(1==t.done)throw"missing request message";return function(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const o=new DataView(n.buffer,n.byteOffset,n.byteLength);return o.setUint8(0,e),o.setUint32(1,t.length),n}(0,d(t.value))}return a=void 0===a?e.defaultTimeoutMs:a<=0?void 0:a,await function(e){const t=df(e.next,e.interceptors),[n,o,r]=_f(e),a=Object.assign(Object.assign({},e.req),{message:cf(e.req.method.I,e.req.message),signal:n});let s=!1;return n.addEventListener("abort",(function(){var t,n;const o=e.req.message[Symbol.asyncIterator]();s||null===(t=o.throw)||void 0===t||t.call(o,this.reason).catch((()=>{})),null===(n=o.return)||void 0===n||n.call(o).catch((()=>{}))})),t(a).then((e=>Object.assign(Object.assign({},e),{message:{[Symbol.asyncIterator](){const t=e.message[Symbol.asyncIterator]();return{next:()=>t.next().then((e=>(1==e.done&&(s=!0,r()),e)),o)}}}})),o)}({interceptors:e.interceptors,timeoutMs:a,signal:r,req:{stream:!0,service:t,method:o,url:sf(e.baseUrl,t,o),init:{method:"POST",credentials:null!==(c=e.credentials)&&void 0!==c?c:"same-origin",redirect:"error",mode:"cors"},header:Ef(o.kind,n,a,s),contextValues:null!=l?l:af(),message:i},next:async t=>{var n;const r=null!==(n=e.fetch)&&void 0!==n?n:globalThis.fetch,a=await r(t.url,Object.assign(Object.assign({},t.init),{headers:t.header,signal:t.signal,body:await m(t.message)}));if(Cf(o.kind,a.status,a.headers),null===a.body)throw"missing response body";const s=new Headers;return Object.assign(Object.assign({},t),{header:a.headers,trailer:s,message:h(a.body,s,a.headers)})}})}}}({baseUrl:"https://web-backend.codeium.com",useBinaryFormat:!0}),pp=(vp=fp,function(e,t){const n={};for(const[o,r]of Object.entries(e.methods)){const a=t(Object.assign(Object.assign({},r),{localName:o,service:e}));null!=a&&(n[o]=a)}return n}(gp=up,(e=>{switch(e.kind){case xm.Unary:return function(e,t,n){return async function(o,r){var a,s;const i=await e.unary(t,n,null==r?void 0:r.signal,null==r?void 0:r.timeoutMs,null==r?void 0:r.headers,o,null==r?void 0:r.contextValues);return null===(a=null==r?void 0:r.onHeader)||void 0===a||a.call(r,i.header),null===(s=null==r?void 0:r.onTrailer)||void 0===s||s.call(r,i.trailer),i.message}}(vp,gp,e);case xm.ServerStreaming:return function(e,t,n){return function(o,r){return of(e.stream(t,n,null==r?void 0:r.signal,null==r?void 0:r.timeoutMs,null==r?void 0:r.headers,Qm([o]),null==r?void 0:r.contextValues),r)}}(vp,gp,e);case xm.ClientStreaming:return function(e,t,n){return async function(o,r){var a,s,i,l,c,d;const u=await e.stream(t,n,null==r?void 0:r.signal,null==r?void 0:r.timeoutMs,null==r?void 0:r.headers,o,null==r?void 0:r.contextValues);let h;null===(c=null==r?void 0:r.onHeader)||void 0===c||c.call(r,u.header);try{for(var m,f=!0,p=ef(u.message);!(a=(m=await p.next()).done);f=!0)l=m.value,f=!1,h=l}catch(g){s={error:g}}finally{try{f||a||!(i=p.return)||await i.call(p)}finally{if(s)throw s.error}}if(!h)throw new Km("protocol error: missing response message",Hm.Internal);return null===(d=null==r?void 0:r.onTrailer)||void 0===d||d.call(r,u.trailer),h}}(vp,gp,e);case xm.BiDiStreaming:return function(e,t,n){return function(o,r){return of(e.stream(t,n,null==r?void 0:r.signal,null==r?void 0:r.timeoutMs,null==r?void 0:r.headers,o,null==r?void 0:r.contextValues),r)}}(vp,gp,e);default:return null}})));var gp,vp;let xp;try{xp=crypto.randomUUID()}catch{xp=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(e=>(+e^(crypto.getRandomValues(new Uint8Array(1))[0]??0)&15>>+e/4).toString(16)))}()}async function yp(e,t){const n=e.state.facet(zm),{override:o}=e.state.facet(Bm),r=await o(),a=e.state,s=a.selection.main.head,i=a.doc.toString();try{const o=await async function({text:e,cursorOffset:t,config:n,otherDocuments:o}){return await pp.getCompletions({metadata:{ideName:"web",ideVersion:"0.0.5",extensionName:"@valtown/codemirror-codeium",extensionVersion:"1.0.0",apiKey:n.apiKey,sessionId:xp,authSource:n.authSource},document:{text:e,cursorOffset:BigInt(t),language:n.language,editorLanguage:"typescript",lineEnding:"\n"},editorOptions:{tabSize:2n,insertSpaces:!0},otherDocuments:o,multilineConfig:void 0},{headers:{Authorization:`Basic ${n.apiKey}-${xp}`}})}({text:i,cursorOffset:s,config:n,otherDocuments:r});if(!o||0===o.completionItems.length)return;if(void 0!==t&&s!==t||"active"===dn(e.state)||!e.hasFocus)return;const l=o.completionItems.map((e=>{let t=0;return e.completionParts.filter((e=>3!==e.type)).map((e=>{const n=Number(e.offset),o=2===e.type?`\n${e.text}`:e.text,r={absoluteStartPos:t+n,absoluteEndPos:t+n+o.length,from:n,to:n,insert:o};return t+=o.length,r}))})),c=0,d=l.at(c);if(!d)return;const u=un.of(d,a.doc.length),h=u.invert(a.doc);e.dispatch({changes:u,effects:Tu.of({index:c,reverseChangeSet:h,changeSpecs:l}),annotations:[Gm.of(null),$m.of(null),hn.addToHistory.of(!1)]})}catch(l){console.warn("copilot completion failed",l),await new Promise((e=>setTimeout(e,300)))}}function bp(){let e=null,t=0;return Pt.updateListener.of((n=>{const o=n.view.state.facet(zm);if(!o.alwaysOn)return;if(!function(e){return e.docChanged&&!e.transactions.some((e=>e.effects.some((e=>e.is(Du)||e.is(Pu)))))}(n))return;if(e&&clearTimeout(e),function(e){if(!e.view.hasFocus)return!0;if(e.state.field(Vm))return!0;if("active"===dn(e.state))return!0;for(const t of e.transactions)if(void 0!==t.annotation($m))return!0}(n))return;const r=n.state.selection.main.head;o.shouldComplete&&!o.shouldComplete(new mn(n.view.state,r,!1))||(e=setTimeout((async()=>{r===t&&await yp(n.view,t)}),o.timeout),t=r)}))}function wp(e){var t;const n=e.state.field(Vm);if(!n)return!1;const o=null==(t=n.reverseChangeSet)?void 0:t.invert(e.state.doc);e.dispatch({changes:n.reverseChangeSet,effects:Du.of(null),annotations:[Gm.of(null),$m.of(null),hn.addToHistory.of(!1)]});let r=0;return null==o||o.iterChangedRanges(((e,t,n,o)=>{r=o})),e.dispatch({changes:o,selection:Dt.cursor(r),annotations:[$m.of(null),hn.addToHistory.of(!0)]}),!0}const kp=e=>{const{state:t}=e,n=t.field(Vm);if(!n)return!1;const{changeSpecs:o}=n;if(o.length<2)return!1;const r=(n.index+1)%o.length,a=o.at(r);if(!a)return!1;const s=n.reverseChangeSet.apply(t.doc),i=un.of(n.reverseChangeSet,t.doc.length).compose(un.of(a,s.length)),l=un.of(a,s.length).invert(s);return e.dispatch({changes:i,effects:Tu.of({index:r,reverseChangeSet:l,changeSpecs:o}),annotations:[Gm.of(null),$m.of(null),hn.addToHistory.of(!1)]}),!0};function Np(e){const t=e.state.field(Vm);return!!t&&(e.dispatch({changes:t.reverseChangeSet,effects:Pu.of(null),annotations:[Gm.of(null),$m.of(null),hn.addToHistory.of(!1)]}),!1)}function Ep(){return Pt.domEventHandlers({keydown:(e,t)=>("]"!==e.key||!e.ctrlKey)&&("Shift"!==e.key&&"Control"!==e.key&&"Alt"!==e.key&&"Meta"!==e.key&&function(e,t){return!!e.state.field(Vm)&&("Tab"===t?wp(e):Np(e))}(t,e.key)),mouseup(e,t){const n=e.target;return"BUTTON"===n.nodeName&&"codeium-cycle"===n.dataset.action?(kp(t),e.stopPropagation(),e.preventDefault(),!0):function(e){var t,n;let o=!1;const r=null==(t=e.state.selection.asSingle().ranges.at(0))?void 0:t.head,a=e.state.field(Vm);return!(void 0===r||!a)&&(null==(n=a.decorations)||n.between(r,r,(()=>{o=!0})),o)}(t)?wp(t):Np(t)}})}const Cp=e=>{const t=[];return"codeium"===e.copilot&&e.codeium_api_key&&t.push(function(e){return[zm.of(e),Vm,rn.highest(tn.of([{key:"Ctrl-]",run:kp}])),rn.highest(Pt.updateListener.of((e=>{e.focusChanged&&Np(e.view)}))),rn.high(Ep()),bp()]}({apiKey:e.codeium_api_key,language:Am.PYTHON}),Bm.of({override:async()=>[{text:bi(""),language:Am.PYTHON,editorLanguage:"python"}]})),"github"===e.copilot&&t.push(Ou({delay:500,fetchFn:async e=>{if(!ki())return"";if(0===e.doc.length)return"";await new Promise((e=>setTimeout(e,20)));const t=e.doc.toString(),n=function(e,t){const n=e.doc.toString(),o=t.split("\n").length-n.split("\n").length,r=function(e,t){const n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}(e.doc,e.selection.main.head);return r.line+=o,{doc:{source:t,tabSize:e.tabSize,indentSize:1,insertSpaces:!0,path:Ei,version:"replace_me",uri:`file://${Ei}`,relativePath:Ei,languageId:Ci,position:r}}}(e,bi(t)),o=function(e,t,n){if(0===e.completions.length)return"";const{displayText:o,position:r}=e.completions[0],a=r.character-t.character,s=a<0?o.slice(-a):o,i=n.doc.sliceString(n.selection.main.head,n.doc.length);for(let l=0;l<s.length;l++){const e=s.slice(l);if(i.startsWith(e))return s.slice(0,l)}return s}(await Ni().getCompletion(n),n.doc.position,e);return o&&V.debug("Copilot suggestion:",o),o}})),[...t,wi().slice(0,-2)]};const Sp=Lt.mark({class:"underline"}),jp=Rt.define(),_p=Rt.define(),Ip=Ft.define({create:()=>Lt.none,update(e,t){let n=e.map(t.changes);for(const o of t.effects)o.is(jp)?n=e.update({add:[Sp.range(o.value.from,o.value.to)]}):o.is(_p)&&(n=Lt.none);return n},provide:e=>Pt.decorations.from(e)});class Ap{constructor(e,t){this.view=void 0,this.commandClickMode=void 0,this.hoveredRange=void 0,this.onClick=void 0,this.keydown=e=>{"Meta"!==e.key&&"Control"!==e.key||(this.commandClickMode=!0,this.view.dom.addEventListener("mousemove",this.mousemove),this.view.dom.addEventListener("click",this.click))},this.keyup=e=>{"Meta"!==e.key&&"Control"!==e.key||this.exitCommandClickMode()},this.windowBlur=()=>{this.commandClickMode&&this.exitCommandClickMode()},this.mousemove=e=>{if(!e.metaKey&&!e.ctrlKey)return void this.exitCommandClickMode();if(!this.commandClickMode)return void this.clearUnderline();const t=this.view.posAtCoords({x:e.clientX,y:e.clientY});if(null==t)return void this.clearUnderline();const n=fn(this.view.state).cursorAt(t);if("VariableName"===n.name){const{from:e,to:o}=n;if(this.hoveredRange&&this.hoveredRange.from===e&&this.hoveredRange.to===o)return;this.clearUnderline(),this.hoveredRange={from:e,to:o,position:t},this.view.dispatch({effects:jp.of(this.hoveredRange)})}else this.clearUnderline()},this.click=e=>{if(this.hoveredRange){const t=this.view.state.doc.sliceString(this.hoveredRange.from,this.hoveredRange.to);e.preventDefault(),e.stopPropagation(),this.onClick(this.view,t),this.view.dispatch({selection:{head:this.hoveredRange.position,anchor:this.hoveredRange.position}})}},this.view=e,this.commandClickMode=!1,this.hoveredRange=null,this.onClick=t,window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),window.addEventListener("blur",this.windowBlur),window.addEventListener("mouseleave",this.windowBlur)}update(e){}destroy(){window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup),window.removeEventListener("blur",this.windowBlur),window.removeEventListener("mouseleave",this.windowBlur),this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click)}exitCommandClickMode(){this.commandClickMode=!1,this.view.dom.removeEventListener("mousemove",this.mousemove),this.view.dom.removeEventListener("click",this.click),this.clearUnderline()}clearUnderline(){this.hoveredRange&&(this.view.dispatch({effects:_p.of(null)}),this.hoveredRange=null)}}const Mp=({variant:e,settings:t,styles:n})=>{const o=Pt.theme({"&":{backgroundColor:t.background,color:t.foreground},".cm-content":{caretColor:t.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:t.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t.selection},".cm-activeLine":{backgroundColor:t.lineHighlight},".cm-gutters":{backgroundColor:t.gutterBackground,color:t.gutterForeground},".cm-activeLineGutter":{backgroundColor:t.lineHighlight}},{dark:"dark"===e}),r=gn.define(n);return[o,vn(r)]};Mp({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:xn.comment,color:"#404080"},{tag:[xn.string,xn.regexp],color:"#999999"},{tag:xn.number,color:"#7090B0"},{tag:[xn.bool,xn.null],color:"#8080A0"},{tag:[xn.punctuation,xn.derefOperator],color:"#805080"},{tag:xn.keyword,color:"#60B0FF"},{tag:xn.definitionKeyword,color:"#B0FFF0"},{tag:xn.moduleKeyword,color:"#60B0FF"},{tag:xn.operator,color:"#A0A0FF"},{tag:[xn.variableName,xn.self],color:"#008080"},{tag:xn.operatorKeyword,color:"#A0A0FF"},{tag:xn.controlKeyword,color:"#80A0FF"},{tag:xn.className,color:"#70E080"},{tag:[xn.function(xn.propertyName),xn.propertyName],color:"#50A0A0"},{tag:xn.tagName,color:"#009090"},{tag:xn.modifier,color:"#B0FFF0"},{tag:[xn.squareBracket,xn.attributeName],color:"#D0D0FF"}]}),Mp({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:xn.comment,color:"#787b8099"},{tag:xn.string,color:"#86b300"},{tag:xn.regexp,color:"#4cbf99"},{tag:[xn.number,xn.bool,xn.null],color:"#ffaa33"},{tag:xn.variableName,color:"#5c6166"},{tag:[xn.definitionKeyword,xn.modifier],color:"#fa8d3e"},{tag:[xn.keyword,xn.special(xn.brace)],color:"#fa8d3e"},{tag:xn.operator,color:"#ed9366"},{tag:xn.separator,color:"#5c6166b3"},{tag:xn.punctuation,color:"#5c6166"},{tag:[xn.definition(xn.propertyName),xn.function(xn.variableName)],color:"#f2ae49"},{tag:[xn.className,xn.definition(xn.typeName)],color:"#22a4e6"},{tag:[xn.tagName,xn.typeName,xn.self,xn.labelName],color:"#55b4d4"},{tag:xn.angleBracket,color:"#55b4d480"},{tag:xn.attributeName,color:"#f2ae49"}]}),Mp({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:xn.comment,color:"#6E6E6E"},{tag:[xn.string,xn.regexp,xn.special(xn.brace)],color:"#5C81B3"},{tag:xn.number,color:"#C1E1B8"},{tag:xn.bool,color:"#53667D"},{tag:[xn.definitionKeyword,xn.modifier,xn.function(xn.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[xn.keyword,xn.moduleKeyword,xn.operatorKeyword,xn.operator],color:"#697A8E",fontWeight:"bold"},{tag:[xn.variableName,xn.attributeName],color:"#708E67"},{tag:[xn.function(xn.variableName),xn.definition(xn.propertyName),xn.derefOperator],color:"#fff"},{tag:xn.tagName,color:"#A3D295"}]}),Mp({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:xn.comment,color:"#666666"},{tag:[xn.string,xn.special(xn.brace)],color:"#54BE0D"},{tag:xn.regexp,color:"#E9C062"},{tag:xn.number,color:"#CF6A4C"},{tag:[xn.keyword,xn.operator],color:"#5EA6EA"},{tag:xn.variableName,color:"#7587A6"},{tag:[xn.definitionKeyword,xn.modifier],color:"#F9EE98"},{tag:[xn.propertyName,xn.function(xn.variableName)],color:"#937121"},{tag:[xn.typeName,xn.angleBracket,xn.tagName],color:"#9B859D"}]}),Mp({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:xn.comment,color:"#6B4E32"},{tag:[xn.keyword,xn.operator,xn.derefOperator],color:"#EF5D32"},{tag:xn.className,color:"#EFAC32",fontWeight:"bold"},{tag:[xn.typeName,xn.propertyName,xn.function(xn.variableName),xn.definition(xn.variableName)],color:"#EFAC32"},{tag:xn.definition(xn.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:xn.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[xn.number,xn.bool],color:"#6C99BB"},{tag:[xn.variableName,xn.self],color:"#7DAF9C"},{tag:[xn.string,xn.special(xn.brace),xn.regexp],color:"#D9D762"},{tag:[xn.angleBracket,xn.tagName,xn.attributeName],color:"#EFCB43"}]}),Mp({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:xn.comment,color:"#404040"},{tag:[xn.string,xn.special(xn.brace),xn.regexp],color:"#00D8FF"},{tag:xn.number,color:"#E62286"},{tag:[xn.variableName,xn.attributeName,xn.self],color:"#E62286",fontWeight:"bold"},{tag:xn.function(xn.variableName),color:"#fff",fontWeight:"bold"}]}),Mp({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:xn.comment,color:"#BCC8BA"},{tag:[xn.string,xn.special(xn.brace),xn.regexp],color:"#5D90CD"},{tag:[xn.number,xn.bool,xn.null],color:"#46A609"},{tag:xn.keyword,color:"#AF956F"},{tag:[xn.definitionKeyword,xn.modifier],color:"#C52727"},{tag:[xn.angleBracket,xn.tagName,xn.attributeName],color:"#606060"},{tag:xn.self,color:"#000"}]}),Mp({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:xn.comment,color:"#0088FF"},{tag:xn.string,color:"#3AD900"},{tag:xn.regexp,color:"#80FFC2"},{tag:[xn.number,xn.bool,xn.null],color:"#FF628C"},{tag:[xn.definitionKeyword,xn.modifier],color:"#FFEE80"},{tag:xn.variableName,color:"#CCCCCC"},{tag:xn.self,color:"#FF80E1"},{tag:[xn.className,xn.definition(xn.propertyName),xn.function(xn.variableName),xn.definition(xn.typeName),xn.labelName],color:"#FFDD00"},{tag:[xn.keyword,xn.operator],color:"#FF9D00"},{tag:[xn.propertyName,xn.typeName],color:"#80FFBB"},{tag:xn.special(xn.brace),color:"#EDEF7D"},{tag:xn.attributeName,color:"#9EFFFF"},{tag:xn.derefOperator,color:"#fff"}]}),Mp({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:xn.comment,color:"#AEAEAE"},{tag:[xn.string,xn.special(xn.brace),xn.regexp],color:"#8DFF8E"},{tag:[xn.className,xn.definition(xn.propertyName),xn.function(xn.variableName),xn.function(xn.definition(xn.variableName)),xn.definition(xn.typeName)],color:"#A3EBFF"},{tag:[xn.number,xn.bool,xn.null],color:"#62E9BD"},{tag:[xn.keyword,xn.operator],color:"#2BF1DC"},{tag:[xn.definitionKeyword,xn.modifier],color:"#F8FBB1"},{tag:[xn.variableName,xn.self],color:"#B683CA"},{tag:[xn.angleBracket,xn.tagName,xn.typeName,xn.propertyName],color:"#60A4F1"},{tag:xn.derefOperator,color:"#E0E0E0"},{tag:xn.attributeName,color:"#7BACCA"}]}),Mp({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:xn.comment,color:"#6272a4"},{tag:[xn.string,xn.special(xn.brace)],color:"#f1fa8c"},{tag:[xn.number,xn.self,xn.bool,xn.null],color:"#bd93f9"},{tag:[xn.keyword,xn.operator],color:"#ff79c6"},{tag:[xn.definitionKeyword,xn.typeName],color:"#8be9fd"},{tag:xn.definition(xn.typeName),color:"#f8f8f2"},{tag:[xn.className,xn.definition(xn.propertyName),xn.function(xn.variableName),xn.attributeName],color:"#50fa7b"}]}),Mp({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:xn.comment,color:"#AAAAAA"},{tag:[xn.keyword,xn.operator,xn.typeName,xn.tagName,xn.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[xn.attributeName,xn.definition(xn.propertyName)],color:"#4F9FD0"},{tag:[xn.className,xn.string,xn.special(xn.brace)],color:"#CF4F5F"},{tag:xn.number,color:"#CF4F5F",fontWeight:"bold"},{tag:xn.variableName,fontWeight:"bold"}]}),Mp({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:xn.comment,color:"#9995b7"},{tag:xn.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[xn.definitionKeyword,xn.modifier],color:"#ff5792"},{tag:[xn.className,xn.tagName,xn.definition(xn.typeName)],color:"#0094f0"},{tag:[xn.number,xn.bool,xn.null,xn.special(xn.brace)],color:"#5842ff"},{tag:[xn.definition(xn.propertyName),xn.function(xn.variableName)],color:"#0095a8"},{tag:xn.typeName,color:"#b3694d"},{tag:[xn.propertyName,xn.variableName],color:"#fa8900"},{tag:xn.operator,color:"#ff5792"},{tag:xn.self,color:"#e64100"},{tag:[xn.string,xn.regexp],color:"#00b368"},{tag:[xn.paren,xn.bracket],color:"#0431fa"},{tag:xn.labelName,color:"#00bdd6"},{tag:xn.attributeName,color:"#e64100"},{tag:xn.angleBracket,color:"#9995b7"}]}),Mp({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:xn.comment,color:"#9893a5"},{tag:[xn.bool,xn.null],color:"#286983"},{tag:xn.number,color:"#d7827e"},{tag:xn.className,color:"#d7827e"},{tag:[xn.angleBracket,xn.tagName,xn.typeName],color:"#56949f"},{tag:xn.attributeName,color:"#907aa9"},{tag:xn.punctuation,color:"#797593"},{tag:[xn.keyword,xn.modifier],color:"#286983"},{tag:[xn.string,xn.regexp],color:"#ea9d34"},{tag:xn.variableName,color:"#d7827e"}]}),Mp({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:xn.comment,color:"#CFCFCF"},{tag:[xn.number,xn.bool,xn.null],color:"#E66C29"},{tag:[xn.className,xn.definition(xn.propertyName),xn.function(xn.variableName),xn.labelName,xn.definition(xn.typeName)],color:"#2EB43B"},{tag:xn.keyword,color:"#D8B229"},{tag:xn.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[xn.definitionKeyword,xn.modifier],color:"#925A47"},{tag:xn.string,color:"#704D3D"},{tag:xn.typeName,color:"#2F8996"},{tag:[xn.variableName,xn.propertyName],color:"#77ACB0"},{tag:xn.self,color:"#77ACB0",fontWeight:"bold"},{tag:xn.regexp,color:"#E3965E"},{tag:[xn.tagName,xn.angleBracket],color:"#BAA827"},{tag:xn.attributeName,color:"#B06520"},{tag:xn.derefOperator,color:"#000"}]}),Mp({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:xn.comment,color:"#93A1A1"},{tag:xn.string,color:"#2AA198"},{tag:xn.regexp,color:"#D30102"},{tag:xn.number,color:"#D33682"},{tag:xn.variableName,color:"#268BD2"},{tag:[xn.keyword,xn.operator,xn.punctuation],color:"#859900"},{tag:[xn.definitionKeyword,xn.modifier],color:"#073642",fontWeight:"bold"},{tag:[xn.className,xn.self,xn.definition(xn.propertyName)],color:"#268BD2"},{tag:xn.function(xn.variableName),color:"#268BD2"},{tag:[xn.bool,xn.null],color:"#B58900"},{tag:xn.tagName,color:"#268BD2",fontWeight:"bold"},{tag:xn.angleBracket,color:"#93A1A1"},{tag:xn.attributeName,color:"#93A1A1"},{tag:xn.typeName,color:"#859900"}]}),Mp({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:xn.comment,color:"#8E908C"},{tag:[xn.variableName,xn.self,xn.propertyName,xn.attributeName,xn.regexp],color:"#C82829"},{tag:[xn.number,xn.bool,xn.null],color:"#F5871F"},{tag:[xn.className,xn.typeName,xn.definition(xn.typeName)],color:"#C99E00"},{tag:[xn.string,xn.special(xn.brace)],color:"#718C00"},{tag:xn.operator,color:"#3E999F"},{tag:[xn.definition(xn.propertyName),xn.function(xn.variableName)],color:"#4271AE"},{tag:xn.keyword,color:"#8959A8"},{tag:xn.derefOperator,color:"#4D4D4C"}]});const Op=Mp({variant:"light",settings:{background:"#ffffff",foreground:"#000000",caret:"#000000",selection:"#d7d4f0",lineHighlight:"#cceeff44",gutterBackground:"var(--color-background)",gutterForeground:"var(--gray-10)"},styles:[{tag:xn.comment,color:"#708090"},{tag:xn.variableName,color:"#000000"},{tag:[xn.string,xn.special(xn.brace)],color:"#a11"},{tag:xn.number,color:"#164"},{tag:xn.bool,color:"#219"},{tag:xn.null,color:"#219"},{tag:xn.keyword,color:"#708",fontWeight:500},{tag:xn.className,color:"#00f"},{tag:xn.definition(xn.typeName),color:"#00f"},{tag:xn.typeName,color:"#085"},{tag:xn.angleBracket,color:"#000000"},{tag:xn.tagName,color:"#170"},{tag:xn.attributeName,color:"#00c"},{tag:xn.operator,color:"#a2f",fontWeight:500},{tag:[xn.function(xn.variableName)],color:"#00c"},{tag:[xn.propertyName],color:"#05a"}]}),Tp=e=>{const{theme:t,hotkeys:n,completionConfig:o}=e;return[Pt.lineWrapping,wn(),kn(),Nn(),En(),Cn(),Sn(),jn(),_n({position:"fixed",parent:document.querySelector("#App")??void 0}),In(),"dark"===t?An:Op,Mn(),Cp(o),On(),Tn(),rn.high(tn.of(Dn)),Pn(),Rn(),Fn.of("    "),vn(Ln,{fallback:!0}),tn.of(zn),Bn(e),Un.of(Vn()),$n.allowMultipleSelections.of(!0),ku(n),tn.of([{key:"Tab",run:e=>Gn(e)||(e=>{const{from:t,to:n}=e.state.selection.main;if(t!==n)return!1;const o=e.state.doc.lineAt(n);return""!==o.text.slice(0,n-o.from).trim()&&Yn(e)})(e)||Hn(e),preventDefault:!0}]),tn.of([...Wn,qn])]};function Dp(e){const t=e.current;if(null===t)throw new ReferenceError("Attempting to dereference null object.");return t}const Pp="ContextMenu",[Rp,Fp]=Kn(Pp,[Jn]),Lp=Jn(),[zp,Bp]=Rp(Pp),Up=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,disabled:o=!1,...a}=e,s=Bp("ContextMenuTrigger",n),i=Lp(n),l=r.useRef({x:0,y:0}),c=r.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...l.current})}),d=r.useRef(0),u=r.useCallback((()=>window.clearTimeout(d.current)),[]),h=e=>{l.current={x:e.clientX,y:e.clientY},s.onOpenChange(!0)};return r.useEffect((()=>u),[u]),r.useEffect((()=>{o&&u()}),[o,u]),r.createElement(r.Fragment,null,r.createElement(uo,Zn({},i,{virtualRef:c})),r.createElement(ho.span,Zn({"data-state":s.open?"open":"closed","data-disabled":o?"":void 0},a,{ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:o?e.onContextMenu:mo(e.onContextMenu,(e=>{u(),h(e),e.preventDefault()})),onPointerDown:o?e.onPointerDown:mo(e.onPointerDown,Vp((e=>{u(),d.current=window.setTimeout((()=>h(e)),700)}))),onPointerMove:o?e.onPointerMove:mo(e.onPointerMove,Vp(u)),onPointerCancel:o?e.onPointerCancel:mo(e.onPointerCancel,Vp(u)),onPointerUp:o?e.onPointerUp:mo(e.onPointerUp,Vp(u))})))}));function Vp(e){return t=>"mouse"!==t.pointerType?e(t):void 0}const $p=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Bp("ContextMenuContent",n),s=Lp(n),i=r.useRef(!1);return r.createElement(Qn,Zn({},s,o,{ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var n;null===(n=e.onCloseAutoFocus)||void 0===n||n.call(e,t),!t.defaultPrevented&&i.current&&t.preventDefault(),i.current=!1},onInteractOutside:t=>{var n;null===(n=e.onInteractOutside)||void 0===n||n.call(e,t),t.defaultPrevented||a.modal||(i.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),Gp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(eo,Zn({},a,o,{ref:t}))})),Hp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(to,Zn({},a,o,{ref:t}))})),Wp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(no,Zn({},a,o,{ref:t}))})),qp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(oo,Zn({},a,o,{ref:t}))})),Yp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(io,Zn({},a,o,{ref:t}))})),Kp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(ro,Zn({},a,o,{ref:t}))})),Jp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(ao,Zn({},a,o,{ref:t}))})),Xp=r.forwardRef(((e,t)=>{const{__scopeContextMenu:n,...o}=e,a=Lp(n);return r.createElement(so,Zn({},a,o,{ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))})),Zp=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:o,dir:a,modal:s=!0}=e,[i,l]=r.useState(!1),c=Lp(t),d=lo(o),u=r.useCallback((e=>{l(e),d(e)}),[d]);return r.createElement(zp,{scope:t,open:i,onOpenChange:u,modal:s},r.createElement(co,Zn({},c,{dir:a,open:i,onOpenChange:u,modal:s}),n))},Qp=Up,eg=fo((e=>{const{__scopeContextMenu:t,...n}=e,o=Lp(t);return r.createElement(Xn,Zn({},o,n))}));r.forwardRef(((e,t)=>{const n=m(14);let o,r,a,s,i,l,c;return n[0]!==e?(({className:o,inset:r,children:s,...a}=e),n[0]=e,n[1]=o,n[2]=r,n[3]=a,n[4]=s):(o=n[1],r=n[2],a=n[3],s=n[4]),n[5]!==o||n[6]!==r?(i=po({className:o,inset:r}),n[5]=o,n[6]=r,n[7]=i):i=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(ko,{className:"ml-auto h-4 w-4"}),n[8]=l):l=n[8],n[9]!==t||n[10]!==i||n[11]!==a||n[12]!==s?(c=p.jsxs(Jp,{ref:t,className:i,...a,children:[s,l]}),n[9]=t,n[10]=i,n[11]=a,n[12]=s,n[13]=c):c=n[13],c})).displayName=Jp.displayName;const tg="data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2";r.forwardRef(((e,t)=>{const n=m(9);let o,r,a,s;return n[0]!==e?(({className:o,...r}=e),n[0]=e,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(a=Ht(go({subcontent:!0}),tg,o),n[3]=o,n[4]=a):a=n[4],n[5]!==t||n[6]!==a||n[7]!==r?(s=p.jsx(Xp,{ref:t,className:a,...r}),n[5]=t,n[6]=a,n[7]=r,n[8]=s):s=n[8],s})).displayName=Xp.displayName;const ng=r.forwardRef(((e,t)=>{const n=m(9);let o,r,a,s;return n[0]!==e?(({className:o,...r}=e),n[0]=e,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(a=Ht(go(),tg,o),n[3]=o,n[4]=a):a=n[4],n[5]!==t||n[6]!==a||n[7]!==r?(s=p.jsx(eg,{children:p.jsx(vo,{children:p.jsx($p,{ref:t,className:a,...r})})}),n[5]=t,n[6]=a,n[7]=r,n[8]=s):s=n[8],s}));ng.displayName=$p.displayName;const og=r.forwardRef(((e,t)=>{const n=m(13);let o,r,a,s,i,l;return n[0]!==e?(({className:o,inset:r,variant:a,...s}=e),n[0]=e,n[1]=o,n[2]=r,n[3]=a,n[4]=s):(o=n[1],r=n[2],a=n[3],s=n[4]),n[5]!==o||n[6]!==r||n[7]!==a?(i=xo({className:o,inset:r,variant:a}),n[5]=o,n[6]=r,n[7]=a,n[8]=i):i=n[8],n[9]!==t||n[10]!==i||n[11]!==s?(l=p.jsx(Hp,{ref:t,className:i,...s}),n[9]=t,n[10]=i,n[11]=s,n[12]=l):l=n[12],l}));og.displayName=Hp.displayName;r.forwardRef(((e,t)=>{const n=m(15);let o,r,a,s,i,l,c,d;return n[0]!==e?(({className:o,children:s,checked:r,...a}=e),n[0]=e,n[1]=o,n[2]=r,n[3]=a,n[4]=s):(o=n[1],r=n[2],a=n[3],s=n[4]),n[5]!==o?(i=yo({className:o}),n[5]=o,n[6]=i):i=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=yo(),n[7]=l):l=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx("span",{className:l,children:p.jsx(Yp,{children:p.jsx(No,{className:"h-4 w-4"})})}),n[8]=c):c=n[8],n[9]!==t||n[10]!==i||n[11]!==r||n[12]!==a||n[13]!==s?(d=p.jsxs(Wp,{ref:t,className:i,checked:r,...a,children:[c,s]}),n[9]=t,n[10]=i,n[11]=r,n[12]=a,n[13]=s,n[14]=d):d=n[14],d})).displayName=Wp.displayName;r.forwardRef(((e,t)=>{const n=m(13);let o,r,a,s,i,l,c;return n[0]!==e?(({className:o,children:a,...r}=e),n[0]=e,n[1]=o,n[2]=r,n[3]=a):(o=n[1],r=n[2],a=n[3]),n[4]!==o?(s=yo({className:o}),n[4]=o,n[5]=s):s=n[5],n[6]===Symbol.for("react.memo_cache_sentinel")?(i=yo(),n[6]=i):i=n[6],n[7]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx("span",{className:i,children:p.jsx(Yp,{children:p.jsx(Eo,{className:"h-4 w-4 fill-current"})})}),n[7]=l):l=n[7],n[8]!==t||n[9]!==s||n[10]!==r||n[11]!==a?(c=p.jsxs(qp,{ref:t,className:s,...r,children:[l,a]}),n[8]=t,n[9]=s,n[10]=r,n[11]=a,n[12]=c):c=n[12],c})).displayName=qp.displayName;r.forwardRef(((e,t)=>{const n=m(11);let o,r,a,s,i;return n[0]!==e?(({className:o,inset:r,...a}=e),n[0]=e,n[1]=o,n[2]=r,n[3]=a):(o=n[1],r=n[2],a=n[3]),n[4]!==o||n[5]!==r?(s=bo({className:o,inset:r}),n[4]=o,n[5]=r,n[6]=s):s=n[6],n[7]!==t||n[8]!==s||n[9]!==a?(i=p.jsx(Gp,{ref:t,className:s,...a}),n[7]=t,n[8]=s,n[9]=a,n[10]=i):i=n[10],i})).displayName=Gp.displayName;const rg=r.forwardRef(((e,t)=>{const n=m(9);let o,r,a,s;return n[0]!==e?(({className:o,...r}=e),n[0]=e,n[1]=o,n[2]=r):(o=n[1],r=n[2]),n[3]!==o?(a=Ht(wo({className:o})),n[3]=o,n[4]=a):a=n[4],n[5]!==t||n[6]!==a||n[7]!==r?(s=p.jsx(Kp,{ref:t,className:a,...r}),n[5]=t,n[6]=a,n[7]=r,n[8]=s):s=n[8],s}));rg.displayName=Kp.displayName;const ag=e=>{const t=m(14),{appClosed:n,onClick:o,tooltipContent:r}=e;let a;t[0]!==o?(a=()=>null==o?void 0:o({code:""}),t[0]=o,t[1]=a):a=t[1];const s=n&&" inactive-button";let i,l,c,d,u;return t[2]!==s?(i=Ht("shoulder-button hover-action",s),t[2]=s,t[3]=i):i=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(Co,{strokeWidth:1.8}),t[4]=l):l=t[4],t[5]!==a||t[6]!==i?(c=p.jsx(ai,{onClick:a,className:i,onMouseDown:Ge.preventFocus,shape:"circle",size:"small",color:"hint-green","data-testid":"create-cell-button",children:l}),t[5]=a,t[6]=i,t[7]=c):c=t[7],t[8]!==r||t[9]!==c?(d=p.jsx(g,{content:r,usePortal:!1,children:c}),t[8]=r,t[9]=c,t[10]=d):d=t[10],t[11]!==o||t[12]!==d?(u=p.jsx(sg,{onClick:o,children:d}),t[11]=o,t[12]=d,t[13]=u):u=t[13],u},sg=e=>{const t=m(24),{children:n,onClick:o}=e;if(!o)return n;let r,a,s,i,l,c,d,u,h,f,g,v;return t[0]!==n?(r=p.jsx(Qp,{children:n}),t[0]=n,t[1]=r):r=t[1],t[2]!==o?(a=e=>{e.stopPropagation(),o({code:""})},t[2]=o,t[3]=a):a=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx("div",{className:"mr-3",children:p.jsx(di,{})}),t[4]=s):s=t[4],t[5]!==a?(i=p.jsxs(og,{onSelect:a,children:[s,"Python cell"]},"python"),t[5]=a,t[6]=i):i=t[6],t[7]!==o?(l=e=>{e.stopPropagation(),o({code:(new So).defaultCode})},t[7]=o,t[8]=l):l=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx("div",{className:"mr-3",children:p.jsx(ci,{})}),t[9]=c):c=t[9],t[10]!==l?(d=p.jsxs(og,{onSelect:l,children:[c,"Markdown cell"]},"markdown"),t[10]=l,t[11]=d):d=t[11],t[12]!==o?(u=e=>{e.stopPropagation(),o({code:(new jo).defaultCode})},t[12]=o,t[13]=u):u=t[13],t[14]===Symbol.for("react.memo_cache_sentinel")?(h=p.jsx("div",{className:"mr-3",children:p.jsx(ue,{size:13,strokeWidth:1.5})}),t[14]=h):h=t[14],t[15]!==u?(f=p.jsxs(og,{onSelect:u,children:[h,"SQL cell"]},"sql"),t[15]=u,t[16]=f):f=t[16],t[17]!==i||t[18]!==d||t[19]!==f?(g=p.jsxs(ng,{children:[i,d,f]}),t[17]=i,t[18]=d,t[19]=f,t[20]=g):g=t[20],t[21]!==r||t[22]!==g?(v=p.jsxs(Zp,{children:[r,g]}),t[21]=r,t[22]=g,t[23]=v):v=t[23],v},ig=_o("rounded-full shadow-xsSolid border p-[5px] transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 [&>svg]:size-3 active:shadow-none bg-background",{variants:{variant:{default:"hover:bg-accent hover:text-accent-foreground",stale:"bg-[var(--yellow-3)] hover:bg-[var(--yellow-4)] text-[var(--yellow-11)]",green:"hover:bg-[var(--grass-2)] hover:text-[var(--grass-11)] hover:border-[var(--grass-7)],",disabled:"opacity-50 cursor-not-allowed",danger:"hover:bg-[var(--red-3)] hover:text-[var(--red-11)]"}},defaultVariants:{variant:"default"}}),lg=e=>{const t=m(21);let n,o,r,a,s;t[0]!==e?(({children:a,tooltip:s,disabled:n,variant:r,...o}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=a,t[5]=s):(n=t[1],o=t[2],r=t[3],a=t[4],s=t[5]);const i=void 0!==n&&n;let l,c,d;t[6]!==i||t[7]!==o.onClick?(l=e=>{var t;i||null==(t=o.onClick)||t.call(o,e)},t[6]=i,t[7]=o.onClick,t[8]=l):l=t[8],t[9]!==r||t[10]!==o.className?(c=Ht(ig({variant:r}),o.className),t[9]=r,t[10]=o.className,t[11]=c):c=t[11],t[12]!==i||t[13]!==o||t[14]!==l||t[15]!==c||t[16]!==a?(d=p.jsx("button",{disabled:i,...o,onClick:l,onMouseDown:Ge.preventFocus,className:c,children:a}),t[12]=i,t[13]=o,t[14]=l,t[15]=c,t[16]=a,t[17]=d):d=t[17];const u=d;if(s){let e;return t[18]!==s||t[19]!==u?(e=p.jsx(g,{content:s,side:"top",delayDuration:200,usePortal:!1,children:u}),t[18]=s,t[19]=u,t[20]=e):e=t[20],e}return u},cg=({children:e,className:t})=>p.jsx($c,{className:Ht("flex items-center gap-1 bg-background m-[2px] rounded-full",t),children:e});const dg=e=>{const t=m(22),{onClick:n,appClosed:o,needsRun:r,status:a,config:s,edited:i}=e,l="disabled-transitively"===a,c="running"===a||"queued"===a,d=o||c||!s.disabled&&l&&!i;let u;t[0]!==o||t[1]!==r||t[2]!==c||t[3]!==d?(u=function(e,t,n,o){return e?"disabled":t&&!n?"stale":n||o?"disabled":"green"}(o,r,c,d),t[0]=o,t[1]=r,t[2]=c,t[3]=d,t[4]=u):u=t[4];const h=u;if(s.disabled){let e,o;return t[5]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Xl,{}),t[5]=e):e=t[5],t[6]!==d||t[7]!==n||t[8]!==h?(o=p.jsx(lg,{tooltip:"Add code to notebook",disabled:d,onClick:n,variant:h,"data-testid":"run-button",children:e}),t[6]=d,t[7]=n,t[8]=h,t[9]=o):o=t[9],o}if(!s.disabled&&l&&!i){let e,o;return t[10]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(pc,{strokeWidth:1.2}),t[10]=e):e=t[10],t[11]!==d||t[12]!==n||t[13]!==h?(o=p.jsx(lg,{disabled:d,tooltip:"This cell can't be run because it has a disabled ancestor",onClick:n,variant:h,"data-testid":"run-button",children:e}),t[11]=d,t[12]=n,t[13]=h,t[14]=o):o=t[14],o}let f,g,v;if(o)f="App disconnected";else if("queued"===a)f="This cell is already queued to run";else if("running"===a)f="This cell is already running.";else{let e;t[15]===Symbol.for("react.memo_cache_sentinel")?(e=ri("cell.run"),t[15]=e):e=t[15],f=e}return t[16]===Symbol.for("react.memo_cache_sentinel")?(g=p.jsx(pc,{strokeWidth:1.2}),t[16]=g):g=t[16],t[17]!==f||t[18]!==d||t[19]!==n||t[20]!==h?(v=p.jsx(lg,{tooltip:f,disabled:d,onClick:n,variant:h,"data-testid":"run-button",children:g}),t[17]=f,t[18]=d,t[19]=n,t[20]=h,t[21]=v):v=t[21],v},ug=e=>{const t=m(10),{status:n,appClosed:o,onClick:r}=e;let a;a=o?"App disconnected":"running"===n?"A cell can't be deleted when it's running":"queued"===n?"A cell can't be deleted when it's queued to run":"Delete";const s=a,i=(o||("running"===n||"queued"===n))&&"inactive-button";let l,c,d,u,h;return t[0]!==i?(l=Ht("hover:bg-transparent text-destructive/60 hover:text-destructive",i),t[0]=i,t[1]=l):l=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(c={boxShadow:"none"},d=p.jsx(ye,{size:14}),t[2]=c,t[3]=d):(c=t[2],d=t[3]),t[4]!==r||t[5]!==l?(u=p.jsx(v,{variant:"ghost",size:"icon",onClick:r,"data-testid":"delete-button",onMouseDown:Ge.preventFocus,className:l,style:c,children:d}),t[4]=r,t[5]=l,t[6]=u):u=t[6],t[7]!==a||t[8]!==u?(h=p.jsx(g,{content:s,usePortal:!1,children:u}),t[7]=a,t[8]=u,t[9]=h):h=t[9],h};const hg=e=>{const t=m(27),{editing:n,status:o,disabled:r,staleInputs:a,edited:s,interrupted:i,elapsedTime:l,runStartTimestamp:c,uninstantiated:d}=e;if(!n)return null;if(r&&"running"===o)return V.error("CellStatusComponent: disabled and running"),null;if(r&&a){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(g,{content:"This cell is stale, but it's disabled and can't be run",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:p.jsxs(ed,{children:[p.jsx(Il,{className:"h-5 w-5",strokeWidth:1.5}),p.jsx(Ao,{className:"h-3 w-3",strokeWidth:2.5})]})})}),t[0]=e):e=t[0],e}if(r){let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(g,{content:"This cell is disabled",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon cell-status-disabled","data-testid":"cell-status","data-status":"disabled",children:p.jsx(Il,{className:"h-5 w-5",strokeWidth:1.5})})}),t[1]=e):e=t[1],e}if(!a&&"disabled-transitively"===o){let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(g,{content:"An ancestor of this cell is disabled, so it can't be run",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"disabled-transitively",children:p.jsxs(ed,{layerTop:!0,children:[p.jsx(Lc,{className:"h-5 w-5",strokeWidth:1.5}),p.jsx(Il,{className:"h-3 w-3",strokeWidth:2.5})]})})}),t[2]=e):e=t[2],e}if(a&&"disabled-transitively"===o){let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(g,{content:"This cell is stale, but an ancestor is disabled so it can't be run",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon cell-status-stale","data-testid":"cell-status","data-status":"stale",children:p.jsxs(ed,{children:[p.jsx(Ao,{className:"h-5 w-5",strokeWidth:1}),p.jsx(Il,{className:"h-3 w-3",strokeWidth:2.5})]})})}),t[3]=e):e=t[3],e}if("running"===o){let e,n;return t[4]!==c?(e=Io.fromSeconds(c)||Io.now(),t[4]=c,t[5]=e):e=t[5],t[6]!==e?(n=p.jsx(g,{content:"This cell is running",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon elapsed-time running","data-testid":"cell-status","data-status":"running",children:p.jsx(fg,{startTime:e})})}),t[6]=e,t[7]=n):n=t[7],n}if("queued"===o){let e;return t[8]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(g,{content:"This cell is queued to run",usePortal:!1,children:p.jsx("div",{className:"cell-status-icon cell-status-queued","data-testid":"cell-status","data-status":"queued",children:p.jsx(Ji,{className:"h-5 w-5",strokeWidth:1.5})})}),t[8]=e):e=t[8],e}if(s||i||a||d){let e;t[9]!==l?(e=mg(l),t[9]=l,t[10]=e):e=t[10];const n=e;let o,r,a,c,u,h="";return d?o="This cell has not yet been run":i?(o="This cell was interrupted when it was last run",h=`This cell ran for ${n} before being interrupted`):s?(o="This cell has been modified since it was last run",h=`This cell took ${n} to run`):(o="This cell has not been run with the latest inputs",h=`This cell took ${n} to run`),t[11]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx("div",{className:"cell-status-stale","data-testid":"cell-status","data-status":"outdated",children:p.jsx(Ao,{className:"h-5 w-5",strokeWidth:1.5})}),t[11]=r):r=t[11],t[12]!==o?(a=p.jsx(g,{content:o,usePortal:!1,children:r}),t[12]=o,t[13]=a):a=t[13],t[14]!==n||t[15]!==h?(c=n&&p.jsx(g,{content:h,usePortal:!1,children:p.jsx("div",{className:"elapsed-time hover-action","data-testid":"cell-status","data-status":"outdated",children:p.jsx("span",{children:n})})}),t[14]=n,t[15]=h,t[16]=c):c=t[16],t[17]!==a||t[18]!==c?(u=p.jsxs("div",{className:"cell-status-icon flex items-center gap-2",children:[a,c]}),t[17]=a,t[18]=c,t[19]=u):u=t[19],u}if(null!==l){let e;t[20]!==l?(e=mg(l),t[20]=l,t[21]=e):e=t[21];const n=e,o=`This cell took ${n} to run`;let r,a;return t[22]!==n?(r=p.jsx("div",{className:"cell-status-icon elapsed-time hover-action","data-testid":"cell-status","data-status":"idle",children:p.jsx("span",{children:n})}),t[22]=n,t[23]=r):r=t[23],t[24]!==o||t[25]!==r?(a=p.jsx(g,{content:o,usePortal:!1,children:r}),t[24]=o,t[25]=r,t[26]=a):a=t[26],a}return null};function mg(e){if(null===e)return"";if(e>6e4){const t=(e/6e4).toFixed(0),n=(e%6e4/1e3).toFixed(0);return`${t.toString()}m${n.toString()}s`}return e>1e3?`${(e/1e3).toFixed(2).toString()}s`:`${e.toFixed(0).toString()}ms`}const fg=e=>{const t=m(6);let n;t[0]!==e.startTime?(n=e.startTime.toMilliseconds(),t[0]=e.startTime,t[1]=n):n=t[1];const o=function(e){const t=r.useRef(e),[n,o]=r.useState(e);return r.useEffect((()=>{const e=setInterval((()=>{o(Io.now().toMilliseconds())}),17);return()=>clearInterval(e)}),[]),n-t.current}(n);let a,s;return t[2]!==o?(a=mg(o),t[2]=o,t[3]=a):a=t[3],t[4]!==a?(s=p.jsx("span",{children:a}),t[4]=a,t[5]=s):s=t[5],s};function pg(...e){return t=>{e.forEach((e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)}))}}const gg={display:"none"};function vg(e){let{id:t,value:n}=e;return u.createElement("div",{id:t,style:gg},n)}function xg(e){let{id:t,announcement:n,ariaLiveType:o="assertive"}=e;return u.createElement("div",{id:t,style:{position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},n)}const yg=r.createContext(null);const bg={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},wg={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function kg(e){let{announcements:t=wg,container:n,hiddenTextDescribedById:o,screenReaderInstructions:a=bg}=e;const{announce:s,announcement:i}=function(){const[e,t]=r.useState("");return{announce:r.useCallback((e=>{null!=e&&t(e)}),[]),announcement:e}}(),l=Fo("DndLiveRegion"),[c,d]=r.useState(!1);if(r.useEffect((()=>{d(!0)}),[]),function(e){const t=r.useContext(yg);r.useEffect((()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)}),[e,t])}(r.useMemo((()=>({onDragStart(e){let{active:n}=e;s(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:o}=e;t.onDragMove&&s(t.onDragMove({active:n,over:o}))},onDragOver(e){let{active:n,over:o}=e;s(t.onDragOver({active:n,over:o}))},onDragEnd(e){let{active:n,over:o}=e;s(t.onDragEnd({active:n,over:o}))},onDragCancel(e){let{active:n,over:o}=e;s(t.onDragCancel({active:n,over:o}))}})),[s,t])),!c)return null;const h=u.createElement(u.Fragment,null,u.createElement(vg,{id:o,value:a.draggable}),u.createElement(xg,{id:l,announcement:i}));return n?zo.createPortal(h,n):h}var Ng,Eg;function Cg(){}function Sg(e,t){return r.useMemo((()=>({sensor:e,options:null!=t?t:{}})),[e,t])}(Eg=Ng||(Ng={})).DragStart="dragStart",Eg.DragMove="dragMove",Eg.DragEnd="dragEnd",Eg.DragCancel="dragCancel",Eg.DragOver="dragOver",Eg.RegisterDroppable="registerDroppable",Eg.SetDroppableDisabled="setDroppableDisabled",Eg.UnregisterDroppable="unregisterDroppable";const jg=Object.freeze({x:0,y:0});function _g(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Ig(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return n-o}function Ag(e,t){let{data:{value:n}}=e,{data:{value:o}}=t;return o-n}function Mg(e){let{left:t,top:n,height:o,width:r}=e;return[{x:t,y:n},{x:t+r,y:n},{x:t,y:n+o},{x:t+r,y:n+o}]}function Og(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function Tg(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const Dg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=Tg(t,t.left,t.top),a=[];for(const s of o){const{id:e}=s,t=n.get(e);if(t){const n=_g(Tg(t),r);a.push({id:e,data:{droppableContainer:s,value:n}})}}return a.sort(Ig)};function Pg(e,t){const n=Math.max(t.top,e.top),o=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),s=r-o,i=a-n;if(o<r&&n<a){const n=t.width*t.height,o=e.width*e.height,r=s*i;return Number((r/(n+o-r)).toFixed(4))}return 0}const Rg=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=[];for(const a of o){const{id:e}=a,o=n.get(e);if(o){const n=Pg(o,t);n>0&&r.push({id:e,data:{droppableContainer:a,value:n}})}}return r.sort(Ag)};function Fg(e,t){const{top:n,left:o,bottom:r,right:a}=t;return n<=e.y&&e.y<=r&&o<=e.x&&e.x<=a}function Lg(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:jg}function zg(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.reduce(((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x})),{...t})}}const Bg=zg(1);const Ug={ignoreTransform:!1};function Vg(e,t){void 0===t&&(t=Ug);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:o}=Mo(e).getComputedStyle(e);t&&(n=function(e,t,n){const o=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!o)return e;const{scaleX:r,scaleY:a,x:s,y:i}=o,l=e.left-s-(1-r)*parseFloat(n),c=e.top-i-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),d=r?e.width/r:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(n,t,o))}const{top:o,left:r,width:a,height:s,bottom:i,right:l}=n;return{top:o,left:r,width:a,height:s,bottom:i,right:l}}function $g(e){return Vg(e,{ignoreTransform:!0})}function Gg(e,t){const n=[];return e?function o(r){if(null!=t&&n.length>=t)return n;if(!r)return n;if(Yo(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Ho(r)||Ko(r))return n;if(n.includes(r))return n;const a=Mo(e).getComputedStyle(r);return r!==e&&function(e,t){void 0===t&&(t=Mo(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some((e=>{const o=t[e];return"string"==typeof o&&n.test(o)}))}(r,a)&&n.push(r),function(e,t){return void 0===t&&(t=Mo(e).getComputedStyle(e)),"fixed"===t.position}(r,a)?n:o(r.parentNode)}(e):n}function Hg(e){const[t]=Gg(e,1);return null!=t?t:null}function Wg(e){return Go&&e?Jo(e)?e:Xo(e)?Yo(e)||e===Oo(e).scrollingElement?window:Ho(e)?e:null:null:null}function qg(e){return Jo(e)?e.scrollX:e.scrollLeft}function Yg(e){return Jo(e)?e.scrollY:e.scrollTop}function Kg(e){return{x:qg(e),y:Yg(e)}}var Jg,Xg;function Zg(e){return!(!Go||!e)&&e===document.scrollingElement}function Qg(e){const t={x:0,y:0},n=Zg(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},o={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=o.y,isRight:e.scrollLeft>=o.x,maxScroll:o,minScroll:t}}(Xg=Jg||(Jg={}))[Xg.Forward=1]="Forward",Xg[Xg.Backward=-1]="Backward";const ev={x:.2,y:.2};function tv(e,t,n,o,r){let{top:a,left:s,right:i,bottom:l}=n;void 0===o&&(o=10),void 0===r&&(r=ev);const{isTop:c,isBottom:d,isLeft:u,isRight:h}=Qg(e),m={x:0,y:0},f={x:0,y:0},p=t.height*r.y,g=t.width*r.x;return!c&&a<=t.top+p?(m.y=Jg.Backward,f.y=o*Math.abs((t.top+p-a)/p)):!d&&l>=t.bottom-p&&(m.y=Jg.Forward,f.y=o*Math.abs((t.bottom-p-l)/p)),!h&&i>=t.right-g?(m.x=Jg.Forward,f.x=o*Math.abs((t.right-g-i)/g)):!u&&s<=t.left+g&&(m.x=Jg.Backward,f.x=o*Math.abs((t.left+g-s)/g)),{direction:m,speed:f}}function nv(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:o,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:o,bottom:r,width:e.clientWidth,height:e.clientHeight}}function ov(e){return e.reduce(((e,t)=>Po(e,Kg(t))),jg)}const rv=[["x",["left","right"],function(e){return e.reduce(((e,t)=>e+qg(t)),0)}],["y",["top","bottom"],function(e){return e.reduce(((e,t)=>e+Yg(t)),0)}]];class av{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Gg(t),o=ov(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[r,a,s]of rv)for(const e of a)Object.defineProperty(this,e,{get:()=>{const t=s(n),a=o[r]-t;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class sv{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach((e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)}))},this.target=e}add(e,t,n){var o;null==(o=this.target)||o.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function iv(e,t){const n=Math.abs(e.x),o=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+o**2)>t:"x"in t&&"y"in t?n>t.x&&o>t.y:"x"in t?n>t.x:"y"in t&&o>t.y}var lv,cv,dv,uv;function hv(e){e.preventDefault()}function mv(e){e.stopPropagation()}(cv=lv||(lv={})).Click="click",cv.DragStart="dragstart",cv.Keydown="keydown",cv.ContextMenu="contextmenu",cv.Resize="resize",cv.SelectionChange="selectionchange",cv.VisibilityChange="visibilitychange",(uv=dv||(dv={})).Space="Space",uv.Down="ArrowDown",uv.Right="ArrowRight",uv.Left="ArrowLeft",uv.Up="ArrowUp",uv.Esc="Escape",uv.Enter="Enter";const fv={start:[dv.Space,dv.Enter],cancel:[dv.Esc],end:[dv.Space,dv.Enter]},pv=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case dv.Right:return{...n,x:n.x+25};case dv.Left:return{...n,x:n.x-25};case dv.Down:return{...n,y:n.y+25};case dv.Up:return{...n,y:n.y-25}}};class gv{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new sv(Oo(t)),this.windowListeners=new sv(Mo(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(lv.Resize,this.handleCancel),this.windowListeners.add(lv.VisibilityChange,this.handleCancel),setTimeout((()=>this.listeners.add(lv.Keydown,this.handleKeyDown)))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=Vg),!e)return;const{top:n,left:o,bottom:r,right:a}=t(e);Hg(e)&&(r<=0||a<=0||n>=window.innerHeight||o>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(jg)}handleKeyDown(e){if(To(e)){const{active:t,context:n,options:o}=this.props,{keyboardCodes:r=fv,coordinateGetter:a=pv,scrollBehavior:s="smooth"}=o,{code:i}=e;if(r.end.includes(i))return void this.handleEnd(e);if(r.cancel.includes(i))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:jg;this.referenceCoordinates||(this.referenceCoordinates=c);const d=a(e,{active:t,context:n.current,currentCoordinates:c});if(d){const t=Do(d,c),o={x:0,y:0},{scrollableAncestors:r}=n.current;for(const n of r){const r=e.code,{isTop:a,isRight:i,isLeft:l,isBottom:c,maxScroll:u,minScroll:h}=Qg(n),m=nv(n),f={x:Math.min(r===dv.Right?m.right-m.width/2:m.right,Math.max(r===dv.Right?m.left:m.left+m.width/2,d.x)),y:Math.min(r===dv.Down?m.bottom-m.height/2:m.bottom,Math.max(r===dv.Down?m.top:m.top+m.height/2,d.y))},p=r===dv.Right&&!i||r===dv.Left&&!l,g=r===dv.Down&&!c||r===dv.Up&&!a;if(p&&f.x!==d.x){const e=n.scrollLeft+t.x,a=r===dv.Right&&e<=u.x||r===dv.Left&&e>=h.x;if(a&&!t.y)return void n.scrollTo({left:e,behavior:s});o.x=a?n.scrollLeft-e:r===dv.Right?n.scrollLeft-u.x:n.scrollLeft-h.x,o.x&&n.scrollBy({left:-o.x,behavior:s});break}if(g&&f.y!==d.y){const e=n.scrollTop+t.y,a=r===dv.Down&&e<=u.y||r===dv.Up&&e>=h.y;if(a&&!t.x)return void n.scrollTo({top:e,behavior:s});o.y=a?n.scrollTop-e:r===dv.Down?n.scrollTop-u.y:n.scrollTop-h.y,o.y&&n.scrollBy({top:-o.y,behavior:s});break}}this.handleMove(e,Po(Do(d,this.referenceCoordinates),o))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function vv(e){return Boolean(e&&"distance"in e)}function xv(e){return Boolean(e&&"delay"in e)}gv.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:o=fv,onActivation:r}=t,{active:a}=n;const{code:s}=e.nativeEvent;if(o.start.includes(s)){const t=a.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class yv{constructor(e,t,n){var o;void 0===n&&(n=function(e){const{EventTarget:t}=Mo(e);return e instanceof t?e:Oo(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:a}=r;this.props=e,this.events=t,this.document=Oo(a),this.documentListeners=new sv(this.document),this.listeners=new sv(n),this.windowListeners=new sv(Mo(a)),this.initialCoordinates=null!=(o=Lo(r))?o:jg,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),this.windowListeners.add(lv.Resize,this.handleCancel),this.windowListeners.add(lv.DragStart,hv),this.windowListeners.add(lv.VisibilityChange,this.handleCancel),this.windowListeners.add(lv.ContextMenu,hv),this.documentListeners.add(lv.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(xv(t))return void(this.timeoutId=setTimeout(this.handleStart,t.delay));if(vv(t))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(lv.Click,mv,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(lv.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:o,props:r}=this,{onMove:a,options:{activationConstraint:s}}=r;if(!o)return;const i=null!=(t=Lo(e))?t:jg,l=Do(o,i);if(!n&&s){if(vv(s)){if(null!=s.tolerance&&iv(l,s.tolerance))return this.handleCancel();if(iv(l,s.distance))return this.handleStart()}return xv(s)&&iv(l,s.tolerance)?this.handleCancel():void 0}e.cancelable&&e.preventDefault(),a(i)}handleEnd(){const{onEnd:e}=this.props;this.detach(),e()}handleCancel(){const{onCancel:e}=this.props;this.detach(),e()}handleKeydown(e){e.code===dv.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const bv={move:{name:"pointermove"},end:{name:"pointerup"}};class wv extends yv{constructor(e){const{event:t}=e,n=Oo(t.target);super(e,bv,n)}}wv.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return!(!n.isPrimary||0!==n.button)&&(null==o||o({event:n}),!0)}}];const kv={move:{name:"mousemove"},end:{name:"mouseup"}};var Nv,Ev;(Ev=Nv||(Nv={}))[Ev.RightClick=2]="RightClick";(class extends yv{constructor(e){super(e,kv,Oo(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;return n.button!==Nv.RightClick&&(null==o||o({event:n}),!0)}}];const Cv={move:{name:"touchmove"},end:{name:"touchend"}};var Sv,jv,_v,Iv;function Av(e){let{acceleration:t,activator:n=Sv.Pointer,canScroll:o,draggingRect:a,enabled:s,interval:i=5,order:l=_v.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:h,threshold:m}=e;const f=function(e){let{delta:t,disabled:n}=e;const o=Vo(t);return $o((e=>{if(n||!o||!e)return Mv;const r={x:Math.sign(t.x-o.x),y:Math.sign(t.y-o.y)};return{x:{[Jg.Backward]:e.x[Jg.Backward]||-1===r.x,[Jg.Forward]:e.x[Jg.Forward]||1===r.x},y:{[Jg.Backward]:e.y[Jg.Backward]||-1===r.y,[Jg.Forward]:e.y[Jg.Forward]||1===r.y}}}),[n,t,o])}({delta:h,disabled:!s}),[p,g]=Uo(),v=r.useRef({x:0,y:0}),x=r.useRef({x:0,y:0}),y=r.useMemo((()=>{switch(n){case Sv.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Sv.DraggableRect:return a}}),[n,a,c]),b=r.useRef(null),w=r.useCallback((()=>{const e=b.current;if(!e)return;const t=v.current.x*x.current.x,n=v.current.y*x.current.y;e.scrollBy(t,n)}),[]),k=r.useMemo((()=>l===_v.TreeOrder?[...d].reverse():d),[l,d]);r.useEffect((()=>{if(s&&d.length&&y){for(const e of k){if(!1===(null==o?void 0:o(e)))continue;const n=d.indexOf(e),r=u[n];if(!r)continue;const{direction:a,speed:s}=tv(e,r,y,t,m);for(const e of["x","y"])f[e][a[e]]||(s[e]=0,a[e]=0);if(s.x>0||s.y>0)return g(),b.current=e,p(w,i),v.current=s,void(x.current=a)}v.current={x:0,y:0},x.current={x:0,y:0},g()}else g()}),[t,w,o,g,s,i,JSON.stringify(y),JSON.stringify(f),p,d,k,u,JSON.stringify(m)])}(class extends yv{constructor(e){super(e,Cv)}static setup(){return window.addEventListener(Cv.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Cv.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:o}=t;const{touches:r}=n;return!(r.length>1)&&(null==o||o({event:n}),!0)}}],(jv=Sv||(Sv={}))[jv.Pointer=0]="Pointer",jv[jv.DraggableRect=1]="DraggableRect",(Iv=_v||(_v={}))[Iv.TreeOrder=0]="TreeOrder",Iv[Iv.ReversedTreeOrder=1]="ReversedTreeOrder";const Mv={x:{[Jg.Backward]:!1,[Jg.Forward]:!1},y:{[Jg.Backward]:!1,[Jg.Forward]:!1}};var Ov,Tv,Dv;(Tv=Ov||(Ov={}))[Tv.Always=0]="Always",Tv[Tv.BeforeDragging=1]="BeforeDragging",Tv[Tv.WhileDragging=2]="WhileDragging",(Dv||(Dv={})).Optimized="optimized";const Pv=new Map;function Rv(e,t){return $o((n=>e?n||("function"==typeof t?t(e):e):null),[t,e])}function Fv(e){let{callback:t,disabled:n}=e;const o=Zo(t),a=r.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(o)}),[n]);return r.useEffect((()=>()=>null==a?void 0:a.disconnect()),[a]),a}function Lv(e){return new av(Vg(e),e)}function zv(e,t,n){void 0===t&&(t=Lv);const[o,a]=r.useReducer((function(o){if(!e)return null;var r;if(!1===e.isConnected)return null!=(r=null!=o?o:n)?r:null;const a=t(e);if(JSON.stringify(o)===JSON.stringify(a))return o;return a}),null),s=function(e){let{callback:t,disabled:n}=e;const o=Zo(t),a=r.useMemo((()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(o)}),[o,n]);return r.useEffect((()=>()=>null==a?void 0:a.disconnect()),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:o}=n;if("childList"===t&&o instanceof HTMLElement&&o.contains(e)){a();break}}}}),i=Fv({callback:a});return Bo((()=>{a(),e?(null==i||i.observe(e),null==s||s.observe(document.body,{childList:!0,subtree:!0})):(null==i||i.disconnect(),null==s||s.disconnect())}),[e]),o}const Bv=[];function Uv(e,t){void 0===t&&(t=[]);const n=r.useRef(null);return r.useEffect((()=>{n.current=null}),t),r.useEffect((()=>{const t=e!==jg;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)}),[e]),n.current?Do(e,n.current):jg}function Vv(e){return r.useMemo((()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null),[e])}const $v=[];function Gv(e){let{measure:t}=e;const[n,o]=r.useState(null),a=Fv({callback:r.useCallback((e=>{for(const{target:n}of e)if(Ho(n)){o((e=>{const o=t(n);return e?{...e,width:o.width,height:o.height}:o}));break}}),[t])}),s=r.useCallback((e=>{const n=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ho(t)?t:e}(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),o(n?t(n):null)}),[t,a]),[i,l]=Wo(s);return r.useMemo((()=>({nodeRef:i,rect:n,setRef:l})),[n,i,l])}const Hv=[{sensor:wv,options:{}},{sensor:gv,options:{}}],Wv={current:{}},qv={draggable:{measure:$g},droppable:{measure:$g,strategy:Ov.WhileDragging,frequency:Dv.Optimized},dragOverlay:{measure:Vg}};class Yv extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter((e=>{let{disabled:t}=e;return!t}))}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const Kv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Yv,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Cg},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:qv,measureDroppableContainers:Cg,windowRect:null,measuringScheduled:!1},Jv={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Cg,draggableNodes:new Map,over:null,measureDroppableContainers:Cg},Xv=r.createContext(Jv),Zv=r.createContext(Kv);function Qv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Yv}}}function ex(e,t){switch(t.type){case Ng.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ng.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case Ng.DragEnd:case Ng.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ng.RegisterDroppable:{const{element:n}=t,{id:o}=n,r=new Yv(e.droppable.containers);return r.set(o,n),{...e,droppable:{...e.droppable,containers:r}}}case Ng.SetDroppableDisabled:{const{id:n,key:o,disabled:r}=t,a=e.droppable.containers.get(n);if(!a||o!==a.key)return e;const s=new Yv(e.droppable.containers);return s.set(n,{...a,disabled:r}),{...e,droppable:{...e.droppable,containers:s}}}case Ng.UnregisterDroppable:{const{id:n,key:o}=t,r=e.droppable.containers.get(n);if(!r||o!==r.key)return e;const a=new Yv(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function tx(e){let{disabled:t}=e;const{active:n,activatorEvent:o,draggableNodes:a}=r.useContext(Xv),s=Vo(o),i=Vo(null==n?void 0:n.id);return r.useEffect((()=>{if(!t&&!o&&s&&null!=i){if(!To(s))return;if(document.activeElement===s.target)return;const e=a.get(i);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame((()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=qo(e);if(t){t.focus();break}}}))}}),[o,t,a,i,s]),null}const nx=r.createContext({...jg,scaleX:1,scaleY:1});var ox,rx;(rx=ox||(ox={}))[rx.Uninitialized=0]="Uninitialized",rx[rx.Initializing=1]="Initializing",rx[rx.Initialized=2]="Initialized";const ax=r.memo((function(e){var t,n,o,a;let{id:s,accessibility:i,autoScroll:l=!0,children:c,sensors:d=Hv,collisionDetection:h=Rg,measuring:m,modifiers:f,...p}=e;const g=r.useReducer(ex,void 0,Qv),[v,x]=g,[y,b]=function(){const[e]=r.useState((()=>new Set)),t=r.useCallback((t=>(e.add(t),()=>e.delete(t))),[e]);return[r.useCallback((t=>{let{type:n,event:o}=t;e.forEach((e=>{var t;return null==(t=e[n])?void 0:t.call(e,o)}))}),[e]),t]}(),[w,k]=r.useState(ox.Uninitialized),N=w===ox.Initialized,{draggable:{active:E,nodes:C,translate:S},droppable:{containers:j}}=v,_=E?C.get(E):null,I=r.useRef({initial:null,translated:null}),A=r.useMemo((()=>{var e;return null!=E?{id:E,data:null!=(e=null==_?void 0:_.data)?e:Wv,rect:I}:null}),[E,_]),M=r.useRef(null),[O,T]=r.useState(null),[D,P]=r.useState(null),R=Ro(p,Object.values(p)),F=Fo("DndDescribedBy",s),L=r.useMemo((()=>j.getEnabled()),[j]),z=(B=m,r.useMemo((()=>({draggable:{...qv.draggable,...null==B?void 0:B.draggable},droppable:{...qv.droppable,...null==B?void 0:B.droppable},dragOverlay:{...qv.dragOverlay,...null==B?void 0:B.dragOverlay}})),[null==B?void 0:B.draggable,null==B?void 0:B.droppable,null==B?void 0:B.dragOverlay]));var B;const{droppableRects:U,measureDroppableContainers:V,measuringScheduled:$}=function(e,t){let{dragging:n,dependencies:o,config:a}=t;const[s,i]=r.useState(null),{frequency:l,measure:c,strategy:d}=a,u=r.useRef(e),h=function(){switch(d){case Ov.Always:return!1;case Ov.BeforeDragging:return n;default:return!n}}(),m=Ro(h),f=r.useCallback((function(e){void 0===e&&(e=[]),m.current||i((t=>null===t?e:t.concat(e.filter((e=>!t.includes(e))))))}),[m]),p=r.useRef(null),g=$o((t=>{if(h&&!n)return Pv;if(!t||t===Pv||u.current!==e||null!=s){const t=new Map;for(let n of e){if(!n)continue;if(s&&s.length>0&&!s.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,o=e?new av(c(e),e):null;n.rect.current=o,o&&t.set(n.id,o)}return t}return t}),[e,s,n,h,c]);return r.useEffect((()=>{u.current=e}),[e]),r.useEffect((()=>{h||f()}),[n,h]),r.useEffect((()=>{s&&s.length>0&&i(null)}),[JSON.stringify(s)]),r.useEffect((()=>{h||"number"!=typeof l||null!==p.current||(p.current=setTimeout((()=>{f(),p.current=null}),l))}),[l,h,f,...o]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=s}}(L,{dragging:N,dependencies:[S.x,S.y],config:z.droppable}),G=function(e,t){const n=null!==t?e.get(t):void 0,o=n?n.node.current:null;return $o((e=>{var n;return null===t?null:null!=(n=null!=o?o:e)?n:null}),[o,t])}(C,E),H=r.useMemo((()=>D?Lo(D):null),[D]),W=function(){const e=!1===(null==O?void 0:O.autoScrollEnabled),t="object"==typeof l?!1===l.enabled:!1===l,n=N&&!e&&!t;if("object"==typeof l)return{...l,enabled:n};return{enabled:n}}(),q=function(e,t){return Rv(e,t)}(G,z.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:o,config:a=!0}=e;const s=r.useRef(!1),{x:i,y:l}="boolean"==typeof a?{x:a,y:a}:a;Bo((()=>{if(!i&&!l||!t)return void(s.current=!1);if(s.current||!o)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=Lg(n(e),o);if(i||(r.x=0),l||(r.y=0),s.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=Hg(e);t&&t.scrollBy({top:r.y,left:r.x})}}),[t,i,l,o,n])}({activeNode:E?C.get(E):null,config:W.layoutShiftCompensation,initialRect:q,measure:z.draggable.measure});const Y=zv(G,z.draggable.measure,q),K=zv(G?G.parentElement:null),J=r.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=j.getNodeFor(null==(t=J.current.over)?void 0:t.id),Z=Gv({measure:z.dragOverlay.measure}),Q=null!=(n=Z.nodeRef.current)?n:G,ee=N?null!=(o=Z.rect)?o:Y:null,te=Boolean(Z.nodeRef.current&&Z.rect),ne=Lg(oe=te?null:Y,Rv(oe));var oe;const re=Vv(Q?Mo(Q):null),ae=function(e){const t=r.useRef(e),n=$o((n=>e?n&&n!==Bv&&e&&t.current&&e.parentNode===t.current.parentNode?n:Gg(e):Bv),[e]);return r.useEffect((()=>{t.current=e}),[e]),n}(N?null!=X?X:G:null),se=function(e,t){void 0===t&&(t=Vg);const[n]=e,o=Vv(n?Mo(n):null),[a,s]=r.useReducer((function(){return e.length?e.map((e=>Zg(e)?o:new av(t(e),e))):$v}),$v),i=Fv({callback:s});return e.length>0&&a===$v&&s(),Bo((()=>{e.length?e.forEach((e=>null==i?void 0:i.observe(e))):(null==i||i.disconnect(),s())}),[e]),a}(ae),ie=function(e,t){let{transform:n,...o}=t;return null!=e&&e.length?e.reduce(((e,t)=>t({transform:e,...o})),n):n}(f,{transform:{x:S.x-ne.x,y:S.y-ne.y,scaleX:1,scaleY:1},activatorEvent:D,active:A,activeNodeRect:Y,containerNodeRect:K,draggingNodeRect:ee,over:J.current.over,overlayNodeRect:Z.rect,scrollableAncestors:ae,scrollableAncestorRects:se,windowRect:re}),le=H?Po(H,S):null,ce=function(e){const[t,n]=r.useState(null),o=r.useRef(e),a=r.useCallback((e=>{const t=Wg(e.target);t&&n((e=>e?(e.set(t,Kg(t)),new Map(e)):null))}),[]);return r.useEffect((()=>{const t=o.current;if(e!==t){r(t);const s=e.map((e=>{const t=Wg(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,Kg(t)]):null})).filter((e=>null!=e));n(s.length?new Map(s):null),o.current=e}return()=>{r(e),r(t)};function r(e){e.forEach((e=>{const t=Wg(e);null==t||t.removeEventListener("scroll",a)}))}}),[a,e]),r.useMemo((()=>e.length?t?Array.from(t.values()).reduce(((e,t)=>Po(e,t)),jg):ov(e):jg),[e,t])}(ae),de=Uv(ce),ue=Uv(ce,[Y]),he=Po(ie,de),me=ee?Bg(ee,ie):null,fe=A&&me?h({active:A,collisionRect:me,droppableRects:U,droppableContainers:L,pointerCoordinates:le}):null,pe=Og(fe,"id"),[ge,ve]=r.useState(null),xe=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(te?ie:Po(ie,ue),null!=(a=null==ge?void 0:ge.rect)?a:null,Y),ye=r.useCallback(((e,t)=>{let{sensor:n,options:o}=t;if(null==M.current)return;const r=C.get(M.current);if(!r)return;const a=e.nativeEvent,s=new n({active:M.current,activeNode:r,event:a,options:o,context:J,onStart(e){const t=M.current;if(null==t)return;const n=C.get(t);if(!n)return;const{onDragStart:o}=R.current,r={active:{id:t,data:n.data,rect:I}};zo.unstable_batchedUpdates((()=>{null==o||o(r),k(ox.Initializing),x({type:Ng.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:r})}))},onMove(e){x({type:Ng.DragMove,coordinates:e})},onEnd:i(Ng.DragEnd),onCancel:i(Ng.DragCancel)});function i(e){return async function(){const{active:t,collisions:n,over:o,scrollAdjustedTranslate:r}=J.current;let s=null;if(t&&r){const{cancelDrop:i}=R.current;if(s={activatorEvent:a,active:t,collisions:n,delta:r,over:o},e===Ng.DragEnd&&"function"==typeof i){await Promise.resolve(i(s))&&(e=Ng.DragCancel)}}M.current=null,zo.unstable_batchedUpdates((()=>{x({type:e}),k(ox.Uninitialized),ve(null),T(null),P(null);const t=e===Ng.DragEnd?"onDragEnd":"onDragCancel";if(s){const e=R.current[t];null==e||e(s),y({type:t,event:s})}}))}}zo.unstable_batchedUpdates((()=>{T(s),P(e.nativeEvent)}))}),[C]),be=function(e,t){return r.useMemo((()=>e.reduce(((e,n)=>{const{sensor:o}=n;return[...e,...o.activators.map((e=>({eventName:e.eventName,handler:t(e.handler,n)})))]}),[])),[e,t])}(d,r.useCallback(((e,t)=>(n,o)=>{const r=n.nativeEvent,a=C.get(o);if(null!==M.current||!a||r.dndKit||r.defaultPrevented)return;const s={active:a};!0===e(n,t.options,s)&&(r.dndKit={capturedBy:t.sensor},M.current=o,ye(n,t))}),[C,ye]));!function(e){r.useEffect((()=>{if(!Go)return;const t=e.map((e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()}));return()=>{for(const e of t)null==e||e()}}),e.map((e=>{let{sensor:t}=e;return t})))}(d),Bo((()=>{Y&&w===ox.Initializing&&k(ox.Initialized)}),[Y,w]),r.useEffect((()=>{const{onDragMove:e}=R.current,{active:t,activatorEvent:n,collisions:o,over:r}=J.current;if(!t||!n)return;const a={active:t,activatorEvent:n,collisions:o,delta:{x:he.x,y:he.y},over:r};zo.unstable_batchedUpdates((()=>{null==e||e(a),y({type:"onDragMove",event:a})}))}),[he.x,he.y]),r.useEffect((()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:o,scrollAdjustedTranslate:r}=J.current;if(!e||null==M.current||!t||!r)return;const{onDragOver:a}=R.current,s=o.get(pe),i=s&&s.rect.current?{id:s.id,rect:s.rect.current,data:s.data,disabled:s.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:r.x,y:r.y},over:i};zo.unstable_batchedUpdates((()=>{ve(i),null==a||a(l),y({type:"onDragOver",event:l})}))}),[pe]),Bo((()=>{J.current={activatorEvent:D,active:A,activeNode:G,collisionRect:me,collisions:fe,droppableRects:U,draggableNodes:C,draggingNode:Q,draggingNodeRect:ee,droppableContainers:j,over:ge,scrollableAncestors:ae,scrollAdjustedTranslate:he},I.current={initial:ee,translated:me}}),[A,G,fe,me,C,Q,ee,U,j,ge,ae,he]),Av({...W,delta:S,draggingRect:me,pointerCoordinates:le,scrollableAncestors:ae,scrollableAncestorRects:se});const we=r.useMemo((()=>({active:A,activeNode:G,activeNodeRect:Y,activatorEvent:D,collisions:fe,containerNodeRect:K,dragOverlay:Z,draggableNodes:C,droppableContainers:j,droppableRects:U,over:ge,measureDroppableContainers:V,scrollableAncestors:ae,scrollableAncestorRects:se,measuringConfiguration:z,measuringScheduled:$,windowRect:re})),[A,G,Y,D,fe,K,Z,C,j,U,ge,V,ae,se,z,$,re]),ke=r.useMemo((()=>({activatorEvent:D,activators:be,active:A,activeNodeRect:Y,ariaDescribedById:{draggable:F},dispatch:x,draggableNodes:C,over:ge,measureDroppableContainers:V})),[D,be,A,Y,x,F,C,ge,V]);return u.createElement(yg.Provider,{value:b},u.createElement(Xv.Provider,{value:ke},u.createElement(Zv.Provider,{value:we},u.createElement(nx.Provider,{value:xe},c)),u.createElement(tx,{disabled:!1===(null==i?void 0:i.restoreFocus)})),u.createElement(kg,{...i,hiddenTextDescribedById:F}))})),sx=r.createContext(null),ix="button";function lx(e){let{id:t,data:n,disabled:o=!1,attributes:a}=e;const s=Fo("Droppable"),{activators:i,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:h,over:m}=r.useContext(Xv),{role:f=ix,roleDescription:p="draggable",tabIndex:g=0}=null!=a?a:{},v=(null==c?void 0:c.id)===t,x=r.useContext(v?nx:sx),[y,b]=Wo(),[w,k]=Wo(),N=function(e,t){return r.useMemo((()=>e.reduce(((e,n)=>{let{eventName:o,handler:r}=n;return e[o]=e=>{r(e,t)},e}),{})),[e,t])}(i,t),E=Ro(n);Bo((()=>(h.set(t,{id:t,key:s,node:y,activatorNode:w,data:E}),()=>{const e=h.get(t);e&&e.key===s&&h.delete(t)})),[h,t]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:r.useMemo((()=>({role:f,tabIndex:g,"aria-disabled":o,"aria-pressed":!(!v||f!==ix)||void 0,"aria-roledescription":p,"aria-describedby":u.draggable})),[o,f,g,v,p,u.draggable]),isDragging:v,listeners:o?void 0:N,node:y,over:m,setNodeRef:b,setActivatorNodeRef:k,transform:x}}const cx={timeout:25};function dx(e,t,n){const o=e.slice();return o.splice(n<0?o.length+n:n,0,o.splice(t,1)[0]),o}function ux(e,t){return e.reduce(((e,n,o)=>{const r=t.get(n);return r&&(e[o]=r),e}),Array(e.length))}function hx(e){return null!==e&&e>=0}const mx={scaleX:1,scaleY:1},fx=e=>{var t;let{rects:n,activeNodeRect:o,activeIndex:r,overIndex:a,index:s}=e;const i=null!=(t=n[r])?t:o;if(!i)return null;const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];if(!o||!r&&!a)return 0;if(n<t)return r?o.left-(r.left+r.width):a.left-(o.left+o.width);return a?a.left-(o.left+o.width):o.left-(r.left+r.width)}(n,s,r);if(s===r){const e=n[a];return e?{x:r<a?e.left+e.width-(i.left+i.width):e.left-i.left,y:0,...mx}:null}return s>r&&s<=a?{x:-i.width-l,y:0,...mx}:s<r&&s>=a?{x:i.width+l,y:0,...mx}:{x:0,y:0,...mx}};const px=e=>{let{rects:t,activeIndex:n,overIndex:o,index:r}=e;const a=dx(t,o,n),s=t[r],i=a[r];return i&&s?{x:i.left-s.left,y:i.top-s.top,scaleX:i.width/s.width,scaleY:i.height/s.height}:null},gx={scaleX:1,scaleY:1},vx=e=>{var t;let{activeIndex:n,activeNodeRect:o,index:r,rects:a,overIndex:s}=e;const i=null!=(t=a[n])?t:o;if(!i)return null;if(r===n){const e=a[s];return e?{x:0,y:n<s?e.top+e.height-(i.top+i.height):e.top-i.top,...gx}:null}const l=function(e,t,n){const o=e[t],r=e[t-1],a=e[t+1];if(!o)return 0;if(n<t)return r?o.top-(r.top+r.height):a?a.top-(o.top+o.height):0;return a?a.top-(o.top+o.height):r?o.top-(r.top+r.height):0}(a,r,n);return r>n&&r<=s?{x:0,y:-i.height-l,...gx}:r<n&&r>=s?{x:0,y:i.height+l,...gx}:{x:0,y:0,...gx}};const xx="Sortable",yx=u.createContext({activeIndex:-1,containerId:xx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:px,disabled:{draggable:!1,droppable:!1}});function bx(e){let{children:t,id:n,items:o,strategy:a=px,disabled:s=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:h}=r.useContext(Zv),m=Fo(xx,n),f=Boolean(null!==l.rect),p=r.useMemo((()=>o.map((e=>"object"==typeof e&&"id"in e?e.id:e))),[o]),g=null!=i,v=i?p.indexOf(i.id):-1,x=d?p.indexOf(d.id):-1,y=r.useRef(p),b=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,y.current),w=-1!==x&&-1===v||b,k=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(s);Bo((()=>{b&&g&&h(p)}),[b,p,g,h]),r.useEffect((()=>{y.current=p}),[p]);const N=r.useMemo((()=>({activeIndex:v,containerId:m,disabled:k,disableTransforms:w,items:p,overIndex:x,useDragOverlay:f,sortedRects:ux(p,c),strategy:a})),[v,m,k.draggable,k.droppable,w,p,x,c,f,a]);return u.createElement(yx.Provider,{value:N},t)}const wx=e=>{let{id:t,items:n,activeIndex:o,overIndex:r}=e;return dx(n,o,r).indexOf(t)},kx=e=>{let{containerId:t,isSorting:n,wasDragging:o,index:r,items:a,newIndex:s,previousItems:i,previousContainerId:l,transition:c}=e;return!(!c||!o)&&((i===a||r!==s)&&(!!n||s!==r&&t===l))},Nx={duration:200,easing:"ease"},Ex="transform",Cx=er.Transition.toString({property:Ex,duration:0,easing:"linear"}),Sx={roleDescription:"sortable"};function jx(e){let{animateLayoutChanges:t=kx,attributes:n,disabled:o,data:a,getNewIndex:s=wx,id:i,strategy:l,resizeObserverConfig:c,transition:d=Nx}=e;const{items:u,containerId:h,activeIndex:m,disabled:f,disableTransforms:p,sortedRects:g,overIndex:v,useDragOverlay:x,strategy:y}=r.useContext(yx),b=function(e,t){var n,o;if("boolean"==typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(o=null==e?void 0:e.droppable)?o:t.droppable}}(o,f),w=u.indexOf(i),k=r.useMemo((()=>({sortable:{containerId:h,index:w,items:u},...a})),[h,a,w,u]),N=r.useMemo((()=>u.slice(u.indexOf(i))),[u,i]),{rect:E,node:C,isOver:S,setNodeRef:j}=function(e){let{data:t,disabled:n=!1,id:o,resizeObserverConfig:a}=e;const s=Fo("Droppable"),{active:i,dispatch:l,over:c,measureDroppableContainers:d}=r.useContext(Xv),u=r.useRef({disabled:n}),h=r.useRef(!1),m=r.useRef(null),f=r.useRef(null),{disabled:p,updateMeasurementsFor:g,timeout:v}={...cx,...a},x=Ro(null!=g?g:o),y=Fv({callback:r.useCallback((()=>{h.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{d(Array.isArray(x.current)?x.current:[x.current]),f.current=null}),v)):h.current=!0}),[v]),disabled:p||!i}),b=r.useCallback(((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))}),[y]),[w,k]=Wo(b),N=Ro(t);return r.useEffect((()=>{y&&w.current&&(y.disconnect(),h.current=!1,y.observe(w.current))}),[w,y]),Bo((()=>(l({type:Ng.RegisterDroppable,element:{id:o,key:s,disabled:n,node:w,rect:m,data:N}}),()=>l({type:Ng.UnregisterDroppable,key:s,id:o}))),[o]),r.useEffect((()=>{n!==u.current.disabled&&(l({type:Ng.SetDroppableDisabled,id:o,key:s,disabled:n}),u.current.disabled=n)}),[o,s,n,l]),{active:i,rect:m,isOver:(null==c?void 0:c.id)===o,node:w,over:c,setNodeRef:k}}({id:i,data:k,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:_,activatorEvent:I,activeNodeRect:A,attributes:M,setNodeRef:O,listeners:T,isDragging:D,over:P,setActivatorNodeRef:R,transform:F}=lx({id:i,data:k,attributes:{...Sx,...n},disabled:b.draggable}),L=Qo(j,O),z=Boolean(_),B=z&&!p&&hx(m)&&hx(v),U=!x&&D,V=U&&B?F:null,$=B?null!=V?V:(null!=l?l:y)({rects:g,activeNodeRect:A,activeIndex:m,overIndex:v,index:w}):null,G=hx(m)&&hx(v)?s({id:i,items:u,activeIndex:m,overIndex:v}):w,H=null==_?void 0:_.id,W=r.useRef({activeId:H,items:u,newIndex:G,containerId:h}),q=u!==W.current.items,Y=t({active:_,containerId:h,isDragging:D,isSorting:z,id:i,index:w,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:d,wasDragging:null!=W.current.activeId}),K=function(e){let{disabled:t,index:n,node:o,rect:a}=e;const[s,i]=r.useState(null),l=r.useRef(n);return Bo((()=>{if(!t&&n!==l.current&&o.current){const e=a.current;if(e){const t=Vg(o.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&i(n)}}n!==l.current&&(l.current=n)}),[t,n,o,a]),r.useEffect((()=>{s&&i(null)}),[s]),s}({disabled:!Y,index:w,node:C,rect:E});return r.useEffect((()=>{z&&W.current.newIndex!==G&&(W.current.newIndex=G),h!==W.current.containerId&&(W.current.containerId=h),u!==W.current.items&&(W.current.items=u)}),[z,G,h,u]),r.useEffect((()=>{if(H===W.current.activeId)return;if(H&&!W.current.activeId)return void(W.current.activeId=H);const e=setTimeout((()=>{W.current.activeId=H}),50);return()=>clearTimeout(e)}),[H]),{active:_,activeIndex:m,attributes:M,data:k,rect:E,index:w,newIndex:G,items:u,isOver:S,isSorting:z,isDragging:D,listeners:T,node:C,overIndex:v,over:P,setNodeRef:L,setActivatorNodeRef:R,setDroppableNodeRef:j,setDraggableNodeRef:O,transform:null!=K?K:$,transition:function(){if(K||q&&W.current.newIndex===w)return Cx;if(U&&!To(I)||!d)return;if(z||Y)return er.Transition.toString({...d,property:Ex});return}()}}function _x(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Ix=[dv.Down,dv.Right,dv.Up,dv.Left],Ax=(e,t)=>{let{context:{active:n,collisionRect:o,droppableRects:r,droppableContainers:a,over:s,scrollableAncestors:i}}=t;if(Ix.includes(e.code)){if(e.preventDefault(),!n||!o)return;const t=[];a.getEnabled().forEach((n=>{if(!n||null!=n&&n.disabled)return;const a=r.get(n.id);if(a)switch(e.code){case dv.Down:o.top<a.top&&t.push(n);break;case dv.Up:o.top>a.top&&t.push(n);break;case dv.Left:o.left>a.left&&t.push(n);break;case dv.Right:o.left<a.left&&t.push(n)}}));const l=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:o}=e;const r=Mg(t),a=[];for(const s of o){const{id:e}=s,t=n.get(e);if(t){const n=Mg(t),o=r.reduce(((e,t,o)=>e+_g(n[o],t)),0),i=Number((o/4).toFixed(4));a.push({id:e,data:{droppableContainer:s,value:i}})}}return a.sort(Ig)})({active:n,collisionRect:o,droppableRects:r,droppableContainers:t,pointerCoordinates:null});let c=Og(l,"id");if(c===(null==s?void 0:s.id)&&l.length>1&&(c=l[1].id),null!=c){const e=a.get(n.id),t=a.get(c),s=t?r.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&s&&e&&t){const n=Gg(l).some(((e,t)=>i[t]!==e)),r=Mx(e,t),a=function(e,t){if(!_x(e)||!_x(t))return!1;if(!Mx(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=n||!r?{x:0,y:0}:{x:a?o.width-s.width:0,y:a?o.height-s.height:0},d={x:s.left,y:s.top};return c.x&&c.y?d:Do(d,c)}}}};function Mx(e,t){return!(!_x(e)||!_x(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const Ox=u.createContext(null),Tx=r.memo((()=>r.useContext(Ox)));Tx.displayName="DragHandle";const Dx=u.forwardRef((({cellId:e,canMoveX:t,...n},o)=>{const{attributes:r,listeners:a,setNodeRef:s,transform:i,transition:l,isDragging:c}=jx({id:e.toString()}),d={transform:i?er.Transform.toString({x:t?i.x:0,y:i.y,scaleX:1,scaleY:1}):void 0,transition:l,zIndex:c?2:void 0,position:"relative"},u=pg(o,s),h=p.jsx("div",{...r,...a,onMouseDown:Ge.preventFocus,"data-testid":"drag-button",className:"py-[1px] cursor-grab opacity-50 hover:opacity-100 hover-action hover:bg-muted rounded border border-transparent hover:border-border active:bg-accent",children:p.jsx(Jl,{strokeWidth:1,size:20})}),m=Boolean(i);return p.jsx("div",{tabIndex:-1,ref:u,...n,"data-is-dragging":c,className:Ht(n.className,m&&"is-moving"),style:d,children:p.jsx(Ox.Provider,{value:h,children:n.children})})}));Dx.displayName="SortableCell";const Px=r.memo(Dx),Rx=u.memo(u.forwardRef(((e,t)=>{const n=m(34);let o,a,s;n[0]!==e?(({children:s,showTooltip:o,...a}=e),n[0]=e,n[1]=o,n[2]=a,n[3]=s):(o=n[1],a=n[2],s=n[3]);const i=void 0===o||o,[l,c]=r.useState(!1);let d;n[4]!==a?(d={cell:a},n[4]=a,n[5]=d):d=n[5];const u=ld(d),h=tr();let f,g,v,x,y,b;if(n[6]===Symbol.for("react.memo_cache_sentinel")?(f=()=>({toggle:()=>c((e=>!e))}),n[6]=f):f=n[6],r.useImperativeHandle(t,f),n[7]===Symbol.for("react.memo_cache_sentinel")?(g=p.jsx(Fe,{placeholder:"Search actions...",className:"h-6 m-1"}),n[7]=g):g=n[7],n[8]===Symbol.for("react.memo_cache_sentinel")?(v=p.jsx(ze,{children:"No results"}),n[8]=v):v=n[8],n[9]!==u){let e;n[11]!==u.length?(e=(e,t)=>p.jsxs(r.Fragment,{children:[p.jsx(Ae,{children:e.map((e=>p.jsx(De,{onSelect:()=>{e.disableClick||(e.handle(),c(!1))},variant:e.variant,children:p.jsxs("div",{className:"flex items-center flex-1",children:[e.icon&&p.jsx("div",{className:"mr-2 w-5",children:e.icon}),p.jsx("div",{className:"flex-1",children:e.label}),p.jsxs("div",{className:"flex-shrink-0 text-sm",children:[e.hotkey&&ji(e.hotkey),e.rightElement]})]})},e.label)))},t),t<u.length-1&&p.jsx(Oe,{})]},t),n[11]=u.length,n[12]=e):e=n[12],x=u.map(e),n[9]=u,n[10]=x}else x=n[10];n[13]!==x?(y=p.jsxs(en,{children:[g,p.jsxs(or,{children:[v,x]})]}),n[13]=x,n[14]=y):y=n[14],n[15]!==h||n[16]!==y?(b=p.jsx(Zt,{className:"w-[300px] p-0 pt-1",...h,children:y}),n[15]=h,n[16]=y,n[17]=b):b=n[17];const w=b;if(!i){let e,t;return n[18]!==s?(e=p.jsx(rr,{asChild:!0,children:s}),n[18]=s,n[19]=e):e=n[19],n[20]!==l||n[21]!==e||n[22]!==w?(t=p.jsxs(Qt,{open:l,onOpenChange:c,children:[e,w]}),n[20]=l,n[21]=e,n[22]=w,n[23]=t):t=n[23],t}let k;n[24]===Symbol.for("react.memo_cache_sentinel")?(k=p.jsx(nr,{tabIndex:-1,children:ri("cell.cellActions")}),n[24]=k):k=n[24];const N=!l&&k;let E,C,S;return n[25]!==s?(E=p.jsx(ar,{children:p.jsx(rr,{className:"flex",children:s})}),n[25]=s,n[26]=E):E=n[26],n[27]!==N||n[28]!==E?(C=p.jsxs(sr,{delayDuration:200,disableHoverableContent:!0,children:[N,E]}),n[27]=N,n[28]=E,n[29]=C):C=n[29],n[30]!==l||n[31]!==C||n[32]!==w?(S=p.jsxs(Qt,{open:l,onOpenChange:c,children:[C,w]}),n[30]=l,n[31]=C,n[32]=w,n[33]=S):S=n[33],S}))),Fx=u.memo((e=>{const t=m(5),{children:n,cellId:o}=e;let r,a;t[0]!==o?(a=function(e){return $((t=>gd(e,t(J))))}(o),t[0]=o,t[1]=a):a=t[1],r=a;const s=Z(r);if(!s)return null;let i;return t[2]!==s||t[3]!==n?(i=p.jsx(Rx,{showTooltip:!1,...s,children:n}),t[2]=s,t[3]=n,t[4]=i):i=t[4],i}));Fx.displayName="ConnectionCellActionsDropdown";const Lx=e=>{const t=m(26);let n,o,r;t[0]!==e?(({children:o,...n}=e),t[0]=e,t[1]=n,t[2]=o):(n=t[1],o=t[2]),t[3]!==n?(r={cell:n},t[3]=n,t[4]=r):r=t[4];const a=ld(r),[s,i]=u.useState();let l,c,d,h,f,g,v,x;if(t[5]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(He,{size:13,strokeWidth:1.5}),t[5]=l):l=t[5],t[6]!==n||t[7]!==s||t[8]!==o||t[9]!==a){const e=[{label:"Copy",icon:l,handle:zx},{label:"Cut",icon:p.jsx(wc,{size:13,strokeWidth:1.5}),handle:Bx},{label:"Paste",icon:p.jsx(Ll,{size:13,strokeWidth:1.5}),handle:async()=>{const{getEditorView:e}=n,t=e();if(!t)return;const o=await navigator.clipboard.readText();if(o){const{from:e,to:n}=t.state.selection.main,r=t.state.update({changes:{from:e,to:n,insert:o}});t.dispatch(r)}}},{icon:p.jsx($i,{size:13,strokeWidth:1.5}),label:"Download image",hidden:!s,handle:()=>{if(s){const e=document.createElement("a");e.download="image.png",e.href=s.src,e.click()}}},{label:"Go to Definition",icon:p.jsx(ir,{size:13,strokeWidth:1.5}),handle:()=>{const{getEditorView:e}=n,t=e();t&&lr(t)}}];let r;f=Zp,t[15]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{e.target instanceof HTMLImageElement?i(e.target):i(void 0)},t[15]=r):r=t[15],t[16]!==o?(g=p.jsx(Qp,{onContextMenu:r,asChild:!0,children:o}),t[16]=o,t[17]=g):g=t[17],c=ng,d="w-[300px]",h=[e,...a].map(Vx),t[6]=n,t[7]=s,t[8]=o,t[9]=a,t[10]=c,t[11]=d,t[12]=h,t[13]=f,t[14]=g}else c=t[10],d=t[11],h=t[12],f=t[13],g=t[14];return t[18]!==c||t[19]!==d||t[20]!==h?(v=p.jsx(c,{className:d,children:h}),t[18]=c,t[19]=d,t[20]=h,t[21]=v):v=t[21],t[22]!==f||t[23]!==g||t[24]!==v?(x=p.jsxs(f,{children:[g,v]}),t[22]=f,t[23]=g,t[24]=v,t[25]=x):x=t[25],x};function zx(){document.execCommand("copy")}function Bx(){document.execCommand("cut")}function Ux(e){return e.hidden?null:p.jsx(og,{onSelect:t=>{e.handle(t)},variant:e.variant,children:p.jsxs("div",{className:"flex items-center flex-1",children:[e.icon&&p.jsx("div",{className:"mr-2 w-5",children:e.icon}),p.jsx("div",{className:"flex-1",children:e.label}),p.jsxs("div",{className:"flex-shrink-0 text-sm",children:[e.hotkey&&ji(e.hotkey),e.rightElement]})]})},e.label)}function Vx(e,t){return p.jsxs(r.Fragment,{children:[e.map(Ux),t<e.length-1&&p.jsx(rg,{})]},t)}const $x=e=>{const t=m(24),{editorView:n,code:o,currentLanguageAdapter:r,onAfterToggle:a}=e;let s,i;t[0]!==o?(i=(new So).isSupported(o),t[0]=o,t[1]=i):i=t[1],s=i;const l=s;let c,d;t[2]!==o?(d=(new jo).isSupported(o),t[2]=o,t[3]=d):d=t[3],c=d;const u=c&&"python"===r&&!l;let h,f;t[4]===Symbol.for("react.memo_cache_sentinel")?(h=p.jsx(ue,{color:"var(--sky-11)",strokeWidth:2.5,className:"w-4 h-4"}),t[4]=h):h=t[4],t[5]!==n||t[6]!==r||t[7]!==u||t[8]!==a?(f=p.jsx(Gx,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:u,icon:h,toType:"sql",displayName:"SQL",onAfterToggle:a}),t[5]=n,t[6]=r,t[7]=u,t[8]=a,t[9]=f):f=t[9];const g=l&&"python"===r;let v,x,y,b,w;return t[10]===Symbol.for("react.memo_cache_sentinel")?(v=p.jsx(ci,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),t[10]=v):v=t[10],t[11]!==n||t[12]!==r||t[13]!==g||t[14]!==a?(x=p.jsx(Gx,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:g,icon:v,toType:"markdown",displayName:"Markdown",onAfterToggle:a}),t[11]=n,t[12]=r,t[13]=g,t[14]=a,t[15]=x):x=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(y=p.jsx(di,{fill:"var(--sky-11)",color:"black",className:"w-4 h-4"}),t[16]=y):y=t[16],t[17]!==n||t[18]!==r?(b=p.jsx(Gx,{editorView:n,currentLanguageAdapter:r,canSwitchToLanguage:!0,icon:y,toType:"python",displayName:"Python",onAfterToggle:Wt.NOOP}),t[17]=n,t[18]=r,t[19]=b):b=t[19],t[20]!==f||t[21]!==x||t[22]!==b?(w=p.jsxs("div",{className:"absolute right-2 top-2 z-20 flex hover-action",children:[f,x,b]}),t[20]=f,t[21]=x,t[22]=b,t[23]=w):w=t[23],w},Gx=e=>{const t=m(10),{editorView:n,currentLanguageAdapter:o,canSwitchToLanguage:r,icon:a,toType:s,displayName:i,onAfterToggle:l}=e;if(!r)return null;if(o===s)return null;const c=`View as ${i}`;let d,u,h;return t[0]!==n||t[1]!==s||t[2]!==l?(d=()=>{n&&(cr(n,s),l())},t[0]=n,t[1]=s,t[2]=l,t[3]=d):d=t[3],t[4]!==d||t[5]!==a?(u=p.jsx(v,{"data-testid":"language-toggle-button",variant:"text",size:"xs",className:"opacity-80 px-1",onClick:d,children:a}),t[4]=d,t[5]=a,t[6]=u):u=t[6],t[7]!==c||t[8]!==u?(h=p.jsx(g,{content:c,children:u}),t[7]=c,t[8]=u,t[9]=h):h=t[9],h};var Hx={modified:{doc:""},original:{doc:""}},Wx=r.createContext(Hx);function qx(e,t){return Zn({},e,t,{modified:Zn({},e.modified,t.modified),original:Zn({},e.original,t.original)})}var Yx=()=>r.useContext(Wx),Kx=e=>{var{children:t,theme:n}=e,[o,a]=r.useReducer(qx,Zn({},Hx,{theme:n}));return r.useEffect((()=>a({theme:n})),[n]),p.jsx(Wx.Provider,{value:Zn({},o,{dispatch:a}),children:t})},Jx=["extensions","value","selection","onChange"],Xx=e=>{var{extensions:t=[],value:n,selection:o,onChange:a}=e,s=dr(e,Jx),{theme:i,dispatch:l}=Yx(),c=ur(Zn({},s,{theme:i}));return r.useEffect((()=>l({original:{doc:n,selection:o,extensions:[...c,...t]},originalExtension:{onChange:a,option:s,extension:[t]}})),[e]),null};Xx.displayName="CodeMirrorMerge.Original";var Zx=["extensions","value","selection","onChange"],Qx=e=>{var{extensions:t=[],value:n,selection:o,onChange:a}=e,s=dr(e,Zx),{theme:i,dispatch:l}=Yx(),c=ur(Zn({},s,{theme:i}));return r.useEffect((()=>{l({modified:{doc:n,selection:o,extensions:[...c,...t]},modifiedExtension:{onChange:a,option:s,extension:[t]}})}),[e]),null};Qx.displayName="CodeMirrorMerge.Modified";class ey{constructor(e,t,n,o){this.fromA=e,this.toA=t,this.fromB=n,this.toB=o}offset(e,t){return new ey(this.fromA+e,this.toA+e,this.fromB+t,this.toB+t)}}function ty(e,t,n,o,r,a){if(e==o)return[];let s=ly(e,t,n,o,r,a),i=cy(e,t+s,n,o,r+s,a),l=(n-=i)-(t+=s),c=(a-=i)-(r+=s);if(!l||!c)return[new ey(t,n,r,a)];if(l>c){let s=e.slice(t,n).indexOf(o.slice(r,a));if(s>-1)return[new ey(t,t+s,r,r),new ey(t+s+c,n,a,a)]}else if(c>l){let s=o.slice(r,a).indexOf(e.slice(t,n));if(s>-1)return[new ey(t,t,r,r+s),new ey(n,n,r+s+l,a)]}if(1==l||1==c)return[new ey(t,n,r,a)];let d=uy(e,t,n,o,r,a);if(d){let[s,i,l]=d;return ty(e,t,s,o,r,i).concat(ty(e,s+l,n,o,i+l,a))}return function(e,t,n,o,r,a){let s=n-t,i=a-r;if(ny<1e9&&Math.min(s,i)>16*ny)return Math.min(s,i)>64*ny?[new ey(t,n,r,a)]:hy(e,t,n,o,r,a);let l=Math.ceil((s+i)/2);ry.reset(l),ay.reset(l);let c=(n,a)=>e.charCodeAt(t+n)==o.charCodeAt(r+a),d=(t,r)=>e.charCodeAt(n-t-1)==o.charCodeAt(a-r-1),u=(s-i)%2!=0?ay:null,h=u?null:ry;for(let m=0;m<l;m++){if(m>ny)return hy(e,t,n,o,r,a);let f=ry.advance(m,s,i,l,u,!1,c)||ay.advance(m,s,i,l,h,!0,d);if(f)return sy(e,t,n,t+f[0],o,r,a,r+f[1])}return[new ey(t,n,r,a)]}(e,t,n,o,r,a)}let ny=1e9;class oy{constructor(){this.vec=[]}reset(e){this.len=e<<1;for(let t=0;t<this.len;t++)this.vec[t]=-1;this.vec[e+1]=0,this.start=this.end=0}advance(e,t,n,o,r,a,s){for(let i=-e+this.start;i<=e-this.end;i+=2){let l=o+i,c=i==-e||i!=e&&this.vec[l-1]<this.vec[l+1]?this.vec[l+1]:this.vec[l-1]+1,d=c-i;for(;c<t&&d<n&&s(c,d);)c++,d++;if(this.vec[l]=c,c>t)this.end+=2;else if(d>n)this.start+=2;else if(r){let e=o+(t-n)-i;if(e>=0&&e<this.len&&-1!=r.vec[e])if(a){let n=r.vec[e];if(n>=t-c)return[n,o+n-e]}else{if(c>=t-r.vec[e])return[c,d]}}}return null}}const ry=new oy,ay=new oy;function sy(e,t,n,o,r,a,s,i){let l=!1;return Ny(e,o)||++o!=n||(l=!0),Ny(r,i)||++i!=s||(l=!0),l?[new ey(t,n,a,s)]:ty(e,t,o,r,a,i).concat(ty(e,o,n,r,i,s))}function iy(e,t){let n=1,o=Math.min(e,t);for(;n<o;)n<<=1;return n}function ly(e,t,n,o,r,a){if(t==n||t==a||e.charCodeAt(t)!=o.charCodeAt(r))return 0;let s=iy(n-t,a-r);for(let i=t,l=r;;){let r=i+s,c=l+s;if(r>n||c>a||e.slice(i,r)!=o.slice(l,c)){if(1==s)return i-t-(Ny(e,i)?0:1);s>>=1}else{if(r==n||c==a)return r-t;i=r,l=c}}}function cy(e,t,n,o,r,a){if(t==n||r==a||e.charCodeAt(n-1)!=o.charCodeAt(a-1))return 0;let s=iy(n-t,a-r);for(let i=n,l=a;;){let a=i-s,c=l-s;if(a<t||c<r||e.slice(a,i)!=o.slice(c,l)){if(1==s)return n-i-(Ny(e,i)?0:1);s>>=1}else{if(a==t||c==r)return n-a;i=a,l=c}}}function dy(e,t,n,o,r,a,s,i){let l=o.slice(r,a),c=null;for(;;){if(c||s<i)return c;for(let i=t+s;;){Ny(e,i)||i++;let d=i+s;if(Ny(e,d)||(d+=d==i+1?1:-1),d>=n)break;let u=e.slice(i,d),h=-1;for(;-1!=(h=l.indexOf(u,h+1));){let s=ly(e,d,n,o,r+h+u.length,a),l=cy(e,t,i,o,r,r+h),m=u.length+s+l;(!c||c[2]<m)&&(c=[i-l,r+h-l,m])}i=d}if(i<0)return c;s>>=1}}function uy(e,t,n,o,r,a){let s=n-t,i=a-r;if(s<i){let s=uy(o,r,a,e,t,n);return s&&[s[1],s[0],s[2]]}return s<4||2*i<s?null:dy(e,t,n,o,r,a,Math.floor(s/4),-1)}function hy(e,t,n,o,r,a){let s,i=n-t,l=a-r;if(i<l){let l=dy(o,r,a,e,t,n,Math.floor(i/6),50);s=l&&[l[1],l[0],l[2]]}else s=dy(e,t,n,o,r,a,Math.floor(l/6),50);if(!s)return[new ey(t,n,r,a)];let[c,d,u]=s;return ty(e,t,c,o,r,d).concat(ty(e,c+u,n,o,d+u,a))}function my(e,t){for(let n=1;n<e.length;n++){let o=e[n-1],r=e[n];o.toA>r.fromA-t&&o.toB>r.fromB-t&&(e[n-1]=new ey(o.fromA,r.toA,o.fromB,r.toB),e.splice(n--,1))}}let fy;try{fy=new RegExp("[\\p{Alphabetic}\\p{Number}]","u")}catch(QO){}function py(e){return e>48&&e<58||e>64&&e<91||e>96&&e<123}function gy(e,t){if(t==e.length)return 0;let n=e.charCodeAt(t);return n<192?py(n)?1:0:fy?wy(n)&&t!=e.length-1?fy.test(e.slice(t,t+2))?2:0:fy.test(String.fromCharCode(n))?1:0:0}function vy(e,t){if(!t)return 0;let n=e.charCodeAt(t-1);return n<192?py(n)?1:0:fy?ky(n)&&1!=t?fy.test(e.slice(t-2,t))?2:0:fy.test(String.fromCharCode(n))?1:0:0}function xy(e,t,n){if(t==e.length||!vy(e,t))return t;for(let o=t,r=t+n;;){let n=gy(e,o);if(!n)return o;if(o+=n,o>r)return t}}function yy(e,t,n){if(!t||!gy(e,t))return t;for(let o=t,r=t-n;;){let n=vy(e,o);if(!n)return o;if(o-=n,o<r)return t}}function by(e,t,n){for(let o=t,r=t-n;;){let n=o?e.charCodeAt(o-1):10;if(10==n)return o;if(o--,o<r||32!=n&&9!=n)return t}}const wy=e=>e>=55296&&e<=56319,ky=e=>e>=56320&&e<=57343;function Ny(e,t){return!t||t==e.length||!wy(e.charCodeAt(t-1))||!ky(e.charCodeAt(t))}function Ey(e,t,n){var o;return ny=(null!==(o=null==n?void 0:n.scanLimit)&&void 0!==o?o:1e9)>>1,function(e,t,n){for(;;){my(n,1);let o=!1;for(let r=0;r<n.length;r++){let a,s,i=n[r];(a=ly(e,i.fromA,i.toA,t,i.fromB,i.toB))&&(i=n[r]=new ey(i.fromA+a,i.toA,i.fromB+a,i.toB)),(s=cy(e,i.fromA,i.toA,t,i.fromB,i.toB))&&(i=n[r]=new ey(i.fromA,i.toA-s,i.fromB,i.toB-s));let l=i.toA-i.fromA,c=i.toB-i.fromB;if(l&&c)continue;let d=i.fromA-(r?n[r-1].toA:0),u=(r<n.length-1?n[r+1].fromA:e.length)-i.toA;if(!d||!u)continue;let h=l?e.slice(i.fromA,i.toA):t.slice(i.fromB,i.toB);d<=h.length&&e.slice(i.fromA-d,i.fromA)==h.slice(h.length-d)?(n[r]=new ey(i.fromA-d,i.toA-d,i.fromB-d,i.toB-d),o=!0):u<=h.length&&e.slice(i.toA,i.toA+u)==h.slice(0,u)&&(n[r]=new ey(i.fromA+u,i.toA+u,i.fromB+u,i.toB+u),o=!0)}if(!o)break}return n}(e,t,ty(e,0,e.length,t,0,t.length))}function Cy(e,t,n){return function(e,t,n){for(let o=0,r=0;r<e.length;r++){let a=e[r],s=a.toA-a.fromA,i=a.toB-a.fromB;if(s&&i||s>3||i>3){let l=r==e.length-1?t.length:e[r+1].fromA,c=a.fromA-o,d=l-a.toA,u=yy(t,a.fromA,Math.min(c,5)),h=xy(t,a.toA,Math.min(d,5)),m=a.fromA-u,f=h-a.toA;if(!s||!i){let d,p,g=Math.max(s,i),[v,x,y]=s?[t,a.fromA,a.toA]:[n,a.fromB,a.toB];m&&f?(g>m&&t.slice(u,a.fromA)==v.slice(y-m,y)?(a=e[r]=new ey(u,u+s,a.fromB-m,a.toB-m),u=a.fromA,h=xy(t,a.toA,Math.min(l-a.toA,5))):g>f&&t.slice(a.toA,h)==v.slice(x,x+f)&&(a=e[r]=new ey(h-s,h,a.fromB+f,a.toB+f),h=a.toA,u=yy(t,a.fromA,Math.min(a.fromA-o,5))),m=a.fromA-u,f=h-a.toA):m||f||!(p=a.fromA-(d=by(t,a.fromA,c)))||t.slice(d,a.fromA)!=v.slice(y-p,y)||(a=e[r]=new ey(d,d+s,a.fromB-p,a.toB-p))}(m||f)&&(a=e[r]=new ey(a.fromA-m,a.toA+f,a.fromB-m,a.toB+f)),o=a.toA}}return my(e,3),e}(Ey(e,t,n),e,t)}const Sy=sn.define({combine:e=>e[0]}),jy=Rt.define(),_y=Ft.define({create:e=>null,update(e,t){for(let n of t.effects)n.is(jy)&&(e=n.value);return e}});class Iy{constructor(e,t,n,o,r){this.changes=e,this.fromA=t,this.toA=n,this.fromB=o,this.toB=r}offset(e,t){return e||t?new Iy(this.changes,this.fromA+e,this.toA+e,this.fromB+t,this.toB+t):this}get endA(){return Math.max(this.fromA,this.toA-1)}get endB(){return Math.max(this.fromB,this.toB-1)}static build(e,t,n){return Oy(Cy(e.toString(),t.toString(),n),e,t,0,0)}static updateA(e,t,n,o,r){return Ry(Py(e,o,!0,n.length),e,t,n,r)}static updateB(e,t,n,o,r){return Ry(Py(e,o,!1,t.length),e,t,n,r)}}function Ay(e,t,n,o){let r=n.lineAt(e),a=o.lineAt(t);return r.to==e&&a.to==t&&e<n.length&&t<o.length?[e+1,t+1]:[r.from,a.from]}function My(e,t,n,o){let r=n.lineAt(e),a=o.lineAt(t);return r.from==e&&a.from==t?[e,t]:[r.to+1,a.to+1]}function Oy(e,t,n,o,r){let a=[];for(let s=0;s<e.length;s++){let i=e[s],[l,c]=Ay(i.fromA+o,i.fromB+r,t,n),[d,u]=My(i.toA+o,i.toB+r,t,n),h=[i.offset(-l+o,-c+r)];for(;s<e.length-1;){let a=e[s+1],[i,m]=Ay(a.fromA+o,a.fromB+r,t,n);if(i>d+1&&m>u+1)break;h.push(a.offset(-l+o,-c+r)),[d,u]=My(a.toA+o,a.toB+r,t,n),s++}a.push(new Iy(h,l,Math.max(l,d),c,Math.max(c,u)))}return a}const Ty=1e3;function Dy(e,t,n,o){let r=0,a=e.length;for(;;){if(r==a){let o=0,a=0;r&&({toA:o,toB:a}=e[r-1]);let s=t-(n?o:a);return[o+s,a+s]}let s=r+a>>1,i=e[s],[l,c]=n?[i.fromA,i.toA]:[i.fromB,i.toB];if(l>t)a=s;else{if(!(c<=t))return o?[i.fromA,i.fromB]:[i.toA,i.toB];r=s+1}}}function Py(e,t,n,o){let r=[];return t.iterChangedRanges(((a,s,i,l)=>{let c=0,d=n?t.length:o,u=0,h=n?o:t.length;a>Ty&&([c,u]=Dy(e,a-Ty,n,!0)),s<t.length-Ty&&([d,h]=Dy(e,s+Ty,n,!1));let m,f=l-i-(s-a),[p,g]=n?[f,0]:[0,f];r.length&&(m=r[r.length-1]).toA>=c?r[r.length-1]={fromA:m.fromA,fromB:m.fromB,toA:d,toB:h,diffA:m.diffA+p,diffB:m.diffB+g}:r.push({fromA:c,toA:d,fromB:u,toB:h,diffA:p,diffB:g})})),r}function Ry(e,t,n,o,r){if(!e.length)return t;let a=0,s=0,i=0,l=[];for(let c of e){let e=c.fromA+s,d=c.toA+s+c.diffA,u=c.fromB+i,h=c.toB+i+c.diffB;for(;a<t.length;){let n=t[a];if(n.toA+s<=e&&n.toB+i<=u)l.push(n.offset(s,i));else if(n.fromA+s>d)break;a++}for(let t of Oy(Cy(n.sliceString(e,d),o.sliceString(u,h),r),n,o,e,u))l.push(t);for(s+=c.diffA,i+=c.diffB;a<t.length;){let e=t[a];if(e.fromA>d+s&&e.fromB>h+i)break;a++}}for(;a<t.length;)l.push(t[a++].offset(s,i));return l}const Fy=zt.fromClass(class{constructor(e){({deco:this.deco,gutter:this.gutter}=Hy(e))}update(e){var t,n;(e.docChanged||e.viewportChanged||(t=e.startState,n=e.state,t.field(_y,!1)!=n.field(_y,!1))||function(e,t){return e.facet(Sy)!=t.facet(Sy)}(e.startState,e.state))&&({deco:this.deco,gutter:this.gutter}=Hy(e.view))}},{decorations:e=>e.deco}),Ly=rn.low(hr({class:"cm-changeGutter",markers:e=>{var t;return(null===(t=e.plugin(Fy))||void 0===t?void 0:t.gutter)||mr.empty}}));const zy=Lt.line({class:"cm-changedLine"}),By=Lt.mark({class:"cm-changedText"}),Uy=Lt.mark({tagName:"ins",class:"cm-insertedLine"}),Vy=Lt.mark({tagName:"del",class:"cm-deletedLine"}),$y=new class extends gr{constructor(){super(...arguments),this.elementClass="cm-changedLineGutter"}};function Gy(e,t,n,o,r,a){let s=n?e.fromA:e.fromB,i=n?e.toA:e.toB,l=0;if(s!=i){r.add(s,s,zy),r.add(s,i,n?Vy:Uy),a&&a.add(s,s,$y);for(let c=t.iterRange(s,i-1),d=s;!c.next().done;){if(c.lineBreak){d++,r.add(d,d,zy),a&&a.add(d,d,$y);continue}let t=d+c.value.length;if(o)for(;l<e.changes.length;){let o=e.changes[l],a=s+(n?o.fromA:o.fromB),i=s+(n?o.toA:o.toB),c=Math.max(d,a),u=Math.min(t,i);if(c<u&&r.add(c,u,By),!(i<t))break;l++}d=t}}}function Hy(e){let t=e.state.field(_y),{side:n,highlightChanges:o,markGutter:r}=e.state.facet(Sy),a="a"==n,s=new Bt,i=r?new Bt:null,{from:l,to:c}=e.viewport;for(let d of t){if((a?d.fromA:d.fromB)>=c)break;(a?d.toA:d.toB)>l&&Gy(d,e.state.doc,a,o,s,i)}return{deco:s.finish(),gutter:i&&i.finish()}}class Wy extends an{constructor(e){super(),this.height=e}eq(e){return this.height==e.height}toDOM(){let e=document.createElement("div");return e.className="cm-mergeSpacer",e.style.height=this.height+"px",e}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}const qy=Rt.define({map:(e,t)=>e.map(t)}),Yy=Ft.define({create:()=>Lt.none,update:(e,t)=>{for(let n of t.effects)if(n.is(qy))return n.value;return e.map(t.changes)},provide:e=>Pt.decorations.from(e)}),Ky=.01;const Jy=Rt.define({map:(e,t)=>t.mapPos(e)});class Xy extends an{constructor(e){super(),this.lines=e}eq(e){return this.lines==e.lines}toDOM(e){let t=document.createElement("div");return t.className="cm-collapsedLines",t.textContent="⦚ "+e.state.phrase("$ unchanged lines",this.lines)+" ⦚",t.addEventListener("click",(t=>{let n=e.posAtDOM(t.target);e.dispatch({effects:Jy.of(n)});let{side:o,sibling:r}=e.state.facet(Sy);r&&r().dispatch({effects:Jy.of(Zy(n,e.state.field(_y),"a"==o))})})),t}ignoreEvent(e){return e instanceof MouseEvent}get estimatedHeight(){return 27}}function Zy(e,t,n){let o=0,r=0;for(let a=0;;a++){let s=a<t.length?t[a]:null;if(!s||(n?s.fromA:s.fromB)>=e)return r+(e-o);[o,r]=n?[s.toA,s.toB]:[s.toB,s.toA]}}const Qy=Ft.define({create:e=>Lt.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)n.is(Jy)&&(e=e.update({filter:e=>e!=n.value}));return e},provide:e=>Pt.decorations.from(e)});function eb({margin:e=3,minSize:t=4}){return Qy.init((n=>function(e,t,n){let o=new Bt,r="a"==e.facet(Sy).side,a=e.field(_y),s=1;for(let i=0;;i++){let l=i<a.length?a[i]:null,c=i?s+t:1,d=l?e.doc.lineAt(r?l.fromA:l.fromB).number-1-t:e.doc.lines,u=d-c+1;if(u>=n&&o.add(e.doc.line(c).from,e.doc.line(d).to,Lt.replace({widget:new Xy(u),block:!0})),!l)break;s=e.doc.lineAt(Math.min(e.doc.length,r?l.toA:l.toB)).number}return o.finish()}(n,e,t)))}const tb=Pt.styleModule.of(new fr({".cm-mergeView":{overflowY:"auto"},".cm-mergeViewEditors":{display:"flex",alignItems:"stretch"},".cm-mergeViewEditor":{flexGrow:1,flexBasis:0,overflow:"hidden"},".cm-merge-revert":{width:"1.6em",flexGrow:0,flexShrink:0,position:"relative"},".cm-merge-revert button":{position:"absolute",display:"block",width:"100%",boxSizing:"border-box",textAlign:"center",background:"none",border:"none",font:"inherit",cursor:"pointer"}})),nb=Pt.baseTheme({".cm-mergeView & .cm-scroller, .cm-mergeView &":{height:"auto !important",overflowY:"visible !important"},"&.cm-merge-a .cm-changedLine, .cm-deletedChunk":{backgroundColor:"rgba(160, 128, 100, .08)"},"&.cm-merge-b .cm-changedLine":{backgroundColor:"rgba(100, 160, 128, .08)"},"&light.cm-merge-a .cm-changedText, &light .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ee443366, #ee443366) bottom/100% 2px no-repeat"},"&dark.cm-merge-a .cm-changedText, &dark .cm-deletedChunk .cm-deletedText":{background:"linear-gradient(#ffaa9966, #ffaa9966) bottom/100% 2px no-repeat"},"&light.cm-merge-b .cm-changedText":{background:"linear-gradient(#22bb2266, #22bb2266) bottom/100% 2px no-repeat"},"&dark.cm-merge-b .cm-changedText":{background:"linear-gradient(#88ff8866, #88ff8866) bottom/100% 2px no-repeat"},".cm-insertedLine, .cm-deletedLine":{textDecoration:"none"},".cm-deletedChunk":{paddingLeft:"6px","& .cm-chunkButtons":{position:"absolute",insetInlineEnd:"5px"},"& button":{border:"none",cursor:"pointer",color:"white",margin:"0 2px",borderRadius:"3px","&[name=accept]":{background:"#2a2"},"&[name=reject]":{background:"#d43"}}},".cm-collapsedLines":{padding:"5px 5px 5px 10px",cursor:"pointer"},"&light .cm-collapsedLines":{color:"#444",background:"linear-gradient(to bottom, transparent 0, #f3f3f3 30%, #f3f3f3 70%, transparent 100%)"},"&dark .cm-collapsedLines":{color:"#ddd",background:"linear-gradient(to bottom, transparent 0, #222 30%, #222 70%, transparent 100%)"},".cm-changeGutter":{width:"3px",paddingLeft:"1px"},"&light.cm-merge-a .cm-changedLineGutter, &light .cm-deletedLineGutter":{background:"#e43"},"&dark.cm-merge-a .cm-changedLineGutter, &dark .cm-deletedLineGutter":{background:"#fa9"},"&light.cm-merge-b .cm-changedLineGutter":{background:"#2b2"},"&dark.cm-merge-b .cm-changedLineGutter":{background:"#8f8"}}),ob=new pr,rb=new pr;class ab{constructor(e){this.revertDOM=null,this.revertToA=!1,this.revertToLeft=!1,this.measuring=-1,this.diffConf=e.diffConfig;let t=[rn.low(Fy),nb,tb,Yy,Pt.updateListener.of((e=>{this.measuring<0&&(e.heightChanged||e.viewportChanged)&&!e.transactions.some((e=>e.effects.some((e=>e.is(qy)))))&&this.measure()}))],n=[Sy.of({side:"a",sibling:()=>this.b,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&n.push(Ly);let o=$n.create({doc:e.a.doc,selection:e.a.selection,extensions:[e.a.extensions||[],Pt.editorAttributes.of({class:"cm-merge-a"}),rb.of(n),t]}),r=[Sy.of({side:"b",sibling:()=>this.a,highlightChanges:!1!==e.highlightChanges,markGutter:!1!==e.gutter})];!1!==e.gutter&&r.push(Ly);let a=$n.create({doc:e.b.doc,selection:e.b.selection,extensions:[e.b.extensions||[],Pt.editorAttributes.of({class:"cm-merge-b"}),rb.of(r),t]});this.chunks=Iy.build(o.doc,a.doc,this.diffConf);let s=[_y.init((()=>this.chunks)),ob.of(e.collapseUnchanged?eb(e.collapseUnchanged):[])];o=o.update({effects:Rt.appendConfig.of(s)}).state,a=a.update({effects:Rt.appendConfig.of(s)}).state,this.dom=document.createElement("div"),this.dom.className="cm-mergeView",this.editorDOM=this.dom.appendChild(document.createElement("div")),this.editorDOM.className="cm-mergeViewEditors";let i=e.orientation||"a-b",l=document.createElement("div");l.className="cm-mergeViewEditor";let c=document.createElement("div");c.className="cm-mergeViewEditor",this.editorDOM.appendChild("a-b"==i?l:c),this.editorDOM.appendChild("a-b"==i?c:l),this.a=new Pt({state:o,parent:l,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.a)}),this.b=new Pt({state:a,parent:c,root:e.root,dispatchTransactions:e=>this.dispatch(e,this.b)}),this.setupRevertControls(!!e.revertControls,"b-to-a"==e.revertControls,e.renderRevertControl),e.parent&&e.parent.appendChild(this.dom),this.scheduleMeasure()}dispatch(e,t){if(e.some((e=>e.docChanged))){let n=e[e.length-1],o=e.reduce(((e,t)=>e.compose(t.changes)),un.empty(e[0].startState.doc.length));this.chunks=t==this.a?Iy.updateA(this.chunks,n.newDoc,this.b.state.doc,o,this.diffConf):Iy.updateB(this.chunks,this.a.state.doc,n.newDoc,o,this.diffConf),t.update([...e,n.state.update({effects:jy.of(this.chunks)})]);let r=t==this.a?this.b:this.a;r.update([r.state.update({effects:jy.of(this.chunks)})]),this.scheduleMeasure()}else t.update(e)}reconfigure(e){if("diffConfig"in e&&(this.diffConf=e.diffConfig),"orientation"in e){let t="b-a"!=e.orientation;if(t!=(this.editorDOM.firstChild==this.a.dom.parentNode)){let e=this.a.dom.parentNode,n=this.b.dom.parentNode;e.remove(),n.remove(),this.editorDOM.insertBefore(t?e:n,this.editorDOM.firstChild),this.editorDOM.appendChild(t?n:e),this.revertToLeft=!this.revertToLeft,this.revertDOM&&(this.revertDOM.textContent="")}}if("revertControls"in e||"renderRevertControl"in e){let t=!!this.revertDOM,n=this.revertToA,o=this.renderRevert;"revertControls"in e&&(t=!!e.revertControls,n="b-to-a"==e.revertControls),"renderRevertControl"in e&&(o=e.renderRevertControl),this.setupRevertControls(t,n,o)}let t="highlightChanges"in e,n="gutter"in e,o="collapseUnchanged"in e;if(t||n||o){let r=[],a=[];if(t||n){let o=this.a.state.facet(Sy),s=n?!1!==e.gutter:o.markGutter,i=t?!1!==e.highlightChanges:o.highlightChanges;r.push(rb.reconfigure([Sy.of({side:"a",sibling:()=>this.b,highlightChanges:i,markGutter:s}),s?Ly:[]])),a.push(rb.reconfigure([Sy.of({side:"b",sibling:()=>this.a,highlightChanges:i,markGutter:s}),s?Ly:[]]))}if(o){let t=ob.reconfigure(e.collapseUnchanged?eb(e.collapseUnchanged):[]);r.push(t),a.push(t)}this.a.dispatch({effects:r}),this.b.dispatch({effects:a})}this.scheduleMeasure()}setupRevertControls(e,t,n){this.revertToA=t,this.revertToLeft=this.revertToA==(this.editorDOM.firstChild==this.a.dom.parentNode),this.renderRevert=n,!e&&this.revertDOM?(this.revertDOM.remove(),this.revertDOM=null):e&&!this.revertDOM?(this.revertDOM=this.editorDOM.insertBefore(document.createElement("div"),this.editorDOM.firstChild.nextSibling),this.revertDOM.addEventListener("mousedown",(e=>this.revertClicked(e))),this.revertDOM.className="cm-merge-revert"):this.revertDOM&&(this.revertDOM.textContent="")}scheduleMeasure(){if(this.measuring<0){let e=this.dom.ownerDocument.defaultView||window;this.measuring=e.requestAnimationFrame((()=>{this.measuring=-1,this.measure()}))}}measure(){!function(e,t,n){let o=new Bt,r=new Bt,a=e.state.field(Yy).iter(),s=t.state.field(Yy).iter(),i=0,l=0,c=0,d=0;for(let f=0;;f++){let u=f<n.length?n[f]:null;if(i<(u?u.fromA:e.state.doc.length)){let n=e.lineBlockAt(i).top+c-(t.lineBlockAt(l).top+d);n<-.01?(c-=n,o.add(i,i,Lt.widget({widget:new Wy(-n),block:!0,side:-1}))):n>Ky&&(d+=n,r.add(l,l,Lt.widget({widget:new Wy(n),block:!0,side:-1})))}if(!u)break;for(i=u.toA,l=u.toB;a.value&&a.from<i;)c-=a.value.spec.widget.height,a.next();for(;s.value&&s.from<l;)d-=s.value.spec.widget.height,s.next()}for(;a.value;)c-=a.value.spec.widget.height,a.next();for(;s.value;)d-=s.value.spec.widget.height,s.next();let u=e.contentHeight+c-(t.contentHeight+d);u<Ky?o.add(e.state.doc.length,e.state.doc.length,Lt.widget({widget:new Wy(-u),block:!0,side:1})):u>Ky&&r.add(t.state.doc.length,t.state.doc.length,Lt.widget({widget:new Wy(u),block:!0,side:1}));let h=o.finish(),m=r.finish();mr.eq([h],[e.state.field(Yy)])||e.dispatch({effects:qy.of(h)}),mr.eq([m],[t.state.field(Yy)])||t.dispatch({effects:qy.of(m)})}(this.a,this.b,this.chunks),this.revertDOM&&this.updateRevertButtons()}updateRevertButtons(){let e=this.revertDOM,t=e.firstChild,n=this.a.viewport,o=this.b.viewport;for(let r=0;r<this.chunks.length;r++){let a=this.chunks[r];if(a.fromA>n.to||a.fromB>o.to)break;if(a.fromA<n.from||a.fromB<o.from)continue;let s=this.a.lineBlockAt(a.fromA).top+"px";for(;t&&+t.dataset.chunk<r;)t=sb(t);t&&t.dataset.chunk==String(r)?(t.style.top!=s&&(t.style.top=s),t=t.nextSibling):e.insertBefore(this.renderRevertButton(s,r),t)}for(;t;)t=sb(t)}renderRevertButton(e,t){let n;if(this.renderRevert)n=this.renderRevert();else{n=document.createElement("button");let e=this.a.state.phrase("Revert this chunk");n.setAttribute("aria-label",e),n.setAttribute("title",e),n.textContent=this.revertToLeft?"⇜":"⇝"}return n.style.top=e,n.setAttribute("data-chunk",String(t)),n}revertClicked(e){let t,n=e.target;for(;n&&n.parentNode!=this.revertDOM;)n=n.parentNode;if(n&&(t=this.chunks[n.dataset.chunk])){let[n,o,r,a,s,i]=this.revertToA?[this.b,this.a,t.fromB,t.toB,t.fromA,t.toA]:[this.a,this.b,t.fromA,t.toA,t.fromB,t.toB],l=n.state.sliceDoc(r,Math.max(r,a-1));r!=a&&i<=o.state.doc.length&&(l+=n.state.lineBreak),o.dispatch({changes:{from:s,to:Math.min(o.state.doc.length,i),insert:l},userEvent:"revert"}),e.preventDefault()}}destroy(){this.a.destroy(),this.b.destroy(),this.measuring>-1&&(this.dom.ownerDocument.defaultView||window).cancelAnimationFrame(this.measuring),this.dom.remove()}}function sb(e){let t=e.nextSibling;return e.remove(),t}var ib=["className","children","orientation","revertControls","highlightChanges","gutter","collapseUnchanged","destroyRerender","renderRevertControl"],lb=["modified","modifiedExtension","original","originalExtension","theme","dispatch"],cb=u.forwardRef(((e,t)=>{var{className:n,children:o,orientation:a,revertControls:s,highlightChanges:i,gutter:l,collapseUnchanged:c,destroyRerender:d=!0,renderRevertControl:u}=e,h=dr(e,ib),m=Yx(),{modified:f,modifiedExtension:g,original:v,originalExtension:x,theme:y,dispatch:b}=m,w=dr(m,lb),k=r.useRef(null),N=r.useRef(),E={orientation:a,revertControls:s,highlightChanges:i,gutter:l,collapseUnchanged:c,renderRevertControl:u};r.useImperativeHandle(t,(()=>({container:k.current,view:N.current,modified:f,original:v,config:Zn({a:v,b:f,parent:k.current},E)})),[k,N,f,v,E]);var C=Pt.updateListener.of((e=>{if(e.docChanged&&"function"==typeof(null==x?void 0:x.onChange)){var t=e.state.doc.toString();null==x||x.onChange(t,e)}})),S=Pt.updateListener.of((e=>{if(e.docChanged&&"function"==typeof(null==g?void 0:g.onChange)){var t=e.state.doc.toString();null==g||g.onChange(t,e)}}));r.useEffect((()=>{!N.current&&k.current&&x&&g&&(N.current=new ab(Zn({a:Zn({},v,{extensions:[...(null==x?void 0:x.extension)||[],...ur(Zn({},null==x?void 0:x.option,{theme:y})),C]}),b:Zn({},f,{extensions:[...(null==g?void 0:g.extension)||[],...ur(Zn({},null==g?void 0:g.option,{theme:y})),S]}),parent:k.current},E)),b({view:N.current}))}),[N,k,x,g]),r.useEffect((()=>{if(v&&v.doc&&N.current){var e,t,n=null==(e=N.current)?void 0:e.a.state.doc.toString();if(n!==v.doc)null==(t=N.current)||t.a.dispatch({changes:{from:0,to:n.length,insert:v.doc||""}})}if(f&&f.doc&&N.current){var o,r,a=null==(o=N.current)?void 0:o.b.state.doc.toString();if(a!==f.doc)null==(r=N.current)||r.b.dispatch({changes:{from:0,to:a.length,insert:f.doc||""}})}if(d&&N.current){var s=N.current.a.state.selection.ranges[0].from,i=N.current.b.state.selection.ranges[0].from;N.current.destroy(),N.current=new ab(Zn({a:Zn({},v,{extensions:[...(null==x?void 0:x.extension)||[],...ur(Zn({},null==x?void 0:x.option,{theme:y}))]}),b:Zn({},f,{extensions:[...(null==g?void 0:g.extension)||[],...ur(Zn({},null==g?void 0:g.option,{theme:y}))]}),parent:k.current},E)),s&&(N.current.a.focus(),N.current.a.dispatch({selection:{anchor:s,head:s}})),i&&(N.current.b.focus(),N.current.b.dispatch({selection:{anchor:i,head:i}}))}}),[N,y,k.current,v,f,x,g,d]),r.useEffect((()=>()=>N.current&&N.current.destroy()),[]),r.useEffect((()=>{if(N.current){var e={};w.orientation!==a&&(e.orientation=a),w.revertControls!==s&&(e.revertControls=s),w.highlightChanges!==i&&(e.highlightChanges=i),w.gutter!==l&&(e.gutter=l),w.collapseUnchanged!==c&&(e.collapseUnchanged=c),w.renderRevertControl!==u&&(e.collapseUnchanged=c),Object.keys(e).length&&b&&N.current&&(N.current.reconfigure(Zn({},e)),b(Zn({},e)))}}),[b,N,a,s,i,l,c,u]);return p.jsx("div",Zn({ref:k,className:"cm-merge-theme"+(n?" "+n:"")},h,{children:o}))}));cb.displayName="CodeMirrorMerge.Internal";var db=["theme"],ub=u.forwardRef(((e,t)=>{var{theme:n}=e,o=dr(e,db);return p.jsx(Kx,{theme:n,children:p.jsx(cb,Zn({},o,{ref:t}))})}));function hb(e){return void 0===e&&(e=[]),vr({override:[t=>{var n=t.matchBefore(/@(\w+)?/);return n?n&&n.from==n.to&&!t.explicit?null:{from:null==n?void 0:n.from,options:[...e]}:null}]})}function mb(e){const t=function(e){const t=H.get(xr),n=yr.keyBy(t,(e=>e.name)),o=e.match(/@([\w.]+)/g)||[];return o.map((e=>e.slice(1))).map((e=>n.get(e))).filter(Boolean)}(e);return V.debug("Included datasets",t),{includeOtherCode:bi(""),context:{schema:t.map((e=>({name:e.name,columns:e.columns.map((e=>({name:e.name,type:e.type})))})))},code:""}}ub.Original=Xx,ub.Modified=Qx,ub.displayName="CodeMirrorMerge",hb();const fb=[br(),Pt.lineWrapping],pb=[wr(),Pt.lineWrapping],gb=kr("marimo:ai-language","python"),vb=e=>{const t=m(65),{onClose:n}=e,{createNewCell:o}=L();let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={},t[0]=a):a=t[0];const[s,i]=r.useState(a),[l,c]=je(gb),{theme:d}=ke();let u,h,f;t[1]===Symbol.for("react.memo_cache_sentinel")?(u=Nr("api/ai/completion").toString(),h=Er.headers(),t[1]=u,t[2]=h):(u=t[1],h=t[2]),t[3]!==s||t[4]!==l?(f={api:u,headers:h,streamMode:"text",body:{...s,language:l},onError:yb},t[3]=s,t[4]=l,t[5]=f):f=t[5];const{completion:g,input:x,stop:y,isLoading:b,setCompletion:w,setInput:k,handleSubmit:N}=Cr(f);let E;t[6]===Symbol.for("react.memo_cache_sentinel")?(E=p.jsx(Ec,{className:"size-4 text-[var(--blue-11)]"}),t[6]=E):E=t[6];const C="python"===l?"Python":"SQL";let S,j,_,I,A,M,O,T,D,P,R,F,z,B,U;t[7]===Symbol.for("react.memo_cache_sentinel")?(S=p.jsx(_r,{className:"ml-1 h-3.5 w-3.5 text-muted-foreground/70"}),t[7]=S):S=t[7],t[8]!==C?(j=p.jsx(kt,{asChild:!0,children:p.jsxs(v,{variant:"text",className:"ml-2",size:"xs","data-testid":"language-button",children:[C,S]})}),t[8]=C,t[9]=j):j=t[9],t[10]!==c?(_=p.jsx(wt,{onClick:()=>c("python"),children:"Python"}),t[10]=c,t[11]=_):_=t[11],t[12]!==c?(I=p.jsx(wt,{onClick:()=>c("sql"),children:"SQL"}),t[12]=c,t[13]=I):I=t[13],t[14]!==_||t[15]!==I?(A=p.jsxs(It,{align:"center",children:[_,I]}),t[14]=_,t[15]=I,t[16]=A):A=t[16],t[17]!==j||t[18]!==A?(M=p.jsxs(_t,{modal:!1,children:[j,A]}),t[17]=j,t[18]=A,t[19]=M):M=t[19],t[20]!==w||t[21]!==n?(O=()=>{w(""),n()},t[20]=w,t[21]=n,t[22]=O):O=t[22],t[23]!==k?(T=e=>{k(e),i(mb(e))},t[23]=k,t[24]=T):T=t[24],t[25]!==b||t[26]!==N?(D=()=>{b||N()},t[25]=b,t[26]=N,t[27]=D):D=t[27],t[28]!==d||t[29]!==O||t[30]!==x||t[31]!==T||t[32]!==D?(P=p.jsx(xb,{theme:d,onClose:O,value:x,onChange:T,onSubmit:D}),t[28]=d,t[29]=O,t[30]=x,t[31]=T,t[32]=D,t[33]=P):P=t[33],t[34]!==b||t[35]!==y?(R=b&&p.jsxs(v,{"data-testid":"stop-completion-button",variant:"text",size:"sm",className:"mb-0",onClick:y,children:[p.jsx(Ir,{className:"animate-spin mr-1",size:14}),"Stop"]}),t[34]=b,t[35]=y,t[36]=R):R=t[36],t[37]!==b||t[38]!==g||t[39]!==o||t[40]!==l||t[41]!==w||t[42]!==n?(F=!b&&g&&p.jsx(v,{"data-testid":"accept-completion-button",variant:"text",size:"sm",className:"mb-0",disabled:b,onClick:()=>{o({cellId:"__end__",before:!1,code:"python"===l?g:jo.fromQuery(g)}),w(""),n()},children:p.jsx("span",{className:"text-[var(--grass-11)] opacity-100",children:"Accept"})}),t[37]=b,t[38]=g,t[39]=o,t[40]=l,t[41]=w,t[42]=n,t[43]=F):F=t[43],t[44]===Symbol.for("react.memo_cache_sentinel")?(z=p.jsx(Vt,{className:"size-4"}),t[44]=z):z=t[44],t[45]!==n?(B=p.jsx(v,{variant:"text",size:"sm",className:"mb-0",onClick:n,children:z}),t[45]=n,t[46]=B):B=t[46],t[47]!==M||t[48]!==P||t[49]!==R||t[50]!==F||t[51]!==B?(U=p.jsxs("div",{className:"flex items-center px-3",children:[E,M,P,R,F,B]}),t[47]=M,t[48]=P,t[49]=R,t[50]=F,t[51]=B,t[52]=U):U=t[52];const V=U;let $,G,H,W;return t[53]===Symbol.for("react.memo_cache_sentinel")?($=Ht("flex flex-col w-full gap-2 py-2"),t[53]=$):$=t[53],t[54]!==g?(G=!g&&p.jsxs("span",{className:"text-xs text-muted-foreground px-3 flex flex-col gap-1",children:[p.jsxs("span",{children:["You can mention"," ",p.jsx("span",{className:"text-[var(--cyan-11)]",children:"@dataframe"})," or"," ",p.jsx("span",{className:"text-[var(--cyan-11)]",children:"@sql_table"})," to pull additional context such as column names."]}),p.jsx("span",{children:"Code from other cells is automatically included."})]}),t[54]=g,t[55]=G):G=t[55],t[56]!==g||t[57]!==d||t[58]!==l||t[59]!==w?(H=g&&p.jsx(Ar,{value:g,className:"cm border-t",onChange:w,theme:"dark"===d?"dark":"light",extensions:"python"===l?fb:pb}),t[56]=g,t[57]=d,t[58]=l,t[59]=w,t[60]=H):H=t[60],t[61]!==V||t[62]!==G||t[63]!==H?(W=p.jsxs("div",{className:$,children:[V,G,H]}),t[61]=V,t[62]=G,t[63]=H,t[64]=W):W=t[64],W},xb=e=>{const t=m(20),{value:n,inputRef:o,onChange:r,onSubmit:a,onClose:s,theme:i}=e,l=a,c=s,d=Z(xr);let u,h,f,g,v,x,y,b;if(t[0]!==d){let e;t[2]===Symbol.for("react.memo_cache_sentinel")?(e=e=>({label:`@${e.name}`,info:()=>{const t=[null==e.num_rows?void 0:`${e.num_rows} rows`,null==e.num_columns?void 0:`${e.num_columns} columns`].filter(Boolean).join(", "),n=document.createElement("div");if(n.classList.add("prose","prose-sm","dark:prose-invert"),t){const e=document.createElement("div");e.textContent=t,e.style.fontWeight="bold",n.append(e)}if(e.source){const t=document.createElement("figcaption");t.textContent=`Source: ${e.source}`,n.append(t)}if(e.columns){const t=document.createElement("table"),o=t.insertRow(),r=o.insertCell();r.textContent="Column",r.style.fontWeight="bold";const a=o.insertCell();a.textContent="Type",a.style.fontWeight="bold",e.columns.forEach((e=>{const n=t.insertRow();n.insertCell().textContent=e.name;n.insertCell().textContent=e.type})),n.append(t)}return n}}),t[2]=e):e=t[2];h=hb(d.map(e)),t[0]=d,t[1]=h}else h=t[1];t[3]===Symbol.for("react.memo_cache_sentinel")?(f=Sr(),t[3]=f):f=t[3],t[4]!==l?(g=rn.highest(tn.of([{preventDefault:!0,stopPropagation:!0,any:(e,t)=>{const n=t.metaKey||t.ctrlKey||t.shiftKey;if("Enter"===t.key&&!n)return l(),t.preventDefault(),t.stopPropagation(),!0;if("Enter"===t.key&&t.shiftKey){const n=e.state.selection.main.from;return e.dispatch({changes:{from:n,to:n,insert:"\n"},selection:{anchor:n+1,head:n+1}}),t.preventDefault(),t.stopPropagation(),!0}return!1}}])),t[4]=l,t[5]=g):g=t[5],t[6]!==c?(v=tn.of([{key:"Escape",preventDefault:!0,stopPropagation:!0,run:()=>(c(),!0)}]),t[6]=c,t[7]=v):v=t[7],t[8]===Symbol.for("react.memo_cache_sentinel")?(x=tn.of([{key:"ArrowUp",preventDefault:!0,stopPropagation:!0}]),y=tn.of([{key:"ArrowDown",preventDefault:!0,stopPropagation:!0}]),t[8]=x,t[9]=y):(x=t[8],y=t[9]),t[10]!==h||t[11]!==g||t[12]!==v?(b=[h,Pt.lineWrapping,f,g,v,x,y],t[10]=h,t[11]=g,t[12]=v,t[13]=b):b=t[13],u=b;const w=u,k="dark"===i?"dark":"light";let N;return t[14]!==o||t[15]!==n||t[16]!==w||t[17]!==r||t[18]!==k?(N=p.jsx(Ar,{ref:o,className:"flex-1 font-sans overflow-auto my-1",autoFocus:!0,width:"100%",value:n,basicSetup:!1,extensions:w,onChange:r,theme:k,placeholder:"Generate with AI"}),t[14]=o,t[15]=n,t[16]=w,t[17]=r,t[18]=k,t[19]=N):N=t[19],N};function yb(e){Y({title:"Generate with AI failed",description:jr(e)})}const bb=ub.Original,wb=ub.Modified,kb=[br(),Pt.lineWrapping],Nb=e=>{const t=m(53),{onChange:n,initialPrompt:o,currentLanguageAdapter:a,currentCode:s,declineChange:i,acceptChange:l,enabled:c,children:d}=e;let h;t[0]===Symbol.for("react.memo_cache_sentinel")?(h={},t[0]=h):h=t[0];const[f,x]=r.useState(h),[y,b]=je(od);let w,k,N,E,C;t[1]===Symbol.for("react.memo_cache_sentinel")?(w=Nr("api/ai/completion").toString(),k=Er.headers(),t[1]=w,t[2]=k):(w=t[1],k=t[2]),t[3]!==y||t[4]!==s?(N=y?bi(s):"",t[3]=y,t[4]=s,t[5]=N):N=t[5],t[6]!==f||t[7]!==N||t[8]!==s||t[9]!==a?(E={...f,includeOtherCode:N,code:s,language:a},t[6]=f,t[7]=N,t[8]=s,t[9]=a,t[10]=E):E=t[10],t[11]!==o||t[12]!==E?(C={api:w,headers:k,initialInput:o,streamMode:"text",body:E,onError:Eb},t[11]=o,t[12]=E,t[13]=C):C=t[13];const{completion:S,input:j,stop:_,isLoading:I,setCompletion:A,setInput:M,handleSubmit:O}=Cr(C),T=u.useRef(null);let D,P,R,F;t[14]!==c?(D=()=>{const e=T.current;c&&e&&(requestAnimationFrame((()=>{var t;null==(t=e.view)||t.focus()})),Mr(T.current.view))},P=[c],t[14]=c,t[15]=D,t[16]=P):(D=t[15],P=t[16]),r.useEffect(D,P),t[17]!==c||t[18]!==M||t[19]!==o?(R=()=>{c&&M(o||"")},F=[c,o,M],t[17]=c,t[18]=M,t[19]=o,t[20]=R,t[21]=F):(R=t[20],F=t[21]),r.useEffect(R,F);const{theme:L}=ke(),z=c&&"max-h-[400px] min-h-11 visible",B=!c&&"max-h-0 min-h-0 invisible";let U,V,$,G;t[22]!==z||t[23]!==B?(U=Ht("flex items-center gap-2 border-b px-3 transition-all rounded-[inherit] rounded-b-none duration-300 overflow-hidden",z,B),t[22]=z,t[23]=B,t[24]=U):U=t[24],t[25]!==c||t[26]!==i||t[27]!==A||t[28]!==M||t[29]!==I||t[30]!==O||t[31]!==T||t[32]!==L||t[33]!==j||t[34]!==_||t[35]!==S||t[36]!==l||t[37]!==b||t[38]!==y?(V=c&&p.jsxs(p.Fragment,{children:[p.jsx(Ec,{className:"text-[var(--blue-10)] flex-shrink-0",size:16}),p.jsx(xb,{inputRef:T,theme:L,onClose:()=>{i(),A("")},value:j,onChange:e=>{M(e),x(mb(e))},onSubmit:()=>{I||O()}}),I&&p.jsxs(v,{"data-testid":"stop-completion-button",variant:"text",size:"xs",className:"mb-0",onClick:_,children:[p.jsx(Ir,{className:"animate-spin mr-1",size:14}),"Stop"]}),!I&&S&&p.jsx(v,{"data-testid":"accept-completion-button",variant:"text",size:"xs",className:"mb-0",disabled:I,onClick:()=>{l(S),A("")},children:p.jsx("span",{className:"text-[var(--grass-11)] opacity-100",children:"Accept"})}),p.jsx("div",{className:"h-full w-px bg-border mx-2"}),p.jsx(g,{content:"Include code from other cells",children:p.jsxs("div",{className:"flex flex-row items-start gap-1 overflow-hidden",children:[p.jsx(Or,{"data-testid":"include-other-cells-checkbox",id:"include-other-cells",checked:y,onCheckedChange:e=>b(Boolean(e))}),p.jsx(se,{htmlFor:"include-other-cells",className:"text-muted-foreground text-xs whitespace-nowrap ellipsis",children:"Include all code"})]})}),p.jsx(v,{"data-testid":"decline-completion-button",variant:"text",size:"icon",disabled:I,onClick:()=>{_(),i(),A("")},children:p.jsx(Vt,{className:"text-[var(--red-10)]",size:16})})]}),t[25]=c,t[26]=i,t[27]=A,t[28]=M,t[29]=I,t[30]=O,t[31]=T,t[32]=L,t[33]=j,t[34]=_,t[35]=S,t[36]=l,t[37]=b,t[38]=y,t[39]=V):V=t[39],t[40]!==U||t[41]!==V?($=p.jsx("div",{className:U,children:V}),t[40]=U,t[41]=V,t[42]=$):$=t[42],t[43]!==S||t[44]!==c||t[45]!==n||t[46]!==s||t[47]!==L?(G=S&&c&&p.jsxs(ub,{className:"cm",theme:L,children:[p.jsx(bb,{onChange:n,value:s,extensions:kb}),p.jsx(wb,{value:S,editable:!1,readOnly:!0,extensions:kb})]}),t[43]=S,t[44]=c,t[45]=n,t[46]=s,t[47]=L,t[48]=G):G=t[48];const H=(!S||!c)&&d;let W;return t[49]!==$||t[50]!==G||t[51]!==H?(W=p.jsxs("div",{className:"flex flex-col w-full rounded-[inherit] overflow-hidden",children:[$,G,H]}),t[49]=$,t[50]=G,t[51]=H,t[52]=W):W=t[52],W};function Eb(e){Y({title:"Completion failed",description:jr(e)})}const Cb=u.forwardRef(((e,t)=>{const{className:n,editorView:o}=e,a=r.useRef(null);return r.useEffect((()=>{null!==o&&null!==a.current&&0===a.current.children.length&&a.current.append(o.dom)}),[o,a]),p.jsx("div",{className:Ht("cm",n),ref:pg(t,a),"data-testid":"cell-editor"})}));Cb.displayName="CellCodeMirrorEditor";const Sb=r.memo((({theme:e,showPlaceholder:t,allowFocus:n,id:o,config:a,code:s,status:i,serializedEditorState:l,runCell:c,updateCellCode:d,createNewCell:u,deleteCell:h,focusCell:f,moveCell:g,moveToNextCell:v,updateCellConfig:x,clearSerializedEditorState:y,userConfig:b,editorViewRef:w,hidden:k,setTemporarilyVisible:N})=>{var E;const[C,S]=je(nd),[j,_]=r.useState(),I=function(){const e=m(2),t=Q(md);let n;return e[0]!==t?(n=e=>{we!==e&&t(e)},e[0]=t,e[1]=n):n=e[1],n}(),A=r.useRef(null),M="running"===i||"queued"===i,{sendToTop:O,sendToBottom:T}=L(),D=function(){const e=m(3),{splitCell:t,undoSplitCell:n}=L();let o;return e[0]!==t||e[1]!==n?(o=e=>{const o=Tr(e.cellId),r=(null==o?void 0:o.state.doc.toString())??"";t(e);const{dismiss:a}=Y({title:"Cell split",action:p.jsx(rd,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{n({...e,snapshot:r}),s()},children:"Undo"})}),s=a},e[0]=t,e[1]=n,e[2]=o):o=e[2],F(o)}(),P=F((()=>!M&&(h({cellId:o}),!0))),R=r.useCallback((()=>u({cellId:o,before:!1})),[o,u]),z=r.useCallback((()=>u({cellId:o,before:!0})),[o,u]),B=r.useCallback((()=>g({cellId:o,before:!1})),[o,g]),U=r.useCallback((()=>g({cellId:o,before:!0})),[o,g]),V=r.useCallback((()=>f({cellId:o,before:!1})),[o,f]),$=r.useCallback((()=>f({cellId:o,before:!0})),[o,f]),G=F((()=>{const e=!a.hide_code;return be({configs:{[o]:{hide_code:e}}}),x({cellId:o,config:{hide_code:e}}),e})),H=Z(te),W=F((()=>{id(H,u)})),q=Dr(b),K=r.useMemo((()=>{const n=(e=>{const{cellId:t,cellMovementCallbacks:n,cellCodeCallbacks:o,keymapConfig:r,hotkeys:a}=e;return[Si(r,n),yn(t,n,a),bn(t,o,a),Tp(e),[Ip,(s=(e,t)=>{pn(e,t)},zt.define((e=>new Ap(e,s)))),Pt.baseTheme({".underline":{textDecoration:"underline",cursor:"pointer",color:"var(--link)"}})]];var s})({cellId:o,showPlaceholder:t,enableAI:q,cellCodeCallbacks:{updateCellCode:d,afterToggleMarkdown:W},cellMovementCallbacks:{onRun:c,deleteCell:P,createAbove:z,createBelow:R,moveUp:U,moveDown:B,focusUp:$,focusDown:V,sendToTop:O,sendToBottom:T,splitCell:D,moveToNextCell:v,toggleHideCode:G,aiCellCompletion:()=>{let e=!1;return S((t=>(null==t?void 0:t.cellId)===o?(e=!0,null):{cellId:o})),e}},completionConfig:b.completion,keymapConfig:b.keymap,theme:e,hotkeys:new Pr(b.keymap.overrides??{})});return n.push(zt.define((e=>{const t=e.state.field(Rr);return _(t.type),{update(e){const t=e.state.field(Rr);_(t.type)}}}))),n}),[o,b.keymap,b.completion,q,e,t,z,R,$,V,U,B,v,O,T,D,G,d,P,c,S,W]);r.useEffect((()=>{let e;null===l?null===w.current?(w.current=new Pt({state:$n.create({doc:s,extensions:K})}),e=!0,cr(w.current,Fr(w.current.state).type)):(w.current.dispatch({effects:[Rt.reconfigure.of([K]),Lr(w.current,b.completion,new Pr(b.keymap.overrides??{}))]}),e=!1):(w.current=new Pt({state:$n.fromJSON(l,{doc:s,extensions:K},{history:zr})}),cr(w.current,Fr(w.current.state).type),e=!0,y({cellId:o})),null!==w.current&&null!==A.current&&A.current.replaceChildren(w.current.dom),e&&n&&requestAnimationFrame((()=>{var e,t;null==(e=w.current)||e.focus(),null==(t=w.current)||t.dom.scrollIntoView({behavior:"smooth",block:"nearest"})}))}),[w,K,b.completion,b.keymap,y,o,l]),r.useEffect((()=>()=>{var e;null==(e=w.current)||e.destroy()}),[w]);const J=r.useCallback((async()=>{var e,t;if(k&&void 0!==N){N(!0),null==(e=w.current)||e.focus();const n=null==(t=A.current)?void 0:t.parentElement,o=new AbortController;null==n||n.addEventListener("focusout",(()=>{requestAnimationFrame((()=>{var e;const t=document.activeElement;(null==n?void 0:n.contains(t))||(N(!1),null==(e=w.current)||e.dom.blur(),o.abort())}))}),{signal:o.signal})}}),[k,N,w,A]);return p.jsx(Nb,{enabled:(null==C?void 0:C.cellId)===o,initialPrompt:null==C?void 0:C.initialPrompt,currentCode:(null==(E=w.current)?void 0:E.state.doc.toString())??s,currentLanguageAdapter:j,declineChange:()=>{var e;S(null),null==(e=w.current)||e.focus()},onChange:e=>{var t;null==(t=w.current)||t.dispatch({changes:{from:0,to:w.current.state.doc.length,insert:e}})},acceptChange:e=>{var t,n;null==(t=w.current)||t.dispatch({changes:{from:0,to:w.current.state.doc.length,insert:e}}),null==(n=w.current)||n.focus(),S(null)},children:p.jsxs("div",{className:"relative w-full",onFocus:()=>I(o),children:[k&&p.jsx(Br,{onClick:J}),p.jsx(Cb,{className:Ht(k&&"opacity-20 h-8 overflow-hidden"),editorView:w.current,ref:A}),!k&&p.jsx("div",{className:"absolute top-1 right-5",children:p.jsx($x,{code:s,editorView:w.current,currentLanguageAdapter:j,onAfterToggle:W})})]})})})),jb=e=>{const t=m(10);let n,o,r,a;return t[0]!==e.left?(n=p.jsx("div",{className:"flex-1 flex item-center gap-2",children:e.left}),t[0]=e.left,t[1]=n):n=t[1],t[2]!==e.center?(o=p.jsx("div",{className:"flex-1 flex item-center gap-2 justify-center",children:e.center}),t[2]=e.center,t[3]=o):o=t[3],t[4]!==e.right?(r=p.jsx("div",{className:"flex-1 flex item-center gap-2 justify-end",children:e.right}),t[4]=e.right,t[5]=r):r=t[5],t[6]!==n||t[7]!==o||t[8]!==r?(a=p.jsxs("div",{className:"flex items-center gap-2 w-full px-3",children:[n,o,r]}),t[6]=n,t[7]=o,t[8]=r,t[9]=a):a=t[9],a},_b=e=>{const t=m(8);if(!e.canCollapse&&!e.isCollapsed)return null;const n=e.isCollapsed?"Expand":"Collapse";let o,r,a;return t[0]!==e.isCollapsed?(o=p.jsx(Ib,{isCollapsed:e.isCollapsed}),t[0]=e.isCollapsed,t[1]=o):o=t[1],t[2]!==n||t[3]!==o?(r=p.jsx(g,{content:n,children:o}),t[2]=n,t[3]=o,t[4]=r):r=t[4],t[5]!==e.onClick||t[6]!==r?(a=p.jsx(v,{variant:"text",size:"icon",onClick:e.onClick,children:r}),t[5]=e.onClick,t[6]=r,t[7]=a):a=t[7],a},Ib=e=>{const t=m(2),{isCollapsed:n}=e;let o;return t[0]!==n?(o=n?p.jsx($r,{className:"w-5 h-5 flex-shrink-0"}):p.jsx(ve,{className:"w-5 h-5 flex-shrink-0"}),t[0]=n,t[1]=o):o=t[1],o},Ab=r.memo((e=>{const t=m(24),{onClick:n,count:o,cellId:r}=e,a=R();let s;t[0]!==a||t[1]!==r?(s=Ur(a,r),t[0]=a,t[1]=r,t[2]=s):s=t[2];const i=s;let l,c;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=Ht("flex items-center justify-between w-[calc(100%-2rem)] h-9 bg-muted rounded-b mx-4 opacity-80 hover:opacity-100 cursor-pointer"),t[3]=l):l=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(_r,{className:"w-4 h-4 flex-shrink-0"}),t[4]=c):c=t[4];const d=1===o?"cell":"cells";let u,h,f,v,x,y,b;return t[5]!==o||t[6]!==d?(u=p.jsxs(p.Fragment,{children:[c,p.jsxs("span",{className:"text-sm text-gray-500",children:[o," ",d," collapsed"]})]}),t[5]=o,t[6]=d,t[7]=u):u=t[7],t[8]!==i.errored?(h=i.errored&&p.jsx(g,{content:"Has errors",delayDuration:100,children:p.jsx(cc,{className:"w-4 h-4 flex-shrink-0 text-destructive"})}),t[8]=i.errored,t[9]=h):h=t[9],t[10]!==i.stale?(f=i.stale&&p.jsx(g,{content:"Has stale cells",delayDuration:100,children:p.jsx(Vr,{className:"w-4 h-4 flex-shrink-0 text-[var(--yellow-11)]"})}),t[10]=i.stale,t[11]=f):f=t[11],t[12]!==i.runningOrQueued?(v=i.runningOrQueued&&p.jsx(g,{content:"Running",delayDuration:100,children:p.jsx(Ir,{className:"w-4 h-4 flex-shrink-0 animate-spin"})}),t[12]=i.runningOrQueued,t[13]=v):v=t[13],t[14]!==h||t[15]!==f||t[16]!==v?(x=p.jsxs(p.Fragment,{children:[h,f,v]}),t[14]=h,t[15]=f,t[16]=v,t[17]=x):x=t[17],t[18]!==u||t[19]!==x?(y=p.jsx(jb,{center:u,right:x}),t[18]=u,t[19]=x,t[20]=y):y=t[20],t[21]!==n||t[22]!==y?(b=p.jsx("div",{onClick:n,className:l,children:y}),t[21]=n,t[22]=y,t[23]=b):b=t[23],b}));Ab.displayName="CollapsedCellBanner";const Mb=e=>{const t=m(6),{appClosed:n,status:o}=e,r=du("running"===o);let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=ri("global.interrupt"),t[0]=a):a=t[0];const s=n||!r,i=r?Gr:Wt.NOOP,l=r?"stale":"disabled";let c,d;return t[1]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(E,{strokeWidth:1.5}),t[1]=c):c=t[1],t[2]!==s||t[3]!==i||t[4]!==l?(d=p.jsx(lg,{tooltip:a,disabled:s,onClick:i,variant:l,"data-testid":"run-button",children:c}),t[2]=s,t[3]=i,t[4]=l,t[5]=d):d=t[5],d},Ob=e=>{const t=m(26),{edited:n,appClosed:o,status:r,cellConfig:a,needsRun:s,hasOutput:i,onRun:l,cellActionDropdownRef:c,cellId:d,getEditorView:u,name:h}=e,f=!s&&"hover-action";let g;t[0]!==f?(g=Ht(f),t[0]=f,t[1]=g):g=t[1];const v=o?Wt.NOOP:l;let x,y,b,w,k;return t[2]!==n||t[3]!==v||t[4]!==o||t[5]!==r||t[6]!==a||t[7]!==s?(x=p.jsx(dg,{edited:n,onClick:v,appClosed:o,status:r,config:a,needsRun:s}),t[2]=n,t[3]=v,t[4]=o,t[5]=r,t[6]=a,t[7]=s,t[8]=x):x=t[8],t[9]!==r||t[10]!==o?(y=p.jsx(Mb,{status:r,appClosed:o}),t[9]=r,t[10]=o,t[11]=y):y=t[11],t[12]===Symbol.for("react.memo_cache_sentinel")?(b=p.jsx(lg,{variant:"green",tooltip:null,children:p.jsx(Ji,{strokeWidth:1.5})}),t[12]=b):b=t[12],t[13]!==c||t[14]!==d||t[15]!==r||t[16]!==u||t[17]!==h||t[18]!==a||t[19]!==i?(w=p.jsx(Rx,{ref:c,cellId:d,status:r,getEditorView:u,name:h,config:a,hasOutput:i,children:b}),t[13]=c,t[14]=d,t[15]=r,t[16]=u,t[17]=h,t[18]=a,t[19]=i,t[20]=w):w=t[20],t[21]!==g||t[22]!==x||t[23]!==y||t[24]!==w?(k=p.jsxs(cg,{className:g,children:[x,y,w]}),t[21]=g,t[22]=x,t[23]=y,t[24]=w,t[25]=k):k=t[25],k},Tb=r.memo(r.forwardRef((({theme:e,showPlaceholder:t,allowFocus:n,id:o,code:a,output:s,consoleOutputs:i,status:l,runStartTimestamp:c,runElapsedTimeMs:d,edited:u,interrupted:h,errored:m,stopped:f,staleInputs:g,serializedEditorState:v,mode:x,debuggerActive:y,appClosed:b,canDelete:w,updateCellCode:k,prepareForRun:N,createNewCell:E,deleteCell:C,focusCell:S,moveCell:j,setStdinResponse:_,moveToNextCell:I,updateCellConfig:A,clearSerializedEditorState:M,sendToBottom:O,sendToTop:T,collapseCell:D,expandCell:P,userConfig:R,outline:L,isCollapsed:z,collapseCount:$,config:G,canMoveX:H,name:W},q)=>{V.debug("Rendering Cell",o);const Y=r.useRef(null),K=r.useRef(null),J=r.useRef(null),X=Q(nd),[Z,ee]=r.useState(!1),te=G.disabled||"disabled-transitively"===l,ne=Hr(R.runtime.auto_instantiate,d,l,m,h,f),oe=ne||u||h||g&&!te,re="running"===l||"queued"===l,ae=Wr({status:l,output:s,runStartTimestamp:c,interrupted:h,staleInputs:g},u),se=("queued"===l||u||g)&&!h,ie="edit"===x,le=r.useCallback((()=>{const e=Dp(J),t=B(e);return"markdown"!==ce(e)&&qr(e),N({cellId:o}),t}),[o,J,N]);r.useImperativeHandle(q,(()=>({get editorView(){return Dp(J)},registerRun:le})),[J,le]);const de=r.useCallback((()=>J.current),[J]),ue=F((async()=>{if(re)return;const e=le();await U({cellIds:[o],codes:[e]}).catch((e=>{V.error("Error running cell",e)}))})),he=r.useCallback(((e={})=>E({cellId:o,before:!1,...e})),[o,E]),me=r.useCallback(((e={})=>E({cellId:o,before:!0,...e})),[o,E]),fe=r.useCallback((e=>{null===Y.current||Y.current.contains(e.relatedTarget)||null===J.current||qr(J.current)}),[]),pe=r.useCallback((e=>{if(Y.current===document.activeElement&&null!==J.current&&"active"===dn(J.current.state)){for(const t of Yr)if(e.key===t.key&&t.run){t.run(J.current),e.preventDefault(),e.stopPropagation();break}J.current.focus()}}),[Y,J]),ge=!Kr(s),ve=ge&&p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"absolute top-5 -left-8 z-10 print:hidden",children:p.jsx(_b,{isCollapsed:z,onClick:()=>{z?P({cellId:o}):D({cellId:o})},canCollapse:Jr(L)})}),p.jsx(Xr,{allowExpand:ie,output:s,className:"output-area",cellId:o,stale:ae})]}),xe=Zr("Cell","hover-actions-parent z-10",{published:!ie,interactive:ie,"needs-run":oe,"has-error":m,stopped:f,disabled:G.disabled,stale:"disabled-transitively"===l}),ye=tt.create(o),we=!G.hide_code||Z;if(_i(ie?Y.current:null,{"cell.run":ue,"cell.runAndNewBelow":()=>{ue(),I({cellId:o,before:!1})},"cell.runAndNewAbove":()=>{ue(),I({cellId:o,before:!0})},"cell.createAbove":me,"cell.createBelow":he,"cell.moveUp":()=>j({cellId:o,before:!0}),"cell.moveDown":()=>j({cellId:o,before:!1}),"cell.hideCode":()=>{var e,t,n;const r=!G.hide_code;be({configs:{[o]:{hide_code:r}}}),A({cellId:o,config:{hide_code:r}}),r?(null==(e=J.current)||e.contentDOM.blur(),null==(t=Y.current)||t.focus()):null==(n=J.current)||n.focus()},"cell.focusDown":()=>I({cellId:o,before:!1}),"cell.focusUp":()=>I({cellId:o,before:!0}),"cell.sendToBottom":()=>O({cellId:o}),"cell.sendToTop":()=>T({cellId:o}),"cell.aiCompletion":()=>{let e=!1;X((t=>(null==t?void 0:t.cellId)===o?(e=!0,null):{cellId:o})),e&&Dp(J).focus()},"cell.cellActions":()=>{var e;null==(e=K.current)||e.toggle()}}),Ii(ie?Y.current:null,{ArrowDown:()=>(I({cellId:o,before:!1,noCreate:!0}),!0),ArrowUp:()=>(I({cellId:o,before:!0,noCreate:!0}),!0),..."vim"===R.keymap.preset&&we?{j:()=>(I({cellId:o,before:!1,noCreate:!0}),!0),k:()=>(I({cellId:o,before:!0,noCreate:!0}),!0)}:{}}),!ie){const e=Qr(null==s?void 0:s.mimetype);return m||h||f||e?null:p.jsx("div",{tabIndex:-1,id:ye,ref:Y,className:xe,children:ve})}return p.jsx(Lx,{cellId:o,config:G,status:l,getEditorView:de,hasOutput:ge,name:W,children:p.jsxs(Px,{tabIndex:-1,ref:Y,"data-status":l,onBlur:fe,onKeyDown:pe,cellId:o,canMoveX:H,title:G.disabled?"This cell is disabled":"disabled-transitively"===l?"This cell has a disabled ancestor":void 0,children:[p.jsxs("div",{className:xe,id:ye,children:["above"===R.display.cell_output&&ve,p.jsxs("div",{className:"tray",children:[p.jsx("div",{className:"absolute right-2 -top-4 z-10",children:p.jsx(Ob,{edited:u,appClosed:b,status:l,cellConfig:G,needsRun:oe,hasOutput:ge,cellActionDropdownRef:K,cellId:o,name:W,getEditorView:de,onRun:ue})}),p.jsxs("div",{className:"absolute flex flex-col gap-[2px] justify-center h-full left-[-34px] z-20",children:[p.jsx(ag,{tooltipContent:ri("cell.createAbove"),appClosed:b,onClick:b?void 0:me}),p.jsx("div",{className:"flex-1"}),p.jsx(ag,{tooltipContent:ri("cell.createBelow"),appClosed:b,onClick:b?void 0:he})]}),p.jsx(Sb,{theme:e,showPlaceholder:t,allowFocus:n,id:o,code:a,config:G,status:l,serializedEditorState:v,runCell:ue,updateCellCode:k,createNewCell:E,deleteCell:C,focusCell:S,moveCell:j,moveToNextCell:I,updateCellConfig:A,clearSerializedEditorState:M,userConfig:R,editorViewRef:J,hidden:!we,setTemporarilyVisible:ee}),p.jsxs("div",{className:"shoulder-right z-20",children:[p.jsx(hg,{status:l,staleInputs:g,interrupted:h,editing:ie,edited:u,disabled:G.disabled??!1,elapsedTime:d,runStartTimestamp:c,uninstantiated:ne}),p.jsx("div",{className:"flex gap-2 items-end",children:p.jsx(Tx,{})})]}),p.jsx("div",{className:"shoulder-bottom hover-action",children:w&&we&&p.jsx(ug,{appClosed:b,status:l,onClick:()=>{re||b||C({cellId:o})}})})]}),"below"===R.display.cell_output&&ve,p.jsx(Xi,{consoleOutputs:i,stale:se,cellName:W,onRefactorWithAI:e=>{X({cellId:o,initialPrompt:e.prompt})},onSubmitDebugger:(e,t)=>{_({cellId:o,response:e,outputIndex:t}),ea({text:e})},cellId:o,debuggerActive:y})]}),z&&p.jsx(Ab,{onClick:()=>P({cellId:o}),count:$,cellId:o})]})})}))),Db=e=>{const t=m(10),{width:n}=e,{banners:o}=Zi(),{removeBanner:r}=Qi();if(0===o.length)return null;const a="columns"===n&&"sticky left-12 w-full max-w-[80vw]";let s,i,l;if(t[0]!==a?(s=Ht("flex flex-col gap-4 mb-5 print:hidden",a),t[0]=a,t[1]=s):s=t[1],t[2]!==r||t[3]!==o){let e;t[5]!==r?(e=e=>p.jsxs(ta,{kind:e.variant||"info",className:"flex flex-col rounded p-3",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[p.jsx(na,{className:"w-5 h-5 inline-block mr-2"}),e.title]}),p.jsx(v,{"data-testid":"remove-banner-button",variant:"text",size:"icon",onClick:()=>r(e.id),children:p.jsx(Vt,{className:"w-5 h-5"})})]}),p.jsxs("div",{className:"flex justify-between items-end",children:[p.jsx("span",{children:oa({html:e.description})}),"restart"===e.action&&p.jsx(Pb,{})]})]},e.id),t[5]=r,t[6]=e):e=t[6],i=o.map(e),t[2]=r,t[3]=o,t[4]=i}else i=t[4];return t[7]!==s||t[8]!==i?(l=p.jsx("div",{className:s,children:i}),t[7]=s,t[8]=i,t[9]=l):l=t[9],l},Pb=()=>{const e=m(3),t=Cd();let n,o;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx(xc,{className:"w-3 h-3 mr-2"}),e[0]=n):n=e[0],e[1]!==t?(o=p.jsxs(v,{"data-testid":"restart-session-button",variant:"link",size:"xs",onClick:t,children:[n,"Restart"]}),e[1]=t,e[2]=o):o=e[2],o};const Rb=(e,t)=>function(e,t){const n=/^(\d+)\.(\d+)\.(\d+)(?:-([\w.-]+))?(?:\+([\w.-]+))?$/,o=e=>{const t=e.match(n);if(!t)return null;const[,o,r,a,s]=t;return{major:Number.parseInt(o,10),minor:Number.parseInt(r,10),patch:Number.parseInt(a,10),preRelease:s||""}};try{const n=o(e),r=o(t);return n&&r?n.major!==r.major?n.major-r.major:n.minor!==r.minor?n.minor-r.minor:n.patch!==r.patch?n.patch-r.patch:""===n.preRelease&&""!==r.preRelease?1:""!==n.preRelease&&""===r.preRelease?-1:n.preRelease.localeCompare(r.preRelease):e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}catch{return e.localeCompare(t,void 0,{numeric:!0,sensitivity:"base"})}}(t,e);const Fb=()=>{const e=m(64),{packageAlert:t}=el(),{clearPackageAlert:n}=tl(),[o]=Ne();let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={},e[0]=a):a=e[0];const[s,i]=r.useState(a);if(null===t)return null;const l="pixi"!==o.package_management.manager;if(nl(t)){let r,a,c,d,u,h,m,f,g,x;if(e[1]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[p.jsx(uc,{className:"w-5 h-5 inline-block mr-2"}),"Missing packages"]}),e[1]=r):r=e[1],e[2]!==n||e[3]!==t.id?(a=()=>n(t.id),e[2]=n,e[3]=t.id,e[4]=a):a=e[4],e[5]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(Vt,{className:"w-5 h-5"}),e[5]=c):c=e[5],e[6]!==a?(d=p.jsxs("div",{className:"flex justify-between",children:[r,p.jsx(v,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:a,children:c})]}),e[6]=a,e[7]=d):d=e[7],e[8]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx("p",{children:"The following packages were not found:"}),e[8]=u):u=e[8],e[9]!==l||e[10]!==s||e[11]!==t.packages){let n;e[13]!==l||e[14]!==s?(n=(e,t)=>p.jsxs("li",{className:"flex items-center gap-1 font-mono text-sm",children:[p.jsx(Ol,{size:"1rem"}),e,l&&p.jsx(Ub,{value:s[e]??"latest",onChange:t=>i((n=>({...n,[e]:t}))),packageName:e})]},t),e[13]=l,e[14]=s,e[15]=n):n=e[15],h=t.packages.map(n),e[9]=l,e[10]=s,e[11]=t.packages,e[12]=h}else h=e[12];return e[16]!==h?(m=p.jsxs("div",{children:[u,p.jsx("ul",{className:"list-disc ml-4 mt-1",children:h})]}),e[16]=h,e[17]=m):m=e[17],e[18]!==t||e[19]!==n||e[20]!==o||e[21]!==s?(f=p.jsx("div",{className:"ml-auto flex flex-row items-baseline",children:t.isolated?p.jsxs(p.Fragment,{children:[p.jsx(zb,{manager:o.package_management.manager,versions:s,clearPackageAlert:()=>n(t.id)}),!S()&&p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"px-2 text-sm",children:"with"})," ",p.jsx(Bb,{})]})]}):p.jsxs("p",{children:["If you set up a"," ",p.jsx("a",{href:"https://docs.python.org/3/tutorial/venv.html#creating-virtual-environments",className:"text-accent-foreground hover:underline",target:"_blank",rel:"noreferrer",children:"virtual environment"}),", marimo can install these packages for you."]})}),e[18]=t,e[19]=n,e[20]=o,e[21]=s,e[22]=f):f=e[22],e[23]!==m||e[24]!==f?(g=p.jsxs("div",{className:"flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",children:[m,f]}),e[23]=m,e[24]=f,e[25]=g):g=e[25],e[26]!==d||e[27]!==g?(x=p.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:p.jsxs(ta,{kind:"danger",className:"flex flex-col rounded py-3 px-5 animate-in slide-in-from-left",children:[d,g]})}),e[26]=d,e[27]=g,e[28]=x):x=e[28],x}if(ol(t)){let o;e[29]!==t.packages?(o=function(e){const t=new Set(Object.values(e)),n=t.has("queued")||t.has("installing")?"installing":t.has("failed")?"failed":"installed";if("installing"===n)return{status:"installing",title:"Installing packages",titleIcon:p.jsx(zl,{className:"w-5 h-5 inline-block mr-2"}),description:"Installing packages:"};if("installed"===n)return{status:"installed",title:"All packages installed!",titleIcon:p.jsx(dc,{className:"w-5 h-5 inline-block mr-2"}),description:"Installed packages:"};return{status:"failed",title:"Some packages failed to install",titleIcon:p.jsx(uc,{className:"w-5 h-5 inline-block mr-2"}),description:"See terminal for error logs."}}(t.packages),e[29]=t.packages,e[30]=o):o=e[30];const{status:r,title:a,titleIcon:s,description:i}=o;"installed"===r&&setTimeout((()=>n(t.id)),1e4);const l="failed"===r?"danger":"info";let c,d,u,h,m;e[31]!==s||e[32]!==a?(c=p.jsxs("span",{className:"font-bold text-lg flex items-center mb-2",children:[s,a]}),e[31]=s,e[32]=a,e[33]=c):c=e[33],e[34]!==n||e[35]!==t.id?(d=()=>n(t.id),e[34]=n,e[35]=t.id,e[36]=d):d=e[36],e[37]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx(Vt,{className:"w-5 h-5"}),e[37]=u):u=e[37],e[38]!==d?(h=p.jsx(v,{variant:"text","data-testid":"remove-banner-button",size:"icon",onClick:d,children:u}),e[38]=d,e[39]=h):h=e[39],e[40]!==c||e[41]!==h?(m=p.jsxs("div",{className:"flex justify-between",children:[c,h]}),e[40]=c,e[41]=h,e[42]=m):m=e[42];const f="installed"===r&&"text-accent-foreground";let g,x,y,b,w,k,N;if(e[43]!==f?(g=Ht("flex flex-col gap-4 justify-between items-start text-muted-foreground text-base",f),e[43]=f,e[44]=g):g=e[44],e[45]!==i?(x=p.jsx("p",{children:i}),e[45]=i,e[46]=x):x=e[46],e[47]!==t.packages||e[48]!==r){let n;e[50]!==r?(n=(e,t)=>{const[n,o]=e;return p.jsxs("li",{className:Ht("flex items-center gap-1 font-mono text-sm","installing"===o&&"font-semibold","failed"===o&&"text-destructive","installed"===o&&"text-accent-foreground","installed"===o&&"failed"===r&&"text-muted-foreground"),children:[p.jsx(Lb,{status:o}),n]},t)},e[50]=r,e[51]=n):n=e[51],y=Object.entries(t.packages).map(n),e[47]=t.packages,e[48]=r,e[49]=y}else y=e[49];return e[52]!==y?(b=p.jsx("ul",{className:"list-disc ml-4 mt-1",children:y}),e[52]=y,e[53]=b):b=e[53],e[54]!==x||e[55]!==b?(w=p.jsxs("div",{children:[x,b]}),e[54]=x,e[55]=b,e[56]=w):w=e[56],e[57]!==g||e[58]!==w?(k=p.jsx("div",{className:g,children:w}),e[57]=g,e[58]=w,e[59]=k):k=e[59],e[60]!==l||e[61]!==m||e[62]!==k?(N=p.jsx("div",{className:"flex flex-col gap-4 mb-5 fixed top-5 left-12 min-w-[400px] z-[200] opacity-95",children:p.jsxs(ta,{kind:l,className:"flex flex-col rounded pt-3 pb-4 px-5",children:[m,k]})}),e[60]=l,e[61]=m,e[62]=k,e[63]=N):N=e[63],N}return N(t),null};const Lb=e=>{const t=m(4),{status:n}=e;switch(n){case"queued":{let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Ol,{size:"1rem"}),t[0]=e):e=t[0],e}case"installing":{let e;return t[1]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(zl,{size:"1rem"}),t[1]=e):e=t[1],e}case"installed":{let e;return t[2]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(vt,{size:"1rem"}),t[2]=e):e=t[2],e}case"failed":{let e;return t[3]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Vt,{size:"1rem"}),t[3]=e):e=t[3],e}default:return N(n),null}},zb=e=>{const t=m(8),{manager:n,versions:o,clearPackageAlert:r}=e;let a,s,i,l;return t[0]!==r||t[1]!==n||t[2]!==o?(a=async()=>{r(),await fa({manager:n,versions:o}).catch((e=>{V.error(e)}))},t[0]=r,t[1]=n,t[2]=o,t[3]=a):a=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx(zl,{className:"w-4 h-4 mr-2"}),i=p.jsx("span",{className:"font-semibold",children:"Install"}),t[4]=s,t[5]=i):(s=t[4],i=t[5]),t[6]!==a?(l=p.jsxs(v,{variant:"outline","data-testid":"install-packages-button",size:"sm",onClick:a,children:[s,i]}),t[6]=a,t[7]=l):l=t[7],l},Bb=()=>{const e=m(16),[t,n]=Ne();let o,r;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=ra(aa),e[0]=o):o=e[0],e[1]!==t?(r={resolver:o,defaultValues:t},e[1]=t,e[2]=r):r=e[2];const a=sa(r);let s;e[3]!==n?(s=async e=>{await Ce({config:e}).then((()=>{n(e)}))},e[3]=n,e[4]=s):s=e[4];const i=s;let l,c,d,u;return e[5]!==a||e[6]!==i?(l=a.handleSubmit(i),e[5]=a,e[6]=i,e[7]=l):l=e[7],e[8]!==a.control?(c=p.jsx("div",{className:"flex flex-col gap-3",children:p.jsx(ia,{control:a.control,name:"package_management.manager",render:$b})}),e[8]=a.control,e[9]=c):c=e[9],e[10]!==l||e[11]!==c?(d=p.jsx("form",{onChange:l,className:"flex flex-col gap-5",children:c}),e[10]=l,e[11]=c,e[12]=d):d=e[12],e[13]!==a||e[14]!==d?(u=p.jsx(la,{...a,children:d}),e[13]=a,e[14]=d,e[15]=u):u=e[15],u},Ub=e=>{const t=m(21),{value:n,onChange:o,packageName:r}=e;let a,s;t[0]!==r?(a=async()=>{const e=await fetch(`https://pypi.org/pypi/${t=r,t.replaceAll(/\[.*]/g,"").trim()}/json`,{method:"GET",signal:AbortSignal.timeout(5e3)});var t;const n=await e.json();return["latest",...Object.keys(n.releases).sort(Rb).slice(0,100)]},s=[r],t[0]=r,t[1]=a,t[2]=s):(a=t[1],s=t[2]);const{data:i,loading:l,error:c}=qt(a,s);let d;t[3]!==i?(d=void 0===i?[]:i,t[3]=i,t[4]=d):d=t[4];const u=d;if(c){let e,r,a;return t[5]!==o?(e=e=>o(e.target.value),t[5]=o,t[6]=e):e=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx("option",{value:"latest",children:"latest"}),t[7]=r):r=t[7],t[8]!==n||t[9]!==e?(a=p.jsx(g,{content:"Failed to fetch package versions",children:p.jsx(ua,{value:n,onChange:e,disabled:!0,className:"inline-flex ml-2",children:r})}),t[8]=n,t[9]=e,t[10]=a):a=t[10],a}let h,f,v;return t[11]!==o?(h=e=>o(e.target.value),t[11]=o,t[12]=h):h=t[12],t[13]!==l||t[14]!==u?(f=l?p.jsx("option",{value:"latest",children:"latest"}):u.map(Gb),t[13]=l,t[14]=u,t[15]=f):f=t[15],t[16]!==n||t[17]!==h||t[18]!==l||t[19]!==f?(v=p.jsx(ua,{value:n,onChange:h,disabled:l,className:"inline-flex ml-2",children:f}),t[16]=n,t[17]=h,t[18]=l,t[19]=f,t[20]=v):v=t[20],v};function Vb(e){return p.jsx("option",{value:e,children:e},e)}function $b(e){const{field:t}=e;return p.jsxs(ca,{children:[p.jsx(da,{children:p.jsx(ua,{"data-testid":"install-package-manager-select",onChange:e=>t.onChange(e.target.value),value:t.value,disabled:t.disabled,className:"inline-flex mr-2",children:ha.map(Vb)})}),p.jsx(ma,{})]})}function Gb(e){return p.jsx("option",{value:e,children:e},e)}const Hb=e=>{let{transform:t}=e;return{...t,x:0}},Wb={threshold:{x:0,y:.1}},qb=u.memo((e=>{const t=m(25),{children:n,multiColumn:o}=e,{cellIds:a}=R(),{dropCellOverCell:s,dropCellOverColumn:i,moveColumn:l,compactColumns:c}=L(),[d,u]=r.useState(null),[h,f]=r.useState(null),[g]=Ee();let v;e:{if("columns"===g.width){v=pa.EMPTY;break e}let e;t[0]===Symbol.for("react.memo_cache_sentinel")?(e=[Hb],t[0]=e):e=t[0],v=e}const x=v;let y,b;t[1]===Symbol.for("react.memo_cache_sentinel")?(y={activationConstraint:{distance:8}},t[1]=y):y=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(b={coordinateGetter:Ax},t[2]=b):b=t[2];const w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.useMemo((()=>[...t].filter((e=>null!=e))),[...t])}(Sg(wv,y),Sg(gv,b));let k;t[3]!==a?(k=e=>{u(e.active.id),f(a)},t[3]=a,t[4]=k):k=t[4];const N=F(k);let E;t[5]!==h?(E=()=>{u(null),f(null)},t[5]=h,t[6]=E):E=t[6];const C=F(E);let S;t[7]!==d||t[8]!==a?(S=e=>{const t=e.droppableContainers.filter((e=>Kb(e.id)));if(d&&Kb(d))return Dg({...e,droppableContainers:t});const n=(e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:o}=e;if(!o)return[];const r=[];for(const a of t){const{id:e}=a,t=n.get(e);if(t&&Fg(o,t)){const n=Mg(t).reduce(((e,t)=>e+_g(o,t)),0),s=Number((n/4).toFixed(4));r.push({id:e,data:{droppableContainer:a,value:s}})}}return r.sort(Ig)})({...e,droppableContainers:t}),o=Og(n.length>0?n:Rg({...e,droppableContainers:t}),"id");if(!o)return[];Mt(Kb(o),`Expected column id. Got: ${o}`);const r=a.get(o);if(Mt(r,`Expected column. Got: ${o}`),r&&0===r.topLevelIds.length)return[{id:o}];const s=new Set(r.topLevelIds),i=Dg({...e,droppableContainers:e.droppableContainers.filter((e=>e.id!==o&&s.has(e.id)))});if(i.length>0){const e=i[0].id;return Mt(Yb(e),`Expected cell id. Got: ${e}`),[{id:e}]}return[]},t[7]=d,t[8]=a,t[9]=S):S=t[9];const j=S;let _;t[10]!==i||t[11]!==s||t[12]!==l?(_=e=>{const{active:t,over:n}=e,o=null==n?void 0:n.id;if(null!=o&&t.id!==o){if(Yb(t.id)){if(Kb(o))return void i({cellId:t.id,columnId:o});if(Yb(o))return void s({cellId:t.id,overCellId:o})}Kb(t.id)&&Kb(o)&&l({column:t.id,overColumn:o})}},t[10]=i,t[11]=s,t[12]=l,t[13]=_):_=t[13];const I=F(_);let A;t[14]!==c?(A=e=>{const{active:t,over:n}=e;null!==n&&t.id!==n.id&&c()},t[14]=c,t[15]=A):A=t[15];const M=F(A),O=o?j:Dg;let T;return t[16]!==w||t[17]!==O||t[18]!==x||t[19]!==M||t[20]!==N||t[21]!==C||t[22]!==I||t[23]!==n?(T=p.jsx(ax,{autoScroll:Wb,sensors:w,collisionDetection:O,modifiers:x,onDragEnd:M,onDragStart:N,onDragCancel:C,onDragOver:I,children:n}),t[16]=w,t[17]=O,t[18]=x,t[19]=M,t[20]=N,t[21]=C,t[22]=I,t[23]=n,t[24]=T):T=t[24],T}));function Yb(e){return"string"==typeof e&&!e.startsWith("tree_")}function Kb(e){return"string"==typeof e&&e.startsWith("tree_")}const Jb=u.forwardRef((({columnId:e,canDelete:t,canMoveLeft:n,canMoveRight:o,...r},a)=>{const{attributes:s,listeners:i,setNodeRef:l,transform:c,transition:d,isDragging:u,isOver:h}=jx({id:e}),m={transform:c?er.Transform.toString({x:c.x,y:0,scaleX:1,scaleY:1}):void 0,transition:d,zIndex:u?2:void 0,position:"relative","--gutter-width":"50px"},f=pg(a,l),{deleteColumn:x,moveColumn:y,addColumn:b}=L(),w=Ht("h-full hover:bg-muted rounded-none"),k=()=>{const e=document.getElementById("App");e&&e.scrollTo({left:e.scrollLeft+1e3,behavior:"smooth"})},N=p.jsxs("div",{className:"h-6 group flex items-center rounded-t-lg border hover:border-border border-[var(--slate-3)] overflow-hidden bg-[var(--slate-1)]",children:[p.jsx(g,{content:"Move column left",side:"top",delayDuration:300,children:p.jsx(v,{variant:"text",size:"sm",className:w,onClick:()=>y({column:e,overColumn:"_left_"}),disabled:!n,children:p.jsx(ga,{className:"size-4"})})}),p.jsx(g,{content:"Move column right",side:"top",delayDuration:300,children:p.jsx(v,{variant:"text",size:"sm",className:w,onClick:()=>y({column:e,overColumn:"_right_"}),disabled:!o,children:p.jsx($r,{className:"size-4"})})}),p.jsx("div",{className:"flex gap-2 h-full flex-grow active:bg-accent cursor-grab",...s,...i,"data-testid":"column-drag-button"}),t&&p.jsx(g,{content:"Delete column",side:"top",delayDuration:300,children:p.jsx(v,{variant:"text",size:"sm",className:"opacity-0 group-hover:opacity-70 group-hover:hover:opacity-100 text-destructive h-full hover:bg-destructive/20 rounded-none",onClick:()=>x({columnId:e}),children:p.jsx(Vt,{className:"size-4"})})}),p.jsx(g,{content:"Add column",side:"top",delayDuration:300,children:p.jsx(v,{variant:"text",size:"sm",className:w,onClick:()=>{b({columnId:e}),requestAnimationFrame(k)},children:p.jsx(Co,{className:"size-4"})})})]});return p.jsxs("div",{tabIndex:-1,ref:f,...r,style:m,"data-is-dragging":u,className:Ht(u?"":r.className,u?"z-20":"z-1 hover:z-10 focus-within:z-10",h&&"bg-accent/20"),children:[N,r.children]})}));Jb.displayName="SortableColumn";const Xb=r.memo(Jb),Zb=r.memo((e=>{const t=m(15),n=r.useRef(null),o="columns"===e.width&&"w-contentWidthMedium min-h-[100px] border border-t-0 border-[var(--slate-3)] rounded-b-lg px-11 py-6 bg-[var(--slate-2)]";let a,s;t[0]!==o?(a=Ht("flex flex-col gap-5",o),t[0]=o,t[1]=a):a=t[1],t[2]!==a||t[3]!==e.children?(s=p.jsx("div",{className:a,children:e.children}),t[2]=a,t[3]=e.children,t[4]=s):s=t[4];const i=s;if("columns"===e.width){let o;return t[5]!==e.canDelete||t[6]!==e.columnId||t[7]!==e.canMoveLeft||t[8]!==e.canMoveRight||t[9]!==e.footer||t[10]!==i?(o=p.jsxs(Xb,{tabIndex:-1,ref:n,canDelete:e.canDelete,columnId:e.columnId,canMoveLeft:e.canMoveLeft,canMoveRight:e.canMoveRight,className:"group/column",children:[i,e.footer]}),t[5]=e.canDelete,t[6]=e.columnId,t[7]=e.canMoveLeft,t[8]=e.canMoveRight,t[9]=e.footer,t[10]=i,t[11]=o):o=t[11],o}let l;return t[12]!==i||t[13]!==e.footer?(l=p.jsxs(p.Fragment,{children:[i,e.footer]}),t[12]=i,t[13]=e.footer,t[14]=l):l=t[14],l}));Zb.displayName="Column";const Qb=e=>{const t=m(67),{notebook:n,mode:o,userConfig:a,appConfig:s,connStatus:i}=e,l=L(),{theme:c}=ke(),{toggleSidebarPanel:d}=Od(),{invisible:u}=rl(n.cellIds.idLength,o);let h;oi("global.focusTop",l.focusTopCell),oi("global.focusBottom",l.focusBottomCell),oi("global.toggleSidebar",d),oi("global.foldCode",l.foldAll),oi("global.unfoldCode",l.unfoldAll),t[0]!==l.updateCellCode?(h=()=>{ya(l.updateCellCode)},t[0]=l.updateCellCode,t[1]=h):h=t[1],oi("global.formatAll",h),oi("cell.hideCode",Wt.NOOP),oi("cell.format",Wt.NOOP);const f=ad(),g=l.scrollToTarget;let v,x,y,b,w,k,N,E,C,S,j,_,I,A,M,O,T,D,P,R,F,z;if(t[2]!==n.scrollKey||t[3]!==g?(v=()=>{null!==n.scrollKey&&g()},t[2]=n.scrollKey,t[3]=g,t[4]=v):v=t[4],t[5]!==n.cellIds||t[6]!==n.scrollKey||t[7]!==g?(x=[n.cellIds,n.scrollKey,g],t[5]=n.cellIds,t[6]=n.scrollKey,t[7]=g,t[8]=x):x=t[8],r.useEffect(v,x),t[9]!==n.cellIds||t[10]!==n.cellData||t[11]!==n.cellRuntime||t[12]!==n.scrollKey||t[13]!==n.cellHandles||t[14]!==u||t[15]!==s||t[16]!==c||t[17]!==o||t[18]!==i.state||t[19]!==a||t[20]!==l||t[21]!==f){const e=n.cellIds.getColumns();let r;t[37]!==n.cellIds?(r=n.cellIds.hasOnlyOneId(),t[37]=n.cellIds,t[38]=r):r=t[38];const d=r;j=al,_="pb-[40vh]",I=u,A=s,M="pr-4",t[39]===Symbol.for("react.memo_cache_sentinel")?(O=p.jsx(Fb,{}),t[39]=O):O=t[39],t[40]!==s.width?(T=p.jsx(Db,{width:s.width}),t[40]=s.width,t[41]=T):T=t[41],C=qb,S="columns"===s.width,w=bx,k="column-container",N=e.map(tw),E=fx;const h="columns"===s.width&&"grid grid-flow-col auto-cols-min gap-6";t[42]!==h?(y=Ht(h),t[42]=h,t[43]=y):y=t[43],b=e.map(((t,r)=>p.jsx(Zb,{columnId:t.id,canMoveLeft:r>0,canMoveRight:r<e.length-1,width:s.width,canDelete:e.length>1,footer:p.jsx(ew,{columnId:t.id,className:Ht("columns"===s.width&&"opacity-0 group-hover/column:opacity-100")}),children:p.jsx(bx,{id:`column-${r+1}`,items:t.topLevelIds,strategy:vx,children:t.topLevelIds.map((e=>{const r=n.cellData[e],h=n.cellRuntime[e];return p.jsx(Tb,{theme:c,showPlaceholder:d,allowFocus:!u&&!n.scrollKey,id:r.id,code:r.code,outline:h.outline,output:h.output,consoleOutputs:h.consoleOutputs,status:h.status,edited:r.edited,interrupted:h.interrupted,errored:h.errored,stopped:h.stopped,staleInputs:h.staleInputs,runStartTimestamp:h.runStartTimestamp,runElapsedTimeMs:h.runElapsedTimeMs??r.lastExecutionTime,serializedEditorState:r.serializedEditorState,canDelete:!d,mode:o,appClosed:i.state!==Wi.OPEN,ref:n.cellHandles[e],userConfig:a,debuggerActive:h.debuggerActive,config:r.config,name:r.name,isCollapsed:t.isCollapsed(e),collapseCount:t.getCount(e),canMoveX:"columns"===s.width,...l,deleteCell:f},r.id.toString())}))})},t.id))),t[9]=n.cellIds,t[10]=n.cellData,t[11]=n.cellRuntime,t[12]=n.scrollKey,t[13]=n.cellHandles,t[14]=u,t[15]=s,t[16]=c,t[17]=o,t[18]=i.state,t[19]=a,t[20]=l,t[21]=f,t[22]=y,t[23]=b,t[24]=w,t[25]=k,t[26]=N,t[27]=E,t[28]=C,t[29]=S,t[30]=j,t[31]=_,t[32]=I,t[33]=A,t[34]=M,t[35]=O,t[36]=T}else y=t[22],b=t[23],w=t[24],k=t[25],N=t[26],E=t[27],C=t[28],S=t[29],j=t[30],_=t[31],I=t[32],A=t[33],M=t[34],O=t[35],T=t[36];return t[44]!==y||t[45]!==b?(D=p.jsx("div",{className:y,children:b}),t[44]=y,t[45]=b,t[46]=D):D=t[46],t[47]!==w||t[48]!==k||t[49]!==N||t[50]!==E||t[51]!==D?(P=p.jsx(w,{id:k,items:N,strategy:E,children:D}),t[47]=w,t[48]=k,t[49]=N,t[50]=E,t[51]=D,t[52]=P):P=t[52],t[53]!==C||t[54]!==S||t[55]!==P?(R=p.jsx(C,{multiColumn:S,children:P}),t[53]=C,t[54]=S,t[55]=P,t[56]=R):R=t[56],t[57]===Symbol.for("react.memo_cache_sentinel")?(F=p.jsx(sl,{}),t[57]=F):F=t[57],t[58]!==j||t[59]!==_||t[60]!==I||t[61]!==A||t[62]!==M||t[63]!==O||t[64]!==T||t[65]!==R?(z=p.jsxs(j,{className:_,invisible:I,appConfig:A,innerClassName:M,children:[O,T,R,F]}),t[58]=j,t[59]=_,t[60]=I,t[61]=A,t[62]=M,t[63]=O,t[64]=T,t[65]=R,t[66]=z):z=t[66],z},ew=e=>{const t=m(18),{columnId:n,className:o}=e,{createNewCell:r}=L(),a=Z(te),[s,i]=va(!1),l=Z(ee),c=Z(xa).sql;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=Ht("mb-0 rounded-none sm:px-4 md:px-5 lg:px-8 tracking-wide no-wrap whitespace-nowrap","hover:bg-accent hover:text-accent-foreground font-semibold uppercase text-xs"),t[0]=d):d=t[0];const u=d;let h;t[1]!==s||t[2]!==i.toggle||t[3]!==r||t[4]!==n||t[5]!==a||t[6]!==c||t[7]!==l?(h=()=>s?p.jsx(vb,{onClose:i.toggle}):p.jsxs(p.Fragment,{children:[p.jsxs(v,{className:u,variant:"text",size:"sm",onClick:()=>r({cellId:{type:"__end__",columnId:n},before:!1}),children:[p.jsx(Cc,{className:"mr-2 size-4 flex-shrink-0"}),"Python"]}),p.jsxs(v,{className:u,variant:"text",size:"sm",onClick:()=>{id(a,r),r({cellId:{type:"__end__",columnId:n},before:!1,code:(new So).defaultCode})},children:[p.jsx(_c,{className:"mr-2 size-4 flex-shrink-0"}),"Markdown"]}),p.jsx(g,{content:c?null:p.jsxs("div",{className:"flex flex-col",children:[p.jsxs("span",{children:["Additional dependencies required:",p.jsx(Ai,{className:"inline",children:"pip install marimo[sql]"}),"."]}),p.jsx("span",{children:"You will need to restart the notebook after installing."})]}),delayDuration:100,asChild:!1,children:p.jsxs(v,{className:u,variant:"text",size:"sm",disabled:!c,onClick:()=>{id(a,r),r({cellId:{type:"__end__",columnId:n},before:!1,code:(new jo).defaultCode})},children:[p.jsx(ue,{className:"mr-2 size-4 flex-shrink-0"}),"SQL"]})}),p.jsx(g,{content:l?null:p.jsx("span",{children:"Enable via settings under AI Assist"}),delayDuration:100,asChild:!1,children:p.jsxs(v,{className:u,variant:"text",size:"sm",disabled:!l,onClick:i.toggle,children:[p.jsx(Ec,{className:"mr-2 size-4 flex-shrink-0"}),"Generate with AI"]})})]}),t[1]=s,t[2]=i.toggle,t[3]=r,t[4]=n,t[5]=a,t[6]=c,t[7]=l,t[8]=h):h=t[8];const f=h,x=!s&&"w-fit",y=s&&"opacity-100 w-full max-w-4xl shadow-lg shadow-[var(--blue-3)]";let b,w,k;return t[9]!==x||t[10]!==y||t[11]!==o?(b=Ht("shadow-sm border border-border rounded transition-all duration-200 overflow-hidden divide-x divide-border flex",x,y,o),t[9]=x,t[10]=y,t[11]=o,t[12]=b):b=t[12],t[13]!==f?(w=f(),t[13]=f,t[14]=w):w=t[14],t[15]!==b||t[16]!==w?(k=p.jsx("div",{className:"flex justify-center mt-4 pt-6 pb-32 group gap-4 w-full print:hidden",children:p.jsx("div",{className:b,children:w})}),t[15]=b,t[16]=w,t[17]=k):k=t[17],k};function tw(e){return e.id}async function nw(){await wa({download:!1,includeCode:!0,files:Gi.INSTANCE.filenames()})}async function ow(){await ka({download:!1})}const rw=e=>{const t=m(117),{userConfig:n,appConfig:o}=e,a=R();Na(Ma,Aa.onCellIdsChange);const{setCells:s,updateCellCode:i,mergeAllColumns:l}=L(),c=Z(et),[d,u]=st(),[h,g]=r.useState(),v=zi(),{openModal:x,closeModal:y,openAlert:b}=f(),w="edit"===c.mode,k="present"===c.mode,N=Z(Ea),E=Z(oe);let C;t[0]!==b?(C=function(){b("Failed to save notebook: not connected to a kernel.")},t[0]=b,t[1]=C):C=t[1];const S=C;let j;t[2]===Symbol.for("react.memo_cache_sentinel")?(j=[],t[2]=j):j=t[2],r.useEffect(iw,j);const _=n.runtime.auto_instantiate;let I,A,M;t[3]!==s?(I=(e,t)=>{s(e);const n=e.map((e=>e.name)),o=e.map((e=>e.code)),r=e.map((e=>e.config));g({names:n,codes:o,configs:r,layout:t})},t[3]=s,t[4]=I):I=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(A=Oa(),t[5]=A):A=t[5],t[6]!==n.runtime.auto_instantiate||t[7]!==I?(M={autoInstantiate:_,setCells:I,sessionId:A},t[6]=n.runtime.auto_instantiate,t[7]=I,t[8]=M):M=t[8];const{connection:O}=il(M);let T;t[9]!==O.state||t[10]!==S||t[11]!==u||t[12]!==o.app_title||t[13]!==b?(T=async e=>O.state!==Wi.OPEN?(S(),null):(Ta((t=>{null===e?t.delete(Da.filePath):t.set(Da.filePath,e)})),Pa({filename:e}).then((()=>(u(e),document.title=o.app_title||rt.basename(e)||"Untitled Notebook",e))).catch((e=>(b(e.message),null)))),t[9]=O.state,t[10]=S,t[11]=u,t[12]=o.app_title,t[13]=b,t[14]=T):T=t[14];const D=F(T);let P,B;t[15]!==o.app_title||t[16]!==d?(P=()=>{document.title=o.app_title||rt.basename(d??"")||"Untitled Notebook"},B=[o.app_title,d],t[15]=o.app_title,t[16]=d,t[17]=P,t[18]=B):(P=t[17],B=t[18]),r.useEffect(P,B);const U=a.cellIds.colLength,$=Vo(o.width);let H,W,q,K,J,X;t[19]!==$||t[20]!==o.width||t[21]!==l?(H=()=>{"columns"===$&&"columns"!==o.width&&l()},t[19]=$,t[20]=o.width,t[21]=l,t[22]=H):H=t[22],t[23]!==o.width||t[24]!==$||t[25]!==l||t[26]!==U?(W=[o.width,$,l,U],t[23]=o.width,t[24]=$,t[25]=l,t[26]=U,t[27]=W):W=t[27],r.useEffect(H,W),t[28]!==a?(X=Ca(a),J=X.map(lw),K=X.map(cw),q=X.map(dw),t[28]=a,t[29]=q,t[30]=K,t[31]=J,t[32]=X):(q=t[29],K=t[30],J=t[31],X=t[32]);const Q=q;let ee;t[33]!==a?(ee=Sa(a),t[33]=a,t[34]=ee):ee=t[34];const te=ee;let ne;t[35]!==a||t[36]!==v||t[37]!==h?(ne=ja(a,v,h),t[35]=a,t[36]=v,t[37]=h,t[38]=ne):ne=t[38];const re=ne;let ae;t[39]!==E||t[40]!==K||t[41]!==O.state||t[42]!==S||t[43]!==J||t[44]!==Q||t[45]!==te||t[46]!==n.save.format_on_save||t[47]!==i||t[48]!==v?(ae=(e,t)=>{E||0!==K.length&&(O.state===Wi.OPEN?(V.log("saving to ",e),Ra({cellIds:J,codes:K,names:Q,filename:e,configs:te,layout:dl(),persist:!0}).then((()=>{t&&(Y({title:"Notebook saved"}),n.save.format_on_save&&ya(i)),g({names:Q,codes:K,configs:te,layout:v})}))):S())},t[39]=E,t[40]=K,t[41]=O.state,t[42]=S,t[43]=J,t[44]=Q,t[45]=te,t[46]=n.save.format_on_save,t[47]=i,t[48]=v,t[49]=ae):ae=t[49];const se=F(ae);let ie;t[50]!==d||t[51]!==O.state||t[52]!==se?(ie=e=>{const t=void 0!==e&&e;null!==d&&O.state===Wi.OPEN&&se(d,t)},t[50]=d,t[51]=O.state,t[52]=se,t[53]=ie):ie=t[53];const le=F(ie),ce=F((()=>{le(!0),null===d&&O.state!==Wi.CLOSED&&x(p.jsx(aw,{onClose:y,onSave:he}))}));let de,ue;t[54]!==le||t[55]!==re||t[56]!==K||t[57]!==te||t[58]!==Q||t[59]!==O||t[60]!==n||t[61]!==E?(de={onSave:le,needsSave:re,codes:K,cellConfigs:te,cellNames:Q,connStatus:O,config:n,kioskMode:E},t[54]=le,t[55]=re,t[56]=K,t[57]=te,t[58]=Q,t[59]=O,t[60]=n,t[61]=E,t[62]=de):de=t[62],function(e){const t=m(16),{codes:n,cellConfigs:o,config:a,connStatus:s,cellNames:i,needsSave:l,kioskMode:c,onSave:d}=e,u=r.useRef(null);let h,f;t[0]!==c||t[1]!==a.save.autosave||t[2]!==a.save.autosave_delay||t[3]!==l||t[4]!==s.state||t[5]!==d?(h=()=>{if(!c)return"after_delay"===a.save.autosave&&(null!==u.current&&clearTimeout(u.current),l&&s.state===Wi.OPEN&&(u.current=setTimeout(d,a.save.autosave_delay))),()=>{null!==u.current&&clearTimeout(u.current)}},t[0]=c,t[1]=a.save.autosave,t[2]=a.save.autosave_delay,t[3]=l,t[4]=s.state,t[5]=d,t[6]=h):h=t[6],t[7]!==n||t[8]!==o||t[9]!==i||t[10]!==a.save||t[11]!==s.state||t[12]!==d||t[13]!==c||t[14]!==l?(f=[n,o,i,a.save,s.state,d,c,l],t[7]=n,t[8]=o,t[9]=i,t[10]=a.save,t[11]=s.state,t[12]=d,t[13]=c,t[14]=l,t[15]=f):f=t[15],r.useEffect(h,f)}(de),function(){const e=m(4),t=Z(ba),{state:n}=Z(Hi),o=t.auto_download.includes("markdown"),r=t.auto_download.includes("html"),a=!o||n!==Wi.OPEN,s=!r||n!==Wi.OPEN;let i,l;e[0]!==a?(i={delayMs:5e3,whenVisible:!0,disabled:a},e[0]=a,e[1]=i):i=e[1],Mi(ow,i),e[2]!==s?(l={delayMs:5e3,whenVisible:!0,disabled:s},e[2]=s,e[3]=l):l=e[3],Mi(nw,l)}(),t[63]!==re?(ue=e=>{if(!Fa())return re?(e.preventDefault(),e.returnValue="You have unsaved changes. Are you sure you want to quit?"):void 0},t[63]=re,t[64]=ue):ue=t[64],G(window,"beforeunload",ue);const he=e=>{D(e).then((e=>{null!==e&&se(e,!0)}))},me=function(){const e=m(3),t=R(),n=td();let o;return e[0]!==n||e[1]!==t?(o=()=>n(z(t)),e[0]=n,e[1]=t,e[2]=o):o=e[2],F(o)}(),fe=Dd();let pe,ge,ve;t[65]!==me?(pe=()=>{me()},t[65]=me,t[66]=pe):pe=t[66],oi("global.runStale",pe),oi("global.save",ce),oi("global.interrupt",uw),t[67]!==fe?(ge=()=>{fe()},t[67]=fe,t[68]=ge):ge=t[68],oi("global.hideCode",ge),t[69]!==d||t[70]!==X?(ve=()=>JSON.stringify({filename:d,cells:X.map((e=>({name:e.name,code:e.code})))},null,2),t[69]=d,t[70]=X,t[71]=ve):ve=t[71];const xe=F(ve);let ye;t[72]!==a||t[73]!==O||t[74]!==c.mode||t[75]!==n||t[76]!==o?(ye=p.jsx(Qb,{notebook:a,connStatus:O,mode:c.mode,userConfig:n,appConfig:o}),t[72]=a,t[73]=O,t[74]=c.mode,t[75]=n,t[76]=o,t[77]=ye):ye=t[77];const be=ye,we=O.state,ke=o.width;let Ne,Ee,Ce,Se,je;t[78]===Symbol.for("react.memo_cache_sentinel")?(Ne=Ht("pt-4 sm:pt-12 pb-2 mb-4 print:hidden z-50","sticky left-0"),t[78]=Ne):Ne=t[78],t[79]!==w||t[80]!==d||t[81]!==D?(Ee=w&&p.jsx("div",{className:"flex items-center justify-center container",children:p.jsx(wu,{filename:d,setFilename:D})}),t[79]=w,t[80]=d,t[81]=D,t[82]=Ee):Ee=t[82],t[83]!==O||t[84]!==Ee?(Ce=p.jsx(ul,{connection:O,className:Ne,children:Ee}),t[83]=O,t[84]=Ee,t[85]=Ce):Ce=t[85],t[86]!==X.length||t[87]!==o||t[88]!==c||t[89]!==be?(Se=X.length>0&&p.jsx(ll,{appConfig:o,mode:c.mode,children:be}),t[86]=X.length,t[87]=o,t[88]=c,t[89]=be,t[90]=Se):Se=t[90],t[91]!==O.state||t[92]!==N||t[93]!==o.width||t[94]!==Ce||t[95]!==Se?(je=p.jsxs(hl,{connectionState:we,isRunning:N,width:ke,children:[Ce,Se]}),t[91]=O.state,t[92]=N,t[93]=o.width,t[94]=Ce,t[95]=Se,t[96]=je):je=t[96];const _e=O.state===Wi.CLOSED;let Ie,Ae,Me,Oe;return t[97]!==a?(Ie=_a(a),t[97]=a,t[98]=Ie):Ie=t[98],t[99]!==a?(Ae=xt(a),t[99]=a,t[100]=Ae):Ae=t[100],t[101]!==d||t[102]!==re||t[103]!==ce||t[104]!==xe||t[105]!==k||t[106]!==fe||t[107]!==me||t[108]!==_e||t[109]!==N||t[110]!==Ie||t[111]!==Ae||t[112]!==o.width?(Me=p.jsx(fu,{filename:d,needsSave:re,onSaveNotebook:ce,getCellsAsJSON:xe,presenting:k,onTogglePresenting:fe,onInterrupt:Gr,onRun:me,closed:_e,running:N,needsRun:Ie,undoAvailable:Ae,appWidth:o.width}),t[101]=d,t[102]=re,t[103]=ce,t[104]=xe,t[105]=k,t[106]=fe,t[107]=me,t[108]=_e,t[109]=N,t[110]=Ie,t[111]=Ae,t[112]=o.width,t[113]=Me):Me=t[113],t[114]!==je||t[115]!==Me?(Oe=p.jsxs(p.Fragment,{children:[je,Me]}),t[114]=je,t[115]=Me,t[116]=Oe):Oe=t[116],Oe},aw=e=>{const t=m(17),{onClose:n,onSave:o}=e,[a,s]=r.useState();let i;t[0]!==o||t[1]!==n?(i=e=>{s(e),e.trim()&&(o(e),n())},t[0]=o,t[1]=n,t[2]=i):i=t[2];const l=i;let c,d,u,h;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(y,{children:"Save notebook"}),t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx(se,{className:"text-md pt-6 px-1",children:"Save as"}),t[4]=d):d=t[4],t[5]!==l?(u=p.jsxs("div",{className:"flex flex-col",children:[d,p.jsx(yu,{onNameChange:l,placeholderText:"filename",className:"missing-filename"})]}),t[5]=l,t[6]=u):u=t[6],t[7]!==n?(h=p.jsx(v,{"data-testid":"cancel-save-dialog-button","aria-label":"Cancel",variant:"secondary",onClick:n,children:"Cancel"}),t[7]=n,t[8]=h):h=t[8];const f=!a;let g,x,b;return t[9]!==f?(g=p.jsx(v,{"data-testid":"submit-save-dialog-button","aria-label":"Save",variant:"default",disabled:f,type:"submit",children:"Save"}),t[9]=f,t[10]=g):g=t[10],t[11]!==h||t[12]!==g?(x=p.jsxs(w,{children:[h,g]}),t[11]=h,t[12]=g,t[13]=x):x=t[13],t[14]!==u||t[15]!==x?(b=p.jsxs(k,{children:[c,u,x]}),t[14]=u,t[15]=x,t[16]=b):b=t[16],b};function sw(){cl.INSTANCE.stop()}function iw(){return cl.INSTANCE.start(Ia),sw}function lw(e){return e.id}function cw(e){return e.code}function dw(e){return e.name}function uw(){Gr()}const{createElement:hw,createContext:mw,createRef:fw,forwardRef:pw,useCallback:gw,useContext:vw,useEffect:xw,useImperativeHandle:yw,useLayoutEffect:bw,useMemo:ww,useRef:kw,useState:Nw}=La,Ew=La["useId".toString()],Cw=bw,Sw=mw(null);Sw.displayName="PanelGroupContext";const jw=Cw,_w="function"==typeof Ew?Ew:()=>null;let Iw=0;function Aw(e=null){const t=_w(),n=kw(e||t||null);return null===n.current&&(n.current=""+Iw++),null!=e?e:n.current}function Mw({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:r,forwardedRef:a,id:s,maxSize:i,minSize:l,onCollapse:c,onExpand:d,onResize:u,order:h,style:m,tagName:f="div",...p}){const g=vw(Sw);if(null===g)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:v,expandPanel:x,getPanelSize:y,getPanelStyle:b,groupId:w,isPanelCollapsed:k,reevaluatePanelConstraints:N,registerPanel:E,resizePanel:C,unregisterPanel:S}=g,j=Aw(s),_=kw({callbacks:{onCollapse:c,onExpand:d,onResize:u},constraints:{collapsedSize:n,collapsible:o,defaultSize:r,maxSize:i,minSize:l},id:j,idIsFromProps:void 0!==s,order:h});kw({didLogMissingDefaultSizeWarning:!1}),jw((()=>{const{callbacks:e,constraints:t}=_.current,a={...t};_.current.id=j,_.current.idIsFromProps=void 0!==s,_.current.order=h,e.onCollapse=c,e.onExpand=d,e.onResize=u,t.collapsedSize=n,t.collapsible=o,t.defaultSize=r,t.maxSize=i,t.minSize=l,a.collapsedSize===t.collapsedSize&&a.collapsible===t.collapsible&&a.maxSize===t.maxSize&&a.minSize===t.minSize||N(_.current,a)})),jw((()=>{const e=_.current;return E(e),()=>{S(e)}}),[h,j,E,S]),yw(a,(()=>({collapse:()=>{v(_.current)},expand:e=>{x(_.current,e)},getId:()=>j,getSize:()=>y(_.current),isCollapsed:()=>k(_.current),isExpanded:()=>!k(_.current),resize:e=>{C(_.current,e)}})),[v,x,y,k,j,C]);const I=b(_.current,r);return hw(f,{...p,children:e,className:t,id:s,style:{...I,...m},"data-panel":"","data-panel-collapsible":o||void 0,"data-panel-group-id":w,"data-panel-id":j,"data-panel-size":parseFloat(""+I.flexGrow).toFixed(1)})}const Ow=pw(((e,t)=>hw(Mw,{...e,forwardedRef:t})));Mw.displayName="Panel",Ow.displayName="forwardRef(Panel)";let Tw=null,Dw=null;function Pw(e,t){const n=function(e,t){if(t){const e=!!(t&Yw),n=!!(t&Kw);if(t&Ww)return e?"se-resize":n?"ne-resize":"e-resize";if(t&qw)return e?"sw-resize":n?"nw-resize":"w-resize";if(e)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);Tw!==n&&(Tw=n,null===Dw&&(Dw=document.createElement("style"),document.head.appendChild(Dw)),Dw.innerHTML=`*{cursor: ${n}!important;}`)}function Rw(e){return"keydown"===e.type}function Fw(e){return e.type.startsWith("pointer")}function Lw(e){return e.type.startsWith("mouse")}function zw(e){if(Fw(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Lw(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}const Bw=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Uw(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=Hw(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!Bw.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function Vw(e){let t=e.length;for(;t--;){const n=e[t];if(dk(n,"Missing node"),Uw(n))return n}return null}function $w(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Gw(e){const t=[];for(;e;)t.push(e),e=Hw(e);return t}function Hw(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Ww=1,qw=2,Yw=4,Kw=8,Jw="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let Xw=[],Zw=!1,Qw=new Map,ek=new Map;const tk=new Set;function nk(e){const{target:t}=e,{x:n,y:o}=zw(e);Zw=!0,ak({target:t,x:n,y:o}),lk(),Xw.length>0&&(ck("down",e),e.preventDefault(),e.stopPropagation())}function ok(e){const{x:t,y:n}=zw(e);if(!Zw){const{target:o}=e;ak({target:o,x:t,y:n})}ck("move",e),ik(),Xw.length>0&&e.preventDefault()}function rk(e){const{target:t}=e,{x:n,y:o}=zw(e);ek.clear(),Zw=!1,Xw.length>0&&e.preventDefault(),ck("up",e),ak({target:t,x:n,y:o}),ik(),lk()}function ak({target:e,x:t,y:n}){Xw.splice(0);let o=null;e instanceof HTMLElement&&(o=e),tk.forEach((e=>{const{element:r,hitAreaMargins:a}=e,s=r.getBoundingClientRect(),{bottom:i,left:l,right:c,top:d}=s,u=Jw?a.coarse:a.fine;if(t>=l-u&&t<=c+u&&n>=d-u&&n<=i+u){if(null!==o&&r!==o&&!r.contains(o)&&!o.contains(r)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:Gw(e),b:Gw(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;dk(o,"Stacking order can only be calculated for elements with a common ancestor");const r=$w(Vw(n.a)),a=$w(Vw(n.b));if(r===a){const e=o.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let r=e.length;for(;r--;){const n=e[r];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(r-a)}(o,r)>0){let e=o,t=!1;for(;e&&!e.contains(r);){if(h=e.getBoundingClientRect(),m=s,h.x<m.x+m.width&&h.x+h.width>m.x&&h.y<m.y+m.height&&h.y+h.height>m.y){t=!0;break}e=e.parentElement}if(t)return}Xw.push(e)}var h,m}))}function sk(e,t){ek.set(e,t)}function ik(){let e=!1,t=!1;Xw.forEach((n=>{const{direction:o}=n;"horizontal"===o?e=!0:t=!0}));let n=0;ek.forEach((e=>{n|=e})),e&&t?Pw("intersection",n):e?Pw("horizontal",n):t?Pw("vertical",n):null!==Dw&&(document.head.removeChild(Dw),Tw=null,Dw=null)}function lk(){Qw.forEach(((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",rk),n.removeEventListener("pointerdown",nk),n.removeEventListener("pointerleave",ok),n.removeEventListener("pointermove",ok)})),window.removeEventListener("pointerup",rk),window.removeEventListener("pointercancel",rk),tk.size>0&&(Zw?(Xw.length>0&&Qw.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",rk),n.addEventListener("pointerleave",ok),n.addEventListener("pointermove",ok))})),window.addEventListener("pointerup",rk),window.addEventListener("pointercancel",rk)):Qw.forEach(((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",nk,{capture:!0}),n.addEventListener("pointermove",ok))})))}function ck(e,t){tk.forEach((n=>{const{setResizeHandlerState:o}=n,r=Xw.includes(n);o(e,r,t)}))}function dk(e,t){if(!e)throw console.error(t),Error(t)}function uk(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function hk(e,t,n=10){return 0===uk(e,t,n)}function mk(e,t,n){return 0===uk(e,t,n)}function fk({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];dk(null!=o,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:a,maxSize:s=100,minSize:i=0}=o;if(uk(n,i)<0)if(a){n=uk(n,(r+i)/2)<0?r:i}else n=i;return n=Math.min(s,n),n=parseFloat(n.toFixed(10))}function pk({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:r,trigger:a}){if(mk(e,0))return t;const s=[...t],[i,l]=o;dk(null!=i,"Invalid first pivot index"),dk(null!=l,"Invalid second pivot index");let c=0;if("keyboard"===a){{const o=e<0?l:i,r=n[o];dk(r,`Panel constraints not found for index ${o}`);const{collapsedSize:a=0,collapsible:s,minSize:c=0}=r;if(s){const n=t[o];if(dk(null!=n,`Previous layout not found for panel index ${o}`),mk(n,a)){const t=c-n;uk(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const o=e<0?i:l,r=n[o];dk(r,`No panel constraints found for index ${o}`);const{collapsedSize:a=0,collapsible:s,minSize:c=0}=r;if(s){const n=t[o];if(dk(null!=n,`Previous layout not found for panel index ${o}`),mk(n,c)){const t=n-a;uk(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const o=e<0?1:-1;let r=e<0?l:i,a=0;for(;;){const e=t[r];dk(null!=e,`Previous layout not found for panel index ${r}`);if(a+=fk({panelConstraints:n,panelIndex:r,size:100})-e,r+=o,r<0||r>=n.length)break}const s=Math.min(Math.abs(e),Math.abs(a));e=e<0?0-s:s}{let o=e<0?i:l;for(;o>=0&&o<n.length;){const r=Math.abs(e)-Math.abs(c),a=t[o];dk(null!=a,`Previous layout not found for panel index ${o}`);const i=fk({panelConstraints:n,panelIndex:o,size:a-r});if(!mk(a,i)&&(c+=a-i,s[o]=i,c.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?o--:o++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!mk(e[o],t[o],n))return!1;return!0}(r,s))return r;{const o=e<0?l:i,r=t[o];dk(null!=r,`Previous layout not found for panel index ${o}`);const a=r+c,d=fk({panelConstraints:n,panelIndex:o,size:a});if(s[o]=d,!mk(d,a)){let t=a-d;let o=e<0?l:i;for(;o>=0&&o<n.length;){const r=s[o];dk(null!=r,`Previous layout not found for panel index ${o}`);const a=fk({panelConstraints:n,panelIndex:o,size:r+t});if(mk(r,a)||(t-=a-r,s[o]=a),mk(t,0))break;e>0?o--:o++}}}return mk(s.reduce(((e,t)=>t+e),0),100)?s:r}function gk({layout:e,panelsArray:t,pivotIndices:n}){let o=0,r=100,a=0,s=0;const i=n[0];dk(null!=i,"No pivot index found"),t.forEach(((e,t)=>{const{constraints:n}=e,{maxSize:l=100,minSize:c=0}=n;t===i?(o=c,r=l):(a+=c,s+=l)}));return{valueMax:Math.min(r,100-a),valueMin:Math.max(o,100-s),valueNow:e[i]}}function vk(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function xk(e,t,n=document){const o=vk(e,n).findIndex((e=>e.getAttribute("data-panel-resize-handle-id")===t));return null!=o?o:null}function yk(e,t,n){const o=xk(e,t,n);return null!=o?[o,o+1]:[-1,-1]}function bk(e,t=document){var n;if(t instanceof HTMLElement&&(null==t||null===(n=t.dataset)||void 0===n?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function wk(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function kk({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:r,panelGroupElement:a,setLayout:s}){kw({didWarnAboutMissingResizeHandle:!1}),jw((()=>{if(!a)return;const e=vk(n,a);for(let t=0;t<r.length-1;t++){const{valueMax:n,valueMin:a,valueNow:s}=gk({layout:o,panelsArray:r,pivotIndices:[t,t+1]}),i=e[t];if(null==i);else{const e=r[t];dk(e,`No panel data found for index "${t}"`),i.setAttribute("aria-controls",e.id),i.setAttribute("aria-valuemax",""+Math.round(n)),i.setAttribute("aria-valuemin",""+Math.round(a)),i.setAttribute("aria-valuenow",null!=s?""+Math.round(s):"")}}return()=>{e.forEach(((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")}))}}),[n,o,r,a]),xw((()=>{if(!a)return;const e=t.current;dk(e,"Eager values not found");const{panelDataArray:r}=e;dk(null!=bk(n,a),`No group found for id "${n}"`);const i=vk(n,a);dk(i,`No resize handles found for group id "${n}"`);const l=i.map((e=>{const t=e.getAttribute("data-panel-resize-handle-id");dk(t,"Resize handle element has no handle id attribute");const[i,l]=function(e,t,n,o=document){var r,a,s,i;const l=wk(t,o),c=vk(e,o),d=l?c.indexOf(l):-1;return[null!==(r=null===(a=n[d])||void 0===a?void 0:a.id)&&void 0!==r?r:null,null!==(s=null===(i=n[d+1])||void 0===i?void 0:i.id)&&void 0!==s?s:null]}(n,t,r,a);if(null==i||null==l)return()=>{};const c=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const l=r.findIndex((e=>e.id===i));if(l>=0){const e=r[l];dk(e,`No panel data found for index ${l}`);const i=o[l],{collapsedSize:c=0,collapsible:d,minSize:u=0}=e.constraints;if(null!=i&&d){const e=pk({delta:mk(i,c)?u-c:c-i,initialLayout:o,panelConstraints:r.map((e=>e.constraints)),pivotIndices:yk(n,t,a),prevLayout:o,trigger:"keyboard"});o!==e&&s(e)}}break}}};return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}}));return()=>{l.forEach((e=>e()))}}),[a,e,t,n,o,r,s])}function Nk(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Ek(e,t){const n="horizontal"===e,{x:o,y:r}=zw(t);return n?o:r}function Ck(e,t,n,o,r,a){if(Rw(e)){const t="horizontal"===n;let o=0;o=e.shiftKey?100:null!=r?r:10;let a=0;switch(e.key){case"ArrowDown":a=t?0:o;break;case"ArrowLeft":a=t?-o:0;break;case"ArrowRight":a=t?o:0;break;case"ArrowUp":a=t?0:-o;break;case"End":a=100;break;case"Home":a=-100}return a}return null==o?0:function(e,t,n,o,r){const a="horizontal"===n,s=wk(t,r);dk(s,`No resize handle element found for id "${t}"`);const i=s.getAttribute("data-panel-group-id");dk(i,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=o;const c=Ek(n,e),d=bk(i,r);dk(d,`No group element found for id "${i}"`);const u=d.getBoundingClientRect();return(c-l)/(a?u.width:u.height)*100}(e,t,n,o,a)}function Sk(e,t,n){t.forEach(((t,o)=>{const r=e[o];dk(r,`Panel data not found for index ${o}`);const{callbacks:a,constraints:s,id:i}=r,{collapsedSize:l=0,collapsible:c}=s,d=n[i];if(null==d||t!==d){n[i]=t;const{onCollapse:e,onExpand:o,onResize:r}=a;r&&r(t,d),c&&(e||o)&&(!o||null!=d&&!hk(d,l)||hk(t,l)||o(),!e||null!=d&&hk(d,l)||!hk(t,l)||e())}}))}function jk(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function _k(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Ik(e){return`react-resizable-panels:${e}`}function Ak(e){return e.map((e=>{const{constraints:t,id:n,idIsFromProps:o,order:r}=e;return o?n:r?`${r}:${JSON.stringify(t)}`:JSON.stringify(t)})).sort(((e,t)=>e.localeCompare(t))).join(",")}function Mk(e,t){try{const n=Ik(e),o=t.getItem(n);if(o){const e=JSON.parse(o);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function Ok(e,t,n,o,r){var a;const s=Ik(e),i=Ak(t),l=null!==(a=Mk(e,r))&&void 0!==a?a:{};l[i]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{r.setItem(s,JSON.stringify(l))}catch(c){console.error(c)}}function Tk({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce(((e,t)=>e+t),0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map((e=>`${e}%`)).join(", ")}`);if(!mk(o,100))for(let a=0;a<t.length;a++){const e=n[a];dk(null!=e,`No layout data found for index ${a}`);const t=100/o*e;n[a]=t}let r=0;for(let a=0;a<t.length;a++){const e=n[a];dk(null!=e,`No layout data found for index ${a}`);const o=fk({panelConstraints:t,panelIndex:a,size:e});e!=o&&(r+=e-o,n[a]=o)}if(!mk(r,0))for(let a=0;a<t.length;a++){const e=n[a];dk(null!=e,`No layout data found for index ${a}`);const o=fk({panelConstraints:t,panelIndex:a,size:e+r});if(e!==o&&(r-=o-e,n[a]=o,mk(r,0)))break}return n}const Dk={getItem:e=>(_k(Dk),Dk.getItem(e)),setItem:(e,t)=>{_k(Dk),Dk.setItem(e,t)}},Pk={};function Rk({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:r,id:a=null,onLayout:s=null,keyboardResizeBy:i=null,storage:l=Dk,style:c,tagName:d="div",...u}){const h=Aw(a),m=kw(null),[f,p]=Nw(null),[g,v]=Nw([]),x=kw({}),y=kw(new Map),b=kw(0),w=kw({autoSaveId:e,direction:o,dragState:f,id:h,keyboardResizeBy:i,onLayout:s,storage:l}),k=kw({layout:g,panelDataArray:[],panelDataArrayChanged:!1});kw({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),yw(r,(()=>({getId:()=>w.current.id,getLayout:()=>{const{layout:e}=k.current;return e},setLayout:e=>{const{onLayout:t}=w.current,{layout:n,panelDataArray:o}=k.current,r=Tk({layout:e,panelConstraints:o.map((e=>e.constraints))});Nk(n,r)||(v(r),k.current.layout=r,t&&t(r),Sk(o,r,x.current))}})),[]),jw((()=>{w.current.autoSaveId=e,w.current.direction=o,w.current.dragState=f,w.current.id=h,w.current.onLayout=s,w.current.storage=l})),kk({committedValuesRef:w,eagerValuesRef:k,groupId:h,layout:g,panelDataArray:k.current.panelDataArray,setLayout:v,panelGroupElement:m.current}),xw((()=>{const{panelDataArray:t}=k.current;if(e){if(0===g.length||g.length!==t.length)return;let n=Pk[e];null==n&&(n=function(e,t=10){let n=null;return(...o)=>{null!==n&&clearTimeout(n),n=setTimeout((()=>{e(...o)}),t)}}(Ok,100),Pk[e]=n);const o=[...t],r=new Map(y.current);n(e,o,r,g,l)}}),[e,g,l]),xw((()=>{}));const N=gw((e=>{const{onLayout:t}=w.current,{layout:n,panelDataArray:o}=k.current;if(e.constraints.collapsible){const r=o.map((e=>e.constraints)),{collapsedSize:a=0,panelSize:s,pivotIndices:i}=zk(o,e,n);if(dk(null!=s,`Panel size not found for panel "${e.id}"`),!hk(s,a)){y.current.set(e.id,s);const l=pk({delta:Lk(o,e)===o.length-1?s-a:a-s,initialLayout:n,panelConstraints:r,pivotIndices:i,prevLayout:n,trigger:"imperative-api"});jk(n,l)||(v(l),k.current.layout=l,t&&t(l),Sk(o,l,x.current))}}}),[]),E=gw(((e,t)=>{const{onLayout:n}=w.current,{layout:o,panelDataArray:r}=k.current;if(e.constraints.collapsible){const a=r.map((e=>e.constraints)),{collapsedSize:s=0,panelSize:i=0,minSize:l=0,pivotIndices:c}=zk(r,e,o),d=null!=t?t:l;if(hk(i,s)){const t=y.current.get(e.id),s=null!=t&&t>=d?t:d,l=pk({delta:Lk(r,e)===r.length-1?i-s:s-i,initialLayout:o,panelConstraints:a,pivotIndices:c,prevLayout:o,trigger:"imperative-api"});jk(o,l)||(v(l),k.current.layout=l,n&&n(l),Sk(r,l,x.current))}}}),[]),C=gw((e=>{const{layout:t,panelDataArray:n}=k.current,{panelSize:o}=zk(n,e,t);return dk(null!=o,`Panel size not found for panel "${e.id}"`),o}),[]),S=gw(((e,t)=>{const{panelDataArray:n}=k.current,o=Lk(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:r,precision:a=3}){const s=n[r];let i;return i=null==s?null!=e?e.toPrecision(a):"1":1===o.length?"1":s.toPrecision(a),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:f,layout:g,panelData:n,panelIndex:o})}),[f,g]),j=gw((e=>{const{layout:t,panelDataArray:n}=k.current,{collapsedSize:o=0,collapsible:r,panelSize:a}=zk(n,e,t);return dk(null!=a,`Panel size not found for panel "${e.id}"`),!0===r&&hk(a,o)}),[]),_=gw((e=>{const{layout:t,panelDataArray:n}=k.current,{collapsedSize:o=0,collapsible:r,panelSize:a}=zk(n,e,t);return dk(null!=a,`Panel size not found for panel "${e.id}"`),!r||uk(a,o)>0}),[]),I=gw((e=>{const{panelDataArray:t}=k.current;t.push(e),t.sort(((e,t)=>{const n=e.order,o=t.order;return null==n&&null==o?0:null==n?-1:null==o?1:n-o})),k.current.panelDataArrayChanged=!0}),[]);jw((()=>{if(k.current.panelDataArrayChanged){k.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=w.current,{layout:o,panelDataArray:r}=k.current;let a=null;if(e){const t=function(e,t,n){var o,r;return null!==(r=(null!==(o=Mk(e,n))&&void 0!==o?o:{})[Ak(t)])&&void 0!==r?r:null}(e,r,n);t&&(y.current=new Map(Object.entries(t.expandToSizes)),a=t.layout)}null==a&&(a=function({panelDataArray:e}){const t=Array(e.length),n=e.map((e=>e.constraints));let o=0,r=100;for(let a=0;a<e.length;a++){const e=n[a];dk(e,`Panel constraints not found for index ${a}`);const{defaultSize:s}=e;null!=s&&(o++,t[a]=s,r-=s)}for(let a=0;a<e.length;a++){const s=n[a];dk(s,`Panel constraints not found for index ${a}`);const{defaultSize:i}=s;if(null!=i)continue;const l=r/(e.length-o);o++,t[a]=l,r-=l}return t}({panelDataArray:r}));const s=Tk({layout:a,panelConstraints:r.map((e=>e.constraints))});Nk(o,s)||(v(s),k.current.layout=s,t&&t(s),Sk(r,s,x.current))}})),jw((()=>{const e=k.current;return()=>{e.layout=[]}}),[]);const A=gw((e=>function(t){t.preventDefault();const n=m.current;if(!n)return()=>null;const{direction:o,dragState:r,id:a,keyboardResizeBy:s,onLayout:i}=w.current,{layout:l,panelDataArray:c}=k.current,{initialLayout:d}=null!=r?r:{},u=yk(a,e,n);let h=Ck(t,e,o,r,s,n);if(0===h)return;const f="horizontal"===o;"rtl"===document.dir&&f&&(h=-h);const p=pk({delta:h,initialLayout:null!=d?d:l,panelConstraints:c.map((e=>e.constraints)),pivotIndices:u,prevLayout:l,trigger:Rw(t)?"keyboard":"mouse-or-touch"}),g=!jk(l,p);(Fw(t)||Lw(t))&&b.current!=h&&(b.current=h,sk(e,g?0:f?h<0?Ww:qw:h<0?Yw:Kw)),g&&(v(p),k.current.layout=p,i&&i(p),Sk(c,p,x.current))}),[]),M=gw(((e,t)=>{const{onLayout:n}=w.current,{layout:o,panelDataArray:r}=k.current,a=r.map((e=>e.constraints)),{panelSize:s,pivotIndices:i}=zk(r,e,o);dk(null!=s,`Panel size not found for panel "${e.id}"`);const l=pk({delta:Lk(r,e)===r.length-1?s-t:t-s,initialLayout:o,panelConstraints:a,pivotIndices:i,prevLayout:o,trigger:"imperative-api"});jk(o,l)||(v(l),k.current.layout=l,n&&n(l),Sk(r,l,x.current))}),[]),O=gw(((e,t)=>{const{layout:n,panelDataArray:o}=k.current,{collapsedSize:r=0,collapsible:a}=t,{collapsedSize:s=0,collapsible:i,maxSize:l=100,minSize:c=0}=e.constraints,{panelSize:d}=zk(o,e,n);null!=d&&(a&&i&&hk(d,r)?hk(r,s)||M(e,s):d<c?M(e,c):d>l&&M(e,l))}),[M]),T=gw(((e,t)=>{const{direction:n}=w.current,{layout:o}=k.current;if(!m.current)return;const r=wk(e,m.current);dk(r,`Drag handle element not found for id "${e}"`);const a=Ek(n,t);p({dragHandleId:e,dragHandleRect:r.getBoundingClientRect(),initialCursorPosition:a,initialLayout:o})}),[]),D=gw((()=>{p(null)}),[]),P=gw((e=>{const{panelDataArray:t}=k.current,n=Lk(t,e);n>=0&&(t.splice(n,1),delete x.current[e.id],k.current.panelDataArrayChanged=!0)}),[]),R=ww((()=>({collapsePanel:N,direction:o,dragState:f,expandPanel:E,getPanelSize:C,getPanelStyle:S,groupId:h,isPanelCollapsed:j,isPanelExpanded:_,reevaluatePanelConstraints:O,registerPanel:I,registerResizeHandle:A,resizePanel:M,startDragging:T,stopDragging:D,unregisterPanel:P,panelGroupElement:m.current})),[N,f,o,E,C,S,h,j,_,O,I,A,M,T,D,P]),F={display:"flex",flexDirection:"horizontal"===o?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return hw(Sw.Provider,{value:R},hw(d,{...u,children:t,className:n,id:a,ref:m,style:{...F,...c},"data-panel-group":"","data-panel-group-direction":o,"data-panel-group-id":h}))}const Fk=pw(((e,t)=>hw(Rk,{...e,forwardedRef:t})));function Lk(e,t){return e.findIndex((e=>e===t||e.id===t.id))}function zk(e,t,n){const o=Lk(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],a=n[o];return{...t.constraints,panelSize:a,pivotIndices:r}}function Bk({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:r,onDragging:a,style:s={},tabIndex:i=0,tagName:l="div",...c}){var d,u;const h=kw(null),m=kw({onDragging:a});xw((()=>{m.current.onDragging=a}));const f=vw(Sw);if(null===f)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:p,groupId:g,registerResizeHandle:v,startDragging:x,stopDragging:y,panelGroupElement:b}=f,w=Aw(r),[k,N]=Nw("inactive"),[E,C]=Nw(!1),[S,j]=Nw(null),_=kw({state:k});jw((()=>{_.current.state=k})),xw((()=>{if(n)j(null);else{const e=v(w);j((()=>e))}}),[n,w,v]);const I=null!==(d=null==o?void 0:o.coarse)&&void 0!==d?d:15,A=null!==(u=null==o?void 0:o.fine)&&void 0!==u?u:5;xw((()=>{if(n||null==S)return;const e=h.current;dk(e,"Element ref not attached");return function(e,t,n,o,r){var a;const{ownerDocument:s}=t,i={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:r},l=null!==(a=Qw.get(s))&&void 0!==a?a:0;return Qw.set(s,l+1),tk.add(i),lk(),function(){var t;ek.delete(e),tk.delete(i);const n=null!==(t=Qw.get(s))&&void 0!==t?t:1;Qw.set(s,n-1),lk(),1===n&&Qw.delete(s)}}(w,e,p,{coarse:I,fine:A},((e,t,n)=>{if(t)switch(e){case"down":{N("drag"),x(w,n);const{onDragging:e}=m.current;e&&e(!0);break}case"move":{const{state:e}=_.current;"drag"!==e&&N("hover"),S(n);break}case"up":{N("hover"),y();const{onDragging:e}=m.current;e&&e(!1);break}}else N("inactive")}))}),[I,p,n,A,v,w,S,x,y]),function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){xw((()=>{if(e||null==n||null==o)return;const r=wk(t,o);if(null==r)return;const a=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();const n=r.getAttribute("data-panel-group-id");dk(n,`No group element found for id "${n}"`);const a=vk(n,o),s=xk(n,t,o);dk(null!==s,`No resize element found for id "${t}"`),a[e.shiftKey?s>0?s-1:a.length-1:s+1<a.length?s+1:0].focus();break}}};return r.addEventListener("keydown",a),()=>{r.removeEventListener("keydown",a)}}),[o,e,t,n])}({disabled:n,handleId:w,resizeHandler:S,panelGroupElement:b});return hw(l,{...c,children:e,className:t,id:r,onBlur:()=>C(!1),onFocus:()=>C(!0),ref:h,role:"separator",style:{touchAction:"none",userSelect:"none",...s},tabIndex:i,"data-panel-group-direction":p,"data-panel-group-id":g,"data-resize-handle":"","data-resize-handle-active":"drag"===k?"pointer":E?"keyboard":void 0,"data-resize-handle-state":k,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":w})}Rk.displayName="PanelGroup",Fk.displayName="forwardRef(PanelGroup)",Bk.displayName="PanelResizeHandle";const Uk=e=>{const t=m(3);let n,o;return t[0]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx("path",{d:"M205.28 31.36c14.096 14.88 20.016 35.2 22.512 63.68c6.626 0 12.805 1.47 16.976 7.152l7.792 10.56A17.55 17.55 0 0 1 256 123.2v28.688c-.008 3.704-1.843 7.315-4.832 9.504C215.885 187.222 172.35 208 128 208c-49.066 0-98.19-28.273-123.168-46.608c-2.989-2.189-4.825-5.8-4.832-9.504V123.2c0-3.776 1.2-7.424 3.424-10.464l7.792-10.544c4.173-5.657 10.38-7.152 16.992-7.152c2.496-28.48 8.4-48.8 22.512-63.68C77.331 3.165 112.567.06 127.552 0H128c14.72 0 50.4 2.88 77.28 31.36m-77.264 47.376c-3.04 0-6.544.176-10.272.544c-1.312 4.896-3.248 9.312-6.08 12.128c-11.2 11.2-24.704 12.928-31.936 12.928c-6.802 0-13.927-1.42-19.744-5.088c-5.502 1.808-10.786 4.415-11.136 10.912c-.586 12.28-.637 24.55-.688 36.824c-.026 6.16-.05 12.322-.144 18.488c.024 3.579 2.182 6.903 5.44 8.384C79.936 185.92 104.976 192 128.016 192c23.008 0 48.048-6.08 74.512-18.144c3.258-1.48 5.415-4.805 5.44-8.384c.317-18.418.062-36.912-.816-55.312h.016c-.342-6.534-5.648-9.098-11.168-10.912c-5.82 3.652-12.927 5.088-19.728 5.088c-7.232 0-20.72-1.728-31.936-12.928c-2.832-2.816-4.768-7.232-6.08-12.128a106 106 0 0 0-10.24-.544m-26.941 43.93c5.748 0 10.408 4.66 10.408 10.409v19.183c0 5.749-4.66 10.409-10.408 10.409s-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408m53.333 0c5.749 0 10.409 4.66 10.409 10.409v19.183c0 5.749-4.66 10.409-10.409 10.409c-5.748 0-10.408-4.66-10.408-10.409v-19.183c0-5.748 4.66-10.408 10.408-10.408M81.44 28.32c-11.2 1.12-20.64 4.8-25.44 9.92c-10.4 11.36-8.16 40.16-2.24 46.24c4.32 4.32 12.48 7.2 21.28 7.2c6.72 0 19.52-1.44 30.08-12.16c4.64-4.48 7.52-15.68 7.2-27.04c-.32-9.12-2.88-16.64-6.72-19.84c-4.16-3.68-13.6-5.28-24.16-4.32m68.96 4.32c-3.84 3.2-6.4 10.72-6.72 19.84c-.32 11.36 2.56 22.56 7.2 27.04c10.56 10.72 23.36 12.16 30.08 12.16c8.8 0 16.96-2.88 21.28-7.2c5.92-6.08 8.16-34.88-2.24-46.24c-4.8-5.12-14.24-8.8-25.44-9.92c-10.56-.96-20 .64-24.16 4.32M128 56c-2.56 0-5.6.16-8.96.48c.32 1.76.48 3.68.64 5.76c0 1.44 0 2.88-.16 4.48c3.2-.32 5.92-.32 8.48-.32s5.28 0 8.48.32c-.16-1.6-.16-3.04-.16-4.48c.16-2.08.32-4 .64-5.76c-3.36-.32-6.4-.48-8.96-.48"}),t[0]=n):n=t[0],t[1]!==e?(o=p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.24em",height:"1em",viewBox:"0 0 256 208",fill:"currentColor",...e,children:n}),t[1]=e,t[2]=o):o=t[2],o},Vk=e=>{const t=m(17);let n,o,r,a,s;t[0]!==e?(({children:a,tooltip:s,selected:n,className:o,...r}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=a,t[5]=s):(n=t[1],o=t[2],r=t[3],a=t[4],s=t[5]);const i=!n&&"hover:bg-[var(--sage-3)]",l=n&&"bg-[var(--sage-4)]";let c,d;t[6]!==i||t[7]!==l||t[8]!==o?(c=Ht("h-full flex items-center p-2 text-sm shadow-inset font-mono cursor-pointer rounded",i,l,o),t[6]=i,t[7]=l,t[8]=o,t[9]=c):c=t[9],t[10]!==c||t[11]!==r||t[12]!==a?(d=p.jsx("div",{className:c,...r,children:a}),t[10]=c,t[11]=r,t[12]=a,t[13]=d):d=t[13];const u=d;if(s){let e;return t[14]!==s||t[15]!==u?(e=p.jsx(g,{content:s,side:"top",delayDuration:200,children:u}),t[14]=s,t[15]=u,t[16]=e):e=t[16],e}return u},$k=()=>{var e;const t=m(10),n=Z(Hk),o=Z(ee),r=(null==(e=null==n?void 0:n.open_ai)?void 0:e.model)||"gpt-4-turbo",{handleClick:a}=Wk();if(!o){let e,n;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Ec,{className:"h-4 w-4 opacity-60"}),t[0]=e):e=t[0],t[1]!==a?(n=p.jsx(Vk,{tooltip:"Assist is disabled",selected:!1,onClick:a,children:e}),t[1]=a,t[2]=n):n=t[2],n}let s,i,l,c;return t[3]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx("b",{children:"Assist model:"}),t[3]=s):s=t[3],t[4]!==r?(i=p.jsxs(p.Fragment,{children:[s," ",r]}),t[4]=r,t[5]=i):i=t[5],t[6]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(Ec,{className:"h-4 w-4"}),t[6]=l):l=t[6],t[7]!==i||t[8]!==a?(c=p.jsx(Vk,{tooltip:i,onClick:a,selected:!1,children:l}),t[7]=i,t[8]=a,t[9]=c):c=t[9],c},Gk=$((e=>e(za).completion.copilot)),Hk=$((e=>e(za).ai));function Wk(){const e=m(5),t=Q(Oi),n=Q(fi);let o;e[0]!==t||e[1]!==n?(o=()=>{t("ai"),n(!0)},e[0]=t,e[1]=n,e[2]=o):o=e[2];const r=o;let a;return e[3]!==r?(a={handleClick:r},e[3]=r,e[4]=a):a=e[4],a}const qk=()=>{const e=m(1);if("github"===Z(Gk)){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(Yk,{}),e[0]=t):t=e[0],t}return null},Yk=()=>{const e=m(10),t=Z(Ti),n=null!==Z(Di),{handleClick:o}=Wk(),r=t?"Ready":"Not connected";let a,s,i,l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=p.jsx("b",{children:"GitHub Copilot:"}),e[0]=a):a=e[0],e[1]!==r?(s=p.jsxs(p.Fragment,{children:[a," ",r]}),e[1]=r,e[2]=s):s=e[2],e[3]!==n||e[4]!==t?(i=p.jsx("span",{children:n?p.jsx(Ba,{className:"h-4 w-4"}):p.jsx(Uk,{className:Ht("h-4 w-4",!t&&"opacity-60")})}),e[3]=n,e[4]=t,e[5]=i):i=e[5],e[6]!==s||e[7]!==o||e[8]!==i?(l=p.jsx(Vk,{tooltip:s,selected:!1,onClick:o,children:i}),e[6]=s,e[7]=o,e[8]=i,e[9]=l):l=e[9],l},Kk=e=>{const t=m(18),[n,o]=r.useState(0),a=Z(Hi);let s,i,l,c;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=()=>o((e=>e+1)),i={delayMs:1e4,whenVisible:!0},t[0]=s,t[1]=i):(s=t[0],i=t[1]),Mi(s,i),t[2]!==a.state?(l=async()=>S()||a.state!==Wi.OPEN?null:Ua(),t[2]=a.state,t[3]=l):l=t[3],t[4]!==n||t[5]!==a.state?(c=[n,a.state],t[4]=n,t[5]=a.state,t[6]=c):c=t[6];const{data:d}=qt(l,c);let u,h,f,g,v;return t[7]!==d?(u=d&&p.jsx(Xk,{memory:d.memory,kernel:d.kernel,server:d.server}),t[7]=d,t[8]=u):u=t[8],t[9]!==d?(h=d&&p.jsx(Zk,{cpu:d.cpu}),t[9]=d,t[10]=h):h=t[10],t[11]===Symbol.for("react.memo_cache_sentinel")?(f=p.jsxs("div",{className:"flex items-center",children:[p.jsx($k,{}),p.jsx(qk,{})]}),t[11]=f):f=t[11],t[12]!==a.state?(g=p.jsx(Jk,{connection:a.state}),t[12]=a.state,t[13]=g):g=t[13],t[14]!==u||t[15]!==h||t[16]!==g?(v=p.jsxs("div",{className:"flex gap-2 items-center",children:[u,h,f,g]}),t[14]=u,t[15]=h,t[16]=g,t[17]=v):v=t[17],v},Jk=e=>{const t=m(18),{connection:n}=e;let o,r,a,s,i,l,c;return t[0]!==n?(o=C(n.toLowerCase()),t[0]=n,t[1]=o):o=t[1],t[2]!==n?(r=n===Wi.OPEN&&p.jsx(Pl,{className:"w-4 h-4"}),t[2]=n,t[3]=r):r=t[3],t[4]!==n?(a=n===Wi.CLOSED&&p.jsx(Pi,{className:"w-4 h-4"}),t[4]=n,t[5]=a):a=t[5],t[6]!==n?(s=n===Wi.CONNECTING&&p.jsx(Ba,{size:"small"}),t[6]=n,t[7]=s):s=t[7],t[8]!==n?(i=n===Wi.CLOSING&&p.jsx(Ba,{className:"text-destructive",size:"small"}),t[8]=n,t[9]=i):i=t[9],t[10]!==r||t[11]!==a||t[12]!==s||t[13]!==i?(l=p.jsxs("div",{children:[r,a,s,i]}),t[10]=r,t[11]=a,t[12]=s,t[13]=i,t[14]=l):l=t[14],t[15]!==o||t[16]!==l?(c=p.jsx(g,{delayDuration:200,content:o,children:l}),t[15]=o,t[16]=l,t[17]=c):c=t[17],c},Xk=e=>{const t=m(25),{memory:n,kernel:o,server:r}=e,{percent:a,total:s,used:i}=n;let l;t[0]!==a?(l=Math.round(a),t[0]=a,t[1]=l):l=t[1];const c=l;let d,u,h,f,v,x,y,b,w,k;return t[2]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx("b",{children:"computer memory:"}),t[2]=d):d=t[2],t[3]!==i?(u=tN(i),t[3]=i,t[4]=u):u=t[4],t[5]!==s?(h=tN(s),t[5]=s,t[6]=h):h=t[6],t[7]!==u||t[8]!==h||t[9]!==c?(f=p.jsxs("span",{children:[d," ",u," / ",h," GB (",c,"%)"]}),t[7]=u,t[8]=h,t[9]=c,t[10]=f):f=t[10],t[11]!==(null==r?void 0:r.memory)?(v=(null==r?void 0:r.memory)&&p.jsxs("span",{children:[p.jsx("b",{children:"marimo server:"})," ",eN(r.memory)]}),t[11]=null==r?void 0:r.memory,t[12]=v):v=t[12],t[13]!==(null==o?void 0:o.memory)?(x=(null==o?void 0:o.memory)&&p.jsxs("span",{children:[p.jsx("b",{children:"kernel:"})," ",eN(o.memory)]}),t[13]=null==o?void 0:o.memory,t[14]=x):x=t[14],t[15]!==f||t[16]!==v||t[17]!==x?(y=p.jsxs("div",{className:"flex flex-col gap-1",children:[f,v,x]}),t[15]=f,t[16]=v,t[17]=x,t[18]=y):y=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(b=p.jsx(ac,{className:"w-4 h-4"}),t[19]=b):b=t[19],t[20]!==c?(w=p.jsxs("div",{className:"flex items-center gap-1",children:[b,p.jsx(Qk,{percent:c})]}),t[20]=c,t[21]=w):w=t[21],t[22]!==y||t[23]!==w?(k=p.jsx(g,{delayDuration:200,content:y,children:w}),t[22]=y,t[23]=w,t[24]=k):k=t[24],k},Zk=e=>{const t=m(11),{cpu:n}=e,{percent:o}=n;let r;t[0]!==o?(r=Math.round(o),t[0]=o,t[1]=r):r=t[1];const a=r;let s,i,l,c,d;return t[2]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx("b",{children:"CPU:"}),t[2]=s):s=t[2],t[3]!==a?(i=p.jsxs("span",{children:[s," ",a,"%"]}),t[3]=a,t[4]=i):i=t[4],t[5]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(Ri,{className:"w-4 h-4"}),t[5]=l):l=t[5],t[6]!==a?(c=p.jsxs("div",{className:"flex items-center gap-1",children:[l,p.jsx(Qk,{percent:a})]}),t[6]=a,t[7]=c):c=t[7],t[8]!==i||t[9]!==c?(d=p.jsx(g,{delayDuration:200,content:i,children:c}),t[8]=i,t[9]=c,t[10]=d):d=t[10],d},Qk=e=>{const t=m(2),{percent:n}=e,o=`${n}%`;let r;return t[0]!==o?(r=p.jsx("div",{className:"h-3 w-20 bg-[var(--slate-4)] rounded-lg overflow-hidden border",children:p.jsx("div",{className:"h-full bg-primary",style:{width:o}})}),t[0]=o,t[1]=r):r=t[1],r};function eN(e){return e>1073741824?`${tN(e)} GB`:`${function(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:0}).format(e/1048576)}(e)} MB`}function tN(e){return new Intl.NumberFormat("en-US",{maximumFractionDigits:2}).format(e/1073741824)}const nN=e=>Z(xa)[e.capability]?e.children:null,oN=()=>{const e=m(56),{selectedPanel:t,isTerminalOpen:n}=Md(),{openApplication:o,toggleTerminal:r}=Od(),[a,s]=Ne(),i=Z(Va),l=rN,c=Td.find(aN);let d;Mt(c,"Error panel not found"),e[0]!==r?(d=()=>{r()},e[0]=r,e[1]=d):d=e[1],oi("global.toggleTerminal",d);const u=Vk,h=c.tooltip,f=t===c.type,v=()=>o(c.type),x=l(c,i>0?"text-destructive":"");let y,b,w,k,N;e[2]!==i?(y=p.jsx("span",{className:"ml-1 font-mono mt-[0.125rem]",children:i}),e[2]=i,e[3]=y):y=e[3],e[4]!==u||e[5]!==c.tooltip||e[6]!==f||e[7]!==v||e[8]!==x||e[9]!==y?(b=p.jsxs(u,{tooltip:h,selected:f,onClick:v,children:[x,y]}),e[4]=u,e[5]=c.tooltip,e[6]=f,e[7]=v,e[8]=x,e[9]=y,e[10]=b):b=e[10],e[11]!==r?(w=()=>r(),e[11]=r,e[12]=w):w=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(k=p.jsx(Oc,{className:"h-5 w-5"}),e[13]=k):k=e[13],e[14]!==n||e[15]!==w?(N=p.jsx(nN,{capability:"terminal",children:p.jsx(Vk,{tooltip:"Open terminal",selected:n,onClick:w,children:k})}),e[14]=n,e[15]=w,e[16]=N):N=e[16];const E=a.runtime.auto_instantiate?"Disable autorun on startup":"Enable autorun on startup";let C,j,_;e[17]!==a||e[18]!==s?(C=async()=>{const e={...a,runtime:{...a.runtime,auto_instantiate:!a.runtime.auto_instantiate}};await Ce({config:e}).then((()=>s(e)))},e[17]=a,e[18]=s,e[19]=C):C=e[19],e[20]===Symbol.for("react.memo_cache_sentinel")?(j=p.jsx("span",{children:"on startup: "}),e[20]=j):j=e[20],e[21]!==a.runtime.auto_instantiate?(_=a.runtime.auto_instantiate?p.jsx(Bc,{size:14}):p.jsx(zc,{size:14}),e[21]=a.runtime.auto_instantiate,e[22]=_):_=e[22];const I=a.runtime.auto_instantiate?"autorun":"lazy";let A,M,O,T;e[23]!==I?(A=p.jsx("span",{children:I}),e[23]=I,e[24]=A):A=e[24],e[25]!==_||e[26]!==A?(M=p.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[j,_,A]}),e[25]=_,e[26]=A,e[27]=M):M=e[27],e[28]!==E||e[29]!==C||e[30]!==M?(O=p.jsx(Vk,{tooltip:E,selected:!1,onClick:C,children:M}),e[28]=E,e[29]=C,e[30]=M,e[31]=O):O=e[31],e[32]===Symbol.for("react.memo_cache_sentinel")?(T=p.jsx("div",{className:"border-r border-border h-6 mx-1"}),e[32]=T):T=e[32];const D="autorun"===a.runtime.on_cell_change?"Disable autorun":"Enable autorun";let P,R,F,L,z,B,U,V,$,G;return e[33]!==a||e[34]!==s?(P=async()=>{const e={...a,runtime:{...a.runtime,on_cell_change:"autorun"===a.runtime.on_cell_change?"lazy":"autorun"}};await Ce({config:e}).then((()=>s(e)))},e[33]=a,e[34]=s,e[35]=P):P=e[35],e[36]===Symbol.for("react.memo_cache_sentinel")?(R=p.jsx("span",{children:"on cell change: "}),e[36]=R):R=e[36],e[37]!==a.runtime.on_cell_change?(F=p.jsxs("div",{className:"font-prose text-sm flex items-center gap-1",children:[R,"autorun"===a.runtime.on_cell_change?p.jsx(Bc,{size:14}):p.jsx(zc,{size:14}),p.jsx("span",{children:a.runtime.on_cell_change})]}),e[37]=a.runtime.on_cell_change,e[38]=F):F=e[38],e[39]!==D||e[40]!==P||e[41]!==F?(L=p.jsx(Vk,{tooltip:D,selected:!1,onClick:P,children:F}),e[39]=D,e[40]=P,e[41]=F,e[42]=L):L=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(z=p.jsx("div",{className:"border-r border-border h-6 mx-1"}),e[43]=z):z=e[43],e[44]!==a||e[45]!==s?(B=!S()&&p.jsx(Vk,{tooltip:null,selected:!1,children:p.jsxs(_t,{children:[p.jsxs(kt,{className:"font-prose text-sm flex items-center gap-1",children:[p.jsx("span",{children:"on module change: "}),"off"===a.runtime.auto_reload&&p.jsx(Pi,{size:14}),"lazy"===a.runtime.auto_reload&&p.jsx(zc,{size:14}),"autorun"===a.runtime.auto_reload&&p.jsx(Bc,{size:14}),p.jsx("span",{children:a.runtime.auto_reload}),p.jsx(ve,{size:14})]}),p.jsx(It,{children:["off","lazy","autorun"].map((e=>p.jsxs(wt,{onClick:async()=>{const t={...a,runtime:{...a.runtime,auto_reload:e}};await Ce({config:t}).then((()=>s(t)))},children:["off"===e&&p.jsx(Pi,{size:14,className:"mr-2 text-muted-foreground"}),"lazy"===e&&p.jsx(zc,{size:14,className:"mr-2 text-muted-foreground"}),"autorun"===e&&p.jsx(Bc,{size:14,className:"mr-2 text-muted-foreground"}),e]},e)))})]})}),e[44]=a,e[45]=s,e[46]=B):B=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(U=p.jsx("div",{className:"mx-auto"}),e[47]=U):U=e[47],e[48]===Symbol.for("react.memo_cache_sentinel")?(V=p.jsx(mu,{children:p.jsx(g,{content:p.jsx("div",{className:"w-[200px]",children:"Kiosk mode is enabled. This allows you to view the outputs of the cells without the ability to edit them."}),children:p.jsx("span",{className:"text-muted-foreground text-sm mr-4",children:"kiosk mode"})})}),$=p.jsx(Kk,{}),e[48]=V,e[49]=$):(V=e[48],$=e[49]),e[50]!==b||e[51]!==N||e[52]!==O||e[53]!==L||e[54]!==B?(G=p.jsxs("footer",{className:"h-10 py-2 bg-background flex items-center text-muted-foreground text-md pl-1 pr-4 border-t border-border select-none no-print text-sm shadow-[0_0_4px_1px_rgba(0,0,0,0.1)] z-50 print:hidden",children:[b,N,O,T,L,z,B,U,V,$]}),e[50]=b,e[51]=N,e[52]=O,e[53]=L,e[54]=B,e[55]=G):G=e[55],G};function rN(e,t){const{Icon:n}=e;return p.jsx(n,{className:Ht("h-5 w-5",t)})}function aN(e){return"errors"===e.type}const sN=e=>{const t=m(6),{children:n}=e,{openModal:o,closeModal:r}=f();let a,s;return t[0]!==o||t[1]!==r?(a=()=>o(p.jsx(lN,{onClose:r})),t[0]=o,t[1]=r,t[2]=a):a=t[2],t[3]!==a||t[4]!==n?(s=p.jsx($a,{onClick:a,children:n}),t[3]=a,t[4]=n,t[5]=s):s=t[5],s},iN={"😡":1,"🙁":2,"😐":3,"🙂":4,"😍":5},lN=e=>{const t=m(13),{onClose:n}=e;let o,r,a,s,i,l,c,d;return t[0]!==n?(o=async e=>{e.preventDefault();const t=new FormData(e.target),o=t.get("rating"),r=t.get("message");fetch("https://marimo.io/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:o,message:r})}),n(),Y({title:"Feedback sent!",description:"Thank you for your feedback!"})},t[0]=n,t[1]=o):o=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx(y,{children:"Send Feedback"}),t[2]=r):r=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(a=p.jsxs(ae,{children:[r,p.jsxs(b,{children:["Let us know what you think about marimo! If you have a bug that you would like to report, please use the"," ",p.jsx("a",{href:Ue.issuesPage,target:"_blank",rel:"noreferrer",className:"underline",children:"GitHub issue tracker"}),"."]}),p.jsx(b,{children:"Your feedback is anonymous and will help us improve marimo. Thank you!"})]}),t[3]=a):a=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[p.jsx("div",{className:"flex gap-5 justify-center",children:Object.entries(iN).map(cN)}),p.jsx(Ga,{id:"message",name:"message",autoFocus:!0,placeholder:"Your feedback; if you'd like us to respond, please include your email!",rows:5,required:!0,autoComplete:"off"})]}),t[4]=s):s=t[4],t[5]!==n?(i=p.jsx(v,{"data-testid":"feedback-cancel-button",variant:"secondary",onClick:n,children:"Cancel"}),t[5]=n,t[6]=i):i=t[6],t[7]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(v,{"data-testid":"feedback-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),t[7]=l):l=t[7],t[8]!==i?(c=p.jsxs(w,{children:[i,l]}),t[8]=i,t[9]=c):c=t[9],t[10]!==o||t[11]!==c?(d=p.jsx(k,{className:"w-fit",children:p.jsxs("form",{onSubmit:o,children:[a,s,c]})}),t[10]=o,t[11]=c,t[12]=d):d=t[12],d};function cN(e){const[t,n]=e;return p.jsxs("label",{className:"flex flex-col items-center select-none",children:[p.jsx("input",{type:"radio",className:"peer hidden",name:"rating",value:n,"aria-label":t},t),p.jsx("span",{className:"text-4xl peer-checked:opacity-100 opacity-40 cursor-pointer",children:t})]},t)}const dN=()=>{const e=m(10),{selectedPanel:t}=Md(),{openApplication:n}=Od(),o=mN;let r,a,s,i,l,c;if(e[0]!==t||e[1]!==n){r="h-full pt-4 pb-1 px-1 flex flex-col items-start text-muted-foreground text-md select-none no-print text-sm z-50 dark:bg-background print:hidden",a=Td.filter(fN).map((e=>p.jsx(hN,{tooltip:e.tooltip,selected:t===e.type,onClick:()=>n(e.type),children:o(e)},e.type))),e[0]=t,e[1]=n,e[2]=r,e[3]=a}else r=e[2],a=e[3];return e[4]===Symbol.for("react.memo_cache_sentinel")?(s=p.jsx(sN,{children:p.jsx(hN,{tooltip:"Send feedback!",selected:!1,children:p.jsx(sc,{className:"h-5 w-5"})})}),i=p.jsx("div",{className:"flex-1"}),l=p.jsx(uN,{}),e[4]=s,e[5]=i,e[6]=l):(s=e[4],i=e[5],l=e[6]),e[7]!==r||e[8]!==a?(c=p.jsxs("div",{className:r,children:[a,s,i,l]}),e[7]=r,e[8]=a,e[9]=c):c=e[9],c},uN=()=>{const e=m(9),t=Z(Ha);let n,o,r,a;return e[0]!==t?(n=t>0?p.jsxs("span",{children:[t," cell",t>1?"s":""," queued or running"]}):"No cells queued or running",e[0]=t,e[1]=n):n=e[1],e[2]!==t?(o=Array.from({length:t}).map(pN),e[2]=t,e[3]=o):o=e[3],e[4]!==o?(r=p.jsx("div",{className:"flex flex-col-reverse gap-[1px] overflow-hidden",children:o}),e[4]=o,e[5]=r):r=e[5],e[6]!==n||e[7]!==r?(a=p.jsx(g,{content:n,side:"right",delayDuration:200,children:r}),e[6]=n,e[7]=r,e[8]=a):a=e[8],a},hN=e=>{const t=m(17);let n,o,r,a,s;t[0]!==e?(({children:a,tooltip:s,selected:n,className:o,...r}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=a,t[5]=s):(n=t[1],o=t[2],r=t[3],a=t[4],s=t[5]);const i=!n&&"hover:bg-[var(--sage-3)]",l=n&&"bg-[var(--sage-4)]";let c,d,u;return t[6]!==i||t[7]!==l||t[8]!==o?(c=Ht("flex items-center p-2 text-sm mx-[1px] shadow-inset font-mono cursor-pointer rounded",i,l,o),t[6]=i,t[7]=l,t[8]=o,t[9]=c):c=t[9],t[10]!==c||t[11]!==r||t[12]!==a?(d=p.jsx("div",{className:c,...r,children:a}),t[10]=c,t[11]=r,t[12]=a,t[13]=d):d=t[13],t[14]!==s||t[15]!==d?(u=p.jsx(g,{content:s,side:"right",delayDuration:200,children:d}),t[14]=s,t[15]=d,t[16]=u):u=t[16],u};function mN(e,t){const{Icon:n}=e;return p.jsx(n,{className:Ht("h-5 w-5",t)})}function fN(e){return!e.hidden&&"sidebar"===e.position}function pN(e,t){return p.jsx("div",{className:"flex-shrink-0 h-1 w-2 bg-[var(--grass-6)] border border-[var(--grass-7)]"},t.toString())}Ke.record(Ke.tuple([Ke.number(),Ke.number()]));let gN=null;const vN=e=>{const t=m(12),{title:n,description:o,icon:r}=e;let a,s,i,l,c;return t[0]!==r?(a=r&&u.cloneElement(r,{className:"text-accent-foreground"}),t[0]=r,t[1]=a):a=t[1],t[2]!==n?(s=p.jsx("span",{className:"mt-1 text-accent-foreground",children:n}),t[2]=n,t[3]=s):s=t[3],t[4]!==a||t[5]!==s?(i=p.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[a,s]}),t[4]=a,t[5]=s,t[6]=i):i=t[6],t[7]!==o?(l=p.jsx("span",{className:"text-muted-foreground text-sm",children:o}),t[7]=o,t[8]=l):l=t[8],t[9]!==i||t[10]!==l?(c=p.jsxs("div",{className:"mx-6 my-6 flex flex-col gap-2",children:[i,l]}),t[9]=i,t[10]=l,t[11]=c):c=t[11],c},xN=()=>{const e=m(5),t=Wa();if(0===t.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(vN,{title:"No errors!",icon:p.jsx(mc,{})}),e[0]=t):t=e[0],t}let n,o;return e[1]!==t?(n=t.map(yN),e[1]=t,e[2]=n):n=e[2],e[3]!==n?(o=p.jsx("div",{className:"flex flex-col overflow-auto",children:n}),e[3]=n,e[4]=o):o=e[4],o};function yN(e){return p.jsxs("div",{children:[p.jsx("div",{className:"text-xs font-mono font-semibold bg-muted border-y px-2 py-1",children:p.jsx(qa,{cellId:e.cellId})}),p.jsx("div",{className:"px-2",children:p.jsx(Ya,{errors:e.output.data},e.cellId)},e.cellId)]},e.cellId)}const bN=()=>{const e=m(6),{items:t}=Z(Ka);let n,o;e[0]!==t?(o=ml(t),e[0]=t,e[1]=o):o=e[1],n=o;const r=n,{activeHeaderId:a}=fl(r);if(0===t.length){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(vN,{title:"No outline",description:"Add markdown headings to your notebook to create an outline.",icon:p.jsx(kc,{})}),e[2]=t):t=e[2],t}let s;return e[3]!==t||e[4]!==a?(s=p.jsx(pl,{items:t,activeHeaderId:a}),e[3]=t,e[4]=a,e[5]=s):s=e[5],s};function wN(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,o=0;o<e.length;o++)""!==(n=wN(e[o]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:kN}=u,{useSyncExternalStoreWithSelector:NN}=Ja,EN=e=>e;function CN(e,t=EN,n){const o=NN(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return kN(o),o}const SN=(e,t)=>{const n=Xa(e),o=(e,o=t)=>CN(n,e,o);return Object.assign(o,n),o};function jN(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,o]of e)if(!Object.is(o,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}function _N(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const IN={passive:!1},AN={capture:!0,passive:!1};function MN(e){e.stopImmediatePropagation()}function ON(e){e.preventDefault(),e.stopImmediatePropagation()}function TN(e){var t=e.document.documentElement,n=vl(e).on("dragstart.drag",ON,AN);"onselectstart"in t?n.on("selectstart.drag",ON,AN):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function DN(e,t){var n=e.document.documentElement,o=vl(e).on("dragstart.drag",null);t&&(o.on("click.drag",ON,AN),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const PN=e=>()=>e;function RN(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:a,x:s,y:i,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:i,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}function FN(e){return!e.ctrlKey&&!e.button}function LN(){return this.parentNode}function zN(e,t){return null==t?{x:e.x,y:e.y}:t}function BN(){return navigator.maxTouchPoints||"ontouchstart"in this}RN.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};const UN=e=>()=>e;function VN(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function $N(e){e.stopImmediatePropagation()}function GN(e){e.preventDefault(),e.stopImmediatePropagation()}function HN(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function WN(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function qN(){return this.__zoom||xl}function YN(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function KN(){return navigator.maxTouchPoints||"ontouchstart"in this}function JN(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],s=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}const XN=r.createContext(null),ZN=XN.Provider,QN=e=>`Node type "${e}" not found. Using fallback type "default".`,eE=()=>"The React Flow parent container needs a width and a height to render the graph.",tE=()=>"Only child nodes can use a parent extent.",nE=e=>`Marker type "${e}" doesn't exist.`,oE=(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,rE=()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",aE=e=>`Edge type "${e}" not found. Using fallback type "default".`,sE=e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,iE=(()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001")();function lE(e,t){const n=r.useContext(XN);if(null===n)throw new Error(iE);return CN(n,e,t)}const cE=()=>{const e=r.useContext(XN);if(null===e)throw new Error(iE);return r.useMemo((()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy})),[e])},dE=e=>e.userSelectionActive?"none":"all";function uE({position:e,children:t,className:n,style:o,...r}){const a=lE(dE),s=`${e}`.split("-");return u.createElement("div",{className:wN(["react-flow__panel",n,...s]),style:{...o,pointerEvents:a},...r},t)}function hE({proOptions:e,position:t="bottom-right"}){return(null==e?void 0:e.hideAttribution)?null:u.createElement(uE,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},u.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var mE=r.memo((({x:e,y:t,label:n,labelStyle:o={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:l=2,children:c,className:d,...h})=>{const m=r.useRef(null),[f,p]=r.useState({x:0,y:0,width:0,height:0}),g=wN(["react-flow__edge-textwrapper",d]);return r.useEffect((()=>{if(m.current){const e=m.current.getBBox();p({x:e.x,y:e.y,width:e.width,height:e.height})}}),[n]),void 0!==n&&n?u.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:g,visibility:f.width?"visible":"hidden",...h},a&&u.createElement("rect",{width:f.width+2*i[0],x:-i[0],y:-i[1],height:f.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),u.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:m,style:o},n),c):null}));const fE=e=>({width:e.offsetWidth,height:e.offsetHeight}),pE=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),gE=(e={x:0,y:0},t)=>({x:pE(e.x,t[0][0],t[1][0]),y:pE(e.y,t[0][1],t[1][1])}),vE=(e,t,n)=>e<t?pE(Math.abs(e-t),1,50)/50:e>n?-pE(Math.abs(e-n),1,50)/50:0,xE=(e,t)=>[20*vE(e.x,35,t.width-35),20*vE(e.y,35,t.height-35)],yE=e=>{var t;return(null==(t=e.getRootNode)?void 0:t.call(e))||(null==window?void 0:window.document)},bE=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),wE=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),kE=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},NE=e=>!isNaN(e)&&isFinite(e),EE=Symbol.for("internals"),CE=["Enter"," ","Escape"];function SE(e){var t,n;const o=(e=>"nativeEvent"in e)(e)?e.nativeEvent:e,r=(null==(n=null==(t=o.composedPath)?void 0:t.call(o))?void 0:n[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(null==r?void 0:r.nodeName)||(null==r?void 0:r.hasAttribute("contenteditable"))||!!(null==r?void 0:r.closest(".nokey"))}const jE=e=>"clientX"in e,_E=(e,t)=>{var n,o;const r=jE(e),a=r?e.clientX:null==(n=e.touches)?void 0:n[0].clientX,s=r?e.clientY:null==(o=e.touches)?void 0:o[0].clientY;return{x:a-((null==t?void 0:t.left)??0),y:s-((null==t?void 0:t.top)??0)}},IE=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0},AE=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:m,interactionWidth:f=20})=>u.createElement(u.Fragment,null,u.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),f&&u.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&NE(n)&&NE(o)?u.createElement(mE,{x:n,y:o,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c}):null);function ME(e,t,n){return void 0===n?n:o=>{const r=t().edges.find((t=>t.id===e));r&&n(o,{...r})}}function OE({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,a=n<e?n+r:n-r,s=Math.abs(o-t)/2;return[a,o<t?o+s:o-s,r,s]}function TE({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:a,targetControlX:s,targetControlY:i}){const l=.125*e+.375*r+.375*s+.125*n,c=.125*t+.375*a+.375*i+.125*o;return[l,c,Math.abs(l-e),Math.abs(c-t)]}var DE,PE,RE,FE,LE,zE,BE,UE,VE,$E,GE,HE;function WE({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===GE.Left||e===GE.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function qE({sourceX:e,sourceY:t,sourcePosition:n=GE.Bottom,targetX:o,targetY:r,targetPosition:a=GE.Top}){const[s,i]=WE({pos:n,x1:e,y1:t,x2:o,y2:r}),[l,c]=WE({pos:a,x1:o,y1:r,x2:e,y2:t}),[d,u,h,m]=TE({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:s,sourceControlY:i,targetControlX:l,targetControlY:c});return[`M${e},${t} C${s},${i} ${l},${c} ${o},${r}`,d,u,h,m]}AE.displayName="BaseEdge",(PE=DE||(DE={})).Strict="strict",PE.Loose="loose",(FE=RE||(RE={})).Free="free",FE.Vertical="vertical",FE.Horizontal="horizontal",(zE=LE||(LE={})).Partial="partial",zE.Full="full",(UE=BE||(BE={})).Bezier="default",UE.Straight="straight",UE.Step="step",UE.SmoothStep="smoothstep",UE.SimpleBezier="simplebezier",($E=VE||(VE={})).Arrow="arrow",$E.ArrowClosed="arrowclosed",(HE=GE||(GE={})).Left="left",HE.Top="top",HE.Right="right",HE.Bottom="bottom";const YE=r.memo((({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=GE.Bottom,targetPosition:a=GE.Top,label:s,labelStyle:i,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:f,markerStart:p,interactionWidth:g})=>{const[v,x,y]=qE({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:a});return u.createElement(AE,{path:v,labelX:x,labelY:y,label:s,labelStyle:i,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:f,markerStart:p,interactionWidth:g})}));YE.displayName="SimpleBezierEdge";const KE={[GE.Left]:{x:-1,y:0},[GE.Right]:{x:1,y:0},[GE.Top]:{x:0,y:-1},[GE.Bottom]:{x:0,y:1}},JE=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function XE({source:e,sourcePosition:t=GE.Bottom,target:n,targetPosition:o=GE.Top,center:r,offset:a}){const s=KE[t],i=KE[o],l={x:e.x+s.x*a,y:e.y+s.y*a},c={x:n.x+i.x*a,y:n.y+i.y*a},d=(({source:e,sourcePosition:t=GE.Bottom,target:n})=>t===GE.Left||t===GE.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1})({source:l,sourcePosition:t,target:c}),u=0!==d.x?"x":"y",h=d[u];let m,f,p=[];const g={x:0,y:0},v={x:0,y:0},[x,y,b,w]=OE({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(s[u]*i[u]==-1){m=r.x??x,f=r.y??y;const e=[{x:m,y:l.y},{x:m,y:c.y}],t=[{x:l.x,y:f},{x:c.x,y:f}];p=s[u]===h?"x"===u?e:t:"x"===u?t:e}else{const r=[{x:l.x,y:c.y}],d=[{x:c.x,y:l.y}];if(p="x"===u?s.x===h?d:r:s.y===h?r:d,t===o){const t=Math.abs(e[u]-n[u]);if(t<=a){const o=Math.min(a-1,a-t);s[u]===h?g[u]=(l[u]>e[u]?-1:1)*o:v[u]=(c[u]>n[u]?-1:1)*o}}if(t!==o){const e="x"===u?"y":"x",t=s[u]===i[e],n=l[e]>c[e],o=l[e]<c[e];(1===s[u]&&(!t&&n||t&&o)||1!==s[u]&&(!t&&o||t&&n))&&(p="x"===u?r:d)}const x={x:l.x+g.x,y:l.y+g.y},y={x:c.x+v.x,y:c.y+v.y};Math.max(Math.abs(x.x-p[0].x),Math.abs(y.x-p[0].x))>=Math.max(Math.abs(x.y-p[0].y),Math.abs(y.y-p[0].y))?(m=(x.x+y.x)/2,f=p[0].y):(m=p[0].x,f=(x.y+y.y)/2)}return[[e,{x:l.x+g.x,y:l.y+g.y},...p,{x:c.x+v.x,y:c.y+v.y},n],m,f,b,w]}function ZE({sourceX:e,sourceY:t,sourcePosition:n=GE.Bottom,targetX:o,targetY:r,targetPosition:a=GE.Top,borderRadius:s=5,centerX:i,centerY:l,offset:c=20}){const[d,u,h,m,f]=XE({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:a,center:{x:i,y:l},offset:c});return[d.reduce(((e,t,n)=>{let o="";return o=n>0&&n<d.length-1?function(e,t,n,o){const r=Math.min(JE(e,t)/2,JE(t,n)/2,o),{x:a,y:s}=t;if(e.x===a&&a===n.x||e.y===s&&s===n.y)return`L${a} ${s}`;if(e.y===s)return`L ${a+r*(e.x<n.x?-1:1)},${s}Q ${a},${s} ${a},${s+r*(e.y<n.y?1:-1)}`;const i=e.x<n.x?1:-1;return`L ${a},${s+r*(e.y<n.y?-1:1)}Q ${a},${s} ${a+r*i},${s}`}(d[n-1],t,d[n+1],s):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),u,h,m,f]}const QE=r.memo((({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,style:d,sourcePosition:h=GE.Bottom,targetPosition:m=GE.Top,markerEnd:f,markerStart:p,pathOptions:g,interactionWidth:v})=>{const[x,y,b]=ZE({sourceX:e,sourceY:t,sourcePosition:h,targetX:n,targetY:o,targetPosition:m,borderRadius:null==g?void 0:g.borderRadius,offset:null==g?void 0:g.offset});return u.createElement(AE,{path:x,labelX:y,labelY:b,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:f,markerStart:p,interactionWidth:v})}));QE.displayName="SmoothStepEdge";const eC=r.memo((e=>{var t;return u.createElement(QE,{...e,pathOptions:r.useMemo((()=>{var t;return{borderRadius:0,offset:null==(t=e.pathOptions)?void 0:t.offset}}),[null==(t=e.pathOptions)?void 0:t.offset])})}));eC.displayName="StepEdge";const tC=r.memo((({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:m,interactionWidth:f})=>{const[p,g,v]=function({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,a,s,i]=OE({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,a,s,i]}({sourceX:e,sourceY:t,targetX:n,targetY:o});return u.createElement(AE,{path:p,labelX:g,labelY:v,label:r,labelStyle:a,labelShowBg:s,labelBgStyle:i,labelBgPadding:l,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:m,interactionWidth:f})}));function nC(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function oC({pos:e,x1:t,y1:n,x2:o,y2:r,c:a}){switch(e){case GE.Left:return[t-nC(t-o,a),n];case GE.Right:return[t+nC(o-t,a),n];case GE.Top:return[t,n-nC(n-r,a)];case GE.Bottom:return[t,n+nC(r-n,a)]}}function rC({sourceX:e,sourceY:t,sourcePosition:n=GE.Bottom,targetX:o,targetY:r,targetPosition:a=GE.Top,curvature:s=.25}){const[i,l]=oC({pos:n,x1:e,y1:t,x2:o,y2:r,c:s}),[c,d]=oC({pos:a,x1:o,y1:r,x2:e,y2:t,c:s}),[u,h,m,f]=TE({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${t} C${i},${l} ${c},${d} ${o},${r}`,u,h,m,f]}tC.displayName="StraightEdge";const aC=r.memo((({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=GE.Bottom,targetPosition:a=GE.Top,label:s,labelStyle:i,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:f,markerStart:p,pathOptions:g,interactionWidth:v})=>{const[x,y,b]=rC({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:a,curvature:null==g?void 0:g.curvature});return u.createElement(AE,{path:x,labelX:y,labelY:b,label:s,labelStyle:i,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:f,markerStart:p,interactionWidth:v})}));aC.displayName="BezierEdge";const sC=r.createContext(null),iC=sC.Provider;sC.Consumer;const lC=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,cC=(e,t)=>{if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`},dC=({x:e,y:t},[n,o,r],a,[s,i])=>{const l={x:(e-n)/r,y:(t-o)/r};return a?{x:s*Math.round(l.x/s),y:i*Math.round(l.y/i)}:l},uC=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),hC=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},mC=(e,t=[0,0])=>{if(0===e.length)return{x:0,y:0,width:0,height:0};return(({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}))(e.reduce(((e,n)=>{const{x:o,y:r}=hC(n,t).positionAbsolute;return a=e,s=bE({x:o,y:r,width:n.width||0,height:n.height||0}),{x:Math.min(a.x,s.x),y:Math.min(a.y,s.y),x2:Math.max(a.x2,s.x2),y2:Math.max(a.y2,s.y2)};var a,s}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0}))},fC=(e,t,[n,o,r]=[0,0,1],a=!1,s=!1,i=[0,0])=>{const l={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},c=[];return e.forEach((e=>{const{width:t,height:n,selectable:o=!0,hidden:r=!1}=e;if(s&&!o||r)return!1;const{positionAbsolute:d}=hC(e,i),u={x:d.x,y:d.y,width:t||0,height:n||0},h=kE(l,u);(void 0===t||void 0===n||null===t||null===n||a&&h>0||h>=(t||0)*(n||0)||e.dragging)&&c.push(e)})),c},pC=(e,t)=>{const n=e.map((e=>e.id));return t.filter((e=>n.includes(e.source)||n.includes(e.target)))},gC=(e,t,n,o,r,a=.1)=>{const s=t/(e.width*(1+a)),i=n/(e.height*(1+a)),l=Math.min(s,i),c=pE(l,o,r);return{x:t/2-(e.x+e.width/2)*c,y:n/2-(e.y+e.height/2)*c,zoom:c}},vC=(e,t=0)=>e.transition().duration(t);function xC(e,t,n,o){return(t[n]||[]).reduce(((t,r)=>{var a,s;return`${e.id}-${r.id}-${n}`!==o&&t.push({id:r.id||null,type:n,nodeId:e.id,x:((null==(a=e.positionAbsolute)?void 0:a.x)??0)+r.x+r.width/2,y:((null==(s=e.positionAbsolute)?void 0:s.y)??0)+r.y+r.height/2}),t}),[])}const yC={source:null,target:null,sourceHandle:null,targetHandle:null},bC=()=>({handleDomNode:null,isValid:!1,connection:yC,endHandle:null});function wC(e,t,n,o,r,a,s){const i="target"===r,l=s.querySelector(`.react-flow__handle[data-id="${null==e?void 0:e.nodeId}-${null==e?void 0:e.id}-${null==e?void 0:e.type}"]`),c={...bC(),handleDomNode:l};if(l){const e=kC(void 0,l),r=l.getAttribute("data-nodeid"),s=l.getAttribute("data-handleid"),d=l.classList.contains("connectable"),u=l.classList.contains("connectableend"),h={source:i?r:n,sourceHandle:i?s:o,target:i?n:r,targetHandle:i?o:s};c.connection=h;d&&u&&(t===DE.Strict?i&&"source"===e||!i&&"target"===e:r!==n||s!==o)&&(c.endHandle={nodeId:r,handleId:s,type:e},c.isValid=a(h))}return c}function kC(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}function NC(e){null==e||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function EC(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function CC({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:a,setState:s,isValidConnection:i,edgeUpdaterType:l,onReconnectEnd:c}){const d=yE(e.target),{connectionMode:u,domNode:h,autoPanOnConnect:m,connectionRadius:f,onConnectStart:p,panBy:g,getNodes:v,cancelConnection:x}=a();let y,b=0;const{x:w,y:k}=_E(e),N=null==d?void 0:d.elementFromPoint(w,k),E=kC(l,N),C=null==h?void 0:h.getBoundingClientRect();if(!C||!E)return;let S,j=_E(e,C),_=!1,I=null,A=!1,M=null;const O=function({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce(((e,r)=>{if(r[EE]){const{handleBounds:a}=r[EE];let s=[],i=[];a&&(s=xC(r,a,"source",`${t}-${n}-${o}`),i=xC(r,a,"target",`${t}-${n}-${o}`)),e.push(...s,...i)}return e}),[])}({nodes:v(),nodeId:n,handleId:t,handleType:E}),T=()=>{if(!m)return;const[e,t]=xE(j,C);g({x:e,y:t}),b=requestAnimationFrame(T)};function D(e){const{transform:o}=a();j=_E(e,C);const{handle:l,validHandleResult:c}=function(e,t,n,o,r,a){const{x:s,y:i}=_E(e),l=t.elementsFromPoint(s,i).find((e=>e.classList.contains("react-flow__handle")));if(l){const e=l.getAttribute("data-nodeid");if(e){const t=kC(void 0,l),o=l.getAttribute("data-handleid"),s=a({nodeId:e,id:o,type:t});if(s){const a=r.find((n=>n.nodeId===e&&n.type===t&&n.id===o));return{handle:{id:o,type:t,nodeId:e,x:(null==a?void 0:a.x)||n.x,y:(null==a?void 0:a.y)||n.y},validHandleResult:s}}}}let c=[],d=1/0;if(r.forEach((e=>{const t=Math.sqrt((e.x-n.x)**2+(e.y-n.y)**2);if(t<=o){const n=a(e);t<=d&&(t<d?c=[{handle:e,validHandleResult:n}]:t===d&&c.push({handle:e,validHandleResult:n}),d=t)}})),!c.length)return{handle:null,validHandleResult:bC()};if(1===c.length)return c[0];const u=c.some((({validHandleResult:e})=>e.isValid)),h=c.some((({handle:e})=>"target"===e.type));return c.find((({handle:e,validHandleResult:t})=>h?"target"===e.type:!u||t.isValid))||c[0]}(e,d,dC(j,o,!1,[1,1]),f,O,(e=>wC(e,u,n,t,r?"target":"source",i,d)));if(y=l,_||(T(),_=!0),M=c.handleDomNode,I=c.connection,A=c.isValid,s({connectionPosition:y&&A?uC({x:y.x,y:y.y},o):j,connectionStatus:EC(!!y,A),connectionEndHandle:c.endHandle}),!y&&!A&&!M)return NC(S);I.source!==I.target&&M&&(NC(S),S=M,M.classList.add("connecting","react-flow__handle-connecting"),M.classList.toggle("valid",A),M.classList.toggle("react-flow__handle-valid",A))}function P(e){var t,n;(y||M)&&I&&A&&(null==o||o(I)),null==(n=(t=a()).onConnectEnd)||n.call(t,e),l&&(null==c||c(e)),NC(S),x(),cancelAnimationFrame(b),_=!1,A=!1,I=null,M=null,d.removeEventListener("mousemove",D),d.removeEventListener("mouseup",P),d.removeEventListener("touchmove",D),d.removeEventListener("touchend",P)}s({connectionPosition:j,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:E,connectionStartHandle:{nodeId:n,handleId:t,type:E},connectionEndHandle:null}),null==p||p(e,{nodeId:n,handleId:t,handleType:E}),d.addEventListener("mousemove",D),d.addEventListener("mouseup",P),d.addEventListener("touchmove",D),d.addEventListener("touchend",P)}const SC=()=>!0,jC=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),_C=r.forwardRef((({type:e="source",position:t=GE.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:l,children:c,className:d,onMouseDown:h,onTouchStart:m,...f},p)=>{var g,v;const x=i||null,y="target"===e,b=cE(),w=r.useContext(sC),{connectOnClick:k,noPanClassName:N}=lE(jC,jN),{connecting:E,clickConnecting:C}=lE(((e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:a,connectionClickStartHandle:s}=o;return{connecting:(null==r?void 0:r.nodeId)===e&&(null==r?void 0:r.handleId)===t&&(null==r?void 0:r.type)===n||(null==a?void 0:a.nodeId)===e&&(null==a?void 0:a.handleId)===t&&(null==a?void 0:a.type)===n,clickConnecting:(null==s?void 0:s.nodeId)===e&&(null==s?void 0:s.handleId)===t&&(null==s?void 0:s.type)===n}})(w,x,e),jN);w||null==(v=(g=b.getState()).onError)||v.call(g,"010",rE());const S=e=>{const{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:o}=b.getState(),r={...t,...e};if(o){const{edges:e,setEdges:t}=b.getState();t(((e,t)=>{if(!e.source||!e.target)return t;let n;var o;return n="id"in(o=e)&&"source"in o&&"target"in o?{...e}:{...e,id:lC(e)},((e,t)=>t.some((t=>!(t.source!==e.source||t.target!==e.target||t.sourceHandle!==e.sourceHandle&&(t.sourceHandle||e.sourceHandle)||t.targetHandle!==e.targetHandle&&(t.targetHandle||e.targetHandle)))))(n,t)?t:t.concat(n)})(r,e))}null==n||n(r),null==l||l(r)},j=e=>{if(!w)return;const t=jE(e);a&&(t&&0===e.button||!t)&&CC({event:e,handleId:x,nodeId:w,onConnect:S,isTarget:y,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||SC}),t?null==h||h(e):null==m||m(e)};return u.createElement("div",{"data-handleid":x,"data-nodeid":w,"data-handlepos":t,"data-id":`${w}-${x}-${e}`,className:wN(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,d,{source:!y,target:y,connectable:o,connectablestart:a,connectableend:s,connecting:C,connectionindicator:o&&(a&&!E||s&&E)}]),onMouseDown:j,onTouchStart:j,onClick:k?t=>{const{onClickConnectStart:o,onClickConnectEnd:r,connectionClickStartHandle:s,connectionMode:i,isValidConnection:l}=b.getState();if(!w||!s&&!a)return;if(!s)return null==o||o(t,{nodeId:w,handleId:x,handleType:e}),void b.setState({connectionClickStartHandle:{nodeId:w,type:e,handleId:x}});const c=yE(t.target),d=n||l||SC,{connection:u,isValid:h}=wC({nodeId:w,id:x,type:e},i,s.nodeId,s.handleId||null,s.type,d,c);h&&S(u),null==r||r(t),b.setState({connectionClickStartHandle:null})}:void 0,ref:p,...f},c)}));_C.displayName="Handle";var IC=r.memo(_C);const AC=({data:e,isConnectable:t,targetPosition:n=GE.Top,sourcePosition:o=GE.Bottom})=>u.createElement(u.Fragment,null,u.createElement(IC,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label,u.createElement(IC,{type:"source",position:o,isConnectable:t}));AC.displayName="DefaultNode";var MC=r.memo(AC);const OC=({data:e,isConnectable:t,sourcePosition:n=GE.Bottom})=>u.createElement(u.Fragment,null,null==e?void 0:e.label,u.createElement(IC,{type:"source",position:n,isConnectable:t}));OC.displayName="InputNode";var TC=r.memo(OC);const DC=({data:e,isConnectable:t,targetPosition:n=GE.Top})=>u.createElement(u.Fragment,null,u.createElement(IC,{type:"target",position:n,isConnectable:t}),null==e?void 0:e.label);DC.displayName="OutputNode";var PC=r.memo(DC);const RC=()=>null;RC.displayName="GroupNode";const FC=e=>({selectedNodes:e.getNodes().filter((e=>e.selected)),selectedEdges:e.edges.filter((e=>e.selected)).map((e=>({...e})))}),LC=e=>e.id;function zC(e,t){return jN(e.selectedNodes.map(LC),t.selectedNodes.map(LC))&&jN(e.selectedEdges.map(LC),t.selectedEdges.map(LC))}const BC=r.memo((({onSelectionChange:e})=>{const t=cE(),{selectedNodes:n,selectedEdges:o}=lE(FC,zC);return r.useEffect((()=>{const r={nodes:n,edges:o};null==e||e(r),t.getState().onSelectionChange.forEach((e=>e(r)))}),[n,o,e]),null}));BC.displayName="SelectionListener";const UC=e=>!!e.onSelectionChange;function VC({onSelectionChange:e}){const t=lE(UC);return e||t?u.createElement(BC,{onSelectionChange:e}):null}const $C=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function GC(e,t){r.useEffect((()=>{void 0!==e&&t(e)}),[e])}function HC(e,t,n){r.useEffect((()=>{void 0!==t&&n({[e]:t})}),[t])}const WC=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:l,onClickConnectEnd:c,nodesDraggable:d,nodesConnectable:u,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:f,elevateNodesOnSelect:p,minZoom:g,maxZoom:v,nodeExtent:x,onNodesChange:y,onEdgesChange:b,elementsSelectable:w,connectionMode:k,snapGrid:N,snapToGrid:E,translateExtent:C,connectOnClick:S,defaultEdgeOptions:j,fitView:_,fitViewOptions:I,onNodesDelete:A,onEdgesDelete:M,onNodeDrag:O,onNodeDragStart:T,onNodeDragStop:D,onSelectionDrag:P,onSelectionDragStart:R,onSelectionDragStop:F,noPanClassName:L,nodeOrigin:z,rfId:B,autoPanOnConnect:U,autoPanOnNodeDrag:V,onError:$,connectionRadius:G,isValidConnection:H,nodeDragThreshold:W})=>{const{setNodes:q,setEdges:Y,setDefaultNodesAndEdges:K,setMinZoom:J,setMaxZoom:X,setTranslateExtent:Z,setNodeExtent:Q,reset:ee}=lE($C,jN),te=cE();return r.useEffect((()=>{const e=null==o?void 0:o.map((e=>({...e,...j})));return K(n,e),()=>{ee()}}),[]),HC("defaultEdgeOptions",j,te.setState),HC("connectionMode",k,te.setState),HC("onConnect",a,te.setState),HC("onConnectStart",s,te.setState),HC("onConnectEnd",i,te.setState),HC("onClickConnectStart",l,te.setState),HC("onClickConnectEnd",c,te.setState),HC("nodesDraggable",d,te.setState),HC("nodesConnectable",u,te.setState),HC("nodesFocusable",h,te.setState),HC("edgesFocusable",m,te.setState),HC("edgesUpdatable",f,te.setState),HC("elementsSelectable",w,te.setState),HC("elevateNodesOnSelect",p,te.setState),HC("snapToGrid",E,te.setState),HC("snapGrid",N,te.setState),HC("onNodesChange",y,te.setState),HC("onEdgesChange",b,te.setState),HC("connectOnClick",S,te.setState),HC("fitViewOnInit",_,te.setState),HC("fitViewOnInitOptions",I,te.setState),HC("onNodesDelete",A,te.setState),HC("onEdgesDelete",M,te.setState),HC("onNodeDrag",O,te.setState),HC("onNodeDragStart",T,te.setState),HC("onNodeDragStop",D,te.setState),HC("onSelectionDrag",P,te.setState),HC("onSelectionDragStart",R,te.setState),HC("onSelectionDragStop",F,te.setState),HC("noPanClassName",L,te.setState),HC("nodeOrigin",z,te.setState),HC("rfId",B,te.setState),HC("autoPanOnConnect",U,te.setState),HC("autoPanOnNodeDrag",V,te.setState),HC("onError",$,te.setState),HC("connectionRadius",G,te.setState),HC("isValidConnection",H,te.setState),HC("nodeDragThreshold",W,te.setState),GC(e,q),GC(t,Y),GC(g,J),GC(v,X),GC(C,Z),GC(x,Q),null},qC={display:"none"},YC={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},KC="react-flow__node-desc",JC="react-flow__edge-desc",XC=e=>e.ariaLiveMessage;function ZC({rfId:e}){const t=lE(XC);return u.createElement("div",{id:`react-flow__aria-live-${e}`,"aria-live":"assertive","aria-atomic":"true",style:YC},t)}function QC({rfId:e,disableKeyboardA11y:t}){return u.createElement(u.Fragment,null,u.createElement("div",{id:`${KC}-${e}`,style:qC},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),u.createElement("div",{id:`${JC}-${e}`,style:qC},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&u.createElement(ZC,{rfId:e}))}var eS=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=r.useState(!1),a=r.useRef(!1),s=r.useRef(new Set([])),[i,l]=r.useMemo((()=>{if(null!==e){const t=(Array.isArray(e)?e:[e]).filter((e=>"string"==typeof e)).map((e=>e.split("+"))),n=t.reduce(((e,t)=>e.concat(...t)),[]);return[t,n]}return[[],[]]}),[e]);return r.useEffect((()=>{const n="undefined"!=typeof document?document:null,r=(null==t?void 0:t.target)||n;if(null!==e){const e=e=>{a.current=e.ctrlKey||e.metaKey||e.shiftKey;if((!a.current||a.current&&!t.actInsideInputWithModifier)&&SE(e))return!1;const n=nS(e.code,l);s.current.add(e[n]),tS(i,s.current,!1)&&(e.preventDefault(),o(!0))},n=e=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&SE(e))return!1;const n=nS(e.code,l);tS(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(e[n]),"Meta"===e.key&&s.current.clear(),a.current=!1},c=()=>{s.current.clear(),o(!1)};return null==r||r.addEventListener("keydown",e),null==r||r.addEventListener("keyup",n),window.addEventListener("blur",c),()=>{null==r||r.removeEventListener("keydown",e),null==r||r.removeEventListener("keyup",n),window.removeEventListener("blur",c)}}}),[e,o]),n};function tS(e,t,n){return e.filter((e=>n||e.length===t.size)).some((e=>e.every((e=>t.has(e)))))}function nS(e,t){return t.includes(e)?"code":"key"}function oS(e,t,n,o){var r,a;const s=e.parentNode||e.parentId;if(!s)return n;const i=t.get(s),l=hC(i,o);return oS(i,t,{x:(n.x??0)+l.x,y:(n.y??0)+l.y,z:((null==(r=i[EE])?void 0:r.z)??0)>(n.z??0)?(null==(a=i[EE])?void 0:a.z)??0:n.z??0},o)}function rS(e,t,n){e.forEach((o=>{var r;const a=o.parentNode||o.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||(null==n?void 0:n[o.id])){const{x:a,y:s,z:i}=oS(o,e,{...o.position,z:(null==(r=o[EE])?void 0:r.z)??0},t);o.positionAbsolute={x:a,y:s},o[EE].z=i,(null==n?void 0:n[o.id])&&(o[EE].isParent=!0)}}))}function aS(e,t,n,o){const r=new Map,a={},s=o?1e3:0;return e.forEach((e=>{var n;const o=(NE(e.zIndex)?e.zIndex:0)+(e.selected?s:0),i=t.get(e.id),l={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},c=e.parentNode||e.parentId;c&&(a[c]=!0);const d=(null==i?void 0:i.type)&&(null==i?void 0:i.type)!==e.type;Object.defineProperty(l,EE,{enumerable:!1,value:{handleBounds:d||null==(n=null==i?void 0:i[EE])?void 0:n.handleBounds,z:o}}),r.set(e.id,l)})),rS(r,n,a),r}function sS(e,t={}){const{getNodes:n,width:o,height:r,minZoom:a,maxZoom:s,d3Zoom:i,d3Selection:l,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:u}=e(),h=t.initial&&!c&&d;if(i&&l&&(h||!t.initial)){const e=n().filter((e=>{var n;const o=t.includeHiddenNodes?e.width&&e.height:!e.hidden;return(null==(n=t.nodes)?void 0:n.length)?o&&t.nodes.some((t=>t.id===e.id)):o})),c=e.every((e=>e.width&&e.height));if(e.length>0&&c){const n=mC(e,u),{x:c,y:d,zoom:h}=gC(n,o,r,t.minZoom??a,t.maxZoom??s,t.padding??.1),m=xl.translate(c,d).scale(h);return"number"==typeof t.duration&&t.duration>0?i.transform(vC(l,t.duration),m):i.transform(l,m),!0}}return!1}function iS(e,t){return e.forEach((e=>{const n=t.get(e.id);n&&t.set(n.id,{...n,[EE]:n[EE],selected:e.selected})})),new Map(t)}function lS(e,t){return t.map((t=>{const n=e.find((e=>e.id===t.id));return n&&(t.selected=n.selected),t}))}function cS({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:a,onNodesChange:s,onEdgesChange:i,hasDefaultNodes:l,hasDefaultEdges:c}=n();(null==e?void 0:e.length)&&(l&&o({nodeInternals:iS(e,r)}),null==s||s(e)),(null==t?void 0:t.length)&&(c&&o({edges:lS(t,a)}),null==i||i(t))}const dS=()=>{},uS={zoomIn:dS,zoomOut:dS,zoomTo:dS,getZoom:()=>1,setViewport:dS,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:dS,fitBounds:dS,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},hS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection});function mS(){const e=(()=>{const e=cE(),{d3Zoom:t,d3Selection:n}=lE(hS,jN);return r.useMemo((()=>n&&t?{zoomIn:e=>t.scaleBy(vC(n,null==e?void 0:e.duration),1.2),zoomOut:e=>t.scaleBy(vC(n,null==e?void 0:e.duration),1/1.2),zoomTo:(e,o)=>t.scaleTo(vC(n,null==o?void 0:o.duration),e),getZoom:()=>e.getState().transform[2],setViewport:(o,r)=>{const[a,s,i]=e.getState().transform,l=xl.translate(o.x??a,o.y??s).scale(o.zoom??i);t.transform(vC(n,null==r?void 0:r.duration),l)},getViewport:()=>{const[t,n,o]=e.getState().transform;return{x:t,y:n,zoom:o}},fitView:t=>sS(e.getState,t),setCenter:(o,r,a)=>{const{width:s,height:i,maxZoom:l}=e.getState(),c=void 0!==(null==a?void 0:a.zoom)?a.zoom:l,d=s/2-o*c,u=i/2-r*c,h=xl.translate(d,u).scale(c);t.transform(vC(n,null==a?void 0:a.duration),h)},fitBounds:(o,r)=>{const{width:a,height:s,minZoom:i,maxZoom:l}=e.getState(),{x:c,y:d,zoom:u}=gC(o,a,s,i,l,(null==r?void 0:r.padding)??.1),h=xl.translate(c,d).scale(u);t.transform(vC(n,null==r?void 0:r.duration),h)},project:t=>{const{transform:n,snapToGrid:o,snapGrid:r}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),dC(t,n,o,r)},screenToFlowPosition:t=>{const{transform:n,snapToGrid:o,snapGrid:r,domNode:a}=e.getState();if(!a)return t;const{x:s,y:i}=a.getBoundingClientRect(),l={x:t.x-s,y:t.y-i};return dC(l,n,o,r)},flowToScreenPosition:t=>{const{transform:n,domNode:o}=e.getState();if(!o)return t;const{x:r,y:a}=o.getBoundingClientRect(),s=uC(t,n);return{x:s.x+r,y:s.y+a}},viewportInitialized:!0}:uS),[t,n])})(),t=cE(),n=r.useCallback((()=>t.getState().getNodes().map((e=>({...e})))),[]),o=r.useCallback((e=>t.getState().nodeInternals.get(e)),[]),a=r.useCallback((()=>{const{edges:e=[]}=t.getState();return e.map((e=>({...e})))}),[]),s=r.useCallback((e=>{const{edges:n=[]}=t.getState();return n.find((t=>t.id===e))}),[]),i=r.useCallback((e=>{const{getNodes:n,setNodes:o,hasDefaultNodes:r,onNodesChange:a}=t.getState(),s=n(),i="function"==typeof e?e(s):e;if(r)o(i);else if(a){a(0===i.length?s.map((e=>({type:"remove",id:e.id}))):i.map((e=>({item:e,type:"reset"}))))}}),[]),l=r.useCallback((e=>{const{edges:n=[],setEdges:o,hasDefaultEdges:r,onEdgesChange:a}=t.getState(),s="function"==typeof e?e(n):e;if(r)o(s);else if(a){a(0===s.length?n.map((e=>({type:"remove",id:e.id}))):s.map((e=>({item:e,type:"reset"}))))}}),[]),c=r.useCallback((e=>{const n=Array.isArray(e)?e:[e],{getNodes:o,setNodes:r,hasDefaultNodes:a,onNodesChange:s}=t.getState();if(a){r([...o(),...n])}else if(s){s(n.map((e=>({item:e,type:"add"}))))}}),[]),d=r.useCallback((e=>{const n=Array.isArray(e)?e:[e],{edges:o=[],setEdges:r,hasDefaultEdges:a,onEdgesChange:s}=t.getState();if(a)r([...o,...n]);else if(s){s(n.map((e=>({item:e,type:"add"}))))}}),[]),u=r.useCallback((()=>{const{getNodes:e,edges:n=[],transform:o}=t.getState(),[r,a,s]=o;return{nodes:e().map((e=>({...e}))),edges:n.map((e=>({...e}))),viewport:{x:r,y:a,zoom:s}}}),[]),h=r.useCallback((({nodes:e,edges:n})=>{const{nodeInternals:o,getNodes:r,edges:a,hasDefaultNodes:s,hasDefaultEdges:i,onNodesDelete:l,onEdgesDelete:c,onNodesChange:d,onEdgesChange:u}=t.getState(),h=(e||[]).map((e=>e.id)),m=(n||[]).map((e=>e.id)),f=r().reduce(((e,t)=>{const n=t.parentNode||t.parentId,o=!h.includes(t.id)&&n&&e.find((e=>e.id===n));return("boolean"!=typeof t.deletable||t.deletable)&&(h.includes(t.id)||o)&&e.push(t),e}),[]),p=a.filter((e=>"boolean"!=typeof e.deletable||e.deletable)),g=p.filter((e=>m.includes(e.id)));if(f||g){const e=pC(f,p),n=[...g,...e],r=n.reduce(((e,t)=>(e.includes(t.id)||e.push(t.id),e)),[]);if((i||s)&&(i&&t.setState({edges:a.filter((e=>!r.includes(e.id)))}),s&&(f.forEach((e=>{o.delete(e.id)})),t.setState({nodeInternals:new Map(o)}))),r.length>0&&(null==c||c(n),u&&u(r.map((e=>({id:e,type:"remove"}))))),f.length>0&&(null==l||l(f),d)){d(f.map((e=>({id:e.id,type:"remove"}))))}}}),[]),m=r.useCallback((e=>{const n=NE((o=e).width)&&NE(o.height)&&NE(o.x)&&NE(o.y);var o;const r=n?null:t.getState().nodeInternals.get(e.id);if(!n&&!r)return[null,null,n];return[n?e:wE(r),r,n]}),[]),f=r.useCallback(((e,n=!0,o)=>{const[r,a,s]=m(e);return r?(o||t.getState().getNodes()).filter((e=>{if(!(s||e.id!==a.id&&e.positionAbsolute))return!1;const t=wE(e),o=kE(t,r);return n&&o>0||o>=r.width*r.height})):[]}),[]),p=r.useCallback(((e,t,n=!0)=>{const[o]=m(e);if(!o)return!1;const r=kE(o,t);return n&&r>0||r>=o.width*o.height}),[]);return r.useMemo((()=>({...e,getNodes:n,getNode:o,getEdges:a,getEdge:s,setNodes:i,setEdges:l,addNodes:c,addEdges:d,toObject:u,deleteElements:h,getIntersectingNodes:f,isNodeIntersecting:p})),[e,n,o,a,s,i,l,c,d,u,h,f,p])}const fS={actInsideInputWithModifier:!1};const pS={position:"absolute",width:"100%",height:"100%",top:0,left:0},gS=e=>({x:e.x,y:e.y,zoom:e.k}),vS=(e,t)=>e.target.closest(`.${t}`),xS=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),yS=e=>{const t=e.ctrlKey&&IE()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},bS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),wS=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:l=.5,panOnScrollMode:c=RE.Free,zoomOnDoubleClick:d=!0,elementsSelectable:h,panOnDrag:m=!0,defaultViewport:f,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:x,preventScrolling:y=!0,children:b,noWheelClassName:w,noPanClassName:k})=>{const N=r.useRef(),E=cE(),C=r.useRef(!1),S=r.useRef(!1),j=r.useRef(null),_=r.useRef({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:A,d3ZoomHandler:M,userSelectionActive:O}=lE(bS,jN),T=eS(x),D=r.useRef(0),P=r.useRef(!1),R=r.useRef();return function(e){const t=cE();r.useEffect((()=>{let n;const o=()=>{var n,o;if(!e.current)return;const r=fE(e.current);0!==r.height&&0!==r.width||null==(o=(n=t.getState()).onError)||o.call(n,"004",eE()),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver((()=>o())),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}}),[])}(j),r.useEffect((()=>{if(j.current){const e=j.current.getBoundingClientRect(),t=function(){var e,t,n,o=HN,r=WN,a=JN,s=YN,i=KN,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,u=kl,h=wl("start","zoom","end"),m=0,f=10;function p(e){e.property("__zoom",qN).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",N).on("dblclick.zoom",E).filter(i).on("touchstart.zoom",C).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",j).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new yl(t,e.x,e.y)}function v(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new yl(e.k,o,r)}function x(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function y(e,t,n,o){e.on("start.zoom",(function(){b(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,a=arguments,s=b(e,a).event(o),i=r.apply(e,a),l=null==n?x(i):"function"==typeof n?n.apply(e,a):n,c=Math.max(i[1][0]-i[0][0],i[1][1]-i[0][1]),d=e.__zoom,h="function"==typeof t?t.apply(e,a):t,m=u(d.invert(l).concat(c/d.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var t=m(e),n=c/t[2];e=new yl(n,l[0]-t[0]*n,l[1]-t[1]*n)}s.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function k(e,...t){if(o.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,i=Math.max(l[0],Math.min(l[1],r.k*Math.pow(2,s.apply(this,arguments)))),d=_N(e);if(n.wheel)n.mouse[0][0]===d[0]&&n.mouse[0][1]===d[1]||(n.mouse[1]=r.invert(n.mouse[0]=d)),clearTimeout(n.wheel);else{if(r.k===i)return;n.mouse=[d,r.invert(d)],bl(this),n.start()}GN(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",a(v(g(r,i),n.mouse[0],n.mouse[1]),n.extent,c))}}function N(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,s=b(this,t,!0).event(e),i=vl(e.view).on("mousemove.zoom",(function(e){if(GN(e),!s.moved){var t=e.clientX-d,n=e.clientY-u;s.moved=t*t+n*n>m}s.event(e).zoom("mouse",a(v(s.that.__zoom,s.mouse[0]=_N(e,r),s.mouse[1]),s.extent,c))}),!0).on("mouseup.zoom",(function(e){i.on("mousemove.zoom mouseup.zoom",null),DN(e.view,s.moved),GN(e),s.event(e).end()}),!0),l=_N(e,r),d=e.clientX,u=e.clientY;TN(e.view),$N(e),s.mouse=[l,this.__zoom.invert(l)],bl(this),s.start()}}function E(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,s=_N(e.changedTouches?e.changedTouches[0]:e,this),i=n.invert(s),l=n.k*(e.shiftKey?.5:2),u=a(v(g(n,l),s,i),r.apply(this,t),c);GN(e),d>0?vl(this).transition().duration(d).call(y,u,s,e):vl(this).call(p.transform,u,s,e)}}function C(n,...r){if(o.apply(this,arguments)){var a,s,i,l,c=n.touches,d=c.length,u=b(this,r,n.changedTouches.length===d).event(n);for($N(n),s=0;s<d;++s)l=[l=_N(i=c[s],this),this.__zoom.invert(l),i.identifier],u.touch0?u.touch1||u.touch0[2]===l[2]||(u.touch1=l,u.taps=0):(u.touch0=l,a=!0,u.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(u.taps<2&&(t=l[0],e=setTimeout((function(){e=null}),500)),bl(this),u.start())}}function S(e,...t){if(this.__zooming){var n,o,r,s,i=b(this,t).event(e),l=e.changedTouches,d=l.length;for(GN(e),n=0;n<d;++n)r=_N(o=l[n],this),i.touch0&&i.touch0[2]===o.identifier?i.touch0[0]=r:i.touch1&&i.touch1[2]===o.identifier&&(i.touch1[0]=r);if(o=i.that.__zoom,i.touch1){var u=i.touch0[0],h=i.touch0[1],m=i.touch1[0],f=i.touch1[1],p=(p=m[0]-u[0])*p+(p=m[1]-u[1])*p,x=(x=f[0]-h[0])*x+(x=f[1]-h[1])*x;o=g(o,Math.sqrt(p/x)),r=[(u[0]+m[0])/2,(u[1]+m[1])/2],s=[(h[0]+f[0])/2,(h[1]+f[1])/2]}else{if(!i.touch0)return;r=i.touch0[0],s=i.touch0[1]}i.zoom("touch",a(v(o,r,s),i.extent,c))}}function j(e,...o){if(this.__zooming){var r,a,s=b(this,o).event(e),i=e.changedTouches,l=i.length;for($N(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),r=0;r<l;++r)a=i[r],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=_N(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<f)){var c=vl(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return p.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",qN),e!==r?y(e,t,n,o):r.interrupt().each((function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},p.scaleBy=function(e,t,n,o){p.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},p.scaleTo=function(e,t,n,o){p.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,s=null==n?x(e):"function"==typeof n?n.apply(this,arguments):n,i=o.invert(s),l="function"==typeof t?t.apply(this,arguments):t;return a(v(g(o,l),s,i),e,c)}),n,o)},p.translateBy=function(e,t,n,o){p.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),c)}),null,o)},p.translateTo=function(e,t,n,o,s){p.transform(e,(function(){var e=r.apply(this,arguments),s=this.__zoom,i=null==o?x(e):"function"==typeof o?o.apply(this,arguments):o;return a(xl.translate(i[0],i[1]).scale(s.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,c)}),o,s)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=vl(this.that).datum();h.call(e,this.that,new VN(e,{sourceEvent:this.sourceEvent,target:p,type:e,transform:this.that.__zoom,dispatch:h}),t)}},p.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:UN(+e),p):s},p.filter=function(e){return arguments.length?(o="function"==typeof e?e:UN(!!e),p):o},p.touchable=function(e){return arguments.length?(i="function"==typeof e?e:UN(!!e),p):i},p.extent=function(e){return arguments.length?(r="function"==typeof e?e:UN([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),p):r},p.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],p):[l[0],l[1]]},p.translateExtent=function(e){return arguments.length?(c[0][0]=+e[0][0],c[1][0]=+e[1][0],c[0][1]=+e[0][1],c[1][1]=+e[1][1],p):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},p.constrain=function(e){return arguments.length?(a=e,p):a},p.duration=function(e){return arguments.length?(d=+e,p):d},p.interpolate=function(e){return arguments.length?(u=e,p):u},p.on=function(){var e=h.on.apply(h,arguments);return e===h?p:e},p.clickDistance=function(e){return arguments.length?(m=(e=+e)*e,p):Math.sqrt(m)},p.tapDistance=function(e){return arguments.length?(f=+e,p):f},p}().scaleExtent([g,v]).translateExtent(p),n=vl(j.current).call(t),o=xl.translate(f.x,f.y).scale(pE(f.zoom,g,v)),r=[[0,0],[e.width,e.height]],a=t.constrain()(o,r,p);t.transform(n,a),t.wheelDelta(yS),E.setState({d3Zoom:t,d3Selection:n,d3ZoomHandler:n.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:j.current.closest(".react-flow")})}}),[]),r.useEffect((()=>{A&&I&&(!i||T||O?void 0!==M&&A.on("wheel.zoom",(function(e,t){if(!y&&"wheel"===e.type&&!e.ctrlKey||vS(e,w))return null;e.preventDefault(),M.call(this,e,t)}),{passive:!1}):A.on("wheel.zoom",(o=>{if(vS(o,w))return!1;o.preventDefault(),o.stopImmediatePropagation();const r=A.property("__zoom").k||1;if(o.ctrlKey&&s){const e=_N(o),t=yS(o),n=r*Math.pow(2,t);return void I.scaleTo(A,n,e,o)}const a=1===o.deltaMode?20:1;let i=c===RE.Vertical?0:o.deltaX*a,d=c===RE.Horizontal?0:o.deltaY*a;!IE()&&o.shiftKey&&c!==RE.Vertical&&(i=o.deltaY*a,d=0),I.translateBy(A,-i/r*l,-d/r*l,{internal:!0});const u=gS(A.property("__zoom")),{onViewportChangeStart:h,onViewportChange:m,onViewportChangeEnd:f}=E.getState();clearTimeout(R.current),P.current||(P.current=!0,null==t||t(o,u),null==h||h(u)),P.current&&(null==e||e(o,u),null==m||m(u),R.current=setTimeout((()=>{null==n||n(o,u),null==f||f(u),P.current=!1}),150))}),{passive:!1}))}),[O,i,c,A,I,M,T,s,y,w,t,e,n]),r.useEffect((()=>{I&&I.on("start",(e=>{var n,o;if(!e.sourceEvent||e.sourceEvent.internal)return null;D.current=null==(n=e.sourceEvent)?void 0:n.button;const{onViewportChangeStart:r}=E.getState(),a=gS(e.transform);C.current=!0,_.current=a,"mousedown"===(null==(o=e.sourceEvent)?void 0:o.type)&&E.setState({paneDragging:!0}),null==r||r(a),null==t||t(e.sourceEvent,a)}))}),[I,t]),r.useEffect((()=>{I&&(O&&!C.current?I.on("zoom",null):O||I.on("zoom",(t=>{var n;const{onViewportChange:r}=E.getState();if(E.setState({transform:[t.transform.x,t.transform.y,t.transform.k]}),S.current=!(!o||!xS(m,D.current??0)),(e||r)&&!(null==(n=t.sourceEvent)?void 0:n.internal)){const n=gS(t.transform);null==r||r(n),null==e||e(t.sourceEvent,n)}})))}),[O,I,e,m,o]),r.useEffect((()=>{I&&I.on("end",(e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const{onViewportChangeEnd:t}=E.getState();if(C.current=!1,E.setState({paneDragging:!1}),o&&xS(m,D.current??0)&&!S.current&&o(e.sourceEvent),S.current=!1,(n||t)&&(r=_.current,a=e.transform,r.x!==a.x||r.y!==a.y||r.zoom!==a.k)){const o=gS(e.transform);_.current=o,clearTimeout(N.current),N.current=setTimeout((()=>{null==t||t(o),null==n||n(e.sourceEvent,o)}),i?150:0)}var r,a}))}),[I,i,m,n,o]),r.useEffect((()=>{I&&I.filter((e=>{const t=T||a,n=s&&e.ctrlKey;if((!0===m||Array.isArray(m)&&m.includes(1))&&1===e.button&&"mousedown"===e.type&&(vS(e,"react-flow__node")||vS(e,"react-flow__edge")))return!0;if(!(m||t||i||d||s))return!1;if(O)return!1;if(!d&&"dblclick"===e.type)return!1;if(vS(e,w)&&"wheel"===e.type)return!1;if(vS(e,k)&&("wheel"!==e.type||i&&"wheel"===e.type&&!T))return!1;if(!s&&e.ctrlKey&&"wheel"===e.type)return!1;if(!t&&!i&&!n&&"wheel"===e.type)return!1;if(!m&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(m)&&!m.includes(e.button)&&"mousedown"===e.type)return!1;const o=Array.isArray(m)&&m.includes(e.button)||!e.button||e.button<=1;return(!e.ctrlKey||"wheel"===e.type)&&o}))}),[O,I,a,s,i,d,m,h,T]),u.createElement("div",{className:"react-flow__renderer",ref:j,style:pS},b)},kS=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function NS(){const{userSelectionActive:e,userSelectionRect:t}=lE(kS,jN);return e&&t?u.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ES(e,t){const n=t.parentNode||t.parentId,o=e.find((e=>e.id===n));if(o){const e=t.position.x+t.width-o.width,n=t.position.y+t.height-o.height;if(e>0||n>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,e>0&&(o.style.width+=e),n>0&&(o.style.height+=n),t.position.x<0){const e=Math.abs(t.position.x);o.position.x=o.position.x-e,o.style.width+=e,t.position.x=0}if(t.position.y<0){const e=Math.abs(t.position.y);o.position.y=o.position.y-e,o.style.height+=e,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function CS(e,t){if(e.some((e=>"reset"===e.type)))return e.filter((e=>"reset"===e.type)).map((e=>e.item));const n=e.filter((e=>"add"===e.type)).map((e=>e.item));return t.reduce(((t,n)=>{const o=e.filter((e=>e.id===n.id));if(0===o.length)return t.push(n),t;const r={...n};for(const e of o)if(e)switch(e.type){case"select":r.selected=e.selected;break;case"position":void 0!==e.position&&(r.position=e.position),void 0!==e.positionAbsolute&&(r.positionAbsolute=e.positionAbsolute),void 0!==e.dragging&&(r.dragging=e.dragging),r.expandParent&&ES(t,r);break;case"dimensions":void 0!==e.dimensions&&(r.width=e.dimensions.width,r.height=e.dimensions.height),void 0!==e.updateStyle&&(r.style={...r.style||{},...e.dimensions}),"boolean"==typeof e.resizing&&(r.resizing=e.resizing),r.expandParent&&ES(t,r);break;case"remove":return t}return t.push(r),t}),n)}function SS(e,t){return CS(e,t)}const jS=(e,t)=>({id:e,type:"select",selected:t});function _S(e,t){return e.reduce(((e,n)=>{const o=t.includes(n.id);return!n.selected&&o?(n.selected=!0,e.push(jS(n.id,!0))):n.selected&&!o&&(n.selected=!1,e.push(jS(n.id,!1))),e}),[])}const IS=(e,t)=>n=>{n.target===t.current&&(null==e||e(n))},AS=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),MS=r.memo((({isSelecting:e,selectionMode:t=LE.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:l,onPaneMouseEnter:c,onPaneMouseMove:d,onPaneMouseLeave:h,children:m})=>{const f=r.useRef(null),p=cE(),g=r.useRef(0),v=r.useRef(0),x=r.useRef(),{userSelectionActive:y,elementsSelectable:b,dragging:w}=lE(AS,jN),k=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},N=e=>{null==s||s(e),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},E=l?e=>l(e):void 0,C=b&&(e||y);return u.createElement("div",{className:wN(["react-flow__pane",{dragging:w,selection:e}]),onClick:C?void 0:IS(N,f),onContextMenu:IS((e=>{Array.isArray(n)&&(null==n?void 0:n.includes(2))?e.preventDefault():null==i||i(e)}),f),onWheel:IS(E,f),onMouseEnter:C?void 0:c,onMouseDown:C?t=>{const{resetSelectedElements:n,domNode:r}=p.getState();if(x.current=null==r?void 0:r.getBoundingClientRect(),!b||!e||0!==t.button||t.target!==f.current||!x.current)return;const{x:a,y:s}=_E(t,x.current);n(),p.setState({userSelectionRect:{width:0,height:0,startX:a,startY:s,x:a,y:s}}),null==o||o(t)}:void 0,onMouseMove:C?n=>{const{userSelectionRect:o,nodeInternals:r,edges:a,transform:s,onNodesChange:i,onEdgesChange:l,nodeOrigin:c,getNodes:d}=p.getState();if(!e||!x.current||!o)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const u=_E(n,x.current),h=o.startX??0,m=o.startY??0,f={...o,x:u.x<h?u.x:h,y:u.y<m?u.y:m,width:Math.abs(u.x-h),height:Math.abs(u.y-m)},y=d(),b=fC(r,f,s,t===LE.Partial,!0,c),w=pC(b,a).map((e=>e.id)),k=b.map((e=>e.id));if(g.current!==k.length){g.current=k.length;const e=_S(y,k);e.length&&(null==i||i(e))}if(v.current!==w.length){v.current=w.length;const e=_S(a,w);e.length&&(null==l||l(e))}p.setState({userSelectionRect:f})}:d,onMouseUp:C?e=>{if(0!==e.button)return;const{userSelectionRect:t}=p.getState();!y&&t&&e.target===f.current&&(null==N||N(e)),p.setState({nodesSelectionActive:g.current>0}),k(),null==a||a(e)}:void 0,onMouseLeave:C?e=>{y&&(p.setState({nodesSelectionActive:g.current>0}),null==a||a(e)),k()}:h,ref:f,style:pS},m,u.createElement(NS,null))}));function OS(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return!!o&&(!!o.selected||OS(o,t))}function TS(e,t,n){let o=e;do{if(null==o?void 0:o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function DS(e,t,n,o){return Array.from(e.values()).filter((n=>(n.selected||n.id===o)&&(!n.parentNode||n.parentId||!OS(n,e))&&(n.draggable||t&&void 0===n.draggable))).map((e=>{var t,o;return{id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:n.x-((null==(t=e.positionAbsolute)?void 0:t.x)??0),y:n.y-((null==(o=e.positionAbsolute)?void 0:o.y)??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}}))}function PS(e,t,n,o,r=[0,0],a){const s=function(e,t){return t&&"parent"!==t?[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]:t}(e,e.extent||o);let i=s;const l=e.parentNode||e.parentId;if("parent"!==e.extent||e.expandParent){if(e.extent&&l&&"parent"!==e.extent){const t=n.get(l),{x:o,y:a}=hC(t,r).positionAbsolute;i=[[e.extent[0][0]+o,e.extent[0][1]+a],[e.extent[1][0]+o,e.extent[1][1]+a]]}}else if(l&&e.width&&e.height){const t=n.get(l),{x:o,y:a}=hC(t,r).positionAbsolute;i=t&&NE(o)&&NE(a)&&NE(t.width)&&NE(t.height)?[[o+e.width*r[0],a+e.height*r[1]],[o+t.width-e.width+e.width*r[0],a+t.height-e.height+e.height*r[1]]]:i}else null==a||a("005",tE()),i=s;let c={x:0,y:0};if(l){const e=n.get(l);c=hC(e,r).positionAbsolute}const d=i&&"parent"!==i?gE(t,i):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function RS({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map((e=>({...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute})));return[e?o.find((t=>t.id===e)):o[0],o]}MS.displayName="Pane";const FS=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const a=Array.from(r),s=t.getBoundingClientRect(),i=s.width*o[0],l=s.height*o[1];return a.map((e=>{const t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-s.left-i)/n,y:(t.top-s.top-l)/n,...fE(e)}}))};function LS(e,t,n){return void 0===n?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function zS({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:a,multiSelectionActive:s,nodeInternals:i,onError:l}=t.getState(),c=i.get(e);c?(t.setState({nodesSelectionActive:!1}),c.selected?(n||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame((()=>{var e;return null==(e=null==o?void 0:o.current)?void 0:e.blur()}))):r([e])):null==l||l("012",sE(e))}function BS(e){return(t,n,o)=>null==e?void 0:e(t,o)}function US({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const l=cE(),[c,d]=r.useState(!1),u=r.useRef([]),h=r.useRef({x:null,y:null}),m=r.useRef(0),f=r.useRef(null),p=r.useRef({x:0,y:0}),g=r.useRef(null),v=r.useRef(!1),x=r.useRef(!1),y=r.useRef(!1),b=function(){const e=cE();return r.useCallback((({sourceEvent:t})=>{const{transform:n,snapGrid:o,snapToGrid:r}=e.getState(),a=t.touches?t.touches[0].clientX:t.clientX,s=t.touches?t.touches[0].clientY:t.clientY,i={x:(a-n[0])/n[2],y:(s-n[1])/n[2]};return{xSnapped:r?o[0]*Math.round(i.x/o[0]):i.x,ySnapped:r?o[1]*Math.round(i.y/o[1]):i.y,...i}}),[])}();return r.useEffect((()=>{if(null==e?void 0:e.current){const r=vl(e.current),c=({x:e,y:t})=>{const{nodeInternals:n,onNodeDrag:o,onSelectionDrag:r,updateNodePositions:s,nodeExtent:i,snapGrid:c,snapToGrid:m,nodeOrigin:f,onError:p}=l.getState();h.current={x:e,y:t};let v=!1,x={x:0,y:0,x2:0,y2:0};if(u.current.length>1&&i){const e=mC(u.current,f);x=bE(e)}if(u.current=u.current.map((o=>{const r={x:e-o.distance.x,y:t-o.distance.y};m&&(r.x=c[0]*Math.round(r.x/c[0]),r.y=c[1]*Math.round(r.y/c[1]));const a=[[i[0][0],i[0][1]],[i[1][0],i[1][1]]];u.current.length>1&&i&&!o.extent&&(a[0][0]=o.positionAbsolute.x-x.x+i[0][0],a[1][0]=o.positionAbsolute.x+(o.width??0)-x.x2+i[1][0],a[0][1]=o.positionAbsolute.y-x.y+i[0][1],a[1][1]=o.positionAbsolute.y+(o.height??0)-x.y2+i[1][1]);const s=PS(o,r,n,a,f,p);return v=v||o.position.x!==s.position.x||o.position.y!==s.position.y,o.position=s.position,o.positionAbsolute=s.positionAbsolute,o})),!v)return;s(u.current,!0,!0),d(!0);const y=a?o:BS(r);if(y&&g.current){const[e,t]=RS({nodeId:a,dragItems:u.current,nodeInternals:n});y(g.current,e,t)}},w=()=>{if(!f.current)return;const[e,t]=xE(p.current,f.current);if(0!==e||0!==t){const{transform:n,panBy:o}=l.getState();h.current.x=(h.current.x??0)-e/n[2],h.current.y=(h.current.y??0)-t/n[2],o({x:e,y:t})&&c(h.current)}m.current=requestAnimationFrame(w)},k=t=>{var n;const{nodeInternals:o,multiSelectionActive:r,nodesDraggable:c,unselectNodesAndEdges:d,onNodeDragStart:m,onSelectionDragStart:f}=l.getState();x.current=!0;const p=a?m:BS(f);i&&s||r||!a||(null==(n=o.get(a))?void 0:n.selected)||d(),a&&s&&i&&zS({id:a,store:l,nodeRef:e});const g=b(t);if(h.current=g,u.current=DS(o,c,g,a),p&&u.current){const[e,n]=RS({nodeId:a,dragItems:u.current,nodeInternals:o});p(t.sourceEvent,e,n)}};if(!t){const t=function(){var e,t,n,o,r=FN,a=LN,s=zN,i=BN,l={},c=wl("start","drag","end"),d=0,u=0;function h(e){e.on("mousedown.drag",m).filter(i).on("touchstart.drag",g).on("touchmove.drag",v,IN).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(s,i){if(!o&&r.call(this,s,i)){var l=y(this,a.call(this,s,i),s,i,"mouse");l&&(vl(s.view).on("mousemove.drag",f,AN).on("mouseup.drag",p,AN),TN(s.view),MN(s),n=!1,e=s.clientX,t=s.clientY,l("start",s))}}function f(o){if(ON(o),!n){var r=o.clientX-e,a=o.clientY-t;n=r*r+a*a>u}l.mouse("drag",o)}function p(e){vl(e.view).on("mousemove.drag mouseup.drag",null),DN(e.view,n),ON(e),l.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,o,s=e.changedTouches,i=a.call(this,e,t),l=s.length;for(n=0;n<l;++n)(o=y(this,i,e,t,s[n].identifier,s[n]))&&(MN(e),o("start",e,s[n]))}}function v(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=l[o[t].identifier])&&(ON(e),n("drag",e,o[t]))}function x(e){var t,n,r=e.changedTouches,a=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<a;++t)(n=l[r[t].identifier])&&(MN(e),n("end",e,r[t]))}function y(e,t,n,o,r,a){var i,u,m,f=c.copy(),p=_N(a||n,t);if(null!=(m=s.call(e,new RN("beforestart",{sourceEvent:n,target:h,identifier:r,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),o)))return i=m.x-p[0]||0,u=m.y-p[1]||0,function n(a,s,c){var g,v=p;switch(a){case"start":l[r]=n,g=d++;break;case"end":delete l[r],--d;case"drag":p=_N(c||s,t),g=d}f.call(a,e,new RN(a,{sourceEvent:s,subject:m,target:h,identifier:r,active:g,x:p[0]+i,y:p[1]+u,dx:p[0]-v[0],dy:p[1]-v[1],dispatch:f}),o)}}return h.filter=function(e){return arguments.length?(r="function"==typeof e?e:PN(!!e),h):r},h.container=function(e){return arguments.length?(a="function"==typeof e?e:PN(e),h):a},h.subject=function(e){return arguments.length?(s="function"==typeof e?e:PN(e),h):s},h.touchable=function(e){return arguments.length?(i="function"==typeof e?e:PN(!!e),h):i},h.on=function(){var e=c.on.apply(c,arguments);return e===c?h:e},h.clickDistance=function(e){return arguments.length?(u=(e=+e)*e,h):Math.sqrt(u)},h}().on("start",(e=>{const{domNode:t,nodeDragThreshold:n}=l.getState();0===n&&k(e),y.current=!1;const o=b(e);h.current=o,f.current=(null==t?void 0:t.getBoundingClientRect())||null,p.current=_E(e.sourceEvent,f.current)})).on("drag",(e=>{var t,n;const o=b(e),{autoPanOnNodeDrag:r,nodeDragThreshold:a}=l.getState();if("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1&&(y.current=!0),!y.current){if(!v.current&&x.current&&r&&(v.current=!0,w()),!x.current){const r=o.xSnapped-((null==(t=null==h?void 0:h.current)?void 0:t.x)??0),s=o.ySnapped-((null==(n=null==h?void 0:h.current)?void 0:n.y)??0);Math.sqrt(r*r+s*s)>a&&k(e)}(h.current.x!==o.xSnapped||h.current.y!==o.ySnapped)&&u.current&&x.current&&(g.current=e.sourceEvent,p.current=_E(e.sourceEvent,f.current),c(o))}})).on("end",(e=>{if(x.current&&!y.current&&(d(!1),v.current=!1,x.current=!1,cancelAnimationFrame(m.current),u.current)){const{updateNodePositions:t,nodeInternals:n,onNodeDragStop:o,onSelectionDragStop:r}=l.getState(),s=a?o:BS(r);if(t(u.current,!1,!1),s){const[t,o]=RS({nodeId:a,dragItems:u.current,nodeInternals:n});s(e.sourceEvent,t,o)}}})).filter((t=>{const r=t.target;return!t.button&&(!n||!TS(r,`.${n}`,e))&&(!o||TS(r,o,e))}));return r.call(t),()=>{r.on(".drag",null)}}r.on(".drag",null)}}),[e,t,n,o,s,l,a,i,b]),c}function VS(){const e=cE();return r.useCallback((t=>{const{nodeInternals:n,nodeExtent:o,updateNodePositions:r,getNodes:a,snapToGrid:s,snapGrid:i,onError:l,nodesDraggable:c}=e.getState(),d=a().filter((e=>e.selected&&(e.draggable||c&&void 0===e.draggable))),u=s?i[0]:5,h=s?i[1]:5,m=t.isShiftPressed?4:1,f=t.x*u*m,p=t.y*h*m;r(d.map((e=>{if(e.positionAbsolute){const t={x:e.positionAbsolute.x+f,y:e.positionAbsolute.y+p};s&&(t.x=i[0]*Math.round(t.x/i[0]),t.y=i[1]*Math.round(t.y/i[1]));const{positionAbsolute:r,position:a}=PS(e,t,n,o,void 0,l);e.position=a,e.positionAbsolute=r}return e})),!0,!1)}),[])}const $S={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var GS=e=>{const t=({id:t,type:n,data:o,xPos:a,yPos:s,xPosOrigin:i,yPosOrigin:l,selected:c,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:f,onContextMenu:p,onDoubleClick:g,style:v,className:x,isDraggable:y,isSelectable:b,isConnectable:w,isFocusable:k,selectNodesOnDrag:N,sourcePosition:E,targetPosition:C,hidden:S,resizeObserver:j,dragHandle:_,zIndex:I,isParent:A,noDragClassName:M,noPanClassName:O,initialized:T,disableKeyboardA11y:D,ariaLabel:P,rfId:R,hasHandleBounds:F})=>{const L=cE(),z=r.useRef(null),B=r.useRef(null),U=r.useRef(E),V=r.useRef(C),$=r.useRef(n),G=b||y||d||h||m||f,H=VS(),W=LS(t,L.getState,h),q=LS(t,L.getState,m),Y=LS(t,L.getState,f),K=LS(t,L.getState,p),J=LS(t,L.getState,g);r.useEffect((()=>()=>{B.current&&(null==j||j.unobserve(B.current),B.current=null)}),[]),r.useEffect((()=>{if(z.current&&!S){const e=z.current;T&&F&&B.current===e||(B.current&&(null==j||j.unobserve(B.current)),null==j||j.observe(e),B.current=e)}}),[S,T,F]),r.useEffect((()=>{const e=$.current!==n,o=U.current!==E,r=V.current!==C;z.current&&(e||o||r)&&(e&&($.current=n),o&&(U.current=E),r&&(V.current=C),L.getState().updateNodeDimensions([{id:t,nodeElement:z.current,forceUpdate:!0}]))}),[t,n,E,C]);const X=US({nodeRef:z,disabled:S||!y,noDragClassName:M,handleSelector:_,nodeId:t,isSelectable:b,selectNodesOnDrag:N});return S?null:u.createElement("div",{className:wN(["react-flow__node",`react-flow__node-${n}`,{[O]:y},x,{selected:c,selectable:b,parent:A,dragging:X}]),ref:z,style:{zIndex:I,transform:`translate(${i}px,${l}px)`,pointerEvents:G?"all":"none",visibility:T?"visible":"hidden",...v},"data-id":t,"data-testid":`rf__node-${t}`,onMouseEnter:W,onMouseMove:q,onMouseLeave:Y,onContextMenu:K,onClick:e=>{const{nodeDragThreshold:n}=L.getState();if(b&&(!N||!y||n>0)&&zS({id:t,store:L,nodeRef:z}),d){const n=L.getState().nodeInternals.get(t);n&&d(e,{...n})}},onDoubleClick:J,onKeyDown:k?e=>{if(!SE(e)&&!D)if(CE.includes(e.key)&&b){const n="Escape"===e.key;zS({id:t,store:L,unselect:n,nodeRef:z})}else y&&c&&Object.prototype.hasOwnProperty.call($S,e.key)&&(L.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~s}`}),H({x:$S[e.key].x,y:$S[e.key].y,isShiftPressed:e.shiftKey}))}:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":D?void 0:`${KC}-${R}`,"aria-label":P},u.createElement(iC,{value:t},u.createElement(e,{id:t,data:o,type:n,xPos:a,yPos:s,selected:c,isConnectable:w,sourcePosition:E,targetPosition:C,dragging:X,dragHandle:_,zIndex:I})))};return t.displayName="NodeWrapper",r.memo(t)};const HS=e=>{const t=e.getNodes().filter((e=>e.selected));return{...mC(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var WS=r.memo((function({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=cE(),{width:a,height:s,x:i,y:l,transformString:c,userSelectionActive:d}=lE(HS,jN),h=VS(),m=r.useRef(null);if(r.useEffect((()=>{var e;n||null==(e=m.current)||e.focus({preventScroll:!0})}),[n]),US({nodeRef:m}),d||!a||!s)return null;const f=e?t=>{const n=o.getState().getNodes().filter((e=>e.selected));e(t,n)}:void 0;return u.createElement("div",{className:wN(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},u.createElement("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:e=>{Object.prototype.hasOwnProperty.call($S,e.key)&&h({x:$S[e.key].x,y:$S[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:s,top:l,left:i}}))}));const qS=e=>e.nodesSelectionActive,YS=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:l,onMove:c,onMoveStart:d,onMoveEnd:h,selectionKeyCode:m,selectionOnDrag:f,selectionMode:p,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:x,panActivationKeyCode:y,zoomActivationKeyCode:b,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:N,panOnScroll:E,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:j,panOnDrag:_,defaultViewport:I,translateExtent:A,minZoom:M,maxZoom:O,preventScrolling:T,onSelectionContextMenu:D,noWheelClassName:P,noPanClassName:R,disableKeyboardA11y:F})=>{const L=lE(qS),z=eS(m),B=eS(y),U=B||_,V=B||E,$=z||f&&!0!==U;return(({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=cE(),{deleteElements:o}=mS(),a=eS(e,fS),s=eS(t);r.useEffect((()=>{if(a){const{edges:e,getNodes:t}=n.getState(),r=t().filter((e=>e.selected)),a=e.filter((e=>e.selected));o({nodes:r,edges:a}),n.setState({nodesSelectionActive:!1})}}),[a]),r.useEffect((()=>{n.setState({multiSelectionActive:s})}),[s])})({deleteKeyCode:l,multiSelectionKeyCode:x}),u.createElement(wS,{onMove:c,onMoveStart:d,onMoveEnd:h,onPaneContextMenu:s,elementsSelectable:w,zoomOnScroll:k,zoomOnPinch:N,panOnScroll:V,panOnScrollSpeed:C,panOnScrollMode:S,zoomOnDoubleClick:j,panOnDrag:!z&&U,defaultViewport:I,translateExtent:A,minZoom:M,maxZoom:O,zoomActivationKeyCode:b,preventScrolling:T,noWheelClassName:P,noPanClassName:R},u.createElement(MS,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:U,isSelecting:!!$,selectionMode:p},e,L&&u.createElement(WS,{onSelectionContextMenu:D,noPanClassName:R,disableKeyboardA11y:F})))};YS.displayName="FlowRenderer";var KS=r.memo(YS);function JS(e){return{...{input:GS(e.input||TC),default:GS(e.default||MC),output:GS(e.output||PC),group:GS(e.group||RC)},...Object.keys(e).filter((e=>!["input","default","output","group"].includes(e))).reduce(((t,n)=>(t[n]=GS(e[n]||MC),t)),{})}}const XS=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ZS=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:a,updateNodeDimensions:s,onError:i}=lE(XS,jN),l=(c=e.onlyRenderVisibleElements,lE(r.useCallback((e=>c?fC(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes()),[c])));var c;const d=r.useRef(),h=r.useMemo((()=>{if("undefined"==typeof ResizeObserver)return null;const e=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));s(t)}));return d.current=e,e}),[]);return r.useEffect((()=>()=>{var e;null==(e=null==d?void 0:d.current)||e.disconnect()}),[]),u.createElement("div",{className:"react-flow__nodes",style:pS},l.map((r=>{var s,l,c;let d=r.type||"default";e.nodeTypes[d]||(null==i||i("003",QN(d)),d="default");const m=e.nodeTypes[d]||e.nodeTypes.default,f=!!(r.draggable||t&&void 0===r.draggable),p=!!(r.selectable||a&&void 0===r.selectable),g=!!(r.connectable||n&&void 0===r.connectable),v=!!(r.focusable||o&&void 0===r.focusable),x=e.nodeExtent?gE(r.positionAbsolute,e.nodeExtent):r.positionAbsolute,y=(null==x?void 0:x.x)??0,b=(null==x?void 0:x.y)??0,w=(({x:e,y:t,width:n,height:o,origin:r})=>n&&o?r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]}:{x:e,y:t})({x:y,y:b,width:r.width??0,height:r.height??0,origin:e.nodeOrigin});return u.createElement(m,{key:r.id,id:r.id,className:r.className,style:r.style,type:d,data:r.data,sourcePosition:r.sourcePosition||GE.Bottom,targetPosition:r.targetPosition||GE.Top,hidden:r.hidden,xPos:y,yPos:b,xPosOrigin:w.x,yPosOrigin:w.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!r.selected,isDraggable:f,isSelectable:p,isConnectable:g,isFocusable:v,resizeObserver:h,dragHandle:r.dragHandle,zIndex:(null==(s=r[EE])?void 0:s.z)??0,isParent:!!(null==(l=r[EE])?void 0:l.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!r.width&&!!r.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:r.ariaLabel,hasHandleBounds:!!(null==(c=r[EE])?void 0:c.handleBounds)})})))};ZS.displayName="NodeRenderer";var QS=r.memo(ZS);const ej=(e,t,n)=>n===GE.Left?e-t:n===GE.Right?e+t:e,tj=(e,t,n)=>n===GE.Top?e-t:n===GE.Bottom?e+t:e,nj="react-flow__edgeupdater",oj=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:a,onMouseOut:s,type:i})=>u.createElement("circle",{onMouseDown:r,onMouseEnter:a,onMouseOut:s,className:wN([nj,`${nj}-${i}`]),cx:ej(t,o,e),cy:tj(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),rj=()=>!0;var aj=e=>{const t=({id:t,className:n,type:o,data:a,onClick:s,onEdgeDoubleClick:i,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:v,source:x,target:y,sourceX:b,sourceY:w,targetX:k,targetY:N,sourcePosition:E,targetPosition:C,elementsSelectable:S,hidden:j,sourceHandleId:_,targetHandleId:I,onContextMenu:A,onMouseEnter:M,onMouseMove:O,onMouseLeave:T,reconnectRadius:D,onReconnect:P,onReconnectStart:R,onReconnectEnd:F,markerEnd:L,markerStart:z,rfId:B,ariaLabel:U,isFocusable:V,isReconnectable:$,pathOptions:G,interactionWidth:H,disableKeyboardA11y:W})=>{const q=r.useRef(null),[Y,K]=r.useState(!1),[J,X]=r.useState(!1),Z=cE(),Q=r.useMemo((()=>`url('#${cC(z,B)}')`),[z,B]),ee=r.useMemo((()=>`url('#${cC(L,B)}')`),[L,B]);if(j)return null;const te=ME(t,Z.getState,i),ne=ME(t,Z.getState,A),oe=ME(t,Z.getState,M),re=ME(t,Z.getState,O),ae=ME(t,Z.getState,T),se=(e,n)=>{if(0!==e.button)return;const{edges:o,isValidConnection:r}=Z.getState(),a=n?y:x,s=(n?I:_)||null,i=n?"target":"source",l=r||rj,c=n,d=o.find((e=>e.id===t));X(!0),null==R||R(e,d,i);CC({event:e,handleId:s,nodeId:a,onConnect:e=>null==P?void 0:P(d,e),isTarget:c,getState:Z.getState,setState:Z.setState,isValidConnection:l,edgeUpdaterType:i,onReconnectEnd:e=>{X(!1),null==F||F(e,d,i)}})},ie=()=>K(!0),le=()=>K(!1),ce=!S&&!s;return u.createElement("g",{className:wN(["react-flow__edge",`react-flow__edge-${o}`,n,{selected:l,animated:c,inactive:ce,updating:Y}]),onClick:e=>{var n;const{edges:o,addSelectedEdges:r,unselectNodesAndEdges:a,multiSelectionActive:i}=Z.getState(),l=o.find((e=>e.id===t));l&&(S&&(Z.setState({nodesSelectionActive:!1}),l.selected&&i?(a({nodes:[],edges:[l]}),null==(n=q.current)||n.blur()):r([t])),s&&s(e,l))},onDoubleClick:te,onContextMenu:ne,onMouseEnter:oe,onMouseMove:re,onMouseLeave:ae,onKeyDown:V?e=>{var n;if(!W&&CE.includes(e.key)&&S){const{unselectNodesAndEdges:o,addSelectedEdges:r,edges:a}=Z.getState();"Escape"===e.key?(null==(n=q.current)||n.blur(),o({edges:[a.find((e=>e.id===t))]})):r([t])}}:void 0,tabIndex:V?0:void 0,role:V?"button":"img","data-testid":`rf__edge-${t}`,"aria-label":null===U?void 0:U||`Edge from ${x} to ${y}`,"aria-describedby":V?`${JC}-${B}`:void 0,ref:q},!J&&u.createElement(e,{id:t,source:x,target:y,selected:l,animated:c,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,data:a,style:v,sourceX:b,sourceY:w,targetX:k,targetY:N,sourcePosition:E,targetPosition:C,sourceHandleId:_,targetHandleId:I,markerStart:Q,markerEnd:ee,pathOptions:G,interactionWidth:H}),$&&u.createElement(u.Fragment,null,("source"===$||!0===$)&&u.createElement(oj,{position:E,centerX:b,centerY:w,radius:D,onMouseDown:e=>se(e,!0),onMouseEnter:ie,onMouseOut:le,type:"source"}),("target"===$||!0===$)&&u.createElement(oj,{position:C,centerX:k,centerY:N,radius:D,onMouseDown:e=>se(e,!1),onMouseEnter:ie,onMouseOut:le,type:"target"})))};return t.displayName="EdgeWrapper",r.memo(t)};function sj(e){return{...{default:aj(e.default||aC),straight:aj(e.bezier||tC),step:aj(e.step||eC),smoothstep:aj(e.step||QE),simplebezier:aj(e.simplebezier||YE)},...Object.keys(e).filter((e=>!["default","bezier"].includes(e))).reduce(((t,n)=>(t[n]=aj(e[n]||aC),t)),{})}}function ij(e,t,n=null){const o=((null==n?void 0:n.x)||0)+t.x,r=((null==n?void 0:n.y)||0)+t.y,a=(null==n?void 0:n.width)||t.width,s=(null==n?void 0:n.height)||t.height;switch(e){case GE.Top:return{x:o+a/2,y:r};case GE.Right:return{x:o+a,y:r+s/2};case GE.Bottom:return{x:o+a/2,y:r+s};case GE.Left:return{x:o,y:r+s/2}}}function lj(e,t){return e?1!==e.length&&t?t&&e.find((e=>e.id===t))||null:e[0]:null}function cj(e){var t,n,o,r,a;const s=(null==(t=null==e?void 0:e[EE])?void 0:t.handleBounds)||null,i=s&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)&&void 0!==(null==(n=null==e?void 0:e.positionAbsolute)?void 0:n.x)&&void 0!==(null==(o=null==e?void 0:e.positionAbsolute)?void 0:o.y);return[{x:(null==(r=null==e?void 0:e.positionAbsolute)?void 0:r.x)||0,y:(null==(a=null==e?void 0:e.positionAbsolute)?void 0:a.y)||0,width:(null==e?void 0:e.width)||0,height:(null==e?void 0:e.height)||0},s,!!i]}const dj=[{level:0,isMaxLevel:!0,edges:[]}];function uj(e,t,n){return function(e,t,n=!1){let o=-1;const r=e.reduce(((e,r)=>{var a,s;const i=NE(r.zIndex);let l=i?r.zIndex:0;if(n){const e=t.get(r.target),n=t.get(r.source),o=r.selected||(null==e?void 0:e.selected)||(null==n?void 0:n.selected),c=Math.max((null==(a=null==n?void 0:n[EE])?void 0:a.z)||0,(null==(s=null==e?void 0:e[EE])?void 0:s.z)||0,1e3);l=(i?r.zIndex:0)+(o?c:0)}return e[l]?e[l].push(r):e[l]=[r],o=l>o?l:o,e}),{}),a=Object.entries(r).map((([e,t])=>{const n=+e;return{edges:t,level:n,isMaxLevel:n===o}}));return 0===a.length?dj:a}(lE(r.useCallback((n=>e?n.edges.filter((e=>{const o=t.get(e.source),r=t.get(e.target);return(null==o?void 0:o.width)&&(null==o?void 0:o.height)&&(null==r?void 0:r.width)&&(null==r?void 0:r.height)&&function({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:a,width:s,height:i,transform:l}){const c={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=bE({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:s/l[2],height:i/l[2]}),u=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),h=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(u*h)>0}({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:r.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:r.width,targetHeight:r.height,width:n.width,height:n.height,transform:n.transform})})):n.edges),[e,t])),t,n)}const hj={[VE.Arrow]:({color:e="none",strokeWidth:t=1})=>u.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[VE.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>u.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};const mj=({id:e,type:t,color:n,width:o=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:l="auto-start-reverse"})=>{const c=function(e){const t=cE();return r.useMemo((()=>{var n,o;return Object.prototype.hasOwnProperty.call(hj,e)?hj[e]:(null==(o=(n=t.getState()).onError)||o.call(n,"009",nE(e)),null)}),[e])}(t);return c?u.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0"},u.createElement(c,{color:n,strokeWidth:i})):null},fj=({defaultColor:e,rfId:t})=>{const n=lE(r.useCallback((({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce(((n,r)=>([r.markerStart,r.markerEnd].forEach((r=>{if(r&&"object"==typeof r){const a=cC(r,t);o.includes(a)||(n.push({id:a,color:r.color||e,...r}),o.push(a))}})),n)),[]).sort(((e,t)=>e.id.localeCompare(t.id)))})({defaultColor:e,rfId:t}),[e,t]),((e,t)=>!(e.length!==t.length||e.some(((e,n)=>e.id!==t[n].id)))));return u.createElement("defs",null,n.map((e=>u.createElement(mj,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient}))))};fj.displayName="MarkerDefinitions";var pj=r.memo(fj);const gj=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),vj=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:a,onEdgeContextMenu:s,onEdgeMouseEnter:i,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:f,onReconnectEnd:p,reconnectRadius:g,children:v,disableKeyboardA11y:x})=>{const{edgesFocusable:y,edgesUpdatable:b,elementsSelectable:w,width:k,height:N,connectionMode:E,nodeInternals:C,onError:S}=lE(gj,jN),j=uj(t,C,n);return k?u.createElement(u.Fragment,null,j.map((({level:t,edges:n,isMaxLevel:v})=>u.createElement("svg",{key:t,style:{zIndex:t},width:k,height:N,className:"react-flow__edges react-flow__container"},v&&u.createElement(pj,{defaultColor:e,rfId:o}),u.createElement("g",null,n.map((e=>{const[t,n,v]=cj(C.get(e.source)),[k,N,j]=cj(C.get(e.target));if(!v||!j)return null;let _=e.type||"default";r[_]||(null==S||S("011",aE(_)),_="default");const I=r[_]||r.default,A=E===DE.Strict?N.target:(N.target??[]).concat(N.source??[]),M=lj(n.source,e.sourceHandle),O=lj(A,e.targetHandle),T=(null==M?void 0:M.position)||GE.Bottom,D=(null==O?void 0:O.position)||GE.Top,P=!!(e.focusable||y&&void 0===e.focusable),R=e.reconnectable||e.updatable,F=void 0!==m&&(R||b&&void 0===R);if(!M||!O)return null==S||S("008",oE(M,e)),null;const{sourceX:L,sourceY:z,targetX:B,targetY:U}=((e,t,n,o,r,a)=>{const s=ij(n,e,t),i=ij(a,o,r);return{sourceX:s.x,sourceY:s.y,targetX:i.x,targetY:i.y}})(t,M,T,k,O,D);return u.createElement(I,{key:e.id,id:e.id,className:wN([e.className,a]),type:_,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:L,sourceY:z,targetX:B,targetY:U,sourcePosition:T,targetPosition:D,elementsSelectable:w,onContextMenu:s,onMouseEnter:i,onMouseMove:l,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:f,onReconnectEnd:p,reconnectRadius:g,rfId:o,ariaLabel:e.ariaLabel,isFocusable:P,isReconnectable:F,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:x})})))))),v):null};vj.displayName="EdgeRenderer";var xj=r.memo(vj);const yj=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function bj({children:e}){const t=lE(yj);return u.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}const wj={[GE.Left]:GE.Right,[GE.Right]:GE.Left,[GE.Top]:GE.Bottom,[GE.Bottom]:GE.Top},kj=({nodeId:e,handleType:t,style:n,type:o=BE.Bezier,CustomComponent:a,connectionStatus:s})=>{var i,l,c;const{fromNode:d,handleId:h,toX:m,toY:f,connectionMode:p}=lE(r.useCallback((t=>({fromNode:t.nodeInternals.get(e),handleId:t.connectionHandleId,toX:(t.connectionPosition.x-t.transform[0])/t.transform[2],toY:(t.connectionPosition.y-t.transform[1])/t.transform[2],connectionMode:t.connectionMode})),[e]),jN),g=null==(i=null==d?void 0:d[EE])?void 0:i.handleBounds;let v=null==g?void 0:g[t];if(p===DE.Loose&&(v=v||(null==g?void 0:g["source"===t?"target":"source"])),!d||!v)return null;const x=h?v.find((e=>e.id===h)):v[0],y=x?x.x+x.width/2:(d.width??0)/2,b=x?x.y+x.height/2:d.height??0,w=((null==(l=d.positionAbsolute)?void 0:l.x)??0)+y,k=((null==(c=d.positionAbsolute)?void 0:c.y)??0)+b,N=null==x?void 0:x.position,E=N?wj[N]:null;if(!N||!E)return null;if(a)return u.createElement(a,{connectionLineType:o,connectionLineStyle:n,fromNode:d,fromHandle:x,fromX:w,fromY:k,toX:m,toY:f,fromPosition:N,toPosition:E,connectionStatus:s});let C="";const S={sourceX:w,sourceY:k,sourcePosition:N,targetX:m,targetY:f,targetPosition:E};return o===BE.Bezier?[C]=rC(S):o===BE.Step?[C]=ZE({...S,borderRadius:0}):o===BE.SmoothStep?[C]=ZE(S):o===BE.SimpleBezier?[C]=qE(S):C=`M${w},${k} ${m},${f}`,u.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:n})};kj.displayName="ConnectionLine";const Nj=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Ej({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:a,nodesConnectable:s,width:i,height:l,connectionStatus:c}=lE(Nj,jN);return!!(r&&a&&i&&s)?u.createElement("svg",{style:e,width:i,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},u.createElement("g",{className:wN(["react-flow__connection",c])},u.createElement(kj,{nodeId:r,handleType:a,style:t,type:n,CustomComponent:o,connectionStatus:c}))):null}function Cj(e,t){r.useRef(null),cE();return r.useMemo((()=>t(e)),[e])}const Sj=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:l,onNodeDoubleClick:c,onEdgeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:f,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:x,connectionLineType:y,connectionLineStyle:b,connectionLineComponent:w,connectionLineContainerStyle:k,selectionKeyCode:N,selectionOnDrag:E,selectionMode:C,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:_,deleteKeyCode:I,onlyRenderVisibleElements:A,elementsSelectable:M,selectNodesOnDrag:O,defaultViewport:T,translateExtent:D,minZoom:P,maxZoom:R,preventScrolling:F,defaultMarkerColor:L,zoomOnScroll:z,zoomOnPinch:B,panOnScroll:U,panOnScrollSpeed:V,panOnScrollMode:$,zoomOnDoubleClick:G,panOnDrag:H,onPaneClick:W,onPaneMouseEnter:q,onPaneMouseMove:Y,onPaneMouseLeave:K,onPaneScroll:J,onPaneContextMenu:X,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:re,reconnectRadius:ae,noDragClassName:se,noWheelClassName:ie,noPanClassName:le,elevateEdgesOnSelect:ce,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:me})=>{const fe=Cj(e,JS),pe=Cj(t,sj);return function(e){const t=mS(),n=r.useRef(!1);r.useEffect((()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout((()=>e(t)),1),n.current=!0)}),[e,t.viewportInitialized])}(s),u.createElement(KS,{onPaneClick:W,onPaneMouseEnter:q,onPaneMouseMove:Y,onPaneMouseLeave:K,onPaneContextMenu:X,onPaneScroll:J,deleteKeyCode:I,selectionKeyCode:N,selectionOnDrag:E,selectionMode:C,onSelectionStart:v,onSelectionEnd:x,multiSelectionKeyCode:S,panActivationKeyCode:j,zoomActivationKeyCode:_,elementsSelectable:M,onMove:n,onMoveStart:o,onMoveEnd:a,zoomOnScroll:z,zoomOnPinch:B,zoomOnDoubleClick:G,panOnScroll:U,panOnScrollSpeed:V,panOnScrollMode:$,panOnDrag:H,defaultViewport:T,translateExtent:D,minZoom:P,maxZoom:R,onSelectionContextMenu:g,preventScrolling:F,noDragClassName:se,noWheelClassName:ie,noPanClassName:le,disableKeyboardA11y:de},u.createElement(bj,null,u.createElement(xj,{edgeTypes:pe,onEdgeClick:l,onEdgeDoubleClick:d,onlyRenderVisibleElements:A,onEdgeContextMenu:Z,onEdgeMouseEnter:Q,onEdgeMouseMove:ee,onEdgeMouseLeave:te,onReconnect:ne,onReconnectStart:oe,onReconnectEnd:re,reconnectRadius:ae,defaultMarkerColor:L,noPanClassName:le,elevateEdgesOnSelect:!!ce,disableKeyboardA11y:de,rfId:me},u.createElement(Ej,{style:b,type:y,component:w,containerStyle:k})),u.createElement("div",{className:"react-flow__edgelabel-renderer"}),u.createElement(QS,{nodeTypes:fe,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:f,onNodeContextMenu:p,selectNodesOnDrag:O,onlyRenderVisibleElements:A,noPanClassName:le,noDragClassName:se,disableKeyboardA11y:de,nodeOrigin:ue,nodeExtent:he,rfId:me})))};Sj.displayName="GraphView";var jj=r.memo(Sj);const _j=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ij={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_j,nodeExtent:_j,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:DE.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:(e,t)=>{},isValidConnection:void 0},Aj=()=>{return e=(e,t)=>({...Ij,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:a}=t();e({nodeInternals:aS(n,o,r,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map((e=>({...o,...e})))})},setDefaultNodesAndEdges:(n,o)=>{const r=void 0!==n,a=void 0!==o,s=r?aS(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:s,edges:a?o:[],hasDefaultNodes:r,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:a,fitViewOnInitDone:s,fitViewOnInitOptions:i,domNode:l,nodeOrigin:c}=t(),d=null==l?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const u=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(u.transform),m=n.reduce(((e,t)=>{const n=r.get(t.id);if(null==n?void 0:n.hidden)r.set(n.id,{...n,[EE]:{...n[EE],handleBounds:void 0}});else if(n){const o=fE(t.nodeElement);o.width&&o.height&&(n.width!==o.width||n.height!==o.height||t.forceUpdate)&&(r.set(n.id,{...n,[EE]:{...n[EE],handleBounds:{source:FS(".source",t.nodeElement,h,c),target:FS(".target",t.nodeElement,h,c)}},...o}),e.push({id:n.id,type:"dimensions",dimensions:o}))}return e}),[]);rS(r,c);const f=s||a&&!s&&sS(t,{initial:!0,...i});e({nodeInternals:new Map(r),fitViewOnInitDone:f}),(null==m?void 0:m.length)>0&&(null==o||o(m))},updateNodePositions:(e,n=!0,o=!1)=>{const{triggerNodeChanges:r}=t();r(e.map((e=>{const t={id:e.id,type:"position",dragging:o};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t})))},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:a,nodeOrigin:s,getNodes:i,elevateNodesOnSelect:l}=t();if(null==n?void 0:n.length){if(a){const t=aS(SS(n,i()),r,s,l);e({nodeInternals:t})}null==o||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:a}=t();let s,i=null;o?s=n.map((e=>jS(e,!0))):(s=_S(a(),n),i=_S(r,[])),cS({changedNodes:s,changedEdges:i,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:a}=t();let s,i=null;o?s=n.map((e=>jS(e,!0))):(s=_S(r,n),i=_S(a(),[])),cS({changedNodes:i,changedEdges:s,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:a}=t(),s=o||r;cS({changedNodes:(n||a()).map((e=>(e.selected=!1,jS(e.id,!1)))),changedEdges:s.map((e=>jS(e.id,!1))),get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();null==o||o.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();null==o||o.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;null==(o=t().d3Zoom)||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t();cS({changedNodes:o().filter((e=>e.selected)).map((e=>jS(e.id,!1))),changedEdges:n.filter((e=>e.selected)).map((e=>jS(e.id,!1))),get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach((e=>{e.positionAbsolute=gE(e.position,n)})),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:e=>{const{transform:n,width:o,height:r,d3Zoom:a,d3Selection:s,translateExtent:i}=t();if(!a||!s||!e.x&&!e.y)return!1;const l=xl.translate(n[0]+e.x,n[1]+e.y).scale(n[2]),c=[[0,0],[o,r]],d=null==a?void 0:a.constrain()(l,c,i);return a.transform(s,d),n[0]!==d.x||n[1]!==d.y||n[2]!==d.k},cancelConnection:()=>e({connectionNodeId:Ij.connectionNodeId,connectionHandleId:Ij.connectionHandleId,connectionHandleType:Ij.connectionHandleType,connectionStatus:Ij.connectionStatus,connectionStartHandle:Ij.connectionStartHandle,connectionEndHandle:Ij.connectionEndHandle}),reset:()=>e({...Ij})}),t=Object.is,e?SN(e,t):SN;var e,t},Mj=({children:e})=>{const t=r.useRef(null);return t.current||(t.current=Aj()),u.createElement(ZN,{value:t.current},e)};Mj.displayName="ReactFlowProvider";const Oj=({children:e})=>r.useContext(XN)?u.createElement(u.Fragment,null,e):u.createElement(Mj,null,e);Oj.displayName="ReactFlowWrapper";const Tj={input:TC,default:MC,output:PC,group:RC},Dj={default:aC,straight:tC,step:eC,smoothstep:QE,simplebezier:YE},Pj=[0,0],Rj=[15,15],Fj={x:0,y:0,zoom:1},Lj={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},zj=r.forwardRef((({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:a=Tj,edgeTypes:s=Dj,onNodeClick:i,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:f,onConnectStart:p,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:x,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:N,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:S,onNodesDelete:j,onEdgesDelete:_,onSelectionChange:I,onSelectionDragStart:A,onSelectionDrag:M,onSelectionDragStop:O,onSelectionContextMenu:T,onSelectionStart:D,onSelectionEnd:P,connectionMode:R=DE.Strict,connectionLineType:F=BE.Bezier,connectionLineStyle:L,connectionLineComponent:z,connectionLineContainerStyle:B,deleteKeyCode:U="Backspace",selectionKeyCode:V="Shift",selectionOnDrag:$=!1,selectionMode:G=LE.Full,panActivationKeyCode:H="Space",multiSelectionKeyCode:W=(IE()?"Meta":"Control"),zoomActivationKeyCode:q=(IE()?"Meta":"Control"),snapToGrid:Y=!1,snapGrid:K=Rj,onlyRenderVisibleElements:J=!1,selectNodesOnDrag:X=!0,nodesDraggable:Z,nodesConnectable:Q,nodesFocusable:ee,nodeOrigin:te=Pj,edgesFocusable:ne,edgesUpdatable:oe,elementsSelectable:re,defaultViewport:ae=Fj,minZoom:se=.5,maxZoom:ie=2,translateExtent:le=_j,preventScrolling:ce=!0,nodeExtent:de,defaultMarkerColor:ue="#b1b1b7",zoomOnScroll:he=!0,zoomOnPinch:me=!0,panOnScroll:fe=!1,panOnScrollSpeed:pe=.5,panOnScrollMode:ge=RE.Free,zoomOnDoubleClick:ve=!0,panOnDrag:xe=!0,onPaneClick:ye,onPaneMouseEnter:be,onPaneMouseMove:we,onPaneMouseLeave:ke,onPaneScroll:Ne,onPaneContextMenu:Ee,children:Ce,onEdgeContextMenu:Se,onEdgeDoubleClick:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onEdgeUpdate:Me,onEdgeUpdateStart:Oe,onEdgeUpdateEnd:Te,onReconnect:De,onReconnectStart:Pe,onReconnectEnd:Re,reconnectRadius:Fe=10,edgeUpdaterRadius:Le=10,onNodesChange:ze,onEdgesChange:Be,noDragClassName:Ue="nodrag",noWheelClassName:Ve="nowheel",noPanClassName:$e="nopan",fitView:Ge=!1,fitViewOptions:He,connectOnClick:We=!0,attributionPosition:qe,proOptions:Ye,defaultEdgeOptions:Ke,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Xe=!1,disableKeyboardA11y:Ze=!1,autoPanOnConnect:Qe=!0,autoPanOnNodeDrag:et=!0,connectionRadius:tt=20,isValidConnection:nt,onError:ot,style:rt,id:at,nodeDragThreshold:st,...it},lt)=>{const ct=at||"1";return u.createElement("div",{...it,style:{...rt,...Lj},ref:lt,className:wN(["react-flow",r]),"data-testid":"rf__wrapper",id:at},u.createElement(Oj,null,u.createElement(jj,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:i,onEdgeClick:l,onNodeMouseEnter:y,onNodeMouseMove:b,onNodeMouseLeave:w,onNodeContextMenu:k,onNodeDoubleClick:N,nodeTypes:a,edgeTypes:s,connectionLineType:F,connectionLineStyle:L,connectionLineComponent:z,connectionLineContainerStyle:B,selectionKeyCode:V,selectionOnDrag:$,selectionMode:G,deleteKeyCode:U,multiSelectionKeyCode:W,panActivationKeyCode:H,zoomActivationKeyCode:q,onlyRenderVisibleElements:J,selectNodesOnDrag:X,defaultViewport:ae,translateExtent:le,minZoom:se,maxZoom:ie,preventScrolling:ce,zoomOnScroll:he,zoomOnPinch:me,zoomOnDoubleClick:ve,panOnScroll:fe,panOnScrollSpeed:pe,panOnScrollMode:ge,panOnDrag:xe,onPaneClick:ye,onPaneMouseEnter:be,onPaneMouseMove:we,onPaneMouseLeave:ke,onPaneScroll:Ne,onPaneContextMenu:Ee,onSelectionContextMenu:T,onSelectionStart:D,onSelectionEnd:P,onEdgeContextMenu:Se,onEdgeDoubleClick:je,onEdgeMouseEnter:_e,onEdgeMouseMove:Ie,onEdgeMouseLeave:Ae,onReconnect:De??Me,onReconnectStart:Pe??Oe,onReconnectEnd:Re??Te,reconnectRadius:Fe??Le,defaultMarkerColor:ue,noDragClassName:Ue,noWheelClassName:Ve,noPanClassName:$e,elevateEdgesOnSelect:Xe,rfId:ct,disableKeyboardA11y:Ze,nodeOrigin:te,nodeExtent:de}),u.createElement(WC,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:f,onConnectStart:p,onConnectEnd:g,onClickConnectStart:v,onClickConnectEnd:x,nodesDraggable:Z,nodesConnectable:Q,nodesFocusable:ee,edgesFocusable:ne,edgesUpdatable:oe,elementsSelectable:re,elevateNodesOnSelect:Je,minZoom:se,maxZoom:ie,nodeExtent:de,onNodesChange:ze,onEdgesChange:Be,snapToGrid:Y,snapGrid:K,connectionMode:R,translateExtent:le,connectOnClick:We,defaultEdgeOptions:Ke,fitView:Ge,fitViewOptions:He,onNodesDelete:j,onEdgesDelete:_,onNodeDragStart:E,onNodeDrag:C,onNodeDragStop:S,onSelectionDrag:M,onSelectionDragStart:A,onSelectionDragStop:O,noPanClassName:$e,nodeOrigin:te,rfId:ct,autoPanOnConnect:Qe,autoPanOnNodeDrag:et,onError:ot,connectionRadius:tt,isValidConnection:nt,nodeDragThreshold:st}),u.createElement(VC,{onSelectionChange:I}),Ce,u.createElement(hE,{proOptions:Ye,position:qe}),u.createElement(QC,{rfId:ct,disableKeyboardA11y:Ze})))}));function Bj(e){return t=>{const[n,o]=r.useState(t),a=r.useCallback((t=>o((n=>e(t,n)))),[]);return[n,o,a]}}zj.displayName="ReactFlow";const Uj=Bj(SS),Vj=Bj((function(e,t){return CS(e,t)}));function $j(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},u.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Gj(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},u.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Hj(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},u.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Wj(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function qj(){return u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},u.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Yj=({children:e,className:t,...n})=>u.createElement("button",{type:"button",className:wN(["react-flow__controls-button",t]),...n},e);Yj.displayName="ControlButton";const Kj=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Jj=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:l,onInteractiveChange:c,className:d,children:h,position:m="bottom-left"})=>{const f=cE(),[p,g]=r.useState(!1),{isInteractive:v,minZoomReached:x,maxZoomReached:y}=lE(Kj,jN),{zoomIn:b,zoomOut:w,fitView:k}=mS();if(r.useEffect((()=>{g(!0)}),[]),!p)return null;return u.createElement(uE,{className:wN(["react-flow__controls",d]),position:m,style:e,"data-testid":"rf__controls"},t&&u.createElement(u.Fragment,null,u.createElement(Yj,{onClick:()=>{b(),null==s||s()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},u.createElement($j,null)),u.createElement(Yj,{onClick:()=>{w(),null==i||i()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:x},u.createElement(Gj,null))),n&&u.createElement(Yj,{className:"react-flow__controls-fitview",onClick:()=>{k(a),null==l||l()},title:"fit view","aria-label":"fit view"},u.createElement(Hj,null)),o&&u.createElement(Yj,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),null==c||c(!v)},title:"toggle interactivity","aria-label":"toggle interactivity"},v?u.createElement(qj,null):u.createElement(Wj,null)),h)};Jj.displayName="Controls";var Xj,Zj,Qj=r.memo(Jj);function e_({color:e,dimensions:t,lineWidth:n}){return u.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function t_({color:e,radius:t}){return u.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(Zj=Xj||(Xj={})).Lines="lines",Zj.Dots="dots",Zj.Cross="cross";const n_={[Xj.Dots]:"#91919a",[Xj.Lines]:"#eee",[Xj.Cross]:"#e2e2e2"},o_={[Xj.Dots]:1,[Xj.Lines]:1,[Xj.Cross]:6},r_=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function a_({id:e,variant:t=Xj.Dots,gap:n=20,size:o,lineWidth:a=1,offset:s=2,color:i,style:l,className:c}){const d=r.useRef(null),{transform:h,patternId:m}=lE(r_,jN),f=i||n_[t],p=o||o_[t],g=t===Xj.Dots,v=t===Xj.Cross,x=Array.isArray(n)?n:[n,n],y=[x[0]*h[2]||1,x[1]*h[2]||1],b=p*h[2],w=v?[b,b]:y,k=g?[b/s,b/s]:[w[0]/s,w[1]/s];return u.createElement("svg",{className:wN(["react-flow__background",c]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:d,"data-testid":"rf__background"},u.createElement("pattern",{id:m+e,x:h[0]%y[0],y:h[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${k[0]},-${k[1]})`},g?u.createElement(t_,{color:f,radius:b/s}):u.createElement(e_,{dimensions:w,color:f,lineWidth:a})),u.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+e})`}))}a_.displayName="Background";var s_=r.memo(a_);function i_(e){return Math.min(11*e+35,200)}const l_=u.createContext("LR"),c_=r.memo((e=>{const t=m(51),{data:n,selected:o}=e,a=Z(n.atom),s=ne().inOrderIds.indexOf(a.id),i=o?"var(--gray-9)":"var(--gray-3)",l=lE(u_),c=r.useContext(l_);let d,u,h,f,g;if(t[0]!==a.code||t[1]!==c||t[2]!==i||t[3]!==o){const e=a.code.split("\n").length,n="LR"===c?GE.Left:GE.Top;let r;t[8]!==i?(r={background:i},t[8]=i,t[9]=r):r=t[9],t[10]!==n||t[11]!==r?(h=p.jsx(IC,{type:"target",id:"inputs",position:n,style:r}),t[10]=n,t[11]=r,t[12]=h):h=t[12];const s="LR"===c?GE.Left:GE.Top;let l;t[13]!==i?(l={background:i},t[13]=i,t[14]=l):l=t[14],t[15]!==s||t[16]!==l?(f=p.jsx(IC,{type:"source",id:"inputs",position:s,style:l}),t[15]=s,t[16]=l,t[17]=f):f=t[17];const m=o&&"border-primary";t[18]!==m?(u=Ht("flex flex-col bg-card border border-input/50 rounded-md mx-[2px] overflow-hidden",m),t[18]=m,t[19]=u):u=t[19],d=i_(e),t[0]=a.code,t[1]=c,t[2]=i,t[3]=o,t[4]=d,t[5]=u,t[6]=h,t[7]=f}else d=t[4],u=t[5],h=t[6],f=t[7];var v;let x;t[20]!==n.forceWidth||t[21]!==l?(g=n.forceWidth||(v=l,Math.min(Math.max(v-100,100),400)),t[20]=n.forceWidth,t[21]=l,t[22]=g):g=t[22],t[23]!==d||t[24]!==g?(x={height:d,width:g},t[23]=d,t[24]=g,t[25]=x):x=t[25];const y=Za(a.name,s);let b,w,k;t[26]!==y?(b=p.jsx("div",{className:"text-muted-foreground font-semibold text-xs py-1 px-2 bg-muted border-b",children:y}),t[26]=y,t[27]=b):b=t[27],t[28]!==a.code?(w=p.jsx(gl,{code:a.code}),t[28]=a.code,t[29]=w):w=t[29],t[30]!==u||t[31]!==x||t[32]!==b||t[33]!==w?(k=p.jsxs("div",{className:u,style:x,children:[b,w]}),t[30]=u,t[31]=x,t[32]=b,t[33]=w,t[34]=k):k=t[34];const N="LR"===c?GE.Right:GE.Bottom;let E,C;t[35]!==i?(E={background:i},t[35]=i,t[36]=E):E=t[36],t[37]!==N||t[38]!==E?(C=p.jsx(IC,{type:"source",id:"outputs",position:N,style:E}),t[37]=N,t[38]=E,t[39]=C):C=t[39];const S="LR"===c?GE.Right:GE.Bottom;let j,_,I;return t[40]!==i?(j={background:i},t[40]=i,t[41]=j):j=t[41],t[42]!==S||t[43]!==j?(_=p.jsx(IC,{type:"target",id:"outputs",position:S,style:j}),t[42]=S,t[43]=j,t[44]=_):_=t[44],t[45]!==h||t[46]!==f||t[47]!==k||t[48]!==C||t[49]!==_?(I=p.jsxs("div",{children:[h,f,k,C,_]}),t[45]=h,t[46]=f,t[47]=k,t[48]=C,t[49]=_,t[50]=I):I=t[50],I}),((e,t)=>["data","selected","id"].every((n=>e[n]===t[n]))));c_.displayName="CustomNode";const d_={custom:c_};function u_(e){const{width:t}=e;return t}const h_=e=>{const t=m(18),{maxCount:n,cellIds:o,onClick:r,skipScroll:a}=e,s=ne();let i,l,c,d;if(t[0]!==o||t[1]!==s.inOrderIds||t[2]!==n||t[3]!==a||t[4]!==r){c=Symbol.for("react.early_return_sentinel");e:{let e;t[8]!==s.inOrderIds?(e=(e,t)=>s.inOrderIds.indexOf(e)-s.inOrderIds.indexOf(t),t[8]=s.inOrderIds,t[9]=e):e=t[9];const d=[...o].sort(e);if(0===o.length){let e;t[10]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx("div",{className:"text-muted-foreground",children:"--"}),t[10]=e):e=t[10],c=e;break e}let u;t[11]!==a||t[12]!==r||t[13]!==o.length?(u=(e,t)=>p.jsxs("span",{className:"truncate",children:[p.jsx(Qa,{variant:"focus",cellId:e,skipScroll:a,className:"whitespace-nowrap",onClick:r?()=>r(e):void 0},e),t<o.length-1&&", "]},e),t[11]=a,t[12]=r,t[13]=o.length,t[14]=u):u=t[14],i=d.slice(0,n).map(u),l=o.length>n&&p.jsxs(Qt,{children:[p.jsx(rr,{asChild:!0,children:p.jsxs("span",{className:"whitespace-nowrap text-muted-foreground text-xs hover:underline cursor-pointer",children:["+",o.length-n," more"]})}),p.jsx(Zt,{className:"w-auto",children:p.jsx("div",{className:"flex flex-col gap-1 py-1",children:d.slice(n).map((e=>p.jsx(Qa,{variant:"focus",cellId:e,className:"whitespace-nowrap",onClick:r?()=>r(e):void 0},e)))})})]})}t[0]=o,t[1]=s.inOrderIds,t[2]=n,t[3]=a,t[4]=r,t[5]=i,t[6]=l,t[7]=c}else i=t[5],l=t[6],c=t[7];return c!==Symbol.for("react.early_return_sentinel")?c:(t[15]!==i||t[16]!==l?(d=p.jsxs(p.Fragment,{children:[i,l]}),t[15]=i,t[16]=l,t[17]=d):d=t[17],d)},m_=e=>{const t=m(15);let n,o,r,a;t[0]!==e?(({name:r,declaredBy:n,onClick:o,...a}=e),t[0]=e,t[1]=n,t[2]=o,t[3]=r,t[4]=a):(n=t[1],o=t[2],r=t[3],a=t[4]);const s=n.length>1?"destructive":"outline";let i,l,c;return t[5]!==o||t[6]!==r?(i=async e=>{o?o(e):(await $e(r),Y({title:"Copied to clipboard"}))},t[5]=o,t[6]=r,t[7]=i):i=t[7],t[8]!==r||t[9]!==s||t[10]!==i?(l=p.jsx(es,{title:r,variant:s,className:"rounded-sm text-ellipsis block overflow-hidden max-w-fit cursor-pointer font-medium",onClick:i,children:r}),t[8]=r,t[9]=s,t[10]=i,t[11]=l):l=t[11],t[12]!==a||t[13]!==l?(c=p.jsx("div",{className:"max-w-[130px]",...a,children:l}),t[12]=a,t[13]=l,t[14]=c):c=t[14],c},f_=r.memo((e=>{const t=m(38),{onChange:n,view:o,settings:r,onSettingsChange:a}=e;let s;t[0]!==a||t[1]!==r?(s=(e,t)=>{a({...r,[e]:t})},t[0]=a,t[1]=r,t[2]=s):s=t[2];const i=s;let l,c,d,u,h,f;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(rr,{asChild:!0,children:p.jsx(v,{variant:"text",size:"xs",children:p.jsx(yt,{className:"w-4 h-4"})})}),t[3]=l):l=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx("div",{className:"font-semibold pb-4",children:"Settings"}),t[4]=c):c=t[4],t[5]!==i?(d=e=>i("hidePureMarkdown",Boolean(e)),t[5]=i,t[6]=d):d=t[6],t[7]!==r.hidePureMarkdown||t[8]!==d?(u=p.jsx(Or,{"data-testid":"hide-pure-markdown-checkbox",id:"hide-pure-markdown",checked:r.hidePureMarkdown,onCheckedChange:d}),t[7]=r.hidePureMarkdown,t[8]=d,t[9]=u):u=t[9],t[10]===Symbol.for("react.memo_cache_sentinel")?(h=p.jsx(se,{htmlFor:"hide-pure-markdown",children:"Hide pure markdown"}),t[10]=h):h=t[10],t[11]!==u?(f=p.jsxs(Qt,{children:[l,p.jsxs(Zt,{className:"w-auto p-2 text-muted-foreground",children:[c,p.jsxs("div",{className:"flex items-center gap-2",children:[u,h]})]})]}),t[11]=u,t[12]=f):f=t[12];const g=f,x="_minimap_"===o;let y,b,w;t[13]!==n?(y=()=>n("_minimap_"),t[13]=n,t[14]=y):y=t[14],t[15]===Symbol.for("react.memo_cache_sentinel")?(b=p.jsx(yc,{className:"w-4 h-4 mr-1"}),t[15]=b):b=t[15],t[16]!==x||t[17]!==y?(w=p.jsxs(v,{variant:"outline",className:"bg-background","aria-selected":x,size:"xs",onClick:y,children:[b,"Mini Map"]}),t[16]=x,t[17]=y,t[18]=w):w=t[18];const k="TB"===o;let N,E,C;t[19]!==n?(N=()=>n("TB"),t[19]=n,t[20]=N):N=t[20],t[21]===Symbol.for("react.memo_cache_sentinel")?(E=p.jsx(ic,{className:"w-4 h-4 mr-1"}),t[21]=E):E=t[21],t[22]!==k||t[23]!==N?(C=p.jsxs(v,{variant:"outline",className:"bg-background","aria-selected":k,size:"xs",onClick:N,children:[E,"Vertical Tree"]}),t[22]=k,t[23]=N,t[24]=C):C=t[24];const S="LR"===o;let j,_,I,A;t[25]!==n?(j=()=>n("LR"),t[25]=n,t[26]=j):j=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(_=p.jsx(ic,{className:"w-4 h-4 mr-1 transform -rotate-90"}),t[27]=_):_=t[27],t[28]!==S||t[29]!==j?(I=p.jsxs(v,{variant:"outline",className:"bg-background","aria-selected":S,size:"xs",onClick:j,children:[_," ","Horizontal Tree"]}),t[28]=S,t[29]=j,t[30]=I):I=t[30],t[31]!==w||t[32]!==C||t[33]!==I?(A=p.jsxs("div",{className:"flex gap-2",children:[w,C,I]}),t[31]=w,t[32]=C,t[33]=I,t[34]=A):A=t[34];const M="_minimap_"!==o&&g;let O;return t[35]!==A||t[36]!==M?(O=p.jsxs(uE,{position:"top-right",className:"flex flex-col items-end gap-2",children:[A,M]}),t[35]=A,t[36]=M,t[37]=O):O=t[37],O}));f_.displayName="GraphToolbar";const p_=r.memo((e=>{const t=m(11),{selection:n,variables:o,onClearSelection:r}=e;if(!n)return null;const a=g_;let s;t[0]!==n.type||t[1]!==n.id||t[2]!==n.source||t[3]!==n.target||t[4]!==o||t[5]!==r?(s=()=>{if("node"===n.type){const e=Object.values(o).filter((e=>e.usedBy.includes(n.id))),t=Object.values(o).filter((e=>e.declaredBy.includes(n.id))),s=(e,t)=>p.jsxs(p.Fragment,{children:[0===e.length&&p.jsx("div",{className:"text-muted-foreground text-sm text-center",children:"--"}),p.jsx("div",{className:"grid grid-cols-5 gap-3 items-center text-sm py-1 flex-1 empty:hidden",children:e.map((e=>p.jsxs(u.Fragment,{children:[p.jsx(m_,{declaredBy:e.declaredBy,name:e.name}),p.jsxs("div",{className:"truncate col-span-2",title:e.value??"",children:[e.value,p.jsxs("span",{className:"ml-1 truncate text-foreground/60 font-mono",children:["(",e.dataType,")"]})]}),p.jsx("div",{className:"truncate col-span-2 gap-1 items-center",children:p.jsx(h_,{skipScroll:!0,onClick:()=>a("in"===t?e.declaredBy[0]:e.usedBy[0],e.name),maxCount:3,cellIds:e.usedBy})})]},e.name)))})]});return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[p.jsx(Xe,{className:"w-5 h-5"}),p.jsx(Qa,{cellId:n.id}),p.jsx("div",{className:"flex-1"}),p.jsx(Fx,{cellId:n.id,children:p.jsx(v,{variant:"ghost",size:"icon",children:p.jsx($l,{className:"w-4 h-4"})})}),p.jsx(v,{variant:"text",size:"icon",onClick:()=>{r()},children:p.jsx(Vt,{className:"w-4 h-4"})})]}),p.jsxs("div",{className:"text-sm flex flex-col py-3 pl-2 pr-4 flex-1 justify-center",children:[p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[p.jsx(Sl,{className:"w-4 h-4"}),"Outputs"]}),s(t,"out")]}),p.jsx("hr",{className:"border-divider my-3"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("span",{className:"flex items-center gap-2 font-semibold",children:[p.jsx(jl,{className:"w-4 h-4"}),"Inputs"]}),s(e,"in")]})]})]})}if("edge"===n.type){const e=Object.values(o).filter((e=>e.declaredBy.includes(n.source)&&e.usedBy.includes(n.target)));return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"font-bold py-2 flex items-center gap-2 border-b px-3",children:[p.jsx(Lc,{className:"w-4 h-4"}),p.jsx(Qa,{cellId:n.source}),p.jsx(_l,{className:"w-4 h-4"}),p.jsx(Qa,{cellId:n.target})]}),p.jsx("div",{className:"grid grid-cols-4 gap-3 max-w-[350px] items-center text-sm p-3 flex-1",children:e.map((e=>p.jsxs(u.Fragment,{children:[p.jsx(m_,{declaredBy:e.declaredBy,name:e.name,onClick:()=>{a(e.declaredBy[0],e.name)}}),p.jsx("div",{className:"truncate text-foreground/60 font-mono",children:e.dataType}),p.jsx("div",{className:"truncate col-span-2",title:e.value??"",children:e.value})]},e.name)))})]})}},t[0]=n.type,t[1]=n.id,t[2]=n.source,t[3]=n.target,t[4]=o,t[5]=r,t[6]=s):s=t[6];const i=s;let l,c;return t[7]!==i?(l=i(),t[7]=i,t[8]=l):l=t[8],t[9]!==l?(c=p.jsx(uE,{position:"bottom-left",className:"max-h-[90%] flex flex-col w-[calc(100%-5rem)]",children:p.jsx("div",{className:"min-h-[100px] shadow-md rounded-md border max-w-[550px] border-primary/40 my-4 min-w-[240px] bg-[var(--slate-1)] text-muted-foreground/80 flex flex-col overflow-y-auto",children:l})}),t[9]=l,t[10]=c):c=t[10],c}));function g_(e,t){const n=Tr(e);n&&ts(n,t)}function v_(){const e=m(7),t=mS(),n=lE(y_),o=lE(x_);let a;e[0]!==t?(a=()=>{t.fitView({duration:100})},e[0]=t,e[1]=a):a=e[1];const s=ns(a,100);let i,l;e[2]!==n||e[3]!==o||e[4]!==s?(i=()=>{n&&o&&s()},l=[n,o,s],e[2]=n,e[3]=o,e[4]=s,e[5]=i,e[6]=l):(i=e[5],l=e[6]),r.useEffect(i,l)}function x_(e){const{height:t}=e;return t}function y_(e){const{width:t}=e;return t}p_.displayName="GraphSelectionPanel";const b_=new class{createEdge(e,t,n){return{type:"smoothstep",pathOptions:{offset:20,borderRadius:100},data:{direction:n},markerEnd:{type:VE.Arrow},id:`${e}-${t}-${n}`,source:e,sourceHandle:n,targetHandle:n,target:t}}createNode(e,t,n){return{id:e,data:{atom:t},width:250,type:"custom",height:i_(H.get(t).code.trim().split("\n").length),position:{x:0,y:n+20}}}createElements(e,t,n,o){let r=0;const a=[],s=[];for(const[l,c]of pa.zip(e,t)){const e=this.createNode(l,c,r);a.push(e),r=e.position.y+(e.height||0)}const i=new Set;for(const l of Object.values(n)){const{declaredBy:e,usedBy:t}=l;for(const n of e)for(const e of t){const t=`${n}-${e}`;i.has(t)||(i.add(t),s.push(this.createEdge(n,e,"inputs"),this.createEdge(n,e,"outputs")))}}return{nodes:a,edges:s}}},w_=e=>{const t=m(37),{cellIds:n,variables:o,cellAtoms:a,children:s}=e;let i;t[0]!==n||t[1]!==a||t[2]!==o?(i=b_.createElements(n,a,o,!1),t[0]=n,t[1]=a,t[2]=o,t[3]=i):i=t[3];const{nodes:l,edges:c}=i;let d;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=[],t[4]=d):d=t[4];const[u,h]=Vj(d),[f,g]=Uj(l),[v,x]=r.useState(),[y,b]=r.useState(),w=r.useRef(!1);v_();const k=lE(k_);let N;t[5]!==g||t[6]!==h?(N=e=>{g(e.nodes),h([])},t[5]=g,t[6]=h,t[7]=N):N=t[7];const E=F(N);let C,S,j,_;t[8]!==E||t[9]!==n||t[10]!==a||t[11]!==o?(C=()=>{w.current?E(b_.createElements(n,a,o,!1)):w.current=!0},S=[n,o,a,E],t[8]=E,t[9]=n,t[10]=a,t[11]=o,t[12]=C,t[13]=S):(C=t[12],S=t[13]),r.useEffect(C,S),t[14]!==v||t[15]!==c||t[16]!==h?(j=()=>{if(v){const e=c.filter((e=>{const{source:t,target:n,data:o}=e;return t===v&&"outputs"===o.direction||n===v&&"inputs"===o.direction}));h(e)}},_=[v,h,c],t[14]=v,t[15]=c,t[16]=h,t[17]=j,t[18]=_):(j=t[17],_=t[18]),r.useEffect(j,_);const I=function(e,t){const n=m(17);let o,r;if(n[0]!==t||n[1]!==e){let o;n[3]!==t?(o=(e,n)=>{const{position:o}=n;return Math.min(e,o.y-t/2-10)},n[3]=t,n[4]=o):o=n[4],r=e.reduce(o,Number.POSITIVE_INFINITY),n[0]=t,n[1]=e,n[2]=r}else r=n[2];const a=r;let s;if(n[5]!==t||n[6]!==e){let o;n[8]!==t?(o=(e,n)=>{const{position:o}=n;return Math.max(e,o.y+t/2+10)},n[8]=t,n[9]=o):o=n[9],s=e.reduce(o,Number.NEGATIVE_INFINITY),n[5]=t,n[6]=e,n[7]=s}else s=n[7];const i=s;let l,c,d;n[10]!==a?(l=[Number.NEGATIVE_INFINITY,a],n[10]=a,n[11]=l):l=n[11];n[12]!==i?(c=[Number.POSITIVE_INFINITY,i],n[12]=i,n[13]=c):c=n[13];n[14]!==l||n[15]!==c?(d=[l,c],n[14]=l,n[15]=c,n[16]=d):d=n[16];return o=d,o}(f,k);let A;t[19]===Symbol.for("react.memo_cache_sentinel")?(A=()=>{x(void 0),b(void 0)},t[19]=A):A=t[19];const M=A;let O;t[20]!==y||t[21]!==o||t[22]!==u||t[23]!==v?(O=()=>y?p.jsx(p_,{selection:{type:"edge",source:y.source,target:y.target},onClearSelection:M,variables:o,edges:u}):v?p.jsx(p_,{selection:{type:"node",id:v},variables:o,edges:u,onClearSelection:M}):null,t[20]=y,t[21]=o,t[22]=u,t[23]=v,t[24]=O):O=t[24];const T=O;let D,P,R,L;return t[25]!==h?(D=(e,t)=>{const n=t.id;x(n),b(void 0),h([])},t[25]=h,t[26]=D):D=t[26],t[27]===Symbol.for("react.memo_cache_sentinel")?(P=(e,t)=>{b(t)},t[27]=P):P=t[27],t[28]!==T?(R=T(),t[28]=T,t[29]=R):R=t[29],t[30]!==f||t[31]!==u||t[32]!==I||t[33]!==D||t[34]!==R||t[35]!==s?(L=p.jsxs(zj,{nodes:f,edges:u,nodeTypes:d_,translateExtent:I,onNodeClick:D,onNodeDoubleClick:N_,onEdgeClick:P,snapToGrid:!0,fitView:!0,elementsSelectable:!0,minZoom:1,maxZoom:1,draggable:!1,panOnScrollMode:RE.Vertical,zoomOnDoubleClick:!1,nodesDraggable:!1,nodesConnectable:!1,nodesFocusable:!1,edgesFocusable:!1,selectNodesOnDrag:!1,panOnDrag:!1,preventScrolling:!1,zoomOnPinch:!1,panOnScroll:!0,autoPanOnNodeDrag:!1,autoPanOnConnect:!1,children:[R,s]}),t[30]=f,t[31]=u,t[32]=I,t[33]=D,t[34]=R,t[35]=s,t[36]=L):L=t[36],L};function k_(e){const{height:t}=e;return t}function N_(e,t){os(t.id,"focus")}var E_="\0";function C_(e,t){e[t]?e[t]++:e[t]=1}function S_(e,t){--e[t]||delete e[t]}function j_(e,t,n,o){var r=""+t,a=""+n;if(!e&&r>a){var s=r;r=a,a=s}return r+""+a+""+(void 0===o?"\0":o)}function __(e,t){return j_(e,t.v,t.w,t.name)}var I_=class{constructor(e){n(this,"_isDirected",!0),n(this,"_isMultigraph",!1),n(this,"_isCompound",!1),n(this,"_label"),n(this,"_defaultNodeLabelFn",(()=>{})),n(this,"_defaultEdgeLabelFn",(()=>{})),n(this,"_nodes",{}),n(this,"_in",{}),n(this,"_preds",{}),n(this,"_out",{}),n(this,"_sucs",{}),n(this,"_edgeObjs",{}),n(this,"_edgeLabels",{}),n(this,"_nodeCount",0),n(this,"_edgeCount",0),n(this,"_parent"),n(this,"_children"),e&&(this._isDirected=!Object.hasOwn(e,"directed")||e.directed,this._isMultigraph=!!Object.hasOwn(e,"multigraph")&&e.multigraph,this._isCompound=!!Object.hasOwn(e,"compound")&&e.compound),this._isCompound&&(this._parent={},this._children={},this._children[E_]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return this._defaultNodeLabelFn=e,"function"!=typeof e&&(this._defaultNodeLabelFn=()=>e),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._in[t]).length))}sinks(){var e=this;return this.nodes().filter((t=>0===Object.keys(e._out[t]).length))}setNodes(e,t){var n=arguments,o=this;return e.forEach((function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this}setNode(e,t){return Object.hasOwn(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=E_,this._children[e]={},this._children[E_][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return Object.hasOwn(this._nodes,e)}removeNode(e){var t=this;if(Object.hasOwn(this._nodes,e)){var n=e=>t.removeEdge(t._edgeObjs[e]);delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],this.children(e).forEach((function(e){t.setParent(e)})),delete this._children[e]),Object.keys(this._in[e]).forEach(n),delete this._in[e],delete this._preds[e],Object.keys(this._out[e]).forEach(n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(void 0===t)t=E_;else{for(var n=t+="";void 0!==n;n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var t=this._parent[e];if(t!==E_)return t}}children(e=E_){if(this._isCompound){var t=this._children[e];if(t)return Object.keys(t)}else{if(e===E_)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var t=this._preds[e];if(t)return Object.keys(t)}successors(e){var t=this._sucs[e];if(t)return Object.keys(t)}neighbors(e){var t=this.predecessors(e);if(t){const o=new Set(t);for(var n of this.successors(e))o.add(n);return Array.from(o.values())}}isLeaf(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length}filterNodes(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;Object.entries(this._nodes).forEach((function([n,o]){e(n)&&t.setNode(n,o)})),Object.values(this._edgeObjs).forEach((function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};function r(e){var a=n.parent(e);return void 0===a||t.hasNode(a)?(o[e]=a,a):a in o?o[a]:r(a)}return this._isCompound&&t.nodes().forEach((e=>t.setParent(e,r(e)))),t}setDefaultEdgeLabel(e){return this._defaultEdgeLabelFn=e,"function"!=typeof e&&(this._defaultEdgeLabelFn=()=>e),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(e,t){var n=this,o=arguments;return e.reduce((function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this}setEdge(){var e,t,n,o,r=!1,a=arguments[0];"object"==typeof a&&null!==a&&"v"in a?(e=a.v,t=a.w,n=a.name,2===arguments.length&&(o=arguments[1],r=!0)):(e=a,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,void 0!==n&&(n=""+n);var s=j_(this._isDirected,e,t,n);if(Object.hasOwn(this._edgeLabels,s))return r&&(this._edgeLabels[s]=o),this;if(void 0!==n&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=r?o:this._defaultEdgeLabelFn(e,t,n);var i=function(e,t,n,o){var r=""+t,a=""+n;if(!e&&r>a){var s=r;r=a,a=s}var i={v:r,w:a};o&&(i.name=o);return i}(this._isDirected,e,t,n);return e=i.v,t=i.w,Object.freeze(i),this._edgeObjs[s]=i,C_(this._preds[t],e),C_(this._sucs[e],t),this._in[t][s]=i,this._out[e][s]=i,this._edgeCount++,this}edge(e,t,n){var o=1===arguments.length?__(this._isDirected,arguments[0]):j_(this._isDirected,e,t,n);return this._edgeLabels[o]}edgeAsObj(){const e=this.edge(...arguments);return"object"!=typeof e?{label:e}:e}hasEdge(e,t,n){var o=1===arguments.length?__(this._isDirected,arguments[0]):j_(this._isDirected,e,t,n);return Object.hasOwn(this._edgeLabels,o)}removeEdge(e,t,n){var o=1===arguments.length?__(this._isDirected,arguments[0]):j_(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],S_(this._preds[t],e),S_(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this}inEdges(e,t){var n=this._in[e];if(n){var o=Object.values(n);return t?o.filter((e=>e.v===t)):o}}outEdges(e,t){var n=this._out[e];if(n){var o=Object.values(n);return t?o.filter((e=>e.w===t)):o}}nodeEdges(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},A_={Graph:I_,version:"2.2.4"},M_=I_,O_={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:T_(e),edges:D_(e)};void 0!==e.graph()&&(t.value=structuredClone(e.graph()));return t},read:function(e){var t=new M_(e.options).setGraph(e.value);return e.nodes.forEach((function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),e.edges.forEach((function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}};function T_(e){return e.nodes().map((function(t){var n=e.node(t),o=e.parent(t),r={v:t};return void 0!==n&&(r.value=n),void 0!==o&&(r.parent=o),r}))}function D_(e){return e.edges().map((function(t){var n=e.edge(t),o={v:t.v,w:t.w};return void 0!==t.name&&(o.name=t.name),void 0!==n&&(o.value=n),o}))}var P_=function(e){var t,n={},o=[];function r(o){Object.hasOwn(n,o)||(n[o]=!0,t.push(o),e.successors(o).forEach(r),e.predecessors(o).forEach(r))}return e.nodes().forEach((function(e){t=[],r(e),t.length&&o.push(t)})),o};var R_=class{constructor(){n(this,"_arr",[]),n(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map((function(e){return e.key}))}has(e){return Object.hasOwn(this._keyIndices,e)}priority(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority}min(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key}add(e,t){var n=this._keyIndices;if(e=String(e),!Object.hasOwn(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key}decrease(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)}_heapify(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))}_decrease(e){for(var t,n=this._arr,o=n[e].priority;0!==e&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t}_swap(e,t){var n=this._arr,o=this._keyIndices,r=n[e],a=n[t];n[e]=a,n[t]=r,o[a.key]=e,o[r.key]=t}},F_=R_,L_=function(e,t,n,o){return function(e,t,n,o){var r,a,s={},i=new F_,l=function(e){var t=e.v!==r?e.v:e.w,o=s[t],l=n(e),c=a.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);c<o.distance&&(o.distance=c,o.predecessor=r,i.decrease(t,c))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;s[e]={distance:n},i.add(e,n)}));for(;i.size()>0&&(r=i.removeMin(),(a=s[r]).distance!==Number.POSITIVE_INFINITY);)o(r).forEach(l);return s}(e,String(t),n||z_,o||function(t){return e.outEdges(t)})},z_=()=>1;var B_=L_,U_=function(e,t,n){return e.nodes().reduce((function(o,r){return o[r]=B_(e,r,t,n),o}),{})};var V_=function(e){var t=0,n=[],o={},r=[];function a(s){var i=o[s]={onStack:!0,lowlink:t,index:t++};if(n.push(s),e.successors(s).forEach((function(e){Object.hasOwn(o,e)?o[e].onStack&&(i.lowlink=Math.min(i.lowlink,o[e].index)):(a(e),i.lowlink=Math.min(i.lowlink,o[e].lowlink))})),i.lowlink===i.index){var l,c=[];do{l=n.pop(),o[l].onStack=!1,c.push(l)}while(s!==l);r.push(c)}}return e.nodes().forEach((function(e){Object.hasOwn(o,e)||a(e)})),r};var $_=V_,G_=function(e){return $_(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))};var H_=function(e,t,n){return function(e,t,n){var o={},r=e.nodes();return r.forEach((function(e){o[e]={},o[e][e]={distance:0},r.forEach((function(t){e!==t&&(o[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var r=n.v===e?n.w:n.v,a=t(n);o[e][r]={distance:a,predecessor:e}}))})),r.forEach((function(e){var t=o[e];r.forEach((function(n){var a=o[n];r.forEach((function(n){var o=a[e],r=t[n],s=a[n],i=o.distance+r.distance;i<s.distance&&(s.distance=i,s.predecessor=r.predecessor)}))}))})),o}(e,t||W_,n||function(t){return e.outEdges(t)})},W_=()=>1;function q_(e){var t={},n={},o=[];if(e.sinks().forEach((function r(a){if(Object.hasOwn(n,a))throw new Y_;Object.hasOwn(t,a)||(n[a]=!0,t[a]=!0,e.predecessors(a).forEach(r),delete n[a],o.push(a))})),Object.keys(t).length!==e.nodeCount())throw new Y_;return o}class Y_ extends Error{constructor(){super(...arguments)}}var K_=q_;q_.CycleException=Y_;var J_=K_;var X_=function(e,t,n){Array.isArray(t)||(t=[t]);var o=e.isDirected()?t=>e.successors(t):t=>e.neighbors(t),r="post"===n?Z_:Q_,a=[],s={};return t.forEach((t=>{if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);r(t,o,s,a)})),a};function Z_(e,t,n,o){for(var r=[[e,!1]];r.length>0;){var a=r.pop();a[1]?o.push(a[0]):Object.hasOwn(n,a[0])||(n[a[0]]=!0,r.push([a[0],!0]),eI(t(a[0]),(e=>r.push([e,!1]))))}}function Q_(e,t,n,o){for(var r=[e];r.length>0;){var a=r.pop();Object.hasOwn(n,a)||(n[a]=!0,o.push(a),eI(t(a),(e=>r.push(e))))}}function eI(e,t){for(var n=e.length;n--;)t(e[n],n,e);return e}var tI=X_;var nI=X_;var oI=I_,rI=R_;var aI={Graph:A_.Graph,json:O_,alg:{components:P_,dijkstra:L_,dijkstraAll:U_,findCycles:G_,floydWarshall:H_,isAcyclic:function(e){try{J_(e)}catch(t){if(t instanceof J_.CycleException)return!1;throw t}return!0},postorder:function(e,t){return tI(e,t,"post")},preorder:function(e,t){return nI(e,t,"pre")},prim:function(e,t){var n,o=new oI,r={},a=new rI;function s(e){var o=e.v===n?e.w:e.v,s=a.priority(o);if(void 0!==s){var i=t(e);i<s&&(r[o]=n,a.decrease(o,i))}}if(0===e.nodeCount())return o;e.nodes().forEach((function(e){a.add(e,Number.POSITIVE_INFINITY),o.setNode(e)})),a.decrease(e.nodes()[0],0);var i=!1;for(;a.size()>0;){if(n=a.removeMin(),Object.hasOwn(r,n))o.setEdge(n,r[n]);else{if(i)throw new Error("Input graph is not connected: "+e);i=!0}e.nodeEdges(n).forEach(s)}return o},tarjan:V_,topsort:K_},version:A_.version};function sI(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function iI(e,t){if("_next"!==e&&"_prev"!==e)return t}let lI=aI.Graph,cI=class{constructor(){let e={};e._next=e._prev=e,this._sentinel=e}dequeue(){let e=this._sentinel,t=e._prev;if(t!==e)return sI(t),t}enqueue(e){let t=this._sentinel;e._prev&&e._next&&sI(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t}toString(){let e=[],t=this._sentinel,n=t._prev;for(;n!==t;)e.push(JSON.stringify(n,iI)),n=n._prev;return"["+e.join(", ")+"]"}};var dI=function(e,t){if(e.nodeCount()<=1)return[];let n=function(e,t){let n=new lI,o=0,r=0;e.nodes().forEach((e=>{n.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((e=>{let a=n.edge(e.v,e.w)||0,s=t(e),i=a+s;n.setEdge(e.v,e.w,i),r=Math.max(r,n.node(e.v).out+=s),o=Math.max(o,n.node(e.w).in+=s)}));let a=function(e){const t=[];for(let n=0;n<e;n++)t.push(n);return t}(r+o+3).map((()=>new cI)),s=o+1;return n.nodes().forEach((e=>{mI(a,s,n.node(e))})),{graph:n,buckets:a,zeroIdx:s}}(e,t||uI);return function(e,t,n){let o,r=[],a=t[t.length-1],s=t[0];for(;e.nodeCount();){for(;o=s.dequeue();)hI(e,t,n,o);for(;o=a.dequeue();)hI(e,t,n,o);if(e.nodeCount())for(let a=t.length-2;a>0;--a)if(o=t[a].dequeue(),o){r=r.concat(hI(e,t,n,o,!0));break}}return r}(n.graph,n.buckets,n.zeroIdx).flatMap((t=>e.outEdges(t.v,t.w)))};let uI=()=>1;function hI(e,t,n,o,r){let a=r?[]:void 0;return e.inEdges(o.v).forEach((o=>{let s=e.edge(o),i=e.node(o.v);r&&a.push({v:o.v,w:o.w}),i.out-=s,mI(t,n,i)})),e.outEdges(o.v).forEach((o=>{let r=e.edge(o),a=o.w,s=e.node(a);s.in-=r,mI(t,n,s)})),e.removeNode(o.v),a}function mI(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}let fI=aI.Graph;var pI={addBorderNode:function(e,t,n,o){let r={width:0,height:0};arguments.length>=4&&(r.rank=n,r.order=o);return gI(e,"border",r,t)},addDummyNode:gI,applyWithChunking:xI,asNonCompoundGraph:function(e){let t=new fI({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((n=>{e.children(n).length||t.setNode(n,e.node(n))})),e.edges().forEach((n=>{t.setEdge(n,e.edge(n))})),t},buildLayerMatrix:function(e){let t=kI(yI(e)+1).map((()=>[]));return e.nodes().forEach((n=>{let o=e.node(n),r=o.rank;void 0!==r&&(t[r][o.order]=n)})),t},intersectRect:function(e,t){let n,o,r=e.x,a=e.y,s=t.x-r,i=t.y-a,l=e.width/2,c=e.height/2;if(!s&&!i)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(i)*l>Math.abs(s)*c?(i<0&&(c=-c),n=c*s/i,o=c):(s<0&&(l=-l),n=l,o=l*i/s);return{x:r+n,y:a+o}},mapValues:function(e,t){let n=t;"string"==typeof t&&(n=e=>e[t]);return Object.entries(e).reduce(((e,[t,o])=>(e[t]=n(o,t),e)),{})},maxRank:yI,normalizeRanks:function(e){let t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MAX_VALUE:n})),n=xI(Math.min,t);e.nodes().forEach((t=>{let o=e.node(t);Object.hasOwn(o,"rank")&&(o.rank-=n)}))},notime:function(e,t){return t()},partition:function(e,t){let n={lhs:[],rhs:[]};return e.forEach((e=>{t(e)?n.lhs.push(e):n.rhs.push(e)})),n},pick:function(e,t){const n={};for(const o of t)void 0!==e[o]&&(n[o]=e[o]);return n},predecessorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.inEdges(t).forEach((t=>{n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return NI(e.nodes(),t)},range:kI,removeEmptyRanks:function(e){let t=e.nodes().map((t=>e.node(t).rank)),n=xI(Math.min,t),o=[];e.nodes().forEach((t=>{let r=e.node(t).rank-n;o[r]||(o[r]=[]),o[r].push(t)}));let r=0,a=e.graph().nodeRankFactor;Array.from(o).forEach(((t,n)=>{void 0===t&&n%a!=0?--r:void 0!==t&&r&&t.forEach((t=>e.node(t).rank+=r))}))},simplify:function(e){let t=(new fI).setGraph(e.graph());return e.nodes().forEach((n=>t.setNode(n,e.node(n)))),e.edges().forEach((n=>{let o=t.edge(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})})),t},successorWeights:function(e){let t=e.nodes().map((t=>{let n={};return e.outEdges(t).forEach((t=>{n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return NI(e.nodes(),t)},time:function(e,t){let n=Date.now();try{return t()}finally{console.log(e+" time: "+(Date.now()-n)+"ms")}},uniqueId:wI,zipObject:NI};function gI(e,t,n,o){let r;do{r=wI(o)}while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r}const vI=65535;function xI(e,t){if(t.length>vI){const n=function(e,t=vI){const n=[];for(let o=0;o<e.length;o+=t){const r=e.slice(o,o+t);n.push(r)}return n}(t);return e.apply(null,n.map((t=>e.apply(null,t))))}return e.apply(null,t)}function yI(e){const t=e.nodes().map((t=>{let n=e.node(t).rank;return void 0===n?Number.MIN_VALUE:n}));return xI(Math.max,t)}let bI=0;function wI(e){var t=++bI;return toString(e)+t}function kI(e,t,n=1){null==t&&(t=e,e=0);let o=e=>e<t;n<0&&(o=e=>t<e);const r=[];for(let a=e;o(a);a+=n)r.push(a);return r}function NI(e,t){return e.reduce(((e,n,o)=>(e[n]=t[o],e)),{})}let EI=dI,CI=pI.uniqueId;var SI={run:function(e){("greedy"===e.graph().acyclicer?EI(e,(t=e,e=>t.edge(e).weight)):function(e){let t=[],n={},o={};function r(a){Object.hasOwn(o,a)||(o[a]=!0,n[a]=!0,e.outEdges(a).forEach((e=>{Object.hasOwn(n,e.w)?t.push(e):r(e.w)})),delete n[a])}return e.nodes().forEach(r),t}(e)).forEach((t=>{let n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,CI("rev"))}));var t},undo:function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.reversed){e.removeEdge(t);let o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}}))}};let jI=pI;var _I={run:function(e){e.graph().dummyChains=[],e.edges().forEach((t=>function(e,t){let n,o,r,a=t.v,s=e.node(a).rank,i=t.w,l=e.node(i).rank,c=t.name,d=e.edge(t),u=d.labelRank;if(l===s+1)return;for(e.removeEdge(t),r=0,++s;s<l;++r,++s)d.points=[],o={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},n=jI.addDummyNode(e,"edge",o,"_d"),s===u&&(o.width=d.width,o.height=d.height,o.dummy="edge-label",o.labelpos=d.labelpos),e.setEdge(a,n,{weight:d.weight},c),0===r&&e.graph().dummyChains.push(n),a=n;e.setEdge(a,i,{weight:d.weight},c)}(e,t)))},undo:function(e){e.graph().dummyChains.forEach((t=>{let n,o=e.node(t),r=o.edgeLabel;for(e.setEdge(o.edgeObj,r);o.dummy;)n=e.successors(t)[0],e.removeNode(t),r.points.push({x:o.x,y:o.y}),"edge-label"===o.dummy&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),t=n,o=e.node(t)}))}};const{applyWithChunking:II}=pI;var AI={longestPath:function(e){var t={};e.sources().forEach((function n(o){var r=e.node(o);if(Object.hasOwn(t,o))return r.rank;t[o]=!0;let a=e.outEdges(o).map((t=>null==t?Number.POSITIVE_INFINITY:n(t.w)-e.edge(t).minlen));var s=II(Math.min,a);return s===Number.POSITIVE_INFINITY&&(s=0),r.rank=s}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}};var MI=aI.Graph,OI=AI.slack,TI=function(e){var t,n,o=new MI({directed:!1}),r=e.nodes()[0],a=e.nodeCount();o.setNode(r,{});for(;DI(o,e)<a;)t=PI(o,e),n=o.hasNode(t.v)?OI(e,t):-OI(e,t),RI(o,e,n);return o};function DI(e,t){return e.nodes().forEach((function n(o){t.nodeEdges(o).forEach((r=>{var a=r.v,s=o===a?r.w:a;e.hasNode(s)||OI(t,r)||(e.setNode(s,{}),e.setEdge(o,s,{}),n(s))}))})),e.nodeCount()}function PI(e,t){return t.edges().reduce(((n,o)=>{let r=Number.POSITIVE_INFINITY;return e.hasNode(o.v)!==e.hasNode(o.w)&&(r=OI(t,o)),r<n[0]?[r,o]:n}),[Number.POSITIVE_INFINITY,null])[1]}function RI(e,t,n){e.nodes().forEach((e=>t.node(e).rank+=n))}var FI=TI,LI=AI.slack,zI=AI.longestPath,BI=aI.alg.preorder,UI=aI.alg.postorder,VI=pI.simplify,$I=GI;function GI(e){e=VI(e),zI(e);var t,n=FI(e);for(qI(n),HI(n,e);t=KI(n);)XI(n,e,t,JI(n,e,t))}function HI(e,t){var n=UI(e,e.nodes());(n=n.slice(0,n.length-1)).forEach((n=>function(e,t,n){var o=e.node(n),r=o.parent;e.edge(n,r).cutvalue=WI(e,t,n)}(e,t,n)))}function WI(e,t,n){var o=e.node(n).parent,r=!0,a=t.edge(n,o),s=0;return a||(r=!1,a=t.edge(o,n)),s=a.weight,t.nodeEdges(n).forEach((a=>{var i,l,c=a.v===n,d=c?a.w:a.v;if(d!==o){var u=c===r,h=t.edge(a).weight;if(s+=u?h:-h,i=n,l=d,e.hasEdge(i,l)){var m=e.edge(n,d).cutvalue;s+=u?-m:m}}})),s}function qI(e,t){arguments.length<2&&(t=e.nodes()[0]),YI(e,{},1,t)}function YI(e,t,n,o,r){var a=n,s=e.node(o);return t[o]=!0,e.neighbors(o).forEach((r=>{Object.hasOwn(t,r)||(n=YI(e,t,n,r,o))})),s.low=a,s.lim=n++,r?s.parent=r:delete s.parent,n}function KI(e){return e.edges().find((t=>e.edge(t).cutvalue<0))}function JI(e,t,n){var o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);var a=e.node(o),s=e.node(r),i=a,l=!1;return a.lim>s.lim&&(i=s,l=!0),t.edges().filter((t=>l===ZI(e,e.node(t.v),i)&&l!==ZI(e,e.node(t.w),i))).reduce(((e,n)=>LI(t,n)<LI(t,e)?n:e))}function XI(e,t,n,o){var r=n.v,a=n.w;e.removeEdge(r,a),e.setEdge(o.v,o.w,{}),qI(e),HI(e,t),function(e,t){var n=e.nodes().find((e=>!t.node(e).parent)),o=BI(e,n);(o=o.slice(1)).forEach((n=>{var o=e.node(n).parent,r=t.edge(n,o),a=!1;r||(r=t.edge(o,n),a=!0),t.node(n).rank=t.node(o).rank+(a?r.minlen:-r.minlen)}))}(e,t)}function ZI(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}GI.initLowLimValues=qI,GI.initCutValues=HI,GI.calcCutValue=WI,GI.leaveEdge=KI,GI.enterEdge=JI,GI.exchangeEdges=XI;var QI=AI.longestPath,eA=TI,tA=$I,nA=function(e){switch(e.graph().ranker){case"network-simplex":default:rA(e);break;case"tight-tree":!function(e){QI(e),eA(e)}(e);break;case"longest-path":oA(e)}};var oA=QI;function rA(e){tA(e)}let aA=pI;function sA(e,t,n,o,r,a,s){let i=e.children(s);if(!i.length)return void(s!==t&&e.setEdge(t,s,{weight:0,minlen:n}));let l=aA.addBorderNode(e,"_bt"),c=aA.addBorderNode(e,"_bb"),d=e.node(s);e.setParent(l,s),d.borderTop=l,e.setParent(c,s),d.borderBottom=c,i.forEach((i=>{sA(e,t,n,o,r,a,i);let d=e.node(i),u=d.borderTop?d.borderTop:i,h=d.borderBottom?d.borderBottom:i,m=d.borderTop?o:2*o,f=u!==h?1:r-a[s]+1;e.setEdge(l,u,{weight:m,minlen:f,nestingEdge:!0}),e.setEdge(h,c,{weight:m,minlen:f,nestingEdge:!0})})),e.parent(s)||e.setEdge(t,l,{weight:0,minlen:r+a[s]})}let iA=pI;function lA(e,t,n,o,r,a){let s={width:0,height:0,rank:a,borderType:t},i=r[t][a-1],l=iA.addDummyNode(e,"border",s,n);r[t][a]=l,e.setParent(l,o),i&&e.setEdge(i,l,{weight:1})}function cA(e){e.nodes().forEach((t=>dA(e.node(t)))),e.edges().forEach((t=>dA(e.edge(t))))}function dA(e){let t=e.width;e.width=e.height,e.height=t}function uA(e){e.y=-e.y}function hA(e){let t=e.x;e.x=e.y,e.y=t}let mA=pI;let fA=pI.zipObject;function pA(e,t,n){let o=fA(n,n.map(((e,t)=>t))),r=t.flatMap((t=>e.outEdges(t).map((t=>({pos:o[t.w],weight:e.edge(t).weight}))).sort(((e,t)=>e.pos-t.pos)))),a=1;for(;a<n.length;)a<<=1;let s=2*a-1;a-=1;let i=new Array(s).fill(0),l=0;return r.forEach((e=>{let t=e.pos+a;i[t]+=e.weight;let n=0;for(;t>0;)t%2&&(n+=i[t+1]),t=t-1>>1,i[t]+=e.weight;l+=e.weight*n})),l}let gA=pI;let vA=pI;function xA(e,t,n){let o;for(;t.length&&(o=t[t.length-1]).i<=n;)t.pop(),e.push(o.vs),n++;return n}let yA=function(e,t=[]){return t.map((t=>{let n=e.inEdges(t);if(n.length){let o=n.reduce(((t,n)=>{let o=e.edge(n),r=e.node(n.v);return{sum:t.sum+o.weight*r.order,weight:t.weight+o.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))},bA=function(e,t){let n={};return e.forEach(((e,t)=>{let o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};void 0!==e.barycenter&&(o.barycenter=e.barycenter,o.weight=e.weight)})),t.edges().forEach((e=>{let t=n[e.v],o=n[e.w];void 0!==t&&void 0!==o&&(o.indegree++,t.out.push(n[e.w]))})),function(e){let t=[];function n(e){return t=>{t.merged||(void 0===t.barycenter||void 0===e.barycenter||t.barycenter>=e.barycenter)&&function(e,t){let n=0,o=0;e.weight&&(n+=e.barycenter*e.weight,o+=e.weight);t.weight&&(n+=t.barycenter*t.weight,o+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/o,e.weight=o,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return n=>{n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){let r=e.pop();t.push(r),r.in.reverse().forEach(n(r)),r.out.forEach(o(r))}return t.filter((e=>!e.merged)).map((e=>gA.pick(e,["vs","i","barycenter","weight"])))}(Object.values(n).filter((e=>!e.indegree)))},wA=function(e,t){let n=vA.partition(e,(e=>Object.hasOwn(e,"barycenter"))),o=n.lhs,r=n.rhs.sort(((e,t)=>t.i-e.i)),a=[],s=0,i=0,l=0;o.sort((c=!!t,(e,t)=>e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:c?t.i-e.i:e.i-t.i)),l=xA(a,r,l),o.forEach((e=>{l+=e.vs.length,a.push(e.vs),s+=e.barycenter*e.weight,i+=e.weight,l=xA(a,r,l)}));var c;let d={vs:a.flat(!0)};i&&(d.barycenter=s/i,d.weight=i);return d};var kA=function e(t,n,o,r){let a=t.children(n),s=t.node(n),i=s?s.borderLeft:void 0,l=s?s.borderRight:void 0,c={};i&&(a=a.filter((e=>e!==i&&e!==l)));let d=yA(t,a);d.forEach((n=>{if(t.children(n.v).length){let i=e(t,n.v,o,r);c[n.v]=i,Object.hasOwn(i,"barycenter")&&(s=i,void 0!==(a=n).barycenter?(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight):(a.barycenter=s.barycenter,a.weight=s.weight))}var a,s}));let u=bA(d,o);!function(e,t){e.forEach((e=>{e.vs=e.vs.flatMap((e=>t[e]?t[e].vs:e))}))}(u,c);let h=wA(u,r);if(i&&(h.vs=[i,h.vs,l].flat(!0),t.predecessors(i).length)){let e=t.node(t.predecessors(i)[0]),n=t.node(t.predecessors(l)[0]);Object.hasOwn(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+e.order+n.order)/(h.weight+2),h.weight+=2}return h};let NA=aI.Graph,EA=pI;let CA=function(e){let t={},n=e.nodes().filter((t=>!e.children(t).length)),o=n.map((t=>e.node(t).rank)),r=mA.applyWithChunking(Math.max,o),a=mA.range(r+1).map((()=>[]));return n.sort(((t,n)=>e.node(t).rank-e.node(n).rank)).forEach((function n(o){if(t[o])return;t[o]=!0;let r=e.node(o);a[r.rank].push(o),e.successors(o).forEach(n)})),a},SA=function(e,t){let n=0;for(let o=1;o<t.length;++o)n+=pA(e,t[o-1],t[o]);return n},jA=kA,_A=function(e,t,n){let o=function(e){var t;for(;e.hasNode(t=EA.uniqueId("_root")););return t}(e),r=new NA({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((t=>e.node(t)));return e.nodes().forEach((a=>{let s=e.node(a),i=e.parent(a);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(r.setNode(a),r.setParent(a,i||o),e[n](a).forEach((t=>{let n=t.v===a?t.w:t.v,o=r.edge(n,a),s=void 0!==o?o.weight:0;r.setEdge(n,a,{weight:e.edge(t).weight+s})})),Object.hasOwn(s,"minRank")&&r.setNode(a,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),r},IA=function(e,t,n){let o,r={};n.forEach((n=>{let a,s,i=e.parent(n);for(;i;){if(a=e.parent(i),a?(s=r[a],r[a]=i):(s=o,o=i),s&&s!==i)return void t.setEdge(s,i);i=a}}))},AA=aI.Graph,MA=pI;var OA=function e(t,n){if(n&&"function"==typeof n.customOrder)return void n.customOrder(t,e);let o=MA.maxRank(t),r=TA(t,MA.range(1,o+1),"inEdges"),a=TA(t,MA.range(o-1,-1,-1),"outEdges"),s=CA(t);if(PA(t,s),n&&n.disableOptimalOrderHeuristic)return;let i,l=Number.POSITIVE_INFINITY;for(let c=0,d=0;d<4;++c,++d){DA(c%2?r:a,c%4>=2),s=MA.buildLayerMatrix(t);let e=SA(t,s);e<l&&(d=0,i=Object.assign({},s),l=e)}PA(t,i)};function TA(e,t,n){return t.map((function(t){return _A(e,t,n)}))}function DA(e,t){let n=new AA;e.forEach((function(e){let o=e.graph().root,r=jA(e,o,n,t);r.vs.forEach(((t,n)=>e.node(t).order=n)),IA(e,n,r.vs)}))}function PA(e,t){Object.values(t).forEach((t=>t.forEach(((t,n)=>e.node(t).order=n))))}let RA=aI.Graph,FA=pI;var LA=function(e){let t,n=FA.buildLayerMatrix(e),o=Object.assign(zA(e,n),BA(e,n)),r={};["u","d"].forEach((a=>{t="u"===a?n:Object.values(n).reverse(),["l","r"].forEach((n=>{"r"===n&&(t=t.map((e=>Object.values(e).reverse())));let s=("u"===a?e.predecessors:e.successors).bind(e),i=$A(e,t,o,s),l=GA(e,t,i.root,i.align,"r"===n);"r"===n&&(l=FA.mapValues(l,(e=>-e))),r[a+n]=l}))}));let a=HA(e,r);return WA(r,a),qA(r,e.graph().align)};function zA(e,t){let n={};return t.length&&t.reduce((function(t,o){let r=0,a=0,s=t.length,i=o[o.length-1];return o.forEach(((t,l)=>{let c=function(e,t){if(e.node(t).dummy)return e.predecessors(t).find((t=>e.node(t).dummy))}(e,t),d=c?e.node(c).order:s;(c||t===i)&&(o.slice(a,l+1).forEach((t=>{e.predecessors(t).forEach((o=>{let a=e.node(o),s=a.order;!(s<r||d<s)||a.dummy&&e.node(t).dummy||UA(n,o,t)}))})),a=l+1,r=d)})),o})),n}function BA(e,t){let n={};function o(t,o,r,a,s){let i;FA.range(o,r).forEach((o=>{i=t[o],e.node(i).dummy&&e.predecessors(i).forEach((t=>{let o=e.node(t);o.dummy&&(o.order<a||o.order>s)&&UA(n,t,i)}))}))}return t.length&&t.reduce((function(t,n){let r,a=-1,s=0;return n.forEach(((i,l)=>{if("border"===e.node(i).dummy){let t=e.predecessors(i);t.length&&(r=e.node(t[0]).order,o(n,s,l,a,r),s=l,a=r)}o(n,s,n.length,r,t.length)})),n})),n}function UA(e,t,n){if(t>n){let e=t;t=n,n=e}let o=e[t];o||(e[t]=o={}),o[n]=!0}function VA(e,t,n){if(t>n){let e=t;t=n,n=e}return!!e[t]&&Object.hasOwn(e[t],n)}function $A(e,t,n,o){let r={},a={},s={};return t.forEach((e=>{e.forEach(((e,t)=>{r[e]=e,a[e]=e,s[e]=t}))})),t.forEach((e=>{let t=-1;e.forEach((e=>{let i=o(e);if(i.length){i=i.sort(((e,t)=>s[e]-s[t]));let o=(i.length-1)/2;for(let l=Math.floor(o),c=Math.ceil(o);l<=c;++l){let o=i[l];a[e]===e&&t<s[o]&&!VA(n,e,o)&&(a[o]=e,a[e]=r[e]=r[o],t=s[o])}}}))})),{root:r,align:a}}function GA(e,t,n,o,r){let a={},s=function(e,t,n,o){let r=new RA,a=e.graph(),s=function(e,t,n){return(o,r,a)=>{let s,i=o.node(r),l=o.node(a),c=0;if(c+=i.width/2,Object.hasOwn(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":s=-i.width/2;break;case"r":s=i.width/2}if(s&&(c+=n?s:-s),s=0,c+=(i.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,Object.hasOwn(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":s=l.width/2;break;case"r":s=-l.width/2}return s&&(c+=n?s:-s),s=0,c}}(a.nodesep,a.edgesep,o);return t.forEach((t=>{let o;t.forEach((t=>{let a=n[t];if(r.setNode(a),o){var i=n[o],l=r.edge(i,a);r.setEdge(i,a,Math.max(s(e,t,o),l||0))}o=t}))})),r}(e,t,n,r),i=r?"borderLeft":"borderRight";function l(e,t){let n=s.nodes(),o=n.pop(),r={};for(;o;)r[o]?e(o):(r[o]=!0,n.push(o),n=n.concat(t(o))),o=n.pop()}return l((function(e){a[e]=s.inEdges(e).reduce(((e,t)=>Math.max(e,a[t.v]+s.edge(t))),0)}),s.predecessors.bind(s)),l((function(t){let n=s.outEdges(t).reduce(((e,t)=>Math.min(e,a[t.w]-s.edge(t))),Number.POSITIVE_INFINITY),o=e.node(t);n!==Number.POSITIVE_INFINITY&&o.borderType!==i&&(a[t]=Math.max(a[t],n))}),s.successors.bind(s)),Object.keys(o).forEach((e=>a[e]=a[n[e]])),a}function HA(e,t){return Object.values(t).reduce(((t,n)=>{let o=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;Object.entries(n).forEach((([t,n])=>{let a=function(e,t){return e.node(t).width}(e,t)/2;o=Math.max(n+a,o),r=Math.min(n-a,r)}));const a=o-r;return a<t[0]&&(t=[a,n]),t}),[Number.POSITIVE_INFINITY,null])[1]}function WA(e,t){let n=Object.values(t),o=FA.applyWithChunking(Math.min,n),r=FA.applyWithChunking(Math.max,n);["u","d"].forEach((n=>{["l","r"].forEach((a=>{let s=n+a,i=e[s];if(i===t)return;let l=Object.values(i),c=o-FA.applyWithChunking(Math.min,l);"l"!==a&&(c=r-FA.applyWithChunking(Math.max,l)),c&&(e[s]=FA.mapValues(i,(e=>e+c)))}))}))}function qA(e,t){return FA.mapValues(e.ul,((n,o)=>{if(t)return e[t.toLowerCase()][o];{let t=Object.values(e).map((e=>e[o])).sort(((e,t)=>e-t));return(t[1]+t[2])/2}}))}let YA=pI,KA=LA;let JA=SI,XA=_I,ZA=nA,QA=pI.normalizeRanks,eM=function(e){let t=function(e){let t={},n=0;function o(r){let a=n;e.children(r).forEach(o),t[r]={low:a,lim:n++}}return e.children().forEach(o),t}(e);e.graph().dummyChains.forEach((n=>{let o=e.node(n),r=o.edgeObj,a=function(e,t,n,o){let r,a,s=[],i=[],l=Math.min(t[n].low,t[o].low),c=Math.max(t[n].lim,t[o].lim);r=n;do{r=e.parent(r),s.push(r)}while(r&&(t[r].low>l||c>t[r].lim));a=r,r=o;for(;(r=e.parent(r))!==a;)i.push(r);return{path:s.concat(i.reverse()),lca:a}}(e,t,r.v,r.w),s=a.path,i=a.lca,l=0,c=s[l],d=!0;for(;n!==r.w;){if(o=e.node(n),d){for(;(c=s[l])!==i&&e.node(c).maxRank<o.rank;)l++;c===i&&(d=!1)}if(!d){for(;l<s.length-1&&e.node(c=s[l+1]).minRank<=o.rank;)l++;c=s[l]}e.setParent(n,c),n=e.successors(n)[0]}}))},tM=pI.removeEmptyRanks,nM={run:function(e){let t=aA.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(o,r){var a=e.children(o);a&&a.length&&a.forEach((e=>n(e,r+1))),t[o]=r}return e.children().forEach((e=>n(e,1))),t}(e),o=Object.values(n),r=aA.applyWithChunking(Math.max,o)-1,a=2*r+1;e.graph().nestingRoot=t,e.edges().forEach((t=>e.edge(t).minlen*=a));let s=function(e){return e.edges().reduce(((t,n)=>t+e.edge(n).weight),0)}(e)+1;e.children().forEach((o=>sA(e,t,a,s,r,n,o))),e.graph().nodeRankFactor=a},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((t=>{e.edge(t).nestingEdge&&e.removeEdge(t)}))}},oM=function(e){e.children().forEach((function t(n){let o=e.children(n),r=e.node(n);if(o.length&&o.forEach(t),Object.hasOwn(r,"minRank")){r.borderLeft=[],r.borderRight=[];for(let t=r.minRank,o=r.maxRank+1;t<o;++t)lA(e,"borderLeft","_bl",n,r,t),lA(e,"borderRight","_br",n,r,t)}}))},rM={adjust:function(e){let t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||cA(e)},undo:function(e){let t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){e.nodes().forEach((t=>uA(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);n.points.forEach(uA),Object.hasOwn(n,"y")&&uA(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){e.nodes().forEach((t=>hA(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);n.points.forEach(hA),Object.hasOwn(n,"x")&&hA(n)}))}(e),cA(e))}},aM=OA,sM=function(e){(function(e){let t=YA.buildLayerMatrix(e),n=e.graph().ranksep,o=0;t.forEach((t=>{const r=t.reduce(((t,n)=>{const o=e.node(n).height;return t>o?t:o}),0);t.forEach((t=>e.node(t).y=o+r/2)),o+=r+n}))})(e=YA.asNonCompoundGraph(e)),Object.entries(KA(e)).forEach((([t,n])=>e.node(t).x=n))},iM=pI,lM=aI.Graph;var cM=function(e,t){let n=t&&t.debugTiming?iM.time:iM.notime;n("layout",(()=>{let o=n("  buildLayoutGraph",(()=>function(e){let t=new lM({multigraph:!0,compound:!0}),n=yM(e.graph());return t.setGraph(Object.assign({},uM,xM(n,dM),iM.pick(n,hM))),e.nodes().forEach((n=>{const o=xM(yM(e.node(n)),mM);Object.keys(fM).forEach((e=>{void 0===o[e]&&(o[e]=fM[e])})),t.setNode(n,o),t.setParent(n,e.parent(n))})),e.edges().forEach((n=>{let o=yM(e.edge(n));t.setEdge(n,Object.assign({},gM,xM(o,pM),iM.pick(o,vM)))})),t}(e)));n("  runLayout",(()=>function(e,t,n){t("    makeSpaceForEdgeLabels",(()=>function(e){let t=e.graph();t.ranksep/=2,e.edges().forEach((n=>{let o=e.edge(n);o.minlen*=2,"c"!==o.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?o.width+=o.labeloffset:o.height+=o.labeloffset)}))}(e))),t("    removeSelfEdges",(()=>function(e){e.edges().forEach((t=>{if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e))),t("    acyclic",(()=>JA.run(e))),t("    nestingGraph.run",(()=>nM.run(e))),t("    rank",(()=>ZA(iM.asNonCompoundGraph(e)))),t("    injectEdgeLabelProxies",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(n.width&&n.height){let n=e.node(t.v),o={rank:(e.node(t.w).rank-n.rank)/2+n.rank,e:t};iM.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e))),t("    removeEmptyRanks",(()=>tM(e))),t("    nestingGraph.cleanup",(()=>nM.cleanup(e))),t("    normalizeRanks",(()=>QA(e))),t("    assignRankMinMax",(()=>function(e){let t=0;e.nodes().forEach((n=>{let o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=Math.max(t,o.maxRank))})),e.graph().maxRank=t}(e))),t("    removeEdgeLabelProxies",(()=>function(e){e.nodes().forEach((t=>{let n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e))),t("    normalize.run",(()=>XA.run(e))),t("    parentDummyChains",(()=>eM(e))),t("    addBorderSegments",(()=>oM(e))),t("    order",(()=>aM(e,n))),t("    insertSelfEdges",(()=>function(e){var t=iM.buildLayerMatrix(e);t.forEach((t=>{var n=0;t.forEach(((t,o)=>{var r=e.node(t);r.order=o+n,(r.selfEdges||[]).forEach((t=>{iM.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:r.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete r.selfEdges}))}))}(e))),t("    adjustCoordinateSystem",(()=>rM.adjust(e))),t("    position",(()=>sM(e))),t("    positionSelfEdges",(()=>function(e){e.nodes().forEach((t=>{var n=e.node(t);if("selfedge"===n.dummy){var o=e.node(n.e.v),r=o.x+o.width/2,a=o.y,s=n.x-r,i=o.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*s/3,y:a-i},{x:r+5*s/6,y:a-i},{x:r+s,y:a},{x:r+5*s/6,y:a+i},{x:r+2*s/3,y:a+i}],n.label.x=n.x,n.label.y=n.y}}))}(e))),t("    removeBorderNodes",(()=>function(e){e.nodes().forEach((t=>{if(e.children(t).length){let n=e.node(t),o=e.node(n.borderTop),r=e.node(n.borderBottom),a=e.node(n.borderLeft[n.borderLeft.length-1]),s=e.node(n.borderRight[n.borderRight.length-1]);n.width=Math.abs(s.x-a.x),n.height=Math.abs(r.y-o.y),n.x=a.x+n.width/2,n.y=o.y+n.height/2}})),e.nodes().forEach((t=>{"border"===e.node(t).dummy&&e.removeNode(t)}))}(e))),t("    normalize.undo",(()=>XA.undo(e))),t("    fixupEdgeLabelCoords",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);if(Object.hasOwn(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e))),t("    undoCoordinateSystem",(()=>rM.undo(e))),t("    translateGraph",(()=>function(e){let t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,r=0,a=e.graph(),s=a.marginx||0,i=a.marginy||0;function l(e){let a=e.x,s=e.y,i=e.width,l=e.height;t=Math.min(t,a-i/2),n=Math.max(n,a+i/2),o=Math.min(o,s-l/2),r=Math.max(r,s+l/2)}e.nodes().forEach((t=>l(e.node(t)))),e.edges().forEach((t=>{let n=e.edge(t);Object.hasOwn(n,"x")&&l(n)})),t-=s,o-=i,e.nodes().forEach((n=>{let r=e.node(n);r.x-=t,r.y-=o})),e.edges().forEach((n=>{let r=e.edge(n);r.points.forEach((e=>{e.x-=t,e.y-=o})),Object.hasOwn(r,"x")&&(r.x-=t),Object.hasOwn(r,"y")&&(r.y-=o)})),a.width=n-t+s,a.height=r-o+i}(e))),t("    assignNodeIntersects",(()=>function(e){e.edges().forEach((t=>{let n,o,r=e.edge(t),a=e.node(t.v),s=e.node(t.w);r.points?(n=r.points[0],o=r.points[r.points.length-1]):(r.points=[],n=s,o=a),r.points.unshift(iM.intersectRect(a,n)),r.points.push(iM.intersectRect(s,o))}))}(e))),t("    reversePoints",(()=>function(e){e.edges().forEach((t=>{let n=e.edge(t);n.reversed&&n.points.reverse()}))}(e))),t("    acyclic.undo",(()=>JA.undo(e)))}(o,n,t))),n("  updateInputGraph",(()=>function(e,t){e.nodes().forEach((n=>{let o=e.node(n),r=t.node(n);o&&(o.x=r.x,o.y=r.y,o.rank=r.rank,t.children(n).length&&(o.width=r.width,o.height=r.height))})),e.edges().forEach((n=>{let o=e.edge(n),r=t.edge(n);o.points=r.points,Object.hasOwn(r,"x")&&(o.x=r.x,o.y=r.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,o)))}))};let dM=["nodesep","edgesep","ranksep","marginx","marginy"],uM={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},hM=["acyclicer","ranker","rankdir","align"],mM=["width","height"],fM={width:0,height:0},pM=["minlen","weight","width","height","labeloffset"],gM={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},vM=["labelpos"];function xM(e,t){return iM.mapValues(iM.pick(e,t),Number)}function yM(e){var t={};return e&&Object.entries(e).forEach((([e,n])=>{"string"==typeof e&&(e=e.toLowerCase()),t[e]=n})),t}let bM=pI,wM=aI.Graph;var kM={graphlib:aI,layout:cM,debug:{debugOrdering:function(e){let t=bM.buildLayerMatrix(e),n=new wM({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach((t=>{n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),e.edges().forEach((e=>n.setEdge(e.v,e.w,{},e.name))),t.forEach(((e,t)=>{let o="layer"+t;n.setNode(o,{rank:"same"}),e.reduce(((e,t)=>(n.setEdge(e,t,{style:"invis"}),t)))})),n}},util:{time:pI.time,notime:pI.notime},version:"1.1.4"};const NM=(new kM.graphlib.Graph).setDefaultEdgeLabel((()=>({}))),EM=(e,t,n)=>(NM.setGraph({rankdir:n.direction,nodesep:150,ranksep:200,ranker:"longest-path"}),t.forEach((e=>NM.setEdge(e.source,e.target))),e.forEach((e=>NM.setNode(e.id,{...e,width:e.width??0,height:e.height??0}))),kM.layout(NM),{nodes:e.map((e=>{const{x:t,y:n}=NM.node(e.id);return{...e,position:{x:t,y:n}}})),edges:t}),CM=new class{createEdge(e,t){return{animated:!0,markerEnd:{type:VE.ArrowClosed},id:`${e}-${t}`,style:{strokeWidth:2},source:e,sourceHandle:"outputs",targetHandle:"inputs",target:t}}createNode(e,t){return{id:e,data:{atom:t,forceWidth:300},width:300,type:"custom",height:i_(H.get(t).code.trim().split("\n").length),position:{x:0,y:0}}}createElements(e,t,n,o){const r=[],a=[],s=new Set,i=new Set;for(const l of Object.values(n)){if("marimo"===l.value&&"mo"===l.name)continue;const{declaredBy:e,usedBy:t}=l;for(const n of e)for(const e of t){const t=`${n}-${e}`;i.has(t)||(i.add(t),s.add(n),s.add(e),a.push(this.createEdge(n,e)))}}for(const[l,c]of pa.zip(e,t)){o||r.push(this.createNode(l,c));const e=s.has(l),t=H.get(c).code.trim().startsWith("mo.md");!e&&t||r.push(this.createNode(l,c))}return{nodes:r,edges:a}}},SM=({cellIds:e,variables:t,cellAtoms:n,children:o,layoutDirection:a,settings:s})=>{const i=r.useMemo((()=>{let o=CM.createElements(e,n,t,s.hidePureMarkdown);return o=EM(o.nodes,o.edges,{direction:a}),o}),[]),[l,c,d]=Uj(i.nodes),[u,h,m]=Vj(i.edges),f=mS(),v=F((e=>{const t=EM(e.nodes,e.edges,{direction:a});c(t.nodes),h(t.edges)}));r.useEffect((()=>{v(CM.createElements(e,n,t,s.hidePureMarkdown))}),[e,t,n,v,s.hidePureMarkdown]);const[x,y]=r.useState();v_();return p.jsx(l_.Provider,{value:a,children:p.jsxs(zj,{nodes:l,edges:u,nodeTypes:d_,minZoom:.2,fitViewOptions:{minZoom:.5,maxZoom:1.5},onNodeClick:(e,t)=>{y({type:"node",id:t.id})},onEdgeClick:(e,t)=>{const{source:n,target:o}=t;y({type:"edge",source:n,target:o})},onNodeDoubleClick:(e,t)=>{os(t.id,"focus")},fitView:!0,onNodesChange:d,onEdgesChange:m,zoomOnDoubleClick:!1,nodesConnectable:!1,children:[p.jsx(s_,{color:"#ccc",variant:Xj.Dots}),p.jsx(Qj,{position:"bottom-right",showInteractive:!1,children:p.jsx(g,{content:"Jump to focused cell",delayDuration:200,side:"left",asChild:!1,children:p.jsx(Yj,{onMouseDown:Ge.preventFocus,onClick:()=>{const e=H.get(md);if(e){const t=l.find((t=>t.id===e));t&&(f.fitView({padding:1,duration:600,nodes:[t]}),y({type:"node",id:e}))}},children:p.jsx(rc,{className:"size-4"})})})}),p.jsx(p_,{selection:x,variables:t,edges:u,onClearSelection:()=>{y(void 0)}}),o]})})},jM=$("_minimap_"),_M=$({hidePureMarkdown:!0}),IM=e=>{const t=m(11),[n,o]=je(jM),[r,a]=je(_M);let s;t[0]!==n||t[1]!==e||t[2]!==r||t[3]!==a||t[4]!==o?(s=()=>"_minimap_"===n?p.jsx(w_,{...e,children:p.jsx(f_,{settings:r,onSettingsChange:a,view:n,onChange:o})}):p.jsx(SM,{...e,settings:r,layoutDirection:n,children:p.jsx(f_,{settings:r,onSettingsChange:a,view:n,onChange:o})}),t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=s):s=t[5];const i=s;let l,c;return t[6]!==i?(l=i(),t[6]=i,t[7]=l):l=t[7],t[8]!==n||t[9]!==l?(c=p.jsx(Mj,{children:l},n),t[8]=n,t[9]=l,t[10]=c):c=t[10],c},AM=()=>{const e=m(5),t=rs(),n=ne(),[o]=as();let r,a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(r=Ht("w-full h-full flex-1 mx-auto -mb-4 relative"),e[0]=r):r=e[0],e[1]!==o||e[2]!==t||e[3]!==n.inOrderIds?(a=p.jsx("div",{className:r,children:p.jsx(IM,{cellAtoms:o,variables:t,cellIds:n.inOrderIds})}),e[1]=o,e[2]=t,e[3]=n.inOrderIds,e[4]=a):a=e[4],a};const MM="name",OM="type-value",TM="defs-refs",DM=[{id:MM,accessorFn:e=>[e.name,e.declaredBy],enableSorting:!0,sortingFn:"alphanumeric",header:({column:e})=>p.jsx(bs,{header:"Name",column:e}),cell:({getValue:e})=>{const[t,n]=e();return p.jsx(m_,{name:t,declaredBy:n})}},{id:OM,accessorFn:e=>[e.dataType,e.value],enableSorting:!0,sortingFn:"alphanumeric",header:({column:e})=>p.jsx(bs,{header:p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("span",{children:"Type"}),p.jsx("span",{children:"Value"})]}),column:e}),cell:({getValue:e})=>{const[t,n]=e();return p.jsxs("div",{className:"max-w-[150px]",children:[p.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap text-muted-foreground font-mono text-xs",children:t}),p.jsx("div",{className:"text-ellipsis overflow-hidden whitespace-nowrap",title:n??"",children:n})]})}},{id:TM,accessorFn:e=>[e.declaredBy,e.usedBy,e.name,e.declaredByNames,e.usedByNames],enableSorting:!0,sortingFn:"basic",header:({column:e})=>p.jsx(bs,{header:p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("span",{children:"Declared By"}),p.jsx("span",{children:"Used By"})]}),column:e}),cell:({getValue:e})=>{const[t,n,o]=e(),r=e=>{const t=Tr(e);t&&ts(t,o)};return p.jsxs("div",{className:"flex flex-col gap-1 py-1",children:[p.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-center",children:[p.jsx("span",{title:"Declared by",children:p.jsx(jc,{className:"w-3.5 h-3.5 text-muted-foreground"})}),1===t.length?p.jsx(Qa,{variant:"focus",cellId:t[0],skipScroll:!0,onClick:()=>r(t[0])}):p.jsx("div",{className:"text-destructive flex flex-row gap-2",children:t.slice(0,3).map(((e,n)=>p.jsxs("span",{className:"flex",children:[p.jsx(Qa,{variant:"focus",cellId:e,skipScroll:!0,className:"whitespace-nowrap text-destructive",onClick:()=>r(e)},e),n<t.length-1&&", "]},e)))})]}),p.jsxs("div",{className:"flex flex-row overflow-auto gap-2 items-baseline",children:[p.jsx("span",{title:"Used by",children:p.jsx(Lc,{className:"w-3.5 h-3.5 text-muted-foreground"})}),p.jsx(h_,{maxCount:3,cellIds:n,skipScroll:!0,onClick:r})]})]})}}];const PM=r.memo((({className:e,cellIds:t,variables:n})=>{const[o,a]=u.useState([]),[s,i]=u.useState(""),l=ss(),c=r.useMemo((()=>{const e=e=>{const n=l[e];return n===ys?`cell-${t.indexOf(e)}`:n??`cell-${t.indexOf(e)}`};return Object.values(n).map((t=>({...t,declaredByNames:t.declaredBy.map(e),usedByNames:t.usedBy.map(e)})))}),[n,l,t]),d=r.useMemo((()=>{const e=new Map;return t.forEach(((t,n)=>e.set(t,n))),function(e,t,n){t||(t={id:TM,desc:!1});let o=[];switch(t.id){case MM:o=Nl(e,(e=>e.name));break;case OM:o=Nl(e,(e=>e.dataType));break;case TM:o=Nl(e,(e=>n.get(e.declaredBy[0])))}return t.desc?o.reverse():o}(c,o[0],e)}),[c,o,t]),h=is({data:d,columns:DM,getCoreRowModel:ls(),onGlobalFilterChange:i,getFilteredRowModel:cs(),enableFilters:!0,enableGlobalFilter:!0,getColumnCanGlobalFilter:e=>e.columnDef.enableGlobalFilter??!0,globalFilterFn:"auto",manualSorting:!0,onSortingChange:a,getSortedRowModel:ds(),state:{sorting:o,globalFilter:s}});return p.jsxs(p.Fragment,{children:[p.jsx(us,{className:"w-full",placeholder:"Search",value:s,onChange:e=>i(e.target.value)}),p.jsxs(hs,{className:Ht("w-full text-sm flex-1 border-separate border-spacing-0",e),children:[p.jsx(ms,{children:p.jsx(fs,{className:"whitespace-nowrap text-xs",children:h.getFlatHeaders().map((e=>p.jsx(ps,{className:"sticky top-0 bg-background border-b",children:gs(e.column.columnDef.header,e.getContext())},e.id)))})}),p.jsx(vs,{children:h.getRowModel().rows.map((e=>p.jsx(fs,{className:"hover:bg-accent",children:e.getVisibleCells().map((e=>p.jsx(xs,{className:"border-b",children:gs(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))})]})]})}));PM.displayName="VariableTable";const RM=()=>{const e=m(4),t=rs(),n=ne();if(0===Object.keys(t).length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(vN,{title:"No variables",description:"Global variables will appear here.",icon:p.jsx(Xe,{})}),e[0]=t):t=e[0],t}let o;return e[1]!==n.inOrderIds||e[2]!==t?(o=p.jsx(PM,{className:"flex-1",cellIds:n.inOrderIds,variables:t}),e[1]=n.inOrderIds,e[2]=t,e[3]=o):o=e[3],o},FM=()=>{const e=m(9),t=ws(),{clearLogs:n}=L();if(0===t.length){let t,n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx("code",{className:"border rounded px-1",children:"stdout"}),e[0]=t):t=e[0],e[1]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx(vN,{title:"No logs",description:p.jsxs("span",{children:[t," and"," ",p.jsx("code",{className:"border rounded px-1",children:"stderr"})," logs will appear here."]}),icon:p.jsx(Ze,{})}),e[1]=n):n=e[1],n}let o,r,a;return e[2]!==n?(o=p.jsx("div",{className:"flex flex-row justify-end px-2 py-1",children:p.jsx("button",{"data-testid":"clear-logs-button",className:"text-xs font-semibold text-accent-foreground",onClick:n,children:"Clear"})}),e[2]=n,e[3]=o):o=e[3],e[4]!==t?(r=p.jsx("div",{className:"overflow-auto flex-1",children:p.jsx(LM,{logs:t,className:"min-w-[300px]"})}),e[4]=t,e[5]=r):r=e[5],e[6]!==o||e[7]!==r?(a=p.jsxs(p.Fragment,{children:[o,r]}),e[6]=o,e[7]=r,e[8]=a):a=e[8],a},LM=e=>{const t=m(11),{logs:n,className:o}=e;let r,a,s,i,l;if(t[0]!==o?(r=Ht("flex flex-col",o),t[0]=o,t[1]=r):r=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(a={whiteSpace:"pre-wrap"},t[2]=a):a=t[2],t[3]!==n){let e;t[5]===Symbol.for("react.memo_cache_sentinel")?(e=(e,t)=>p.jsxs("div",{className:"contents group",children:[p.jsx("span",{className:Ht("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","text-right col-span-1 py-1 pr-1"),children:t+1}),p.jsx("span",{className:Ht("opacity-70 group-hover:bg-[var(--gray-3)] group-hover:opacity-100","px-2 flex gap-x-1.5 py-1 flex-wrap"),children:zM(e)})]},t),t[5]=e):e=t[5],s=n.map(e),t[3]=n,t[4]=s}else s=t[4];return t[6]!==s?(i=p.jsx("pre",{className:"grid text-xs font-mono gap-1 whitespace-break-spaces font-semibold align-left",children:p.jsx("div",{className:"grid grid-cols-[30px,1fr]",style:a,children:s})}),t[6]=s,t[7]=i):i=t[7],t[8]!==r||t[9]!==i?(l=p.jsx("div",{className:r,children:i}),t[8]=r,t[9]=i,t[10]=l):l=t[10],l};function zM(e){const t=ks(e.timestamp),n=BM[e.level],o=e.level.toUpperCase();return p.jsxs(p.Fragment,{children:[p.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)]",children:["[",t,"]"]}),p.jsx("span",{className:Ht("flex-shrink-0",n),children:o}),p.jsxs("span",{className:"flex-shrink-0 text-[var(--gray-10)]",children:["(",p.jsx(Qa,{cellId:e.cellId}),")"]}),e.message]})}const BM={stdout:"text-[var(--grass-9)]",stderr:"text-[var(--red-9)]"},UM=()=>{const e=m(5),{documentation:t}=Z(Ns);if(!t){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(vN,{title:"View docs as you type",description:"Move your text cursor over a symbol to see its documentation.",icon:p.jsx(Dc,{})}),e[0]=t):t=e[0],t}let n,o;return e[1]!==t?(n=oa({html:t}),e[1]=t,e[2]=n):n=e[2],e[3]!==n?(o=p.jsx("div",{className:"p-3 overflow-y-auto overflow-x-hidden h-full docs-documentation flex flex-col gap-4",children:n}),e[3]=n,e[4]=o):o=e[4],o};function VM(e,t,n){return e[t]?e[t][0]?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function $M(e){void 0===e&&(e={});var t=e.onResize,n=r.useRef(void 0);n.current=t;var o=e.round||Math.round,a=r.useRef(),s=r.useState({width:void 0,height:void 0}),i=s[0],l=s[1],c=r.useRef(!1);r.useEffect((function(){return c.current=!1,function(){c.current=!0}}),[]);var d=r.useRef({width:void 0,height:void 0}),u=function(e,t){var n=r.useRef(null),o=r.useRef(null);o.current=t;var a=r.useRef(null);r.useEffect((function(){s()}));var s=r.useCallback((function(){var t=a.current,r=o.current,s=t||(r?r instanceof Element?r:r.current:null);n.current&&n.current.element===s&&n.current.subscriber===e||(n.current&&n.current.cleanup&&n.current.cleanup(),n.current={element:s,subscriber:e,cleanup:s?e(s):void 0})}),[e]);return r.useEffect((function(){return function(){n.current&&n.current.cleanup&&(n.current.cleanup(),n.current=null)}}),[]),r.useCallback((function(e){a.current=e,s()}),[s])}(r.useCallback((function(t){return a.current&&a.current.box===e.box&&a.current.round===o||(a.current={box:e.box,round:o,instance:new ResizeObserver((function(t){var r=t[0],a="border-box"===e.box?"borderBoxSize":"device-pixel-content-box"===e.box?"devicePixelContentBoxSize":"contentBoxSize",s=VM(r,a,"inlineSize"),i=VM(r,a,"blockSize"),u=s?o(s):void 0,h=i?o(i):void 0;if(d.current.width!==u||d.current.height!==h){var m={width:u,height:h};d.current.width=u,d.current.height=h,n.current?n.current(m):c.current||l(m)}}))}),a.current.instance.observe(t,{box:e.box}),function(){a.current&&a.current.instance.unobserve(t)}}),[e.box,o]),e.ref);return r.useMemo((function(){return{ref:u,width:i.width,height:i.height}}),[u,i.width,i.height])}const GM=new Map,HM=({file:e,onOpenNotebook:t})=>{const{theme:n}=ke(),o=Z(_e),[a,s]=r.useState(""),{data:i,loading:l,error:c,setData:d}=qt((async()=>{const t=await Es({path:e.path}),n=t.contents||"";return s(GM.get(e.path)||n),t}),[e.path]),u=async()=>{a!==(null==i?void 0:i.contents)&&await Os({path:e.path,contents:a}).then((e=>{e.success&&(d((e=>e?{...e,contents:a}:void 0)),s(a))}))},h=r.useRef(a);if(h.current=a,r.useEffect((()=>()=>{if(!i)return;const t=h.current;t===i.contents?GM.delete(e.path):GM.set(e.path,t)}),[e.path,null==i?void 0:i.contents]),c)return p.jsx(Cs,{error:c});if(l||!i)return null;const m=i.mimeType||"text/plain",f=m in qM;if(!i.contents&&!f)return p.jsxs("div",{className:"grid grid-cols-2 gap-2 p-6",children:[p.jsx("div",{className:"font-bold text-muted-foreground",children:"Name"}),p.jsx("div",{children:i.file.name}),p.jsx("div",{className:"font-bold text-muted-foreground",children:"Type"}),p.jsx("div",{children:m})]});const v=p.jsxs("div",{className:"text-xs text-muted-foreground p-1 flex justify-end gap-2 border-b",children:[e.isMarimoFile&&!S()&&p.jsx(g,{content:"Open notebook",children:p.jsx(ai,{size:"small",onClick:e=>t(e),children:p.jsx(Ss,{})})}),p.jsx(g,{content:"Download",children:p.jsx(ai,{size:"small",onClick:()=>{if(WM(m)){const e=Ts(i.contents,m);Ds(e,i.file.name)}else x(new Blob([i.contents||a],{type:m}),i.file.name)},children:p.jsx(ht,{})})}),!WM(m)&&p.jsxs(p.Fragment,{children:[p.jsx(g,{content:"Copy contents to clipboard",children:p.jsx(ai,{size:"small",onClick:async()=>{await $e(a)},children:p.jsx(He,{})})}),p.jsx(g,{content:ri("global.save"),children:p.jsx(ai,{size:"small",color:a===i.contents?void 0:"green",onClick:u,disabled:a===i.contents,children:p.jsx(bc,{})})})]})]});return m.startsWith("image/")?p.jsxs(p.Fragment,{children:[v,p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx(js,{base64:i.contents,mime:m})})]}):"text/csv"===m&&i.contents?p.jsxs(p.Fragment,{children:[v,p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx(_s,{contents:i.contents})})]}):m.startsWith("audio/")?p.jsxs(p.Fragment,{children:[v,p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx(Is,{base64:i.contents,mime:m})})]}):m.startsWith("video/")?p.jsxs(p.Fragment,{children:[v,p.jsx("div",{className:"flex-1 overflow-hidden flex flex-col",children:p.jsx(As,{base64:i.contents,mime:m})})]}):p.jsxs(p.Fragment,{children:[v,p.jsx("div",{className:"flex-1 overflow-auto",children:p.jsx(Ms,{theme:"dark"===n?"dark":"light",language:qM[m]||qM.default,className:"border-b",extensions:[Pt.lineWrapping,tn.of([{key:o.getHotkey("global.save").key,stopPropagation:!0,run:()=>a!==i.contents&&(u(),!0)}])],value:a,onChange:s})})]})},WM=e=>!!e&&(e.startsWith("image/")||e.startsWith("audio/")||e.startsWith("video/")),qM={"application/javascript":"javascript","text/markdown":"markdown","text/html":"html","text/css":"css","text/x-python":"python","application/json":"json","application/xml":"xml","text/x-yaml":"yaml","text/csv":"markdown","text/plain":"markdown",default:"markdown"};const YM=$(new class{constructor(e){this.callbacks=e,this.delegate=new Fi([]),this.rootPath="",this.onChange=Wt.NOOP,this.path=new ot("/"),this.initialize=async e=>{if(this.onChange=e,0===this.delegate.data.length)try{const e=await this.callbacks.listFiles({path:this.rootPath});this.delegate=new Fi(e.files),this.rootPath=e.root,this.path=ot.guessDeliminator(e.root)}catch(t){Y({title:"Failed",description:jr(t)})}this.onChange(this.delegate.data)},this.refreshAll=async e=>{const t=[this.rootPath,...e.map((e=>{var t;return null==(t=this.delegate.find(e))?void 0:t.data.path}))].filter(Boolean),n=await Promise.all(t.map((e=>this.callbacks.listFiles({path:e}).catch((()=>({files:[]}))))));for(const[o,r]of t.entries()){const e=n[o];r===this.rootPath?this.delegate=new Fi(e.files):this.delegate.update({id:r,changes:{children:e.files}})}this.onChange(this.delegate.data)},this.relativeFromRoot=e=>{const t=function(e){return e.endsWith("/")?e:`${e}/`}(this.rootPath);return e.startsWith(t)?e.slice(t.length):e},this.handleResponse=e=>e.success?e:(Y({title:"Failed",description:e.message}),null)}async expand(e){const t=this.delegate.find(e);if(!t)return!1;if(!t.data.isDirectory)return!1;if(t.children&&t.children.length>0)return!0;const n=await this.callbacks.listFiles({path:t.data.path});return this.delegate.update({id:e,changes:{children:n.files}}),this.onChange(this.delegate.data),!0}async rename(e,t){const n=this.delegate.find(e);if(!n)return;const o=n.data.path,r=this.path.join(this.path.dirname(o),t);await this.callbacks.renameFileOrFolder({path:o,newPath:r}).then(this.handleResponse),this.delegate.update({id:e,changes:{name:t,path:r}}),this.onChange(this.delegate.data),await this.refreshAll([r])}async move(e,t){var n;const o=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath;await Promise.all(e.map((e=>{this.delegate.move({id:e,parentId:t,index:0});const n=this.delegate.find(e);if(!n)return Promise.resolve();const r=this.path.join(o,this.path.basename(n.data.path));return this.delegate.update({id:e,changes:{path:r}}),this.callbacks.renameFileOrFolder({path:n.data.path,newPath:r}).then(this.handleResponse)}))),this.onChange(this.delegate.data),await this.refreshAll([o])}async createFile(e,t){var n;const o=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath,r=await this.callbacks.createFileOrFolder({path:o,type:"file",name:e}).then(this.handleResponse);(null==r?void 0:r.info)&&(this.delegate.create({parentId:t,index:0,data:r.info}),this.onChange(this.delegate.data),await this.refreshAll([o]))}async createFolder(e,t){var n;const o=t?(null==(n=this.delegate.find(t))?void 0:n.data.path)??t:this.rootPath,r=await this.callbacks.createFileOrFolder({path:o,type:"directory",name:e}).then(this.handleResponse);(null==r?void 0:r.info)&&(this.delegate.create({parentId:t,index:0,data:r.info}),this.onChange(this.delegate.data),await this.refreshAll([o]))}async delete(e){const t=this.delegate.find(e);t&&(await this.callbacks.deleteFileOrFolder({path:t.data.path}).then(this.handleResponse),this.delegate.drop({id:e}),this.onChange(this.delegate.data))}}({listFiles:Kt,createFileOrFolder:Ps,deleteFileOrFolder:Rs,renameFileOrFolder:Fs})),KM=$({});function JM(e){const t=m(4);let n;t[0]!==e?(n=void 0===e?{}:e,t[0]=e,t[1]=n):n=t[1];const o=n;let r;return t[2]!==o?(r={multiple:!0,maxSize:104857600,onError:tO,onDropRejected:ZM,onDrop:XM,...o},t[2]=o,t[3]=r):r=t[3],Ls(r)}async function XM(e){for(const t of e){const e=(await zs(t)).split(",")[1];await Ps({path:"",type:"file",name:t.name,contents:e})}await async function(){await H.get(YM).refreshAll([])}()}function ZM(e){Y({title:"File upload failed",description:p.jsx("div",{className:"flex flex-col gap-1",children:e.map(QM)}),variant:"danger"})}function QM(e){return p.jsxs("div",{children:[e.file.name," (",e.errors.map(eO).join(", "),")"]},e.file.name)}function eO(e){return e.message}function tO(e){V.error(e),Y({title:"File upload failed",description:e.message,variant:"danger"})}const nO=u.createContext(null),oO=e=>{const t=m(60),{height:n}=e,o=r.useRef(null),[a]=je(YM);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=[],t[0]=s):s=t[0];const[i,l]=r.useState(s),[c,d]=r.useState(null),{openPrompt:u}=f(),[h,g]=je(KM);let x,y;t[1]!==a?(x=()=>a.initialize(l),t[1]=a,t[2]=x):x=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(y=[],t[3]=y):y=t[3];const{loading:b,error:w}=qt(x,y);let k;t[4]!==a||t[5]!==h?(k=()=>{a.refreshAll(Object.keys(h).filter((e=>h[e])))},t[4]=a,t[5]=h,t[6]=k):k=t[6];const N=F(k);let E;t[7]!==u||t[8]!==a?(E=async()=>{u({title:"Folder name",onConfirm:async e=>{a.createFolder(e,null)}})},t[7]=u,t[8]=a,t[9]=E):E=t[9];const C=F(E);let S;t[10]!==u||t[11]!==a?(S=async()=>{u({title:"File name",onConfirm:async e=>{a.createFile(e,null)}})},t[10]=u,t[11]=a,t[12]=S):S=t[12];const j=F(S);let _;t[13]!==g?(_=()=>{var e;null==(e=o.current)||e.closeAll(),g({})},t[13]=g,t[14]=_):_=t[14];const I=F(_);if(b){let e;return t[15]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(Ba,{size:"medium",centered:!0}),t[15]=e):e=t[15],e}if(w){let e;return t[16]!==w?(e=p.jsx(Cs,{error:w}),t[16]=w,t[17]=e):e=t[17],e}if(c){let e,n,o,s,i,l;return t[18]===Symbol.for("react.memo_cache_sentinel")?(e=()=>d(null),t[18]=e):e=t[18],t[19]===Symbol.for("react.memo_cache_sentinel")?(n=p.jsx(v,{onClick:e,"data-testid":"file-explorer-back-button",variant:"text",size:"xs",className:"mb-0",children:p.jsx(Cl,{size:16})}),t[19]=n):n=t[19],t[20]!==c.name?(o=p.jsxs("div",{className:"flex items-center pl-1 pr-3 flex-shrink-0 border-b justify-between",children:[n,p.jsx("span",{className:"font-bold",children:c.name})]}),t[20]=c.name,t[21]=o):o=t[21],t[22]!==a||t[23]!==c.path?(s=e=>dO(e,a.relativeFromRoot(c.path)),t[22]=a,t[23]=c.path,t[24]=s):s=t[24],t[25]!==s||t[26]!==c?(i=p.jsx(r.Suspense,{children:p.jsx(HM,{onOpenNotebook:s,file:c})}),t[25]=s,t[26]=c,t[27]=i):i=t[27],t[28]!==o||t[29]!==i?(l=p.jsxs(p.Fragment,{children:[o,i]}),t[28]=o,t[29]=i,t[30]=l):l=t[30],l}let A;t[31]!==N||t[32]!==j||t[33]!==C||t[34]!==I||t[35]!==a?(A=p.jsx(aO,{onRefresh:N,onCreateFile:j,onCreateFolder:C,onCollapseAll:I,tree:a}),t[31]=N,t[32]=j,t[33]=C,t[34]=I,t[35]=a,t[36]=A):A=t[36];const M=n-33;let O,T,D,P,R,L,z,B;return t[37]!==a?(O=async e=>{const{ids:t}=e;for(const n of t)await a.delete(n)},T=async e=>{const{id:t,name:n}=e;await a.rename(t,n)},D=async e=>{const{dragIds:t,parentId:n}=e;await a.move(t,n)},t[37]=a,t[38]=O,t[39]=T,t[40]=D):(O=t[38],T=t[39],D=t[40]),t[41]===Symbol.for("react.memo_cache_sentinel")?(P=e=>{const t=e[0];t&&(t.data.isDirectory||d(t.data))},t[41]=P):P=t[41],t[42]!==a||t[43]!==h||t[44]!==g?(R=async e=>{if(await a.expand(e)){const t=h[e]??!1;g({...h,[e]:!t})}},t[42]=a,t[43]=h,t[44]=g,t[45]=R):R=t[45],t[46]!==M||t[47]!==i||t[48]!==h||t[49]!==O||t[50]!==T||t[51]!==D||t[52]!==R?(L=p.jsx(Li,{width:"100%",ref:o,height:M,className:"h-full",data:i,initialOpenState:h,openByDefault:!1,renderCursor:uO,disableDrop:hO,onDelete:O,onRename:T,onMove:D,onSelect:P,onToggle:R,padding:15,rowHeight:30,indent:rO,overscanCount:1e3,disableMultiSelection:!0,children:lO}),t[46]=M,t[47]=i,t[48]=h,t[49]=O,t[50]=T,t[51]=D,t[52]=R,t[53]=L):L=t[53],t[54]!==a||t[55]!==L?(z=p.jsx(nO.Provider,{value:a,children:L}),t[54]=a,t[55]=L,t[56]=z):z=t[56],t[57]!==A||t[58]!==z?(B=p.jsxs(p.Fragment,{children:[A,z]}),t[57]=A,t[58]=z,t[59]=B):B=t[59],B},rO=15,aO=e=>{const t=m(30),{onRefresh:n,onCreateFile:o,onCreateFolder:r,onCollapseAll:a}=e;let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s={noDrag:!0,noDragEventsBubbling:!0},t[0]=s):s=t[0];const{getRootProps:i,getInputProps:l}=JM(s);let c,d,u,h,f,x,y,b,w,k,N,E,C,S,j;return t[1]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(Wl,{size:16}),t[1]=c):c=t[1],t[2]!==o?(d=p.jsx(g,{content:"Add file",children:p.jsx(v,{"data-testid":"file-explorer-add-file-button",onClick:o,variant:"text",size:"xs",children:c})}),t[2]=o,t[3]=d):d=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx(Yl,{size:16}),t[4]=u):u=t[4],t[5]!==r?(h=p.jsx(g,{content:"Add folder",children:p.jsx(v,{"data-testid":"file-explorer-add-folder-button",onClick:r,variant:"text",size:"xs",children:u})}),t[5]=r,t[6]=h):h=t[6],t[7]!==i?(f=i({}),t[7]=i,t[8]=f):f=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(x=Bs({variant:"text",size:"xs"}),y=p.jsx(Us,{size:16}),t[9]=x,t[10]=y):(x=t[9],y=t[10]),t[11]!==f?(b=p.jsx(g,{content:"Upload file",children:p.jsx("button",{"data-testid":"file-explorer-upload-button",...f,className:x,children:y})}),t[11]=f,t[12]=b):b=t[12],t[13]!==l?(w=l({}),t[13]=l,t[14]=w):w=t[14],t[15]!==w?(k=p.jsx("input",{...w,type:"file"}),t[15]=w,t[16]=k):k=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(N=p.jsx(Vr,{size:16}),t[17]=N):N=t[17],t[18]!==n?(E=p.jsx(g,{content:"Refresh",children:p.jsx(v,{"data-testid":"file-explorer-refresh-button",onClick:n,variant:"text",size:"xs",children:N})}),t[18]=n,t[19]=E):E=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(C=p.jsx(Vl,{size:16}),t[20]=C):C=t[20],t[21]!==a?(S=p.jsx(g,{content:"Collapse all folders",children:p.jsx(v,{"data-testid":"file-explorer-collapse-button",onClick:a,variant:"text",size:"xs",children:C})}),t[21]=a,t[22]=S):S=t[22],t[23]!==d||t[24]!==h||t[25]!==b||t[26]!==k||t[27]!==E||t[28]!==S?(j=p.jsxs("div",{className:"flex items-center justify-end px-2 flex-shrink-0 border-b",children:[d,h,b,k,E,S]}),t[23]=d,t[24]=h,t[25]=b,t[26]=k,t[27]=E,t[28]=S,t[29]=j):j=t[29],j},sO=e=>{const t=m(9),{node:n,onOpenMarimoFile:o}=e;let r,a,s;return t[0]!==n?(r=e=>{n.data.isDirectory||(e.stopPropagation(),n.select())},t[0]=n,t[1]=r):r=t[1],t[2]!==n.data.isMarimoFile||t[3]!==o?(a=n.data.isMarimoFile&&!S()&&p.jsxs("span",{className:"flex-shrink-0 ml-2 text-sm hidden group-hover:inline hover:underline",onClick:o,children:["open ",p.jsx(Ss,{className:"inline ml-1",size:12})]}),t[2]=n.data.isMarimoFile,t[3]=o,t[4]=a):a=t[4],t[5]!==r||t[6]!==n.data.name||t[7]!==a?(s=p.jsxs("span",{className:"flex-1 overflow-hidden text-ellipsis",onClick:r,children:[n.data.name,a]}),t[5]=r,t[6]=n.data.name,t[7]=a,t[8]=s):s=t[8],s},iO=e=>{const t=m(10),{node:n}=e,o=r.useRef(null);let a,s,i,l,c;return t[0]!==n.data.name?(a=()=>{var e,t;null==(e=o.current)||e.focus(),null==(t=o.current)||t.setSelectionRange(0,n.data.name.lastIndexOf("."))},s=[n.data.name],t[0]=n.data.name,t[1]=a,t[2]=s):(a=t[1],s=t[2]),r.useEffect(a,s),t[3]!==n?(i=()=>n.reset(),l=e=>{"Escape"===e.key&&n.reset(),"Enter"===e.key&&n.submit(e.currentTarget.value)},t[3]=n,t[4]=i,t[5]=l):(i=t[4],l=t[5]),t[6]!==n.data.name||t[7]!==i||t[8]!==l?(c=p.jsx("input",{ref:o,className:"flex-1 bg-transparent border border-border text-muted-foreground",defaultValue:n.data.name,onClick:mO,onBlur:i,onKeyDown:l}),t[6]=n.data.name,t[7]=i,t[8]=l,t[9]=c):c=t[9],c},lO=e=>{const t=m(52),{node:n,style:o,dragHandle:a}=e;let s;t[0]!==n.data?(s=n.data.isDirectory?"directory":Yt(n.data.name),t[0]=n.data,t[1]=s):s=t[1];const i=s,l=Jt[i],{openConfirm:c,openPrompt:d}=f(),u=r.useContext(nO);let h;t[2]!==u||t[3]!==n.data.path?(h=async e=>{dO(e,u?u.relativeFromRoot(n.data.path):n.data.path)},t[2]=u,t[3]=n.data.path,t[4]=h):h=t[4];const g=h;let x;t[5]!==c||t[6]!==n.data.name||t[7]!==n.tree||t[8]!==n.id?(x=async e=>{e.stopPropagation(),e.preventDefault(),c({title:"Delete file",description:`Are you sure you want to delete ${n.data.name}?`,confirmAction:p.jsx(We,{onClick:async()=>{await n.tree.delete(n.id)},"aria-label":"Confirm",children:"Delete"})})},t[5]=c,t[6]=n.data.name,t[7]=n.tree,t[8]=n.id,t[9]=x):x=t[9];const y=x;let b;t[10]!==n||t[11]!==d||t[12]!==u?(b=async()=>{n.open(),d({title:"Folder name",onConfirm:async e=>{null==u||u.createFolder(e,n.id)}})},t[10]=n,t[11]=d,t[12]=u,t[13]=b):b=t[13];const w=F(b);let k;t[14]!==n||t[15]!==d||t[16]!==u?(k=async()=>{n.open(),d({title:"File name",onConfirm:async e=>{null==u||u.createFile(e,n.id)}})},t[14]=n,t[15]=d,t[16]=u,t[17]=k):k=t[17];const N=F(k);let E;t[18]!==n||t[19]!==N||t[20]!==w||t[21]!==u||t[22]!==i||t[23]!==g||t[24]!==y?(E=()=>{const e={size:14,strokeWidth:1.5,className:"mr-2"};return p.jsxs(It,{align:"end",className:"no-print w-[220px]",onClick:e=>e.stopPropagation(),onCloseAutoFocus:e=>e.preventDefault(),children:[!n.data.isDirectory&&p.jsxs(wt,{onSelect:()=>n.select(),children:[p.jsx(Rc,{...e}),"Open file"]}),n.data.isDirectory&&p.jsxs(p.Fragment,{children:[p.jsxs(wt,{onSelect:()=>N(),children:[p.jsx(Wl,{...e}),"Create file"]}),p.jsxs(wt,{onSelect:()=>w(),children:[p.jsx(Yl,{...e}),"Create folder"]}),p.jsx(jt,{})]}),p.jsxs(wt,{onSelect:()=>n.edit(),children:[p.jsx(fc,{...e}),"Rename"]}),p.jsxs(wt,{onSelect:async()=>{await $e(n.data.path),Y({title:"Copied to clipboard"})},children:[p.jsx(He,{...e}),"Copy path"]}),u&&p.jsxs(wt,{onSelect:async()=>{await $e(u.relativeFromRoot(n.data.path)),Y({title:"Copied to clipboard"})},children:[p.jsx(He,{...e}),"Copy relative path"]}),p.jsxs(wt,{onSelect:async()=>{Y({title:"Copied to clipboard",description:"Code to open the file has been copied to your clipboard. You can also drag and drop this file into the editor"});const{path:e}=n.data,t=Vs[i](e);await $e(t)},children:[p.jsx($s,{...e}),"Copy snippet for reading file"]}),n.data.isMarimoFile&&!S()&&p.jsxs(p.Fragment,{children:[p.jsx(jt,{}),p.jsxs(wt,{onSelect:g,children:[p.jsx(Ic,{...e}),"Open notebook"]})]}),p.jsx(jt,{}),p.jsxs(wt,{onSelect:y,variant:"danger",children:[p.jsx(ye,{...e}),"Delete"]})]})},t[18]=n,t[19]=N,t[20]=w,t[21]=u,t[22]=i,t[23]=g,t[24]=y,t[25]=E):E=t[25];const C=E;let j,_,I;t[26]===Symbol.for("react.memo_cache_sentinel")?(j=Ht("flex items-center cursor-pointer ml-1 text-muted-foreground whitespace-nowrap group"),t[26]=j):j=t[26],t[27]!==n?(_=e=>{e.stopPropagation(),n.data.isDirectory&&n.toggle()},I=p.jsx(cO,{node:n}),t[27]=n,t[28]=_,t[29]=I):(_=t[28],I=t[29]);const A=n.willReceiveDrop&&n.data.isDirectory&&"bg-accent/80 hover:bg-accent/80 text-accent-foreground";let M,O,T,D,P,R,L;return t[30]!==A?(M=Ht("flex items-center pl-1 py-1 cursor-pointer hover:bg-accent/50 hover:text-accent-foreground rounded-l flex-1 overflow-hidden group",A),t[30]=A,t[31]=M):M=t[31],t[32]!==n.data.isMarimoFile||t[33]!==l?(O=n.data.isMarimoFile?p.jsx("img",{src:"/favicon.ico",className:"w-5 h-5 flex-shrink-0 mr-2 filter grayscale",alt:"Marimo"}):p.jsx(l,{className:"w-5 h-5 flex-shrink-0 mr-2",strokeWidth:1.5}),t[32]=n.data.isMarimoFile,t[33]=l,t[34]=O):O=t[34],t[35]!==n||t[36]!==g?(T=n.isEditing?p.jsx(iO,{node:n}):p.jsx(sO,{node:n,onOpenMarimoFile:g}),t[35]=n,t[36]=g,t[37]=T):T=t[37],t[38]===Symbol.for("react.memo_cache_sentinel")?(D=p.jsx(kt,{asChild:!0,tabIndex:-1,onClick:fO,children:p.jsx(v,{"data-testid":"file-explorer-more-button",variant:"text",tabIndex:-1,size:"xs",className:"mb-0","aria-label":"More options",children:p.jsx($l,{strokeWidth:2,className:"w-5 h-5 hidden group-hover:block"})})}),t[38]=D):D=t[38],t[39]!==C?(P=p.jsxs(_t,{modal:!1,children:[D,C()]}),t[39]=C,t[40]=P):P=t[40],t[41]!==M||t[42]!==O||t[43]!==T||t[44]!==P?(R=p.jsxs("span",{className:M,children:[O,T,P]}),t[41]=M,t[42]=O,t[43]=T,t[44]=P,t[45]=R):R=t[45],t[46]!==o||t[47]!==a||t[48]!==_||t[49]!==I||t[50]!==R?(L=p.jsxs("div",{style:o,ref:a,className:j,draggable:!0,onClick:_,children:[I,R]}),t[46]=o,t[47]=a,t[48]=_,t[49]=I,t[50]=R,t[51]=L):L=t[51],L},cO=e=>{const t=m(3),{node:n}=e;if(!n.data.isDirectory){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx("span",{className:"w-5 h-5 flex-shrink-0"}),t[0]=e):e=t[0],e}let o;return t[1]!==n.isOpen?(o=n.isOpen?p.jsx(ve,{className:"w-5 h-5 flex-shrink-0"}):p.jsx($r,{className:"w-5 h-5 flex-shrink-0"}),t[1]=n.isOpen,t[2]=o):o=t[2],o};function dO(e,t){e.stopPropagation(),e.preventDefault(),window.open(`/?file=${t}`,"_blank")}function uO(){return null}function hO(e){const{parentNode:t}=e;return!t.data.isDirectory}function mO(e){return e.stopPropagation()}function fO(e){return e.stopPropagation()}const pO=()=>{const e=m(20),{ref:t,height:n}=$M(),o=void 0===n?1:n;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={noClick:!0,noKeyboard:!0},e[0]=r):r=e[0];const{getRootProps:a,getInputProps:s,isDragActive:i}=JM(r);let l,c,d,u,h,f,g,v;return e[1]!==a?(l=a(),e[1]=a,e[2]=l):l=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(c=Ht("flex flex-col flex-1 overflow-hidden relative"),e[3]=c):c=e[3],e[4]!==s?(d=s(),e[4]=s,e[5]=d):d=e[5],e[6]!==d?(u=p.jsx("input",{...d}),e[6]=d,e[7]=u):u=e[7],e[8]!==i?(h=i&&p.jsx("div",{className:"absolute inset-0 flex items-center uppercase justify-center text-xl font-bold text-primary/90 bg-accent/85 z-10 border-2 border-dashed border-primary/90 rounded-lg pointer-events-none",children:"Drop files here"}),e[8]=i,e[9]=h):h=e[9],e[10]!==o?(f=p.jsx(oO,{height:o}),e[10]=o,e[11]=f):f=e[11],e[12]!==t||e[13]!==f?(g=p.jsx("div",{ref:t,className:"flex flex-col flex-1 overflow-hidden",children:f}),e[12]=t,e[13]=f,e[14]=g):g=e[14],e[15]!==l||e[16]!==u||e[17]!==h||e[18]!==g?(v=p.jsxs("div",{...l,className:c,children:[u,h,g]}),e[15]=l,e[16]=u,e[17]=h,e[18]=g,e[19]=v):v=e[19],v},gO=e=>{const t=m(6),{children:n}=e,{openModal:o,closeModal:r}=f();let a,s;return t[0]!==o||t[1]!==r?(a=()=>o(p.jsx(xO,{onClose:r})),t[0]=o,t[1]=r,t[2]=a):a=t[2],t[3]!==a||t[4]!==n?(s=p.jsx($a,{onClick:a,children:n}),t[3]=a,t[4]=n,t[5]=s):s=t[5],s},vO=[Pt.lineWrapping],xO=e=>{const t=m(23),{onClose:n}=e,[o,a]=r.useState(""),{theme:s}=ke();let i,l,c,d,u,h;t[0]!==n?(i=async e=>{e.preventDefault();const t=new FormData(e.target),o=t.get("title"),r=t.get("description"),a=t.get("code");fetch("https://marimo.io/api/suggest-snippet",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o,description:r,code:a})}),n(),Y({title:"Snippet Submitted",description:"Thank you for contributing! We will review your snippet shortly."})},t[0]=n,t[1]=i):i=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(l=p.jsx(y,{children:"Contribute a Snippet"}),t[2]=l):l=t[2],t[3]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsxs(ae,{children:[l,p.jsxs(b,{children:["Have a useful snippet you want to share with the community? Submit it here or make a pull request"," ",p.jsx("a",{href:Ue.githubPage,target:"_blank",rel:"noreferrer",className:"underline",children:"on GitHub"}),"."]})]}),t[3]=c):c=t[3],t[4]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx(Ve,{id:"title",name:"title",autoFocus:!0,placeholder:"Title",required:!0,autoComplete:"off"}),u=p.jsx(Ga,{id:"description",name:"description",autoFocus:!0,placeholder:"Description",rows:5,required:!0,autoComplete:"off"}),t[4]=d,t[5]=u):(d=t[4],u=t[5]),t[6]!==o?(h=p.jsx("input",{type:"hidden",name:"code",value:o}),t[6]=o,t[7]=h):h=t[7];const f="dark"===s?"dark":"light";let g,x,N,E,C,S;return t[8]!==f||t[9]!==o?(g=p.jsx(Ms,{theme:f,language:"python",className:"cm border rounded overflow-hidden",extensions:vO,value:o,onChange:a}),t[8]=f,t[9]=o,t[10]=g):g=t[10],t[11]!==h||t[12]!==g?(x=p.jsxs("div",{className:"flex flex-col gap-6 py-4",children:[d,u,h,g]}),t[11]=h,t[12]=g,t[13]=x):x=t[13],t[14]!==n?(N=p.jsx(v,{"data-testid":"snippet-cancel-button",variant:"secondary",onClick:n,children:"Cancel"}),t[14]=n,t[15]=N):N=t[15],t[16]===Symbol.for("react.memo_cache_sentinel")?(E=p.jsx(v,{"data-testid":"snippet-send-button","aria-label":"Save",variant:"default",type:"submit",children:"Send"}),t[16]=E):E=t[16],t[17]!==N?(C=p.jsxs(w,{children:[N,E]}),t[17]=N,t[18]=C):C=t[18],t[19]!==i||t[20]!==x||t[21]!==C?(S=p.jsx(k,{className:"w-fit",children:p.jsxs("form",{onSubmit:i,children:[c,x,C]})}),t[19]=i,t[20]=x,t[21]=C,t[22]=S):S=t[22],S},yO=[Pt.lineWrapping],bO=()=>{const e=m(20),[t,n]=u.useState();let o;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[0]=o):o=e[0];const{data:a,error:s,loading:i}=qt(NO,o);if(s){let t;return e[1]!==s?(t=p.jsx(Cs,{error:s}),e[1]=s,e[2]=t):t=e[2],t}if(i||!a){let t;return e[3]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(Ba,{size:"medium",centered:!0}),e[3]=t):t=e[3],t}const l=t?"h-1/3":"h-full";let c,d,h,f,g,v,x,y,b;return e[4]!==l?(c=Ht("border-b rounded-none",l),e[4]=l,e[5]=c):c=e[5],e[6]===Symbol.for("react.memo_cache_sentinel")?(d=p.jsx(Fe,{placeholder:"Search snippets...",className:"h-6 m-1",rootClassName:"flex-1 border-r"}),e[6]=d):d=e[6],e[7]===Symbol.for("react.memo_cache_sentinel")?(h=p.jsxs("div",{className:"flex items-center w-full",children:[d,p.jsx(gO,{children:p.jsx("button",{className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",children:p.jsx(Co,{className:"h-4 w-4"})})})]}),f=p.jsx(ze,{children:"No results"}),e[7]=h,e[8]=f):(h=e[7],f=e[8]),e[9]===Symbol.for("react.memo_cache_sentinel")?(g=e=>n(e),e[9]=g):g=e[9],e[10]!==a.snippets?(v=p.jsx(kO,{onSelect:g,snippets:a.snippets}),e[10]=a.snippets,e[11]=v):v=e[11],e[12]!==c||e[13]!==v?(x=p.jsxs(en,{className:c,children:[h,f,v]}),e[12]=c,e[13]=v,e[14]=x):x=e[14],e[15]!==t?(y=p.jsx(r.Suspense,{children:p.jsx("div",{className:"h-2/3 snippet-viewer flex flex-col",children:t?p.jsx(wO,{snippet:t},t.title):p.jsx(vN,{title:"",description:"Click on a snippet to view its content."})})}),e[15]=t,e[16]=y):y=e[16],e[17]!==x||e[18]!==y?(b=p.jsxs("div",{className:"flex-1 overflow-hidden",children:[x,y]}),e[17]=x,e[18]=y,e[19]=b):b=e[19],b},wO=e=>{const t=m(27),{snippet:n}=e,{theme:o}=ke(),{createNewCell:r}=L(),a=fd();let s;t[0]!==n.sections||t[1]!==r||t[2]!==a?(s=()=>{for(const e of[...n.sections].reverse())e.code&&r({code:e.code,before:!1,cellId:a??"__end__"})},t[0]=n.sections,t[1]=r,t[2]=a,t[3]=s):s=t[3];const i=s;let l;t[4]!==r||t[5]!==a?(l=e=>{r({code:e,before:!1,cellId:a??"__end__"})},t[4]=r,t[5]=a,t[6]=l):l=t[6];const c=l;let d,u,h,f,x,y;if(t[7]!==n.title?(d=p.jsx("div",{className:"text-sm font-semibold bg-muted border-y px-2 py-1",children:n.title}),t[7]=n.title,t[8]=d):d=t[8],t[9]===Symbol.for("react.memo_cache_sentinel")?(u=p.jsx(Al,{className:"ml-2 h-4 w-4"}),t[9]=u):u=t[9],t[10]!==i?(h=p.jsx("div",{className:"flex justify-end",children:p.jsx(hu,{children:p.jsxs(v,{className:"float-right",size:"xs",variant:"outline",onClick:i,children:["Insert snippet",u]})})}),t[10]=i,t[11]=h):h=t[11],t[12]!==n.title||t[13]!==n.sections||t[14]!==c||t[15]!==o){let e;t[17]!==n.title||t[18]!==c||t[19]!==o?(e=e=>{const{code:t,html:r,id:a}=e;return r?p.jsx("div",{children:oa({html:r})},`${n.title}-${a}`):t?p.jsxs("div",{className:"relative hover-actions-parent pr-2",children:[p.jsx(hu,{children:p.jsx(g,{content:"Insert snippet",children:p.jsx(v,{className:"absolute -top-2 -right-1 z-10 hover-action px-2 bg-background",size:"sm",variant:"outline",onClick:()=>{c(t)},children:p.jsx(Al,{className:"h-5 w-5"})})})}),p.jsx(Ms,{theme:"dark"===o?"dark":"light",language:"python",className:"cm border rounded overflow-hidden",extensions:yO,value:t,readOnly:!0},`${n.title}-${a}`)]},`${n.title}-${a}`):null},t[17]=n.title,t[18]=c,t[19]=o,t[20]=e):e=t[20],f=n.sections.map(e),t[12]=n.title,t[13]=n.sections,t[14]=c,t[15]=o,t[16]=f}else f=t[16];return t[21]!==h||t[22]!==f?(x=p.jsxs("div",{className:"px-2 py-2 space-y-4 overflow-auto flex-1",children:[h,f]}),t[21]=h,t[22]=f,t[23]=x):x=t[23],t[24]!==d||t[25]!==x?(y=p.jsxs(p.Fragment,{children:[d,x]}),t[24]=d,t[25]=x,t[26]=y):y=t[26],y},kO=e=>{const t=m(7),{snippets:n,onSelect:o}=e;let r,a;if(t[0]!==o||t[1]!==n){let e;t[3]!==o?(e=e=>p.jsx(De,{className:"rounded-none",onSelect:()=>o(e),children:p.jsx("div",{className:"flex flex-row gap-2 items-center",children:p.jsx("span",{className:"mt-1 text-accent-foreground",children:e.title})})},e.title),t[3]=o,t[4]=e):e=t[4],r=n.map(e),t[0]=o,t[1]=n,t[2]=r}else r=t[2];return t[5]!==r?(a=p.jsx(or,{className:"flex flex-col overflow-auto",children:r}),t[5]=r,t[6]=a):a=t[6],a};function NO(){return Gs()}const EO=e=>{const t=m(11),{value:n,className:o,tooltip:a}=e,[s,i]=r.useState(!1);let l;t[0]!==n?(l=Ge.stopPropagation((async()=>{await $e(n).then((()=>{i(!0),setTimeout((()=>i(!1)),2e3)}))})),t[0]=n,t[1]=l):l=t[1];const c=l;let d,u;t[2]!==s||t[3]!==o?(d=s?p.jsx(vt,{className:Ht(o,"text-[var(--grass-11)]")}):p.jsx(He,{className:o}),t[2]=s,t[3]=o,t[4]=d):d=t[4],t[5]!==c||t[6]!==d?(u=p.jsx("span",{onClick:c,children:d}),t[5]=c,t[6]=d,t[7]=u):u=t[7];const h=u;if(!1===a)return h;const f=s?"Copied!":a??"Copy to clipboard";let v;return t[8]!==f||t[9]!==h?(v=p.jsx(g,{content:f,delayDuration:400,children:h}),t[8]=f,t[9]=h,t[10]=v):v=t[10],v},CO=$((e=>{const t=e(xr),n=e(K),o=e(Ma);return Nl(t,(e=>{if(!e.variable_name)return-1;const t=Object.values(n).find((t=>t.name===e.variable_name));if(!t)return 0;const r=o.inOrderIds.indexOf(t.declaredBy[0]);return-1===r?0:r}))})),SO=()=>{const e=m(43),[t,n]=u.useState(""),o=Z(te),r=fd(),{expandedColumns:a,expandedTables:s,columnsPreviews:i}=Hs(),{toggleTable:l,toggleColumn:c,closeAllColumns:d}=Ws(),{createNewCell:h}=L(),f=Z(CO);if(0===f.length){let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(vN,{title:"No tables found",description:"Any datasets/dataframes in the global scope will be shown here.",icon:p.jsx(ue,{})}),e[0]=t):t=e[0],t}let g;e[1]!==o||e[2]!==h||e[3]!==r?(g=e=>{e.includes("alt")&&function(e,t,n){sd("altair","alt",(o=>{const r=X.create();t({cellId:n??"__end__",before:!1,code:o,lastCodeRun:e?o:void 0,newCellId:r,autoFocus:!1}),e&&U({cellIds:[r],codes:[o]})}))}(o,h,r),h({code:e,before:!1,cellId:r??"__end__"})},e[1]=o,e[2]=h,e[3]=r,e[4]=g):g=e[4];const v=g;let x;e[5]!==o||e[6]!==h||e[7]!==r?(x=e=>{id(o,h,r);let t="";e:switch(e.source_type){case"local":t=`mo.ui.table(${e.name})`;break e;case"duckdb":t=`_df = mo.sql(f"SELECT * FROM ${e.name} LIMIT 100")`;break e;default:N(e.source_type)}h({code:t,before:!1,cellId:r??"__end__"})},e[5]=o,e[6]=h,e[7]=r,e[8]=x):x=e[8];const y=x,b=!!t.trim();let w,k,E,C,S,j,_,I,A,M,O;return e[9]===Symbol.for("react.memo_cache_sentinel")?(w=Ht("border-b bg-background rounded-none","h-full"),e[9]=w):w=e[9],e[10]!==d?(k=e=>{e.length>0&&d(),n(e)},e[10]=d,e[11]=k):k=e[11],e[12]!==t||e[13]!==k?(E=p.jsx(Fe,{placeholder:"Search tables...",className:"h-6 m-1",value:t,onValueChange:k,rootClassName:"flex-1 border-r"}),e[12]=t,e[13]=k,e[14]=E):E=e[14],e[15]!==b?(C=b&&p.jsx("button",{type:"button",className:"float-right border-b px-2 m-0 h-full hover:bg-accent hover:text-accent-foreground",onClick:()=>n(""),children:p.jsx(Vt,{className:"h-4 w-4"})}),e[15]=b,e[16]=C):C=e[16],e[17]!==E||e[18]!==C?(S=p.jsxs("div",{className:"flex items-center w-full",children:[E,C]}),e[17]=E,e[18]=C,e[19]=S):S=e[19],e[20]!==c||e[21]!==i?(j=(e,t)=>{const n=`${e.name}:${t.name}`;c({table:e.name,column:t.name}),i.has(n)||Ys({source:e.source,tableName:e.name,columnName:t.name,sourceType:e.source_type})},e[20]=c,e[21]=i,e[22]=j):j=e[22],e[23]!==l?(_=e=>{l(e.name)},e[23]=l,e[24]=_):_=e[24],e[25]!==b||e[26]!==s?(I=e=>!!b||s.has(e.name),e[25]=b,e[26]=s,e[27]=I):I=e[27],e[28]!==a?(A=(e,t)=>{const n=`${e.name}:${t.name}`;return a.has(n)},e[28]=a,e[29]=A):A=e[29],e[30]!==v||e[31]!==y||e[32]!==j||e[33]!==_||e[34]!==i||e[35]!==f||e[36]!==b||e[37]!==I||e[38]!==A?(M=p.jsx(jO,{onAddColumnChart:v,onAddTable:y,onExpandColumn:j,onExpandTable:_,columnPreviews:i,tables:f,isSearching:b,isTableExpanded:I,isColumnExpanded:A}),e[30]=v,e[31]=y,e[32]=j,e[33]=_,e[34]=i,e[35]=f,e[36]=b,e[37]=I,e[38]=A,e[39]=M):M=e[39],e[40]!==S||e[41]!==M?(O=p.jsx("div",{className:"flex-1 overflow-hidden",children:p.jsxs(en,{className:w,children:[S,M]})}),e[40]=S,e[41]=M,e[42]=O):O=e[42],O},jO=e=>{const t=m(25),{tables:n,isSearching:o,columnPreviews:r,onAddColumnChart:a,onAddTable:s,onExpandTable:i,onExpandColumn:l,isTableExpanded:c,isColumnExpanded:d}=e;let h,f,g,v;if(t[0]!==n||t[1]!==c||t[2]!==o||t[3]!==i||t[4]!==s||t[5]!==l||t[6]!==d||t[7]!==a||t[8]!==r){let e,m;e=Object.entries(Ie.groupBy(n,OO,TO)),e=Nl(e,DO),t[12]!==c||t[13]!==o||t[14]!==i||t[15]!==s||t[16]!==l||t[17]!==d||t[18]!==a||t[19]!==r?(m=e=>{const t=c(e),n=[p.jsx(_O,{table:e,forceMount:o,onExpand:()=>i(e),onAddTable:()=>s(e),isExpanded:t},e.name)];return t&&n.push(...e.columns.map((t=>p.jsxs(u.Fragment,{children:[p.jsx(IO,{table:e,column:t,onExpandColumn:l,isExpanded:d(e,t)},`${e.name}.${t.name}`),d(e,t)&&p.jsx("div",{className:"pl-10 pr-2 py-2 bg-[var(--slate-1)] shadow-inner border-b",children:p.jsx(Ks,{children:p.jsx(MO,{table:e,column:t,onAddColumnChart:a,preview:r.get(`${e.name}:${t.name}`)})})})]},`${e.name}.${t.name}`)))),n},t[12]=c,t[13]=o,t[14]=i,t[15]=s,t[16]=l,t[17]=d,t[18]=a,t[19]=r,t[20]=m):m=t[20];const v=m;h=or,f="flex flex-col overflow-auto",g=(()=>0===e.length?null:1===e.length?e[0][1].flatMap(v):e.flatMap(((e,t)=>{const[n,o]=e;return[p.jsx("div",{className:Ht("font-bold px-2 py-1 text-muted-foreground bg-[var(--slate-2)] border-t text-sm",t>0&&"border-t"),children:"memory"===n?"In-Memory":n},n),...o.flatMap(v)]})))(),t[0]=n,t[1]=c,t[2]=o,t[3]=i,t[4]=s,t[5]=l,t[6]=d,t[7]=a,t[8]=r,t[9]=h,t[10]=f,t[11]=g}else h=t[9],f=t[10],g=t[11];return t[21]!==h||t[22]!==f||t[23]!==g?(v=p.jsx(h,{className:f,children:g}),t[21]=h,t[22]=f,t[23]=g,t[24]=v):v=t[24],v},_O=e=>{const t=m(27),{table:n,onExpand:o,onAddTable:r,isExpanded:a}=e;let s;t[0]!==n.num_rows||t[1]!==n.num_columns?(s=()=>{const e=[];return null!=n.num_rows&&e.push(`${n.num_rows} rows`),null!=n.num_columns&&e.push(`${n.num_columns} columns`),0===e.length?null:p.jsx("div",{className:"flex flex-row gap-2 items-center pl-6 group-hover:hidden",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:e.join(", ")})})},t[0]=n.num_rows,t[1]=n.num_columns,t[2]=s):s=t[2];const i=s,l=n.name,c=a&&"rotate-90";let d,u,h,f,x,y,b,w,k;return t[3]!==c?(d=Ht("h-3 w-3 transition-transform",c),t[3]=c,t[4]=d):d=t[4],t[5]!==d?(u=p.jsx($r,{className:d}),t[5]=d,t[6]=u):u=t[6],t[7]!==n.name?(h=p.jsx("span",{className:"text-sm",children:n.name}),t[7]=n.name,t[8]=h):h=t[8],t[9]!==u||t[10]!==h?(f=p.jsxs("div",{className:"flex gap-1 items-center flex-1",children:[u,h]}),t[9]=u,t[10]=h,t[11]=f):f=t[11],t[12]!==i?(x=i(),t[12]=i,t[13]=x):x=t[13],t[14]!==r||t[15]!==n?(y=Ge.stopPropagation((()=>r(n))),t[14]=r,t[15]=n,t[16]=y):y=t[16],t[17]===Symbol.for("react.memo_cache_sentinel")?(b=p.jsx(Ac,{className:"h-3 w-3"}),t[17]=b):b=t[17],t[18]!==y?(w=p.jsx(g,{content:"Add table to notebook",delayDuration:400,children:p.jsx(v,{className:"group-hover:inline-flex hidden",variant:"text",size:"icon",onClick:y,children:b})}),t[18]=y,t[19]=w):w=t[19],t[20]!==n.name||t[21]!==a||t[22]!==o||t[23]!==f||t[24]!==x||t[25]!==w?(k=p.jsxs(De,{className:"rounded-none py-1 group min-h-9 border-t",value:l,"aria-selected":a,forceMount:!0,onSelect:o,children:[f,x,w]}),t[20]=n.name,t[21]=a,t[22]=o,t[23]=f,t[24]=x,t[25]=w,t[26]=k):k=t[26],k},IO=e=>{const t=m(22),{table:n,column:o,onExpandColumn:r}=e,a=Js[o.type],s=`${n.name}.${o.name}`,i=`${n.name}.${o.name}`;let l,c,d,u,h,f,x;return t[0]!==r||t[1]!==n||t[2]!==o?(l=()=>r(n,o),t[0]=r,t[1]=n,t[2]=o,t[3]=l):l=t[3],t[4]!==a?(c=p.jsx(a,{className:"flex-shrink-0 h-3 w-3",strokeWidth:1.5}),t[4]=a,t[5]=c):c=t[5],t[6]!==o.name?(d=p.jsx("span",{children:o.name}),t[6]=o.name,t[7]=d):d=t[7],t[8]!==c||t[9]!==d?(u=p.jsxs("div",{className:"flex flex-row gap-2 items-center pl-6 flex-1",children:[c,d]}),t[8]=c,t[9]=d,t[10]=u):u=t[10],t[11]!==o.name?(h=p.jsx(g,{content:"Copy column name",delayDuration:400,children:p.jsx(v,{variant:"text",size:"icon",className:"group-hover:opacity-100 opacity-0 hover:bg-muted text-muted-foreground hover:text-foreground",children:p.jsx(EO,{tooltip:!1,value:o.name,className:"h-3 w-3"})})}),t[11]=o.name,t[12]=h):h=t[12],t[13]!==o.external_type?(f=p.jsx("span",{className:"text-xs text-muted-foreground",children:o.external_type}),t[13]=o.external_type,t[14]=f):f=t[14],t[15]!==s||t[16]!==i||t[17]!==l||t[18]!==u||t[19]!==h||t[20]!==f?(x=p.jsxs(De,{className:"rounded-none py-1 group",value:i,onSelect:l,children:[u,h,f]},s),t[15]=s,t[16]=i,t[17]=l,t[18]=u,t[19]=h,t[20]=f,t[21]=x):x=t[21],x},AO=u.lazy((()=>qs((()=>import("./index-D-gTgfij.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url).then((e=>({default:e.VegaLite}))))),MO=e=>{const t=m(26),{table:n,column:o,preview:r,onAddColumnChart:a}=e,{theme:s}=ke();if(!r){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx("span",{className:"text-xs text-muted-foreground",children:"Loading..."}),t[0]=e):e=t[0],e}let i;t[1]!==r.error?(i=r.error&&p.jsx("span",{className:"text-xs text-muted-foreground",children:r.error}),t[1]=r.error,t[2]=i):i=t[2];const l=i;let c;t[3]!==r.summary?(c=r.summary&&p.jsx("div",{className:"gap-x-16 gap-y-1 grid grid-cols-2-fit border rounded p-2 empty:hidden",children:Object.entries(r.summary).map(PO)}),t[3]=r.summary,t[4]=c):c=t[4];const d=c,u=RO;let h;t[5]!==r.chart_spec||t[6]!==s?(h=r.chart_spec&&p.jsx(AO,{spec:u(JSON.parse(r.chart_spec)),width:"container",height:100,actions:!1,theme:"dark"===s?"dark":"vox"}),t[5]=r.chart_spec,t[6]=s,t[7]=h):h=t[7];const f=h;let x;t[8]!==r.chart_code||t[9]!==n||t[10]!==a?(x=r.chart_code&&"local"===n.source_type&&p.jsx(g,{content:"Add chart to notebook",delayDuration:400,children:p.jsx(v,{variant:"outline",size:"icon",className:"z-10 bg-background absolute right-1 -top-1",onClick:Ge.stopPropagation((()=>a(r.chart_code||""))),children:p.jsx(Ac,{className:"h-3 w-3"})})}),t[8]=r.chart_code,t[9]=n,t[10]=a,t[11]=x):x=t[11];const y=x;let b;t[12]!==n||t[13]!==o||t[14]!==a?(b="duckdb"===n.source_type&&p.jsx(g,{content:"Add SQL cell",delayDuration:400,children:p.jsx(v,{variant:"outline",size:"icon",className:"z-10 bg-background absolute right-1 -top-1",onClick:Ge.stopPropagation((()=>{const e=`_df = mo.sql(f'SELECT "${o.name}" FROM ${n.name} LIMIT 100')`;a(e)})),children:p.jsx(Ac,{className:"h-3 w-3"})})}),t[12]=n,t[13]=o,t[14]=a,t[15]=b):b=t[15];const w=b;let k;t[16]!==r.chart_max_rows_errors?(k=r.chart_max_rows_errors&&p.jsx("span",{className:"text-xs text-muted-foreground",children:"Too many rows to render the chart."}),t[16]=r.chart_max_rows_errors,t[17]=k):k=t[17];const N=k;if(!(l||d||f||N)){let e;return t[18]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx("span",{className:"text-xs text-muted-foreground",children:"No data"}),t[18]=e):e=t[18],e}let E;return t[19]!==l||t[20]!==y||t[21]!==w||t[22]!==N||t[23]!==f||t[24]!==d?(E=p.jsxs("div",{className:"flex flex-col gap-2 relative",children:[l,y,w,N,f,d]}),t[19]=l,t[20]=y,t[21]=w,t[22]=N,t[23]=f,t[24]=d,t[25]=E):E=t[25],E};function OO(e){return e.source}function TO(e){return e}function DO(e){const[t]=e;return"memory"===t?0:1}function PO(e){const[t,n]=e;return null==n?null:p.jsxs("div",{className:"flex items-center gap-1 group",children:[p.jsx(EO,{className:"h-3 w-3 invisible group-hover:visible",value:String(n)}),p.jsx("span",{className:"text-xs min-w-[60px] uppercase",children:t}),p.jsx("span",{className:"text-xs font-bold text-muted-foreground tracking-wide",children:Xs(n)})]},t)}function RO(e){return{...e,config:{...e.config,background:"transparent"}}}const FO=e=>{const t=m(4),{isOpen:n,children:o}=e,[r,a]=u.useState(!1);let s,i;return t[0]!==n||t[1]!==r?(s=()=>{n&&!r&&a(!0)},i=[n,r],t[0]=n,t[1]=r,t[2]=s,t[3]=i):(s=t[2],i=t[3]),u.useEffect(s,i),r?o:null},LO=kr("marimo:scratchpadHistory:v1",[]),zO=$(!1),BO=$(null,((e,t,n)=>{if(!(n=n.trim()))return;const o=e(LO),r=[n,...o.filter((e=>e!==n))].slice(0,15);t(LO,r)})),UO={hide_code:!1,disabled:!1},VO=()=>{const e=m(79),t=R(),[n]=Ne(),{theme:o}=ke(),a=r.useRef(null),s=fd(),{createNewCell:i,updateCellCode:l}=L(),c=t.cellRuntime[we],d=null==c?void 0:c.output,u=null==c?void 0:c.status,h=null==c?void 0:c.consoleOutputs,f=t.cellData[we],x=(null==f?void 0:f.code)??"",y=Q(BO),[b,w]=je(zO),k=Z(LO);let N;e[0]!==x||e[1]!==y?(N=()=>{Zs({code:x}),y(x)},e[0]=x,e[1]=y,e[2]=N):N=e[2];const E=F(N);let C;e[3]!==x||e[4]!==i||e[5]!==s?(C=()=>{x.trim()&&i({code:x,before:!1,cellId:s??"__end__"})},e[3]=x,e[4]=i,e[5]=s,e[6]=C):C=e[6];const S=F(C);let j;e[7]!==l?(j=()=>{l({cellId:we,code:"",formattingChange:!1}),Zs({code:""});const e=a.current;e&&e.dispatch({changes:{from:0,to:e.state.doc.length,insert:""}})},e[7]=l,e[8]=j):j=e[8];const _=F(j);let I;e[9]!==w||e[10]!==l?(I=e=>{w(!1),l({cellId:we,code:e,formattingChange:!1});const t=a.current;t&&t.dispatch({changes:{from:0,to:t.state.doc.length,insert:e}})},e[9]=w,e[10]=l,e[11]=I):I=e[11];const A=F(I);let M,O,T,D,P,z,B,U;if(e[12]!==o||e[13]!==x||e[14]!==E||e[15]!==l||e[16]!==n||e[17]!==d||e[18]!==h||e[19]!==b||e[20]!==k||e[21]!==A||e[22]!==_||e[23]!==S||e[24]!==u||e[25]!==w){const t=()=>p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[40%]",children:p.jsx(Sb,{theme:o,allowFocus:!1,showPlaceholder:!1,id:we,code:x,config:UO,status:"idle",serializedEditorState:null,runCell:E,updateCellCode:l,createNewCell:Wt.NOOP,deleteCell:Wt.NOOP,focusCell:Wt.NOOP,moveCell:Wt.NOOP,moveToNextCell:void 0,updateCellConfig:Wt.NOOP,clearSerializedEditorState:Wt.NOOP,userConfig:n,editorViewRef:a,hidden:!1})}),p.jsx("div",{className:"flex-1 overflow-auto flex-shrink-0",children:p.jsx(Xr,{allowExpand:!1,output:d,className:"output-area",cellId:we,stale:!1})}),p.jsx("div",{className:"overflow-auto flex-shrink-0 max-h-[35%]",children:p.jsx(Xi,{consoleOutputs:h,className:"overflow-auto",stale:!1,cellName:ys,onSubmitDebugger:Wt.NOOP,cellId:we,debuggerActive:!1})})]});let r;e[32]!==b||e[33]!==k||e[34]!==A||e[35]!==o?(r=()=>b?p.jsx("div",{className:"absolute inset-0 z-100 bg-background p-3 border-none overflow-auto",children:p.jsx("div",{className:"overflow-auto flex flex-col gap-3",children:k.map(((e,t)=>p.jsx("div",{className:"border rounded-md hover:shadow-sm cursor-pointer hover:border-input overflow-hidden",onClick:()=>A(e),children:p.jsx(El,{language:"python",theme:o,basicSetup:{highlightActiveLine:!1,highlightActiveLineGutter:!1},value:e.trim(),editable:!1,readOnly:!0})},t)))})}):null,e[32]=b,e[33]=k,e[34]=A,e[35]=o,e[36]=r):r=e[36];const s=r;let i,c,m,f,y,N,C,j,I;T="flex flex-col h-full overflow-hidden divide-y",e[37]===Symbol.for("react.memo_cache_sentinel")?(D=tt.create(we),e[37]=D):D=e[37],e[38]===Symbol.for("react.memo_cache_sentinel")?(i=ri("cell.run"),e[38]=i):i=e[38],e[39]===Symbol.for("react.memo_cache_sentinel")?(c=p.jsx(pc,{color:"var(--grass-11)",size:16}),e[39]=c):c=e[39],e[40]!==E||e[41]!==b?(m=p.jsx(g,{content:i,children:p.jsx(v,{"data-testid":"scratchpad-run-button",onClick:E,disabled:b,variant:"text",size:"xs",children:c})}),e[40]=E,e[41]=b,e[42]=m):m=e[42],e[43]===Symbol.for("react.memo_cache_sentinel")?(f=p.jsx(Gl,{size:16}),e[43]=f):f=e[43],e[44]!==b||e[45]!==_?(y=p.jsx(g,{content:"Clear code and outputs",children:p.jsx(v,{disabled:b,size:"xs",variant:"text",onClick:_,children:f})}),e[44]=b,e[45]=_,e[46]=y):y=e[46],e[47]===Symbol.for("react.memo_cache_sentinel")?(N=p.jsx(Al,{size:16}),e[47]=N):N=e[47],e[48]!==b||e[49]!==S?(C=p.jsx(hu,{children:p.jsx(g,{content:"Insert code",children:p.jsx(v,{disabled:b,size:"xs",variant:"text",onClick:S,children:N})})}),e[48]=b,e[49]=S,e[50]=C):C=e[50],e[51]!==u?(j=("running"===u||"queued"===u)&&p.jsx(Ba,{className:"inline",size:"small"}),e[51]=u,e[52]=j):j=e[52],e[53]===Symbol.for("react.memo_cache_sentinel")?(I=p.jsx("div",{className:"flex-1"}),e[53]=I):I=e[53];const R=b&&"bg-[var(--sky-3)] rounded-none";let F,L;e[54]!==R?(F=Ht(R),e[54]=R,e[55]=F):F=e[55],e[56]!==w||e[57]!==b?(L=()=>w(!b),e[56]=w,e[57]=b,e[58]=L):L=e[58];const B=0===k.length;let U,V;e[59]===Symbol.for("react.memo_cache_sentinel")?(U=p.jsx(Zl,{size:16}),e[59]=U):U=e[59],e[60]!==F||e[61]!==L||e[62]!==B?(V=p.jsx(g,{content:"Toggle history",children:p.jsx(v,{size:"xs",variant:"text",className:F,onClick:L,disabled:B,children:U})}),e[60]=F,e[61]=L,e[62]=B,e[63]=V):V=e[63],e[64]!==m||e[65]!==y||e[66]!==C||e[67]!==j||e[68]!==V?(P=p.jsxs("div",{className:"flex items-center flex-shrink-0",children:[m,y,C,j,I,V]}),e[64]=m,e[65]=y,e[66]=C,e[67]=j,e[68]=V,e[69]=P):P=e[69],M="flex-1 divide-y relative",O=t(),z=s(),e[12]=o,e[13]=x,e[14]=E,e[15]=l,e[16]=n,e[17]=d,e[18]=h,e[19]=b,e[20]=k,e[21]=A,e[22]=_,e[23]=S,e[24]=u,e[25]=w,e[26]=M,e[27]=O,e[28]=T,e[29]=D,e[30]=P,e[31]=z}else M=e[26],O=e[27],T=e[28],D=e[29],P=e[30],z=e[31];return e[70]!==M||e[71]!==O||e[72]!==z?(B=p.jsxs("div",{className:M,children:[O,z]}),e[70]=M,e[71]=O,e[72]=z,e[73]=B):B=e[73],e[74]!==T||e[75]!==D||e[76]!==P||e[77]!==B?(U=p.jsxs("div",{className:T,id:D,children:[P,B]}),e[74]=T,e[75]=D,e[76]=P,e[77]=B,e[78]=U):U=e[78],U},$O=()=>{const e=m(1);let t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(VO,{}),e[0]=t):t=e[0],t},GO=()=>{const e=m(16),[t]=Ne(),n=t.package_management.manager;let o;e[0]!==n?(o=[n],e[0]=n,e[1]=o):o=e[1];const{data:r,loading:a,error:s,reload:i}=qt(YO,o);if(a&&!r){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=p.jsx(Ba,{size:"medium",centered:!0}),e[2]=t):t=e[2],t}if(s){let t;return e[3]!==s?(t=p.jsx(Cs,{error:s}),e[3]=s,e[4]=t):t=e[4],t}let l;e[5]!==(null==r?void 0:r.packages)?(l=(null==r?void 0:r.packages)||[],e[5]=null==r?void 0:r.packages,e[6]=l):l=e[6];const c=l;let d,u,h;return e[7]!==n||e[8]!==i?(d=p.jsx(HO,{packageManager:n,onSuccess:i}),e[7]=n,e[8]=i,e[9]=d):d=e[9],e[10]!==c||e[11]!==i?(u=p.jsx(WO,{packages:c,onSuccess:i}),e[10]=c,e[11]=i,e[12]=u):u=e[12],e[13]!==d||e[14]!==u?(h=p.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[d,u]}),e[13]=d,e[14]=u,e[15]=h):h=e[15],h},HO=({onSuccess:e,packageManager:t})=>{const[n,o]=u.useState(""),[r,a]=u.useState(!1),s=async()=>{try{a(!0);const t=await ti({package:n});t.success?(e(),Y({title:"Package added",description:p.jsxs("span",{children:["The package ",p.jsx(Ai,{className:"inline",children:n})," and its dependencies has been added to your environment."]})})):Y({title:"Failed to add package",description:t.error,variant:"danger"})}finally{o(""),a(!1)}};return p.jsxs("div",{className:"flex items-center w-full border-b",children:[p.jsx(us,{placeholder:`Install packages with ${t}...`,icon:r?p.jsx(Ba,{size:"small",className:"mr-2 h-4 w-4 shrink-0 opacity-50"}):p.jsx(Ol,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),rootClassName:"flex-1 border-none",value:n,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),s())},onChange:e=>o(e.target.value)}),p.jsx(g,{delayDuration:300,side:"left",align:"start",content:p.jsxs("div",{className:"text-sm flex flex-col w-full max-w-[360px]",children:["Packages are installed using the package manager specified in your user configuration. Depending on your package manager, you can install packages with various formats:",p.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-bold tracking-wide",children:"Package name:"})," A package name; this will install the latest version.",p.jsx("div",{className:"text-muted-foreground",children:"Example: httpx"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold tracking-wide",children:"Package and version:"})," ","A package with a specific version or version range.",p.jsx("div",{className:"text-muted-foreground",children:"Examples: httpx==0.27.0, httpx>=0.27.0"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold tracking-wide",children:"Git:"})," A Git repository",p.jsx("div",{className:"text-muted-foreground",children:"Example: git+https://github.com/encode/httpx"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold tracking-wide",children:"URL:"})," A remote wheel or source distribution.",p.jsx("div",{className:"text-muted-foreground",children:"Example: https://example.com/httpx-0.27.0.tar.gz"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"font-bold tracking-wide",children:"Path:"})," A local wheel, source distribution, or project directory.",p.jsx("div",{className:"text-muted-foreground",children:"Example: /example/foo-0.1.0-py3-none-any.whl"})]})]})]}),children:p.jsx(Qs,{className:"h-4 w-4 cursor-help text-muted-foreground hover:text-foreground bg-transparent"})}),p.jsx("button",{type:"button",className:Ht("float-right px-2 m-0 h-full text-sm text-secondary-foreground ml-2",n&&"bg-accent text-accent-foreground","disabled:cursor-not-allowed disabled:opacity-50"),onClick:s,disabled:!n,children:"Add"})]})},WO=e=>{const t=m(9),{onSuccess:n,packages:o}=e;if(0===o.length){let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=p.jsx(vN,{title:"No packages",description:"No packages are installed in this environment.",icon:p.jsx(Ol,{})}),t[0]=e):e=t[0],e}let r,a,s;if(t[1]===Symbol.for("react.memo_cache_sentinel")?(r=p.jsx(ms,{children:p.jsxs(fs,{children:[p.jsx(ps,{children:"Name"}),p.jsx(ps,{children:"Version"}),p.jsx(ps,{})]})}),t[1]=r):r=t[1],t[2]!==n||t[3]!==o){let e;t[5]!==n?(e=e=>p.jsxs(fs,{className:"group",onClick:async()=>{await $e(`${e.name}==${e.version}`),Y({title:"Copied to clipboard"})},children:[p.jsx(xs,{children:e.name}),p.jsx(xs,{children:e.version}),p.jsx(xs,{children:p.jsx(qO,{packageName:e.name,onSuccess:n})})]},e.name),t[5]=n,t[6]=e):e=t[6],a=o.map(e),t[2]=n,t[3]=o,t[4]=a}else a=t[4];return t[7]!==a?(s=p.jsxs(hs,{className:"overflow-auto flex-1",children:[r,p.jsx(vs,{children:a})]}),t[7]=a,t[8]=s):s=t[8],s},qO=({packageName:e,onSuccess:t})=>{const[n,o]=u.useState(!1);return n?p.jsx(Ba,{size:"small",className:"float-right mr-2 h-4 w-4 shrink-0 opacity-50"}):p.jsx("button",{type:"button",className:Ht("float-right px-2 h-full text-xs text-muted-foreground hover:text-foreground","invisible group-hover:visible"),onClick:Ge.stopPropagation((async()=>{try{o(!0);const n=await ni({package:e});n.success?(t(),Y({title:"Package removed",description:p.jsxs("span",{children:["The package ",p.jsx(Ai,{className:"inline",children:e})," has been removed from your environment."]})})):Y({title:"Failed to add package",description:n.error,variant:"danger"})}finally{o(!1)}})),children:"Remove"})};function YO(){return ei()}const KO=u.lazy((()=>qs((()=>import("./terminal-DOjhmz_5.js")),__vite__mapDeps([15,2,3,16]),import.meta.url))),JO=e=>{const t=m(110),{children:n}=e,{isSidebarOpen:o,isTerminalOpen:a,selectedPanel:s}=Md(),{setIsSidebarOpen:i,setIsTerminalOpen:l}=Od(),c=u.useRef(null),d=u.useRef(null);let h,f,g,x,y;t[0]!==o?(h=()=>{if(!c.current)return;const e=c.current.isCollapsed();o&&e&&c.current.expand(),o||e||c.current.collapse(),requestAnimationFrame((()=>{requestAnimationFrame((()=>{window.dispatchEvent(new Event("resize"))}))}))},f=[o],t[0]=o,t[1]=h,t[2]=f):(h=t[1],f=t[2]),r.useEffect(h,f),t[3]!==a?(g=()=>{if(!d.current)return;const e=d.current.isCollapsed();a&&e&&d.current.expand(),a||e||d.current.collapse(),requestAnimationFrame((()=>{requestAnimationFrame((()=>{window.dispatchEvent(new Event("resize"))}))}))},x=[a],t[3]=a,t[4]=g,t[5]=x):(g=t[4],x=t[5]),r.useEffect(g,x),t[6]!==n?(y=p.jsx(Ow,{id:"app",className:"relative h-full",children:p.jsx(r.Suspense,{children:n})},"app"),t[6]=n,t[7]=y):y=t[7];const b=y,w=XO,k=o?"resize-handle":"resize-handle-collapsed";let N,E;t[8]!==k?(N=Ht("border-border no-print z-10",k,"vertical"),t[8]=k,t[9]=N):N=t[9],t[10]!==N?(E=p.jsx(Bk,{onDragging:w,className:N}),t[10]=N,t[11]=E):E=t[11];const C=E,S=a?"resize-handle":"resize-handle-collapsed";let j,_;t[12]!==S?(j=Ht("border-border no-print z-20",S,"horizontal"),t[12]=S,t[13]=j):j=t[13],t[14]!==j?(_=p.jsx(Bk,{onDragging:w,className:j}),t[14]=j,t[15]=_):_=t[15];const I=_;let A,M,O,T,D,P,R,F,L,z,B,U,V,$,G,H,W;t[16]!==s?(A=p.jsx("div",{className:"text-sm text-[var(--slate-11)] uppercase tracking-wide font-semibold flex-1",children:s}),t[16]=s,t[17]=A):A=t[17],t[18]!==i?(M=()=>i(!1),t[18]=i,t[19]=M):M=t[19],t[20]===Symbol.for("react.memo_cache_sentinel")?(O=p.jsx(Vt,{className:"w-4 h-4"}),t[20]=O):O=t[20],t[21]!==M?(T=p.jsx(v,{"data-testid":"close-helper-pane",className:"m-0",size:"xs",variant:"text",onClick:M,children:O}),t[21]=M,t[22]=T):T=t[22],t[23]!==A||t[24]!==T?(D=p.jsxs("div",{className:"p-3 border-b flex justify-between items-center",children:[A,T]}),t[23]=A,t[24]=T,t[25]=D):D=t[25],t[26]!==s?(P="files"===s&&p.jsx(pO,{}),t[26]=s,t[27]=P):P=t[27],t[28]!==s?(R="errors"===s&&p.jsx(xN,{}),t[28]=s,t[29]=R):R=t[29],t[30]!==s?(F="variables"===s&&p.jsx(RM,{}),t[30]=s,t[31]=F):F=t[31],t[32]!==s?(L="dependencies"===s&&p.jsx(AM,{}),t[32]=s,t[33]=L):L=t[33],t[34]!==s?(z="packages"===s&&p.jsx(GO,{}),t[34]=s,t[35]=z):z=t[35],t[36]!==s?(B="outline"===s&&p.jsx(bN,{}),t[36]=s,t[37]=B):B=t[37],t[38]!==s?(U="datasources"===s&&p.jsx(SO,{}),t[38]=s,t[39]=U):U=t[39],t[40]!==s?(V="documentation"===s&&p.jsx(UM,{}),t[40]=s,t[41]=V):V=t[41],t[42]!==s?($="snippets"===s&&p.jsx(bO,{}),t[42]=s,t[43]=$):$=t[43],t[44]!==s?(G="scratchpad"===s&&p.jsx($O,{}),t[44]=s,t[45]=G):G=t[45],t[46]!==s?(H="logs"===s&&p.jsx(FM,{}),t[46]=s,t[47]=H):H=t[47],t[48]!==D||t[49]!==P||t[50]!==R||t[51]!==F||t[52]!==L||t[53]!==z||t[54]!==B||t[55]!==U||t[56]!==V||t[57]!==$||t[58]!==G||t[59]!==H?(W=p.jsx(Ks,{children:p.jsx(r.Suspense,{children:p.jsxs("div",{className:"flex flex-col h-full flex-1 overflow-hidden mr-[-4px]",children:[D,P,R,F,L,z,B,U,V,$,G,H]})})}),t[48]=D,t[49]=P,t[50]=R,t[51]=F,t[52]=L,t[53]=z,t[54]=B,t[55]=U,t[56]=V,t[57]=$,t[58]=G,t[59]=H,t[60]=W):W=t[60];const q=W,Y=o&&"border-r border-l border-[var(--slate-7)]";let K,J,X,Z,Q,ee;t[61]!==Y?(K=Ht("dark:bg-[var(--slate-1)] no-print print:hidden",Y),t[61]=Y,t[62]=K):K=t[62],t[63]===Symbol.for("react.memo_cache_sentinel")?(J=(e,t)=>{var n;0===t&&10===e&&(null==(n=c.current)||n.resize(30))},t[63]=J):J=t[63],t[64]!==i?(X=()=>i(!1),Z=()=>i(!0),t[64]=i,t[65]=X,t[66]=Z):(X=t[65],Z=t[66]),t[67]!==q||t[68]!==C?(Q=p.jsxs("span",{className:"flex flex-row h-full",children:[q," ",C]}),t[67]=q,t[68]=C,t[69]=Q):Q=t[69],t[70]!==c||t[71]!==K||t[72]!==X||t[73]!==Z||t[74]!==Q?(ee=p.jsx(Ow,{ref:c,id:"helper",collapsedSize:0,collapsible:!0,className:K,minSize:10,defaultSize:0,maxSize:75,onResize:J,onCollapse:X,onExpand:Z,children:Q},"helper"),t[70]=c,t[71]=K,t[72]=X,t[73]=Z,t[74]=Q,t[75]=ee):ee=t[75];const te=ee,ne=a&&"border-[var(--slate-7)]";let oe,re,ae,se,ie,le,ce,de;t[76]!==ne?(oe=Ht("dark:bg-[var(--slate-1)] no-print print:hidden",ne),t[76]=ne,t[77]=oe):oe=t[77],t[78]===Symbol.for("react.memo_cache_sentinel")?(re=(e,t)=>{var n;0===t&&10===e&&(null==(n=d.current)||n.resize(30))},t[78]=re):re=t[78],t[79]!==l?(ae=()=>l(!1),se=()=>l(!0),t[79]=l,t[80]=ae,t[81]=se):(ae=t[80],se=t[81]),t[82]!==l?(ie=()=>l(!1),t[82]=l,t[83]=ie):ie=t[83],t[84]!==a||t[85]!==ie?(le=p.jsx(KO,{visible:a,onClose:ie}),t[84]=a,t[85]=ie,t[86]=le):le=t[86],t[87]!==a||t[88]!==le?(ce=p.jsx(FO,{isOpen:a,children:le}),t[87]=a,t[88]=le,t[89]=ce):ce=t[89],t[90]!==d||t[91]!==oe||t[92]!==ae||t[93]!==se||t[94]!==I||t[95]!==ce?(de=p.jsxs(Ow,{ref:d,id:"terminal",collapsedSize:0,collapsible:!0,className:oe,minSize:10,defaultSize:0,maxSize:75,onResize:re,onCollapse:ae,onExpand:se,children:[I,ce]},"terminal"),t[90]=d,t[91]=oe,t[92]=ae,t[93]=se,t[94]=I,t[95]=ce,t[96]=de):de=t[96];const ue=de;let he,me,fe,pe,ge,ve,xe;return t[97]===Symbol.for("react.memo_cache_sentinel")?(he={getItem:e=>gN||(gN??null),setItem(e,t){gN=t||null}},me=p.jsx(dN,{}),t[97]=he,t[98]=me):(he=t[97],me=t[98]),t[99]!==ue?(fe=p.jsx(nN,{capability:"terminal",children:ue}),t[99]=ue,t[100]=fe):fe=t[100],t[101]!==b||t[102]!==fe?(pe=p.jsx(Ow,{children:p.jsxs(Fk,{autoSaveId:"marimo:chrome:v1:l1",direction:"vertical",children:[b,fe]})}),t[101]=b,t[102]=fe,t[103]=pe):pe=t[103],t[104]!==te||t[105]!==pe?(ge=p.jsxs(Fk,{autoSaveId:"marimo:chrome:v1:l2",direction:"horizontal",storage:he,children:[me,te,pe]}),t[104]=te,t[105]=pe,t[106]=ge):ge=t[106],t[107]===Symbol.for("react.memo_cache_sentinel")?(ve=p.jsx(Ks,{children:p.jsx(oN,{})}),t[107]=ve):ve=t[107],t[108]!==ge?(xe=p.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden absolute inset-0 print:relative",children:[ge,ve]}),t[108]=ge,t[109]=xe):xe=t[109],xe};function XO(e){e||window.dispatchEvent(new Event("resize"))}const ZO=e=>{const t=m(5);let n,o,r;return t[0]!==e?(n=p.jsx(rw,{...e}),t[0]=e,t[1]=n):n=t[1],t[2]===Symbol.for("react.memo_cache_sentinel")?(o=p.jsx(yd,{}),t[2]=o):o=t[2],t[3]!==n?(r=p.jsxs(JO,{children:[n,o]}),t[3]=n,t[4]=r):r=t[4],r};export{ZO as default};
